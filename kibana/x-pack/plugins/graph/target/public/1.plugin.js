(window["graph_bundle_jsonpfunction"]=window["graph_bundle_jsonpfunction"]||[]).push([[1],Array(88).concat([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderApp=void 0;var _angular=_interopRequireDefault(__webpack_require__(2));var _angular2=__webpack_require__(89);__webpack_require__(317);__webpack_require__(322);var _app=__webpack_require__(324);var _check_license=__webpack_require__(23);var _public=__webpack_require__(19);__webpack_require__(746);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var renderApp=function renderApp(_ref){var appBasePath=_ref.appBasePath,element=_ref.element,deps=_objectWithoutProperties(_ref,["appBasePath","element"]);var graphAngularModule=createLocalAngularModule(deps.navigation);(0,_public.configureAppAngularModule)(graphAngularModule,{core:deps.core,env:deps.pluginInitializerContext.env},true);var licenseSubscription=deps.licensing.license$.subscribe((function(license){var info=(0,_check_license.checkLicense)(license);var licenseAllowsToShowThisPage=info.showAppLink&&info.enableAppLink;if(!licenseAllowsToShowThisPage){var newUrl=(0,_public.addAppRedirectMessageToUrl)(deps.addBasePath("/app/kibana"),info.message);window.location.href=newUrl}}));(0,_app.initGraphApp)(graphAngularModule,deps);var $injector=mountGraphApp(appBasePath,element);return function(){licenseSubscription.unsubscribe();$injector.get("$rootScope").$destroy()}};exports.renderApp=renderApp;var mainTemplate=function mainTemplate(basePath){return'<div ng-view class="kbnLocalApplicationWrapper">\n  <base href="'.concat(basePath,'" />\n</div>\n')};var moduleName="app/graph";var thirdPartyAngularDependencies=["ngSanitize","ngRoute","react","ui.bootstrap","ui.ace"];function mountGraphApp(appBasePath,element){var mountpoint=document.createElement("div");mountpoint.setAttribute("class","kbnLocalApplicationWrapper");mountpoint.innerHTML=mainTemplate(appBasePath);var $injector=_angular.default.bootstrap(mountpoint,[moduleName]);element.appendChild(mountpoint);element.setAttribute("class","kbnLocalApplicationWrapper");return $injector}function createLocalAngularModule(navigation){createLocalI18nModule();createLocalTopNavModule(navigation);var graphAngularModule=_angular.default.module(moduleName,[].concat(thirdPartyAngularDependencies,["graphI18n","graphTopNav"]));return graphAngularModule}function createLocalTopNavModule(navigation){_angular.default.module("graphTopNav",["react"]).directive("kbnTopNav",_public.createTopNavDirective).directive("kbnTopNavHelper",(0,_public.createTopNavHelper)(navigation.ui))}function createLocalI18nModule(){_angular.default.module("graphI18n",[]).provider("i18n",_angular2.I18nProvider).filter("i18n",_angular2.i18nFilter).directive("i18nId",_angular2.i18nDirective)}},,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _constants=__webpack_require__(365);Object.keys(_constants).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _constants[key]}})}));var _es_query=__webpack_require__(366);Object.keys(_es_query).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _es_query[key]}})}));var _field_formats=__webpack_require__(163);Object.keys(_field_formats).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _field_formats[key]}})}));var _index_patterns=__webpack_require__(432);Object.keys(_index_patterns).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_patterns[key]}})}));var _kbn_field_types=__webpack_require__(222);Object.keys(_kbn_field_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _kbn_field_types[key]}})}));var _query=__webpack_require__(438);Object.keys(_query).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _query[key]}})}));var _search=__webpack_require__(136);Object.keys(_search).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _search[key]}})}));var _aggs=__webpack_require__(443);Object.keys(_aggs).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _aggs[key]}})}));var _types=__webpack_require__(451);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _utils=__webpack_require__(125);Object.keys(_utils).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _utils[key]}})}))},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setSearchService=exports.getSearchService=exports.setInjectedMetadata=exports.getInjectedMetadata=exports.setQueryService=exports.getQueryService=exports.setIndexPatterns=exports.getIndexPatterns=exports.setOverlays=exports.getOverlays=exports.setFieldFormats=exports.getFieldFormats=exports.setHttp=exports.getHttp=exports.setUiSettings=exports.getUiSettings=exports.setNotifications=exports.getNotifications=void 0;var _public=__webpack_require__(15);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var _createGetterSetter=(0,_public.createGetterSetter)("Notifications"),_createGetterSetter2=_slicedToArray(_createGetterSetter,2),getNotifications=_createGetterSetter2[0],setNotifications=_createGetterSetter2[1];exports.setNotifications=setNotifications;exports.getNotifications=getNotifications;var _createGetterSetter3=(0,_public.createGetterSetter)("UiSettings"),_createGetterSetter4=_slicedToArray(_createGetterSetter3,2),getUiSettings=_createGetterSetter4[0],setUiSettings=_createGetterSetter4[1];exports.setUiSettings=setUiSettings;exports.getUiSettings=getUiSettings;var _createGetterSetter5=(0,_public.createGetterSetter)("Http"),_createGetterSetter6=_slicedToArray(_createGetterSetter5,2),getHttp=_createGetterSetter6[0],setHttp=_createGetterSetter6[1];exports.setHttp=setHttp;exports.getHttp=getHttp;var _createGetterSetter7=(0,_public.createGetterSetter)("FieldFormats"),_createGetterSetter8=_slicedToArray(_createGetterSetter7,2),getFieldFormats=_createGetterSetter8[0],setFieldFormats=_createGetterSetter8[1];exports.setFieldFormats=setFieldFormats;exports.getFieldFormats=getFieldFormats;var _createGetterSetter9=(0,_public.createGetterSetter)("Overlays"),_createGetterSetter10=_slicedToArray(_createGetterSetter9,2),getOverlays=_createGetterSetter10[0],setOverlays=_createGetterSetter10[1];exports.setOverlays=setOverlays;exports.getOverlays=getOverlays;var _createGetterSetter11=(0,_public.createGetterSetter)("IndexPatterns"),_createGetterSetter12=_slicedToArray(_createGetterSetter11,2),getIndexPatterns=_createGetterSetter12[0],setIndexPatterns=_createGetterSetter12[1];exports.setIndexPatterns=setIndexPatterns;exports.getIndexPatterns=getIndexPatterns;var _createGetterSetter13=(0,_public.createGetterSetter)("Query"),_createGetterSetter14=_slicedToArray(_createGetterSetter13,2),getQueryService=_createGetterSetter14[0],setQueryService=_createGetterSetter14[1];exports.setQueryService=setQueryService;exports.getQueryService=getQueryService;var _createGetterSetter15=(0,_public.createGetterSetter)("InjectedMetadata"),_createGetterSetter16=_slicedToArray(_createGetterSetter15,2),getInjectedMetadata=_createGetterSetter16[0],setInjectedMetadata=_createGetterSetter16[1];exports.setInjectedMetadata=setInjectedMetadata;exports.getInjectedMetadata=getInjectedMetadata;var _createGetterSetter17=(0,_public.createGetterSetter)("Search"),_createGetterSetter18=_slicedToArray(_createGetterSetter17,2),getSearchService=_createGetterSetter18[0],setSearchService=_createGetterSetter18[1];exports.setSearchService=setSearchService;exports.getSearchService=getSearchService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.METRIC_TYPES=void 0;var METRIC_TYPES;exports.METRIC_TYPES=METRIC_TYPES;(function(METRIC_TYPES){METRIC_TYPES["AVG"]="avg";METRIC_TYPES["CARDINALITY"]="cardinality";METRIC_TYPES["AVG_BUCKET"]="avg_bucket";METRIC_TYPES["MAX_BUCKET"]="max_bucket";METRIC_TYPES["MIN_BUCKET"]="min_bucket";METRIC_TYPES["SUM_BUCKET"]="sum_bucket";METRIC_TYPES["COUNT"]="count";METRIC_TYPES["CUMULATIVE_SUM"]="cumulative_sum";METRIC_TYPES["DERIVATIVE"]="derivative";METRIC_TYPES["GEO_BOUNDS"]="geo_bounds";METRIC_TYPES["GEO_CENTROID"]="geo_centroid";METRIC_TYPES["MEDIAN"]="median";METRIC_TYPES["MIN"]="min";METRIC_TYPES["MAX"]="max";METRIC_TYPES["MOVING_FN"]="moving_avg";METRIC_TYPES["SERIAL_DIFF"]="serial_diff";METRIC_TYPES["SUM"]="sum";METRIC_TYPES["TOP_HITS"]="top_hits";METRIC_TYPES["PERCENTILES"]="percentiles";METRIC_TYPES["PERCENTILE_RANKS"]="percentile_ranks";METRIC_TYPES["STD_DEV"]="std_dev"})(METRIC_TYPES||(exports.METRIC_TYPES=METRIC_TYPES={}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.isMetricAggType=isMetricAggType;exports.MetricAggType=void 0;var _i18n=__webpack_require__(1);var _agg_type=__webpack_require__(144);var _metric_agg_types=__webpack_require__(96);var _common=__webpack_require__(93);var _services=__webpack_require__(95);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var metricType="metrics";var MetricAggType=function(_AggType){_inherits(MetricAggType,_AggType);function MetricAggType(config){var _this;_classCallCheck(this,MetricAggType);_this=_possibleConstructorReturn(this,_getPrototypeOf(MetricAggType).call(this,config));_defineProperty(_assertThisInitialized(_this),"subtype",void 0);_defineProperty(_assertThisInitialized(_this),"isScalable",void 0);_defineProperty(_assertThisInitialized(_this),"type",metricType);_defineProperty(_assertThisInitialized(_this),"getKey",(function(){}));_this.getValue=config.getValue||function(agg,bucket){var isSettableToZero=[_metric_agg_types.METRIC_TYPES.CARDINALITY,_metric_agg_types.METRIC_TYPES.SUM].includes(agg.type.name);if(!bucket[agg.id]&&isSettableToZero)return 0;return bucket[agg.id]&&bucket[agg.id].value};_this.getFormat=config.getFormat||function(agg){var fieldFormatsService=(0,_services.getFieldFormats)();var field=agg.getField();return field?field.format:fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.NUMBER)};_this.subtype=config.subtype||_i18n.i18n.translate("data.search.aggs.metrics.metricAggregationsSubtypeTitle",{defaultMessage:"Metric Aggregations"});_this.isScalable=config.isScalable||function(){return false};return _this}return MetricAggType}(_agg_type.AggType);exports.MetricAggType=MetricAggType;function isMetricAggType(aggConfig){return aggConfig&&aggConfig.type===metricType}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FieldFormat",{enumerable:true,get:function get(){return _field_format.FieldFormat}});exports.FIELD_FORMAT_IDS=void 0;var _field_format=__webpack_require__(99);var FIELD_FORMAT_IDS;exports.FIELD_FORMAT_IDS=FIELD_FORMAT_IDS;(function(FIELD_FORMAT_IDS){FIELD_FORMAT_IDS["_SOURCE"]="_source";FIELD_FORMAT_IDS["BOOLEAN"]="boolean";FIELD_FORMAT_IDS["BYTES"]="bytes";FIELD_FORMAT_IDS["COLOR"]="color";FIELD_FORMAT_IDS["CUSTOM"]="custom";FIELD_FORMAT_IDS["DATE"]="date";FIELD_FORMAT_IDS["DATE_NANOS"]="date_nanos";FIELD_FORMAT_IDS["DURATION"]="duration";FIELD_FORMAT_IDS["IP"]="ip";FIELD_FORMAT_IDS["NUMBER"]="number";FIELD_FORMAT_IDS["PERCENT"]="percent";FIELD_FORMAT_IDS["RELATIVE_DATE"]="relative_date";FIELD_FORMAT_IDS["STATIC_LOOKUP"]="static_lookup";FIELD_FORMAT_IDS["STRING"]="string";FIELD_FORMAT_IDS["TRUNCATE"]="truncate";FIELD_FORMAT_IDS["URL"]="url"})(FIELD_FORMAT_IDS||(exports.FIELD_FORMAT_IDS=FIELD_FORMAT_IDS={}))},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldFormat=void 0;var _lodash=__webpack_require__(0);var _custom=__webpack_require__(401);var _content_types=__webpack_require__(217);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DEFAULT_CONTEXT_TYPE=_content_types.TEXT_CONTEXT_TYPE;var FieldFormat=function(){function FieldFormat(){var _params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var getConfig=arguments.length>1?arguments[1]:undefined;_classCallCheck(this,FieldFormat);_defineProperty(this,"convertObject",void 0);_defineProperty(this,"htmlConvert",void 0);_defineProperty(this,"textConvert",void 0);_defineProperty(this,"type",this.constructor);_defineProperty(this,"_params",void 0);_defineProperty(this,"getConfig",void 0);this._params=_params;if(getConfig){this.getConfig=getConfig}}_createClass(FieldFormat,[{key:"convert",value:function convert(value){var contentType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:DEFAULT_CONTEXT_TYPE;var options=arguments.length>2?arguments[2]:undefined;var converter=this.getConverterFor(contentType);if(converter){return converter.call(this,value,options)}return value}},{key:"getConverterFor",value:function getConverterFor(){var contentType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:DEFAULT_CONTEXT_TYPE;if(!this.convertObject){this.convertObject=this.setupContentType()}return this.convertObject[contentType]||null}},{key:"getParamDefaults",value:function getParamDefaults(){return{}}},{key:"param",value:function param(name){var val=(0,_lodash.get)(this._params,name);if(val||val===false||val===0){return val}return(0,_lodash.get)(this.getParamDefaults(),name)}},{key:"params",value:function params(){return(0,_lodash.cloneDeep)((0,_lodash.defaults)({},this._params,this.getParamDefaults()))}},{key:"toJSON",value:function toJSON(){var id=(0,_lodash.get)(this.type,"id");var defaultsParams=this.getParamDefaults()||{};var params=(0,_lodash.transform)(this._params,(function(uniqParams,val,param){if(param&&val!==(0,_lodash.get)(defaultsParams,param)){uniqParams[param]=val}}),{});return{id:id,params:(0,_lodash.size)(params)?params:undefined}}},{key:"setupContentType",value:function setupContentType(){return{text:(0,_content_types.textContentTypeSetup)(this,this.textConvert),html:(0,_content_types.htmlContentTypeSetup)(this,this.htmlConvert)}}}],[{key:"from",value:function from(convertFn){return(0,_custom.createCustomFieldFormat)(convertFn)}},{key:"isInstanceOfFieldFormat",value:function isInstanceOfFieldFormat(fieldFormat){return Boolean(fieldFormat&&fieldFormat.convert)}}]);return FieldFormat}();exports.FieldFormat=FieldFormat;_defineProperty(FieldFormat,"id",void 0);_defineProperty(FieldFormat,"title",void 0);_defineProperty(FieldFormat,"fieldType",void 0)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KBN_FIELD_TYPES=exports.ES_FIELD_TYPES=void 0;var ES_FIELD_TYPES;exports.ES_FIELD_TYPES=ES_FIELD_TYPES;(function(ES_FIELD_TYPES){ES_FIELD_TYPES["_ID"]="_id";ES_FIELD_TYPES["_INDEX"]="_index";ES_FIELD_TYPES["_SOURCE"]="_source";ES_FIELD_TYPES["_TYPE"]="_type";ES_FIELD_TYPES["STRING"]="string";ES_FIELD_TYPES["TEXT"]="text";ES_FIELD_TYPES["KEYWORD"]="keyword";ES_FIELD_TYPES["BOOLEAN"]="boolean";ES_FIELD_TYPES["OBJECT"]="object";ES_FIELD_TYPES["DATE"]="date";ES_FIELD_TYPES["DATE_NANOS"]="date_nanos";ES_FIELD_TYPES["GEO_POINT"]="geo_point";ES_FIELD_TYPES["GEO_SHAPE"]="geo_shape";ES_FIELD_TYPES["FLOAT"]="float";ES_FIELD_TYPES["HALF_FLOAT"]="half_float";ES_FIELD_TYPES["SCALED_FLOAT"]="scaled_float";ES_FIELD_TYPES["DOUBLE"]="double";ES_FIELD_TYPES["INTEGER"]="integer";ES_FIELD_TYPES["LONG"]="long";ES_FIELD_TYPES["SHORT"]="short";ES_FIELD_TYPES["NESTED"]="nested";ES_FIELD_TYPES["BYTE"]="byte";ES_FIELD_TYPES["IP"]="ip";ES_FIELD_TYPES["ATTACHMENT"]="attachment";ES_FIELD_TYPES["TOKEN_COUNT"]="token_count";ES_FIELD_TYPES["MURMUR3"]="murmur3";ES_FIELD_TYPES["HISTOGRAM"]="histogram"})(ES_FIELD_TYPES||(exports.ES_FIELD_TYPES=ES_FIELD_TYPES={}));var KBN_FIELD_TYPES;exports.KBN_FIELD_TYPES=KBN_FIELD_TYPES;(function(KBN_FIELD_TYPES){KBN_FIELD_TYPES["_SOURCE"]="_source";KBN_FIELD_TYPES["ATTACHMENT"]="attachment";KBN_FIELD_TYPES["BOOLEAN"]="boolean";KBN_FIELD_TYPES["DATE"]="date";KBN_FIELD_TYPES["GEO_POINT"]="geo_point";KBN_FIELD_TYPES["GEO_SHAPE"]="geo_shape";KBN_FIELD_TYPES["IP"]="ip";KBN_FIELD_TYPES["MURMUR3"]="murmur3";KBN_FIELD_TYPES["NUMBER"]="number";KBN_FIELD_TYPES["STRING"]="string";KBN_FIELD_TYPES["UNKNOWN"]="unknown";KBN_FIELD_TYPES["CONFLICT"]="conflict";KBN_FIELD_TYPES["OBJECT"]="object";KBN_FIELD_TYPES["NESTED"]="nested";KBN_FIELD_TYPES["HISTOGRAM"]="histogram"})(KBN_FIELD_TYPES||(exports.KBN_FIELD_TYPES=KBN_FIELD_TYPES={}))},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BUCKET_TYPES=void 0;var BUCKET_TYPES;exports.BUCKET_TYPES=BUCKET_TYPES;(function(BUCKET_TYPES){BUCKET_TYPES["FILTER"]="filter";BUCKET_TYPES["FILTERS"]="filters";BUCKET_TYPES["HISTOGRAM"]="histogram";BUCKET_TYPES["IP_RANGE"]="ip_range";BUCKET_TYPES["DATE_RANGE"]="date_range";BUCKET_TYPES["RANGE"]="range";BUCKET_TYPES["TERMS"]="terms";BUCKET_TYPES["SIGNIFICANT_TERMS"]="significant_terms";BUCKET_TYPES["GEOHASH_GRID"]="geohash_grid";BUCKET_TYPES["GEOTILE_GRID"]="geotile_grid";BUCKET_TYPES["DATE_HISTOGRAM"]="date_histogram"})(BUCKET_TYPES||(exports.BUCKET_TYPES=BUCKET_TYPES={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={cleanFilter:true,isFilterDisabled:true};exports.isFilterDisabled=exports.cleanFilter=void 0;var _lodash=__webpack_require__(0);var _build_filters=__webpack_require__(373);Object.keys(_build_filters).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _build_filters[key]}})}));var _custom_filter=__webpack_require__(374);Object.keys(_custom_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _custom_filter[key]}})}));var _exists_filter=__webpack_require__(205);Object.keys(_exists_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _exists_filter[key]}})}));var _geo_bounding_box_filter=__webpack_require__(206);Object.keys(_geo_bounding_box_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _geo_bounding_box_filter[key]}})}));var _geo_polygon_filter=__webpack_require__(207);Object.keys(_geo_polygon_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _geo_polygon_filter[key]}})}));var _get_display_value=__webpack_require__(375);Object.keys(_get_display_value).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_display_value[key]}})}));var _get_filter_field=__webpack_require__(376);Object.keys(_get_filter_field).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_filter_field[key]}})}));var _get_filter_params=__webpack_require__(377);Object.keys(_get_filter_params).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_filter_params[key]}})}));var _get_index_pattern_from_filter=__webpack_require__(208);Object.keys(_get_index_pattern_from_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_index_pattern_from_filter[key]}})}));var _match_all_filter=__webpack_require__(378);Object.keys(_match_all_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _match_all_filter[key]}})}));var _meta_filter=__webpack_require__(379);Object.keys(_meta_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _meta_filter[key]}})}));var _missing_filter=__webpack_require__(211);Object.keys(_missing_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _missing_filter[key]}})}));var _phrase_filter=__webpack_require__(159);Object.keys(_phrase_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _phrase_filter[key]}})}));var _phrases_filter=__webpack_require__(209);Object.keys(_phrases_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _phrases_filter[key]}})}));var _query_string_filter=__webpack_require__(380);Object.keys(_query_string_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _query_string_filter[key]}})}));var _range_filter=__webpack_require__(210);Object.keys(_range_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _range_filter[key]}})}));var _types=__webpack_require__(381);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var cleanFilter=function cleanFilter(filter){return(0,_lodash.omit)(filter,["meta","$state"])};exports.cleanFilter=cleanFilter;var isFilterDisabled=function isFilterDisabled(filter){return(0,_lodash.get)(filter,"meta.disabled",false)};exports.isFilterDisabled=isFilterDisabled},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.isBucketAggType=isBucketAggType;exports.BucketAggType=void 0;var _agg_type=__webpack_require__(144);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var bucketType="buckets";var BucketAggType=function(_AggType){_inherits(BucketAggType,_AggType);function BucketAggType(config){var _this;_classCallCheck(this,BucketAggType);_this=_possibleConstructorReturn(this,_getPrototypeOf(BucketAggType).call(this,config));_defineProperty(_assertThisInitialized(_this),"getKey",void 0);_defineProperty(_assertThisInitialized(_this),"type",bucketType);_this.getKey=config.getKey||function(bucket,key){return key||bucket.key};return _this}return BucketAggType}(_agg_type.AggType);exports.BucketAggType=BucketAggType;function isBucketAggType(aggConfig){return aggConfig&&aggConfig.type===bucketType}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _ast=__webpack_require__(212);Object.keys(_ast).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ast[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;Object.defineProperty(exports,"RangeFilter",{enumerable:true,get:function get(){return _common.RangeFilter}});Object.defineProperty(exports,"RangeFilterMeta",{enumerable:true,get:function get(){return _common.RangeFilterMeta}});Object.defineProperty(exports,"RangeFilterParams",{enumerable:true,get:function get(){return _common.RangeFilterParams}});Object.defineProperty(exports,"ExistsFilter",{enumerable:true,get:function get(){return _common.ExistsFilter}});Object.defineProperty(exports,"PhrasesFilter",{enumerable:true,get:function get(){return _common.PhrasesFilter}});Object.defineProperty(exports,"PhraseFilter",{enumerable:true,get:function get(){return _common.PhraseFilter}});Object.defineProperty(exports,"CustomFilter",{enumerable:true,get:function get(){return _common.CustomFilter}});Object.defineProperty(exports,"MatchAllFilter",{enumerable:true,get:function get(){return _common.MatchAllFilter}});Object.defineProperty(exports,"EsQueryConfig",{enumerable:true,get:function get(){return _common.EsQueryConfig}});Object.defineProperty(exports,"KueryNode",{enumerable:true,get:function get(){return _common.KueryNode}});Object.defineProperty(exports,"IFieldFormat",{enumerable:true,get:function get(){return _common.IFieldFormat}});Object.defineProperty(exports,"IFieldFormatsRegistry",{enumerable:true,get:function get(){return _common.IFieldFormatsRegistry}});Object.defineProperty(exports,"FieldFormatsContentType",{enumerable:true,get:function get(){return _common.FieldFormatsContentType}});Object.defineProperty(exports,"FieldFormatsGetConfigFn",{enumerable:true,get:function get(){return _common.FieldFormatsGetConfigFn}});Object.defineProperty(exports,"FieldFormatConfig",{enumerable:true,get:function get(){return _common.FieldFormatConfig}});Object.defineProperty(exports,"FieldFormatId",{enumerable:true,get:function get(){return _common.FieldFormatId}});Object.defineProperty(exports,"IIndexPattern",{enumerable:true,get:function get(){return _common.IIndexPattern}});Object.defineProperty(exports,"IFieldType",{enumerable:true,get:function get(){return _common.IFieldType}});Object.defineProperty(exports,"IFieldSubType",{enumerable:true,get:function get(){return _common.IFieldSubType}});Object.defineProperty(exports,"ES_FIELD_TYPES",{enumerable:true,get:function get(){return _common.ES_FIELD_TYPES}});Object.defineProperty(exports,"KBN_FIELD_TYPES",{enumerable:true,get:function get(){return _common.KBN_FIELD_TYPES}});Object.defineProperty(exports,"IndexPatternAttributes",{enumerable:true,get:function get(){return _common.IndexPatternAttributes}});Object.defineProperty(exports,"ParsedInterval",{enumerable:true,get:function get(){return _common.ParsedInterval}});Object.defineProperty(exports,"Filter",{enumerable:true,get:function get(){return _common.Filter}});Object.defineProperty(exports,"Query",{enumerable:true,get:function get(){return _common.Query}});Object.defineProperty(exports,"RefreshInterval",{enumerable:true,get:function get(){return _common.RefreshInterval}});Object.defineProperty(exports,"TimeRange",{enumerable:true,get:function get(){return _common.TimeRange}});Object.defineProperty(exports,"castEsToKbnFieldTypeName",{enumerable:true,get:function get(){return _common.castEsToKbnFieldTypeName}});Object.defineProperty(exports,"getKbnTypeNames",{enumerable:true,get:function get(){return _common.getKbnTypeNames}});Object.defineProperty(exports,"createSavedQueryService",{enumerable:true,get:function get(){return _query.createSavedQueryService}});Object.defineProperty(exports,"connectToQueryState",{enumerable:true,get:function get(){return _query.connectToQueryState}});Object.defineProperty(exports,"syncQueryStateWithUrl",{enumerable:true,get:function get(){return _query.syncQueryStateWithUrl}});Object.defineProperty(exports,"QueryState",{enumerable:true,get:function get(){return _query.QueryState}});Object.defineProperty(exports,"getTime",{enumerable:true,get:function get(){return _query.getTime}});Object.defineProperty(exports,"getQueryLog",{enumerable:true,get:function get(){return _query.getQueryLog}});Object.defineProperty(exports,"getDefaultQuery",{enumerable:true,get:function get(){return _query.getDefaultQuery}});Object.defineProperty(exports,"FilterManager",{enumerable:true,get:function get(){return _query.FilterManager}});Object.defineProperty(exports,"SavedQuery",{enumerable:true,get:function get(){return _query.SavedQuery}});Object.defineProperty(exports,"SavedQueryService",{enumerable:true,get:function get(){return _query.SavedQueryService}});Object.defineProperty(exports,"SavedQueryTimeFilter",{enumerable:true,get:function get(){return _query.SavedQueryTimeFilter}});Object.defineProperty(exports,"InputTimeRange",{enumerable:true,get:function get(){return _query.InputTimeRange}});Object.defineProperty(exports,"TimeHistory",{enumerable:true,get:function get(){return _query.TimeHistory}});Object.defineProperty(exports,"TimefilterContract",{enumerable:true,get:function get(){return _query.TimefilterContract}});Object.defineProperty(exports,"TimeHistoryContract",{enumerable:true,get:function get(){return _query.TimeHistoryContract}});Object.defineProperty(exports,"baseFormattersPublic",{enumerable:true,get:function get(){return _field_formats2.baseFormattersPublic}});Object.defineProperty(exports,"IndexPatternsContract",{enumerable:true,get:function get(){return _index_patterns.IndexPatternsContract}});Object.defineProperty(exports,"IndexPattern",{enumerable:true,get:function get(){return _index_patterns.IndexPattern}});Object.defineProperty(exports,"IndexPatternField",{enumerable:true,get:function get(){return _index_patterns.Field}});Object.defineProperty(exports,"IndexPatternTypeMeta",{enumerable:true,get:function get(){return _index_patterns.TypeMeta}});Object.defineProperty(exports,"IndexPatternAggRestrictions",{enumerable:true,get:function get(){return _index_patterns.AggregationRestrictions}});Object.defineProperty(exports,"IndexPatternFieldList",{enumerable:true,get:function get(){return _index_patterns.FieldList}});Object.defineProperty(exports,"QuerySuggestion",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestion}});Object.defineProperty(exports,"QuerySuggestionTypes",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestionTypes}});Object.defineProperty(exports,"QuerySuggestionGetFn",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestionGetFn}});Object.defineProperty(exports,"QuerySuggestionGetFnArgs",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestionGetFnArgs}});Object.defineProperty(exports,"QuerySuggestionBasic",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestionBasic}});Object.defineProperty(exports,"QuerySuggestionField",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestionField}});Object.defineProperty(exports,"AggGroupNames",{enumerable:true,get:function get(){return _search.AggGroupNames}});Object.defineProperty(exports,"AggParam",{enumerable:true,get:function get(){return _search.AggParam}});Object.defineProperty(exports,"AggParamOption",{enumerable:true,get:function get(){return _search.AggParamOption}});Object.defineProperty(exports,"AggParamType",{enumerable:true,get:function get(){return _search.AggParamType}});Object.defineProperty(exports,"AggTypeFieldFilters",{enumerable:true,get:function get(){return _search.AggTypeFieldFilters}});Object.defineProperty(exports,"AggTypeFilters",{enumerable:true,get:function get(){return _search.AggTypeFilters}});Object.defineProperty(exports,"AggConfigOptions",{enumerable:true,get:function get(){return _search.AggConfigOptions}});Object.defineProperty(exports,"BUCKET_TYPES",{enumerable:true,get:function get(){return _search.BUCKET_TYPES}});Object.defineProperty(exports,"DateRangeKey",{enumerable:true,get:function get(){return _search.DateRangeKey}});Object.defineProperty(exports,"IAggConfig",{enumerable:true,get:function get(){return _search.IAggConfig}});Object.defineProperty(exports,"IAggConfigs",{enumerable:true,get:function get(){return _search.IAggConfigs}});Object.defineProperty(exports,"IAggGroupNames",{enumerable:true,get:function get(){return _search.IAggGroupNames}});Object.defineProperty(exports,"IAggType",{enumerable:true,get:function get(){return _search.IAggType}});Object.defineProperty(exports,"IFieldParamType",{enumerable:true,get:function get(){return _search.IFieldParamType}});Object.defineProperty(exports,"IMetricAggType",{enumerable:true,get:function get(){return _search.IMetricAggType}});Object.defineProperty(exports,"IpRangeKey",{enumerable:true,get:function get(){return _search.IpRangeKey}});Object.defineProperty(exports,"METRIC_TYPES",{enumerable:true,get:function get(){return _search.METRIC_TYPES}});Object.defineProperty(exports,"OptionedParamEditorProps",{enumerable:true,get:function get(){return _search.OptionedParamEditorProps}});Object.defineProperty(exports,"OptionedParamType",{enumerable:true,get:function get(){return _search.OptionedParamType}});Object.defineProperty(exports,"OptionedValueProp",{enumerable:true,get:function get(){return _search.OptionedValueProp}});Object.defineProperty(exports,"ES_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _search.ES_SEARCH_STRATEGY}});Object.defineProperty(exports,"SYNC_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _search.SYNC_SEARCH_STRATEGY}});Object.defineProperty(exports,"getEsPreference",{enumerable:true,get:function get(){return _search.getEsPreference}});Object.defineProperty(exports,"getSearchErrorType",{enumerable:true,get:function get(){return _search.getSearchErrorType}});Object.defineProperty(exports,"ISearchContext",{enumerable:true,get:function get(){return _search.ISearchContext}});Object.defineProperty(exports,"TSearchStrategyProvider",{enumerable:true,get:function get(){return _search.TSearchStrategyProvider}});Object.defineProperty(exports,"ISearchStrategy",{enumerable:true,get:function get(){return _search.ISearchStrategy}});Object.defineProperty(exports,"ISearch",{enumerable:true,get:function get(){return _search.ISearch}});Object.defineProperty(exports,"ISearchOptions",{enumerable:true,get:function get(){return _search.ISearchOptions}});Object.defineProperty(exports,"IRequestTypesMap",{enumerable:true,get:function get(){return _search.IRequestTypesMap}});Object.defineProperty(exports,"IResponseTypesMap",{enumerable:true,get:function get(){return _search.IResponseTypesMap}});Object.defineProperty(exports,"ISearchGeneric",{enumerable:true,get:function get(){return _search.ISearchGeneric}});Object.defineProperty(exports,"IEsSearchResponse",{enumerable:true,get:function get(){return _search.IEsSearchResponse}});Object.defineProperty(exports,"IEsSearchRequest",{enumerable:true,get:function get(){return _search.IEsSearchRequest}});Object.defineProperty(exports,"ISyncSearchRequest",{enumerable:true,get:function get(){return _search.ISyncSearchRequest}});Object.defineProperty(exports,"IKibanaSearchResponse",{enumerable:true,get:function get(){return _search.IKibanaSearchResponse}});Object.defineProperty(exports,"IKibanaSearchRequest",{enumerable:true,get:function get(){return _search.IKibanaSearchRequest}});Object.defineProperty(exports,"SearchRequest",{enumerable:true,get:function get(){return _search.SearchRequest}});Object.defineProperty(exports,"SearchResponse",{enumerable:true,get:function get(){return _search.SearchResponse}});Object.defineProperty(exports,"SearchError",{enumerable:true,get:function get(){return _search.SearchError}});Object.defineProperty(exports,"SearchStrategyProvider",{enumerable:true,get:function get(){return _search.SearchStrategyProvider}});Object.defineProperty(exports,"ISearchSource",{enumerable:true,get:function get(){return _search.ISearchSource}});Object.defineProperty(exports,"SearchSource",{enumerable:true,get:function get(){return _search.SearchSource}});Object.defineProperty(exports,"SearchSourceFields",{enumerable:true,get:function get(){return _search.SearchSourceFields}});Object.defineProperty(exports,"EsQuerySortValue",{enumerable:true,get:function get(){return _search.EsQuerySortValue}});Object.defineProperty(exports,"SortDirection",{enumerable:true,get:function get(){return _search.SortDirection}});Object.defineProperty(exports,"FetchOptions",{enumerable:true,get:function get(){return _search.FetchOptions}});Object.defineProperty(exports,"TabbedAggColumn",{enumerable:true,get:function get(){return _search.TabbedAggColumn}});Object.defineProperty(exports,"TabbedAggRow",{enumerable:true,get:function get(){return _search.TabbedAggRow}});Object.defineProperty(exports,"TabbedTable",{enumerable:true,get:function get(){return _search.TabbedTable}});Object.defineProperty(exports,"SearchInterceptor",{enumerable:true,get:function get(){return _search.SearchInterceptor}});Object.defineProperty(exports,"RequestTimeoutError",{enumerable:true,get:function get(){return _search.RequestTimeoutError}});Object.defineProperty(exports,"SearchBar",{enumerable:true,get:function get(){return _ui.SearchBar}});Object.defineProperty(exports,"SearchBarProps",{enumerable:true,get:function get(){return _ui.SearchBarProps}});Object.defineProperty(exports,"StatefulSearchBarProps",{enumerable:true,get:function get(){return _ui.StatefulSearchBarProps}});Object.defineProperty(exports,"FilterBar",{enumerable:true,get:function get(){return _ui.FilterBar}});Object.defineProperty(exports,"QueryStringInput",{enumerable:true,get:function get(){return _ui.QueryStringInput}});Object.defineProperty(exports,"IndexPatternSelect",{enumerable:true,get:function get(){return _ui.IndexPatternSelect}});Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugin.DataPublicPlugin}});Object.defineProperty(exports,"DataPublicPluginSetup",{enumerable:true,get:function get(){return _types.DataPublicPluginSetup}});Object.defineProperty(exports,"DataPublicPluginStart",{enumerable:true,get:function get(){return _types.DataPublicPluginStart}});Object.defineProperty(exports,"IDataPluginServices",{enumerable:true,get:function get(){return _types.IDataPluginServices}});exports.search=exports.indexPatterns=exports.fieldFormats=exports.esQuery=exports.esKuery=exports.esFilters=void 0;__webpack_require__(360);var _common=__webpack_require__(93);var _filter_bar=__webpack_require__(165);var _query=__webpack_require__(119);var _field_formats=__webpack_require__(163);var _field_formats2=__webpack_require__(244);var _index_patterns=__webpack_require__(169);var _autocomplete=__webpack_require__(170);var _search=__webpack_require__(520);var _ui=__webpack_require__(146);var _plugin=__webpack_require__(662);var _types=__webpack_require__(682);var esFilters={FilterLabel:_filter_bar.FilterLabel,FILTERS:_common.FILTERS,FilterStateStore:_common.FilterStateStore,buildEmptyFilter:_common.buildEmptyFilter,buildPhrasesFilter:_common.buildPhrasesFilter,buildExistsFilter:_common.buildExistsFilter,buildPhraseFilter:_common.buildPhraseFilter,buildQueryFilter:_common.buildQueryFilter,buildRangeFilter:_common.buildRangeFilter,isPhraseFilter:_common.isPhraseFilter,isExistsFilter:_common.isExistsFilter,isPhrasesFilter:_common.isPhrasesFilter,isRangeFilter:_common.isRangeFilter,isMatchAllFilter:_common.isMatchAllFilter,isMissingFilter:_common.isMissingFilter,isQueryStringFilter:_common.isQueryStringFilter,isFilterPinned:_common.isFilterPinned,toggleFilterNegated:_common.toggleFilterNegated,disableFilter:_common.disableFilter,getPhraseFilterField:_common.getPhraseFilterField,getPhraseFilterValue:_common.getPhraseFilterValue,getDisplayValueFromFilter:_common.getDisplayValueFromFilter,compareFilters:_common.compareFilters,COMPARE_ALL_OPTIONS:_common.COMPARE_ALL_OPTIONS,generateFilters:_query.generateFilters,onlyDisabledFiltersChanged:_query.onlyDisabledFiltersChanged,changeTimeFilter:_query.changeTimeFilter,mapAndFlattenFilters:_query.mapAndFlattenFilters,extractTimeFilter:_query.extractTimeFilter};exports.esFilters=esFilters;var esKuery={nodeTypes:_common.nodeTypes,fromKueryExpression:_common.fromKueryExpression,toElasticsearchQuery:_common.toElasticsearchQuery};exports.esKuery=esKuery;var esQuery={buildEsQuery:_common.buildEsQuery,getEsQueryConfig:_common.getEsQueryConfig,buildQueryFromFilters:_common.buildQueryFromFilters,luceneStringToDsl:_common.luceneStringToDsl,decorateQuery:_common.decorateQuery};exports.esQuery=esQuery;var fieldFormats={FieldFormat:_field_formats.FieldFormat,FieldFormatsRegistry:_field_formats.FieldFormatsRegistry,serialize:_field_formats.serializeFieldFormat,DEFAULT_CONVERTER_COLOR:_field_formats.DEFAULT_CONVERTER_COLOR,HTML_CONTEXT_TYPE:_field_formats.HTML_CONTEXT_TYPE,TEXT_CONTEXT_TYPE:_field_formats.TEXT_CONTEXT_TYPE,FIELD_FORMAT_IDS:_field_formats.FIELD_FORMAT_IDS,BoolFormat:_field_formats.BoolFormat,BytesFormat:_field_formats.BytesFormat,ColorFormat:_field_formats.ColorFormat,DateFormat:_field_formats2.DateFormat,DateNanosFormat:_field_formats.DateNanosFormat,DurationFormat:_field_formats.DurationFormat,IpFormat:_field_formats.IpFormat,NumberFormat:_field_formats.NumberFormat,PercentFormat:_field_formats.PercentFormat,RelativeDateFormat:_field_formats.RelativeDateFormat,SourceFormat:_field_formats.SourceFormat,StaticLookupFormat:_field_formats.StaticLookupFormat,UrlFormat:_field_formats.UrlFormat,StringFormat:_field_formats.StringFormat,TruncateFormat:_field_formats.TruncateFormat};exports.fieldFormats=fieldFormats;var indexPatterns={ILLEGAL_CHARACTERS_KEY:_index_patterns.ILLEGAL_CHARACTERS_KEY,CONTAINS_SPACES_KEY:_index_patterns.CONTAINS_SPACES_KEY,ILLEGAL_CHARACTERS_VISIBLE:_index_patterns.ILLEGAL_CHARACTERS_VISIBLE,ILLEGAL_CHARACTERS:_index_patterns.ILLEGAL_CHARACTERS,isDefault:_index_patterns.isDefault,isFilterable:_common.isFilterable,isNestedField:_common.isNestedField,validate:_index_patterns.validateIndexPattern,getFromSavedObject:_index_patterns.getFromSavedObject,flattenHitWrapper:_index_patterns.flattenHitWrapper,getRoutes:_index_patterns.getRoutes,formatHitProvider:_index_patterns.formatHitProvider};exports.indexPatterns=indexPatterns;var search={aggs:{AggConfigs:_search.AggConfigs,aggGroupNamesMap:_search.aggGroupNamesMap,aggTypeFilters:_search.aggTypeFilters,CidrMask:_search.CidrMask,convertDateRangeToString:_search.convertDateRangeToString,convertIPRangeToString:_search.convertIPRangeToString,dateHistogramInterval:_common.dateHistogramInterval,intervalOptions:_search.intervalOptions,InvalidEsCalendarIntervalError:_common.InvalidEsCalendarIntervalError,InvalidEsIntervalFormatError:_common.InvalidEsIntervalFormatError,isDateHistogramBucketAggConfig:_search.isDateHistogramBucketAggConfig,isStringType:_search.isStringType,isType:_search.isType,isValidEsInterval:_common.isValidEsInterval,isValidInterval:_common.isValidInterval,parentPipelineType:_search.parentPipelineType,parseEsInterval:_common.parseEsInterval,parseInterval:_common.parseInterval,propFilter:_search.propFilter,siblingPipelineType:_search.siblingPipelineType,termsAggFilter:_search.termsAggFilter,toAbsoluteDates:_common.toAbsoluteDates},getRequestInspectorStats:_search.getRequestInspectorStats,getResponseInspectorStats:_search.getResponseInspectorStats,tabifyAggResponse:_search.tabifyAggResponse,tabifyGetColumns:_search.tabifyGetColumns};exports.search=search;function plugin(initializerContext){return new _plugin.DataPublicPlugin(initializerContext)}},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseParamType=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BaseParamType=function BaseParamType(config){var _this=this;_classCallCheck(this,BaseParamType);_defineProperty(this,"name",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"displayName",void 0);_defineProperty(this,"required",void 0);_defineProperty(this,"advanced",void 0);_defineProperty(this,"default",void 0);_defineProperty(this,"write",void 0);_defineProperty(this,"serialize",void 0);_defineProperty(this,"deserialize",void 0);_defineProperty(this,"options",void 0);_defineProperty(this,"valueType",void 0);_defineProperty(this,"modifyAggConfigOnSearchRequestStart",void 0);this.name=config.name;this.type=config.type;this.displayName=config.displayName||this.name;this.required=config.required===true;this.advanced=config.advanced||false;this.onChange=config.onChange;this.shouldShow=config.shouldShow;this.default=config.default;var defaultWrite=function defaultWrite(aggConfig,output){if(aggConfig.params[_this.name]){output.params[_this.name]=aggConfig.params[_this.name]||_this.default}};this.write=config.write||defaultWrite;this.serialize=config.serialize;this.deserialize=config.deserialize;this.options=config.options;this.modifyAggConfigOnSearchRequestStart=config.modifyAggConfigOnSearchRequestStart||function(){};this.valueType=config.valueType||config.type};exports.BaseParamType=BaseParamType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.makeNestedLabel=void 0;var _lodash=__webpack_require__(0);var makeNestedLabel=function makeNestedLabel(aggConfig,label){var uppercaseLabel=(0,_lodash.startCase)(label);var customMetric=aggConfig.getParam("customMetric");var metricAgg=aggConfig.getParam("metricAgg");if(customMetric){var metricLabel=customMetric.makeLabel();if(metricLabel.includes("".concat(uppercaseLabel," of "))){metricLabel=metricLabel.substring("".concat(uppercaseLabel," of ").length);metricLabel="2. ".concat(label," of ").concat(metricLabel)}else if(metricLabel.includes("".concat(label," of "))){metricLabel=parseInt(metricLabel.substring(0,1),10)+1+metricLabel.substring(1)}else{metricLabel="".concat(uppercaseLabel," of ").concat(metricLabel)}return metricLabel}var metric=aggConfig.aggConfigs.byId(metricAgg);if(!metric){return""}return"".concat(uppercaseLabel," of ").concat(metric.makeLabel())};exports.makeNestedLabel=makeNestedLabel},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hasDatasourceSelector=exports.datasourceSelector=exports.datasourceReducer=exports.datasourceLoaded=exports.requestDatasource=exports.setDatasource=void 0;var _typescriptFsa=_interopRequireDefault(__webpack_require__(113));var _dist=__webpack_require__(130);var _reselect=__webpack_require__(300);var _global=__webpack_require__(123);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var actionCreator=(0,_typescriptFsa.default)("x-pack/graph/datasource");var setDatasource=actionCreator("SET_DATASOURCE");exports.setDatasource=setDatasource;var requestDatasource=actionCreator("SET_DATASOURCE_REQUEST");exports.requestDatasource=requestDatasource;var datasourceLoaded=actionCreator("SET_DATASOURCE_SUCCESS");exports.datasourceLoaded=datasourceLoaded;var initialDatasource={current:{type:"none"},loading:false};var datasourceReducer=(0,_dist.reducerWithInitialState)(initialDatasource).case(_global.reset,(function(){return initialDatasource})).case(setDatasource,(function(_oldDatasource,newDatasource){return{current:newDatasource,loading:false}})).case(requestDatasource,(function(_oldDatasource,newDatasource){return{current:newDatasource,loading:true}})).case(datasourceLoaded,(function(datasource){return _objectSpread({},datasource,{loading:false})})).build();exports.datasourceReducer=datasourceReducer;var datasourceSelector=function datasourceSelector(state){return state.datasource};exports.datasourceSelector=datasourceSelector;var hasDatasourceSelector=(0,_reselect.createSelector)(datasourceSelector,(function(datasource){return datasource.current.type!=="none"}));exports.hasDatasourceSelector=hasDatasourceSelector},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"NodeTypes",{enumerable:true,get:function get(){return _types.NodeTypes}});exports.nodeTypes=void 0;var functionType=_interopRequireWildcard(__webpack_require__(370));var literal=_interopRequireWildcard(__webpack_require__(124));var namedArg=_interopRequireWildcard(__webpack_require__(391));var wildcard=_interopRequireWildcard(__webpack_require__(161));var _types=__webpack_require__(392);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var nodeTypes={function:functionType,literal:literal,namedArg:namedArg,wildcard:wildcard};exports.nodeTypes=nodeTypes},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"asPrettyString",{enumerable:true,get:function get(){return _as_pretty_string.asPrettyString}});Object.defineProperty(exports,"getHighlightHtml",{enumerable:true,get:function get(){return _highlight.getHighlightHtml}});Object.defineProperty(exports,"getHighlightRequest",{enumerable:true,get:function get(){return _highlight.getHighlightRequest}});Object.defineProperty(exports,"serializeFieldFormat",{enumerable:true,get:function get(){return _serialize.serializeFieldFormat}});var _as_pretty_string=__webpack_require__(403);var _highlight=__webpack_require__(404);var _serialize=__webpack_require__(408)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lib=__webpack_require__(460);Object.keys(_lib).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _lib[key]}})}));var _query_service=__webpack_require__(467);Object.keys(_query_service).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _query_service[key]}})}));var _filter_manager=__webpack_require__(238);Object.keys(_filter_manager).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filter_manager[key]}})}));var _timefilter=__webpack_require__(168);Object.keys(_timefilter).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _timefilter[key]}})}));var _saved_query=__webpack_require__(497);Object.keys(_saved_query).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _saved_query[key]}})}));var _persisted_log=__webpack_require__(167);Object.keys(_persisted_log).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _persisted_log[key]}})}));var _state_sync=__webpack_require__(499);Object.keys(_state_sync).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _state_sync[key]}})}))},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _fields=__webpack_require__(129);Object.keys(_fields).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _fields[key]}})}));var _url_templates=__webpack_require__(183);Object.keys(_url_templates).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _url_templates[key]}})}));var _advanced_settings=__webpack_require__(151);Object.keys(_advanced_settings).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _advanced_settings[key]}})}));var _datasource=__webpack_require__(114);Object.keys(_datasource).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _datasource[key]}})}));var _datasource2=__webpack_require__(303);Object.keys(_datasource2).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _datasource2[key]}})}));var _meta_data=__webpack_require__(188);Object.keys(_meta_data).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _meta_data[key]}})}));var _persistence=__webpack_require__(304);Object.keys(_persistence).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _persistence[key]}})}));var _workspace=__webpack_require__(306);Object.keys(_workspace).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _workspace[key]}})}));var _global=__webpack_require__(123);Object.keys(_global).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _global[key]}})}));var _store=__webpack_require__(713);Object.keys(_store).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _store[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.reset=void 0;var _typescriptFsa=_interopRequireDefault(__webpack_require__(113));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var actionCreator=(0,_typescriptFsa.default)("x-pack/graph");var reset=actionCreator("RESET");exports.reset=reset},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNode=buildNode;exports.toElasticsearchQuery=toElasticsearchQuery;function buildNode(value){return{type:"literal",value:value}}function toElasticsearchQuery(node){return node.value}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"shortenDottedString",{enumerable:true,get:function get(){return _shorten_dotted_string.shortenDottedString}});Object.defineProperty(exports,"AbortError",{enumerable:true,get:function get(){return _abort_utils.AbortError}});Object.defineProperty(exports,"toPromise",{enumerable:true,get:function get(){return _abort_utils.toPromise}});Object.defineProperty(exports,"getCombinedSignal",{enumerable:true,get:function get(){return _abort_utils.getCombinedSignal}});var _shorten_dotted_string=__webpack_require__(425);var _abort_utils=__webpack_require__(426)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parentPipelineType=exports.parentPipelineAggHelper=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(0);var _nested_agg_helpers=__webpack_require__(262);var _parent_pipeline_agg_writer=__webpack_require__(539);var _common=__webpack_require__(93);var metricAggFilter=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev","!geo_bounds","!geo_centroid"];var parentPipelineType=_i18n.i18n.translate("data.search.aggs.metrics.parentPipelineAggregationsSubtypeTitle",{defaultMessage:"Parent Pipeline Aggregations"});exports.parentPipelineType=parentPipelineType;var parentPipelineAggHelper={subtype:parentPipelineType,params:function params(){return[{name:"metricAgg",default:"custom",write:_parent_pipeline_agg_writer.parentPipelineAggWriter},{name:"customMetric",type:"agg",allowedAggs:metricAggFilter,makeAgg:function makeAgg(termsAgg,state){state=state||{type:"count"};var metricAgg=termsAgg.aggConfigs.createAggConfig(state,{addToAggConfigs:false});metricAgg.id=termsAgg.id+"-metric";return metricAgg},modifyAggConfigOnSearchRequestStart:(0,_nested_agg_helpers.forwardModifyAggConfigOnSearchRequestStart)("customMetric"),write:_lodash.noop},{name:"buckets_path",write:_lodash.noop}]},getFormat:function getFormat(agg){var subAgg;var customMetric=agg.getParam("customMetric");if(customMetric){subAgg=customMetric}else{subAgg=agg.aggConfigs.byId(agg.getParam("metricAgg"))}return subAgg?subAgg.type.getFormat(subAgg):new(_common.FieldFormat.from(_lodash.identity))}};exports.parentPipelineAggHelper=parentPipelineAggHelper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.siblingPipelineType=exports.siblingPipelineAggHelper=void 0;var _lodash=__webpack_require__(0);var _i18n=__webpack_require__(1);var _sibling_pipeline_agg_writer=__webpack_require__(646);var _nested_agg_helpers=__webpack_require__(262);var _common=__webpack_require__(93);var metricAggFilter=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev","!sum_bucket","!avg_bucket","!min_bucket","!max_bucket","!derivative","!moving_avg","!serial_diff","!cumulative_sum","!geo_bounds","!geo_centroid"];var bucketAggFilter=[];var siblingPipelineType=_i18n.i18n.translate("data.search.aggs.metrics.siblingPipelineAggregationsSubtypeTitle",{defaultMessage:"Sibling pipeline aggregations"});exports.siblingPipelineType=siblingPipelineType;var siblingPipelineAggHelper={subtype:siblingPipelineType,params:function params(){return[{name:"customBucket",type:"agg",allowedAggs:bucketAggFilter,default:null,makeAgg:function makeAgg(agg,state){state=state||{type:"date_histogram"};var orderAgg=agg.aggConfigs.createAggConfig(state,{addToAggConfigs:false});orderAgg.id=agg.id+"-bucket";return orderAgg},modifyAggConfigOnSearchRequestStart:(0,_nested_agg_helpers.forwardModifyAggConfigOnSearchRequestStart)("customBucket"),write:function write(){}},{name:"customMetric",type:"agg",allowedAggs:metricAggFilter,default:null,makeAgg:function makeAgg(agg,state){state=state||{type:"count"};var orderAgg=agg.aggConfigs.createAggConfig(state,{addToAggConfigs:false});orderAgg.id=agg.id+"-metric";return orderAgg},modifyAggConfigOnSearchRequestStart:(0,_nested_agg_helpers.forwardModifyAggConfigOnSearchRequestStart)("customMetric"),write:_sibling_pipeline_agg_writer.siblingPipelineAggWriter}]},getFormat:function getFormat(agg){var customMetric=agg.getParam("customMetric");return customMetric?customMetric.type.getFormat(customMetric):new(_common.FieldFormat.from(_lodash.identity))}};exports.siblingPipelineAggHelper=siblingPipelineAggHelper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SAVE_DUPLICATE_REJECTED=exports.OVERWRITE_REJECTED=void 0;var _i18n=__webpack_require__(1);var OVERWRITE_REJECTED=_i18n.i18n.translate("savedObjects.overwriteRejectedDescription",{defaultMessage:"Overwrite confirmation was rejected"});exports.OVERWRITE_REJECTED=OVERWRITE_REJECTED;var SAVE_DUPLICATE_REJECTED=_i18n.i18n.translate("savedObjects.saveDuplicateRejectedDescription",{defaultMessage:"Save with duplicate title confirmation was rejected"});exports.SAVE_DUPLICATE_REJECTED=SAVE_DUPLICATE_REJECTED},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.syncNodeStyleSaga=exports.syncFieldsSaga=exports.updateSaveButtonSaga=exports.hasFieldsSelector=exports.liveResponseFieldsSelector=exports.selectedFieldsSelector=exports.fieldsSelector=exports.fieldMapSelector=exports.fieldsReducer=exports.deselectField=exports.selectField=exports.updateFieldProperties=exports.loadFields=void 0;var _typescriptFsa=_interopRequireDefault(__webpack_require__(113));var _dist=__webpack_require__(130);var _reselect=__webpack_require__(300);var _effects=__webpack_require__(120);var _global=__webpack_require__(123);var _datasource=__webpack_require__(114);var _helpers=__webpack_require__(302);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var actionCreator=(0,_typescriptFsa.default)("x-pack/graph/fields");var loadFields=actionCreator("LOAD_FIELDS");exports.loadFields=loadFields;var updateFieldProperties=actionCreator("UPDATE_FIELD_PROPERTIES");exports.updateFieldProperties=updateFieldProperties;var selectField=actionCreator("SELECT_FIELD");exports.selectField=selectField;var deselectField=actionCreator("DESELECT_FIELD");exports.deselectField=deselectField;var initialFields={};var fieldsReducer=(0,_dist.reducerWithInitialState)(initialFields).case(_global.reset,(function(){return initialFields})).case(_datasource.setDatasource,(function(){return initialFields})).case(loadFields,(function(_currentFields,newFields){var newFieldMap={};newFields.forEach((function(field){newFieldMap[field.name]=field}));return newFieldMap})).case(updateFieldProperties,(function(fields,_ref){var fieldName=_ref.fieldName,fieldProperties=_ref.fieldProperties;return _objectSpread({},fields,_defineProperty({},fieldName,_objectSpread({},fields[fieldName],{},fieldProperties)))})).case(selectField,(function(fields,fieldName){return _objectSpread({},fields,_defineProperty({},fieldName,_objectSpread({},fields[fieldName],{selected:true})))})).case(deselectField,(function(fields,fieldName){return _objectSpread({},fields,_defineProperty({},fieldName,_objectSpread({},fields[fieldName],{selected:false})))})).build();exports.fieldsReducer=fieldsReducer;var fieldMapSelector=function fieldMapSelector(state){return state.fields};exports.fieldMapSelector=fieldMapSelector;var fieldsSelector=(0,_reselect.createSelector)(fieldMapSelector,(function(fields){return Object.values(fields)}));exports.fieldsSelector=fieldsSelector;var selectedFieldsSelector=(0,_reselect.createSelector)(fieldsSelector,(function(fields){return fields.filter((function(field){return field.selected}))}));exports.selectedFieldsSelector=selectedFieldsSelector;var liveResponseFieldsSelector=(0,_reselect.createSelector)(selectedFieldsSelector,(function(fields){return fields.filter((function(field){return field.hopSize&&field.hopSize>0}))}));exports.liveResponseFieldsSelector=liveResponseFieldsSelector;var hasFieldsSelector=(0,_reselect.createSelector)(selectedFieldsSelector,(function(fields){return fields.length>0}));exports.hasFieldsSelector=hasFieldsSelector;var updateSaveButtonSaga=function updateSaveButtonSaga(_ref2){var _marked=regeneratorRuntime.mark(notify);var notifyAngular=_ref2.notifyAngular;function notify(){return regeneratorRuntime.wrap((function notify$(_context){while(1){switch(_context.prev=_context.next){case 0:notifyAngular();case 1:case"end":return _context.stop()}}}),_marked)}return(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return(0,_effects.takeLatest)((0,_helpers.matchesOne)(selectField,deselectField),notify);case 2:case"end":return _context2.stop()}}}),_callee)})))};exports.updateSaveButtonSaga=updateSaveButtonSaga;var syncFieldsSaga=function syncFieldsSaga(_ref3){var _marked2=regeneratorRuntime.mark(syncFields);var getWorkspace=_ref3.getWorkspace,setLiveResponseFields=_ref3.setLiveResponseFields;function syncFields(){var workspace,currentState;return regeneratorRuntime.wrap((function syncFields$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:workspace=getWorkspace();if(workspace){_context3.next=3;break}return _context3.abrupt("return");case 3:_context3.next=5;return(0,_effects.select)();case 5:currentState=_context3.sent;workspace.options.vertex_fields=selectedFieldsSelector(currentState);setLiveResponseFields(liveResponseFieldsSelector(currentState));case 8:case"end":return _context3.stop()}}}),_marked2)}return(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return(0,_effects.takeEvery)((0,_helpers.matchesOne)(loadFields,selectField,deselectField,updateFieldProperties),syncFields);case 2:case"end":return _context4.stop()}}}),_callee2)})))};exports.syncFieldsSaga=syncFieldsSaga;var syncNodeStyleSaga=function syncNodeStyleSaga(_ref4){var _marked3=regeneratorRuntime.mark(syncNodeStyle);var getWorkspace=_ref4.getWorkspace,notifyAngular=_ref4.notifyAngular;function syncNodeStyle(action){var workspace,newColor,newIcon,selectedFields;return regeneratorRuntime.wrap((function syncNodeStyle$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:workspace=getWorkspace();if(workspace){_context5.next=3;break}return _context5.abrupt("return");case 3:newColor=action.payload.fieldProperties.color;if(newColor){workspace.nodes.forEach((function(node){if(node.data.field===action.payload.fieldName){node.color=newColor}}))}newIcon=action.payload.fieldProperties.icon;if(newIcon){workspace.nodes.forEach((function(node){if(node.data.field===action.payload.fieldName){node.icon=newIcon}}))}notifyAngular();_context5.t0=selectedFieldsSelector;_context5.next=11;return(0,_effects.select)();case 11:_context5.t1=_context5.sent;selectedFields=(0,_context5.t0)(_context5.t1);workspace.options.vertex_fields=selectedFields;case 14:case"end":return _context5.stop()}}}),_marked3)}return(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return(0,_effects.takeLatest)(updateFieldProperties.match,syncNodeStyle);case 2:case"end":return _context6.stop()}}}),_callee3)})))};exports.syncNodeStyleSaga=syncNodeStyleSaga},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"OnSaveProps",{enumerable:true,get:function get(){return _save_modal.OnSaveProps}});Object.defineProperty(exports,"SavedObjectSaveModal",{enumerable:true,get:function get(){return _save_modal.SavedObjectSaveModal}});Object.defineProperty(exports,"SaveResult",{enumerable:true,get:function get(){return _save_modal.SaveResult}});Object.defineProperty(exports,"showSaveModal",{enumerable:true,get:function get(){return _save_modal.showSaveModal}});Object.defineProperty(exports,"getSavedObjectFinder",{enumerable:true,get:function get(){return _finder.getSavedObjectFinder}});Object.defineProperty(exports,"SavedObjectFinderUi",{enumerable:true,get:function get(){return _finder.SavedObjectFinderUi}});Object.defineProperty(exports,"SavedObjectMetaData",{enumerable:true,get:function get(){return _finder.SavedObjectMetaData}});Object.defineProperty(exports,"SavedObjectLoader",{enumerable:true,get:function get(){return _saved_object.SavedObjectLoader}});Object.defineProperty(exports,"createSavedObjectClass",{enumerable:true,get:function get(){return _saved_object.createSavedObjectClass}});Object.defineProperty(exports,"checkForDuplicateTitle",{enumerable:true,get:function get(){return _saved_object.checkForDuplicateTitle}});Object.defineProperty(exports,"saveWithConfirmation",{enumerable:true,get:function get(){return _saved_object.saveWithConfirmation}});Object.defineProperty(exports,"isErrorNonFatal",{enumerable:true,get:function get(){return _saved_object.isErrorNonFatal}});Object.defineProperty(exports,"SavedObjectSaveOpts",{enumerable:true,get:function get(){return _types.SavedObjectSaveOpts}});Object.defineProperty(exports,"SavedObjectKibanaServices",{enumerable:true,get:function get(){return _types.SavedObjectKibanaServices}});Object.defineProperty(exports,"SavedObject",{enumerable:true,get:function get(){return _types.SavedObject}});exports.plugin=void 0;var _plugin=__webpack_require__(346);var _save_modal=__webpack_require__(352);var _finder=__webpack_require__(355);var _saved_object=__webpack_require__(357);var _types=__webpack_require__(694);var plugin=function plugin(){return new _plugin.SavedObjectsPublicPlugin};exports.plugin=plugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IEsSearchRequest",{enumerable:true,get:function get(){return _es_search.IEsSearchRequest}});Object.defineProperty(exports,"IEsSearchResponse",{enumerable:true,get:function get(){return _es_search.IEsSearchResponse}});Object.defineProperty(exports,"ES_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _es_search.ES_SEARCH_STRATEGY}});Object.defineProperty(exports,"IKibanaSearchResponse",{enumerable:true,get:function get(){return _types.IKibanaSearchResponse}});Object.defineProperty(exports,"IKibanaSearchRequest",{enumerable:true,get:function get(){return _types.IKibanaSearchRequest}});exports.DEFAULT_SEARCH_STRATEGY=void 0;var _es_search=__webpack_require__(228);var _types=__webpack_require__(442);var DEFAULT_SEARCH_STRATEGY=_es_search.ES_SEARCH_STRATEGY;exports.DEFAULT_SEARCH_STRATEGY=DEFAULT_SEARCH_STRATEGY},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseEsInterval=parseEsInterval;var _datemath=_interopRequireDefault(__webpack_require__(110));var _invalid_es_calendar_interval_error=__webpack_require__(229);var _invalid_es_interval_format_error=__webpack_require__(230);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ES_INTERVAL_STRING_REGEX=new RegExp("^([1-9][0-9]*)\\s*("+_datemath.default.units.join("|")+")$");function parseEsInterval(interval){var matches=String(interval).trim().match(ES_INTERVAL_STRING_REGEX);if(!matches){throw new _invalid_es_interval_format_error.InvalidEsIntervalFormatError(interval)}var value=parseFloat(matches[1]);var unit=matches[2];var type=_datemath.default.unitsMap[unit].type;if(type==="calendar"&&value!==1){throw new _invalid_es_calendar_interval_error.InvalidEsCalendarIntervalError(interval,value,unit,type)}return{value:value,unit:unit,type:type==="mixed"&&value===1||type==="calendar"?"calendar":"fixed"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertDateRangeToString=convertDateRangeToString;function convertDateRangeToString(_ref,format){var from=_ref.from,to=_ref.to;if(!from){return"Before "+format(to)}else if(!to){return"After "+format(from)}else{return format(from)+" to "+format(to)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertIPRangeToString=void 0;var convertIPRangeToString=function convertIPRangeToString(range,format){if(range.type==="mask"){return format(range.mask)}var from=range.from?format(range.from):"-Infinity";var to=range.to?format(range.to):"Infinity";return"".concat(from," to ").concat(to)};exports.convertIPRangeToString=convertIPRangeToString},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={getTitle:true,validateIndexPattern:true,IndexPatternMissingIndices:true,getFromSavedObject:true,isDefault:true};Object.defineProperty(exports,"getTitle",{enumerable:true,get:function get(){return _get_title.getTitle}});Object.defineProperty(exports,"validateIndexPattern",{enumerable:true,get:function get(){return _validate_index_pattern.validateIndexPattern}});Object.defineProperty(exports,"IndexPatternMissingIndices",{enumerable:true,get:function get(){return _errors.IndexPatternMissingIndices}});Object.defineProperty(exports,"getFromSavedObject",{enumerable:true,get:function get(){return _get_from_saved_object.getFromSavedObject}});Object.defineProperty(exports,"isDefault",{enumerable:true,get:function get(){return _is_default.isDefault}});var _get_title=__webpack_require__(505);var _types=__webpack_require__(247);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _validate_index_pattern=__webpack_require__(506);var _errors=__webpack_require__(507);var _get_from_saved_object=__webpack_require__(508);var _is_default=__webpack_require__(509)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _agg_config=__webpack_require__(142);Object.keys(_agg_config).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_config[key]}})}));var _agg_configs=__webpack_require__(260);Object.keys(_agg_configs).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_configs[key]}})}));var _agg_groups=__webpack_require__(172);Object.keys(_agg_groups).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_groups[key]}})}));var _agg_type=__webpack_require__(144);Object.keys(_agg_type).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_type[key]}})}));var _agg_types=__webpack_require__(523);Object.keys(_agg_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_types[key]}})}));var _agg_types_registry=__webpack_require__(650);Object.keys(_agg_types_registry).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_types_registry[key]}})}));var _buckets=__webpack_require__(651);Object.keys(_buckets).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _buckets[key]}})}));var _filter=__webpack_require__(257);Object.keys(_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filter[key]}})}));var _metrics=__webpack_require__(652);Object.keys(_metrics).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _metrics[key]}})}));var _param_types=__webpack_require__(283);Object.keys(_param_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _param_types[key]}})}));var _types=__webpack_require__(655);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _utils=__webpack_require__(282);Object.keys(_utils).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _utils[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggConfig=void 0;var _lodash=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _agg_params=__webpack_require__(143);var _common=__webpack_require__(93);var _services=__webpack_require__(95);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggConfig=function(){_createClass(AggConfig,null,[{key:"ensureIds",value:function ensureIds(list){var have=[];var haveNot=[];list.forEach((function(obj){(obj.id?have:haveNot).push(obj)}));var nextId=AggConfig.nextId(have);haveNot.forEach((function(obj){obj.id=String(nextId++)}));return list}},{key:"nextId",value:function nextId(list){return 1+list.reduce((function(max,obj){return Math.max(max,+obj.id||0)}),0)}}]);function AggConfig(aggConfigs,opts){_classCallCheck(this,AggConfig);_defineProperty(this,"aggConfigs",void 0);_defineProperty(this,"id",void 0);_defineProperty(this,"enabled",void 0);_defineProperty(this,"params",void 0);_defineProperty(this,"parent",void 0);_defineProperty(this,"brandNew",void 0);_defineProperty(this,"schema",void 0);_defineProperty(this,"__type",void 0);_defineProperty(this,"__typeDecorations",void 0);_defineProperty(this,"subAggs",[]);this.aggConfigs=aggConfigs;this.id=String(opts.id||AggConfig.nextId(aggConfigs.aggs));this.enabled=typeof opts.enabled==="boolean"?opts.enabled:true;this.params={};this.setType(opts.type);if(opts.schema){this.schema=opts.schema}this.setParams(opts.params||{});this.__type=this.__type}_createClass(AggConfig,[{key:"setParams",value:function setParams(from){var _this=this;from=from||this.params||{};var to=this.params={};this.getAggParams().forEach((function(aggParam){var val=from[aggParam.name];if(val==null){if(aggParam.default==null)return;if(!_lodash.default.isFunction(aggParam.default)){val=aggParam.default}else{val=aggParam.default(_this);if(val==null)return}}if(aggParam.deserialize){var isTyped=_lodash.default.isFunction(aggParam.valueType);var isType=isTyped&&val instanceof aggParam.valueType;var isObject=!isTyped&&_lodash.default.isObject(val);var isDeserialized=isType||isObject;if(!isDeserialized){val=aggParam.deserialize(val,_this)}to[aggParam.name]=val;return}to[aggParam.name]=_lodash.default.cloneDeep(val)}))}},{key:"getParam",value:function getParam(key){return _lodash.default.get(this.params,key)}},{key:"write",value:function write(aggs){return(0,_agg_params.writeParams)(this.type.params,this,aggs)}},{key:"isFilterable",value:function isFilterable(){return _lodash.default.isFunction(this.type.createFilter)}},{key:"createFilter",value:function createFilter(key){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var createFilter=this.type.createFilter;if(!createFilter){throw new TypeError('The "'.concat(this.type.title,'" aggregation does not support filtering.'))}var field=this.getField();var label=this.getFieldDisplayName();if(field&&!field.filterable){var message='The "'.concat(label,'" field can not be used for filtering.');if(field.scripted){message='The "'.concat(label,'" field is scripted and can not be used for filtering.')}throw new TypeError(message)}return createFilter(this,key,params)}},{key:"onSearchRequestStart",value:function onSearchRequestStart(searchSource,options){var _this2=this;if(!this.type){return Promise.resolve()}return Promise.all(this.type.params.map((function(param){return param.modifyAggConfigOnSearchRequestStart(_this2,searchSource,options)})))}},{key:"toDsl",value:function toDsl(aggConfigs){if(this.type.hasNoDsl)return;var output=this.write(aggConfigs);var configDsl={};configDsl[this.type.dslName||this.type.name]=output.params;if(this.subAggs.length&&!output.subAggs)output.subAggs=this.subAggs;if(output.subAggs){var subDslLvl=configDsl.aggs||(configDsl.aggs={});output.subAggs.forEach((function nestAdhocSubAggs(subAggConfig){subDslLvl[subAggConfig.id]=subAggConfig.toDsl(aggConfigs)}))}if(output.parentAggs){var _subDslLvl=configDsl.parentAggs||(configDsl.parentAggs={});output.parentAggs.forEach((function nestAdhocSubAggs(subAggConfig){_subDslLvl[subAggConfig.id]=subAggConfig.toDsl(aggConfigs)}))}return configDsl}},{key:"toJSON",value:function toJSON(){var _this3=this;var params=this.params;var outParams=_lodash.default.transform(this.getAggParams(),(function(out,aggParam){var val=params[aggParam.name];if(val==null)return;if(aggParam.serialize)val=aggParam.serialize(val,_this3);if(val==null)return;out[aggParam.name]=_lodash.default.cloneDeep(val)}),{});return{id:this.id,enabled:this.enabled,type:this.type&&this.type.name,schema:this.schema,params:outParams}}},{key:"getAggParams",value:function getAggParams(){return _toConsumableArray(_lodash.default.has(this,"type.params")?this.type.params:[])}},{key:"getRequestAggs",value:function getRequestAggs(){return this.type&&this.type.getRequestAggs(this)||[this]}},{key:"getResponseAggs",value:function getResponseAggs(){return this.type&&this.type.getResponseAggs(this)||[this]}},{key:"getValue",value:function getValue(bucket){return this.type.getValue(this,bucket)}},{key:"getKey",value:function getKey(bucket,key){if(this.type.getKey){return this.type.getKey(bucket,key,this)}else{return""}}},{key:"getFieldDisplayName",value:function getFieldDisplayName(){var field=this.getField();return field?field.displayName||this.fieldName():""}},{key:"getField",value:function getField(){return this.params.field}},{key:"makeLabel",value:function makeLabel(){var percentageMode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.params.customLabel){return this.params.customLabel}if(!this.type)return"";return percentageMode?_i18n.i18n.translate("data.search.aggs.percentageOfLabel",{defaultMessage:"Percentage of {label}",values:{label:this.type.makeLabel(this)}}):"".concat(this.type.makeLabel(this))}},{key:"getIndexPattern",value:function getIndexPattern(){return this.aggConfigs.indexPattern}},{key:"getTimeRange",value:function getTimeRange(){return this.aggConfigs.timeRange}},{key:"fieldFormatter",value:function fieldFormatter(contentType,defaultFormat){var format=this.type&&this.type.getFormat(this);if(format){return format.getConverterFor(contentType)}return this.fieldOwnFormatter(contentType,defaultFormat)}},{key:"fieldOwnFormatter",value:function fieldOwnFormatter(contentType,defaultFormat){var fieldFormatsService=(0,_services.getFieldFormats)();var field=this.getField();var format=field&&field.format;if(!format)format=defaultFormat;if(!format)format=fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.STRING);return format.getConverterFor(contentType)}},{key:"fieldName",value:function fieldName(){var field=this.getField();return field?field.name:""}},{key:"fieldIsTimeField",value:function fieldIsTimeField(){var indexPattern=this.getIndexPattern();if(!indexPattern)return false;var timeFieldName=indexPattern.timeFieldName;return timeFieldName&&this.fieldName()===timeFieldName}},{key:"setType",value:function setType(type){this.type=type}},{key:"type",get:function get(){return this.__type},set:function set(type){var _this4=this;if(this.__typeDecorations){_lodash.default.forOwn(this.__typeDecorations,(function(prop,name){delete this[name]}),this)}if(type&&_lodash.default.isFunction(type.decorateAggConfig)){this.__typeDecorations=type.decorateAggConfig();Object.defineProperties(this,this.__typeDecorations)}this.__type=type;var availableFields=[];var fieldParam=this.type&&this.type.params.find((function(p){return p.type==="field"}));if(fieldParam){availableFields=fieldParam.getAvailableFields(this)}this.setParams({field:availableFields.find((function(field){return field.name===_this4.getField()}))})}}]);return AggConfig}();exports.AggConfig=AggConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.writeParams=exports.initParams=void 0;var _agg=__webpack_require__(255);var _field=__webpack_require__(256);var _optioned=__webpack_require__(171);var _string=__webpack_require__(258);var _json=__webpack_require__(259);var _base=__webpack_require__(111);var paramTypeMap={field:_field.FieldParamType,optioned:_optioned.OptionedParamType,string:_string.StringParamType,json:_json.JsonParamType,agg:_agg.AggParamType,_default:_base.BaseParamType};var initParams=function initParams(params){return params.map((function(config){var Class=paramTypeMap[config.type]||paramTypeMap._default;return new Class(config)}))};exports.initParams=initParams;var writeParams=function writeParams(){var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var aggConfig=arguments.length>1?arguments[1]:undefined;var aggs=arguments.length>2?arguments[2]:undefined;var locals=arguments.length>3?arguments[3]:undefined;var output={params:{}};locals=locals||{};params.forEach((function(param){if(param.write){param.write(aggConfig,output,aggs,locals)}else{if(param&&param.name){output.params[param.name]=aggConfig.params[param.name]}}}));return output};exports.writeParams=writeParams},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggType=void 0;var _lodash=__webpack_require__(0);var _i18n=__webpack_require__(1);var _agg_params=__webpack_require__(143);var _base=__webpack_require__(111);var _common=__webpack_require__(93);var _services=__webpack_require__(95);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getFormat=function getFormat(agg){var field=agg.getField();var fieldFormatsService=(0,_services.getFieldFormats)();return field?field.format:fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.STRING)};var AggType=function AggType(config){var _this=this;_classCallCheck(this,AggType);_defineProperty(this,"name",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"subtype",void 0);_defineProperty(this,"dslName",void 0);_defineProperty(this,"title",void 0);_defineProperty(this,"makeLabel",void 0);_defineProperty(this,"ordered",void 0);_defineProperty(this,"hasNoDsl",void 0);_defineProperty(this,"createFilter",void 0);_defineProperty(this,"params",void 0);_defineProperty(this,"getRequestAggs",void 0);_defineProperty(this,"getResponseAggs",void 0);_defineProperty(this,"decorateAggConfig",void 0);_defineProperty(this,"postFlightRequest",void 0);_defineProperty(this,"getFormat",void 0);_defineProperty(this,"getValue",void 0);_defineProperty(this,"getKey",void 0);_defineProperty(this,"paramByName",(function(name){return _this.params.find((function(p){return p.name===name}))}));this.name=config.name;this.type=config.type||"metrics";this.dslName=config.dslName||config.name;this.title=config.title;this.makeLabel=config.makeLabel||(0,_lodash.constant)(this.name);this.ordered=config.ordered;this.hasNoDsl=!!config.hasNoDsl;if(config.createFilter){this.createFilter=config.createFilter}if(config.params&&config.params.length&&config.params[0]instanceof _base.BaseParamType){this.params=config.params}else{var _params=config.params?_toConsumableArray(config.params):[];_params.push({name:"json",type:"json",advanced:true});if(config.customLabels!==false){_params.push({name:"customLabel",displayName:_i18n.i18n.translate("data.search.aggs.string.customLabel",{defaultMessage:"Custom label"}),type:"string",write:_lodash.noop})}this.params=(0,_agg_params.initParams)(_params)}this.getRequestAggs=config.getRequestAggs||_lodash.noop;this.getResponseAggs=config.getResponseAggs||function(){};this.decorateAggConfig=config.decorateAggConfig||function(){return{}};this.postFlightRequest=config.postFlightRequest||_lodash.identity;this.getFormat=config.getFormat||getFormat;this.getValue=config.getValue||function(agg,bucket){}};exports.AggType=AggType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _esaggs=__webpack_require__(554);Object.keys(_esaggs).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _esaggs[key]}})}));var _utils=__webpack_require__(177);Object.keys(_utils).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _utils[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SuggestionsComponent",{enumerable:true,get:function get(){return _typeahead.SuggestionsComponent}});Object.defineProperty(exports,"IndexPatternSelect",{enumerable:true,get:function get(){return _index_pattern_select.IndexPatternSelect}});Object.defineProperty(exports,"FilterBar",{enumerable:true,get:function get(){return _filter_bar.FilterBar}});Object.defineProperty(exports,"QueryStringInput",{enumerable:true,get:function get(){return _query_string_input.QueryStringInput}});Object.defineProperty(exports,"SearchBar",{enumerable:true,get:function get(){return _search_bar.SearchBar}});Object.defineProperty(exports,"SearchBarProps",{enumerable:true,get:function get(){return _search_bar.SearchBarProps}});Object.defineProperty(exports,"StatefulSearchBarProps",{enumerable:true,get:function get(){return _search_bar.StatefulSearchBarProps}});Object.defineProperty(exports,"ShardFailureOpenModalButton",{enumerable:true,get:function get(){return _shard_failure_modal.ShardFailureOpenModalButton}});Object.defineProperty(exports,"ShardFailureRequest",{enumerable:true,get:function get(){return _shard_failure_modal.ShardFailureRequest}});Object.defineProperty(exports,"ShardFailureResponse",{enumerable:true,get:function get(){return _shard_failure_modal.ShardFailureResponse}});Object.defineProperty(exports,"SavedQueryManagementComponent",{enumerable:true,get:function get(){return _saved_query_management.SavedQueryManagementComponent}});Object.defineProperty(exports,"SaveQueryForm",{enumerable:true,get:function get(){return _saved_query_form.SaveQueryForm}});Object.defineProperty(exports,"SavedQueryMeta",{enumerable:true,get:function get(){return _saved_query_form.SavedQueryMeta}});var _typeahead=__webpack_require__(561);var _index_pattern_select=__webpack_require__(274);var _filter_bar=__webpack_require__(165);var _query_string_input=__webpack_require__(275);var _search_bar=__webpack_require__(567);var _shard_failure_modal=__webpack_require__(575);var _saved_query_management=__webpack_require__(581);var _saved_query_form=__webpack_require__(584)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.syncSearchStrategyProvider=exports.SYNC_SEARCH_STRATEGY=void 0;var _rxjs=__webpack_require__(17);var _operators=__webpack_require__(85);var SYNC_SEARCH_STRATEGY="SYNC_SEARCH_STRATEGY";exports.SYNC_SEARCH_STRATEGY=SYNC_SEARCH_STRATEGY;var syncSearchStrategyProvider=function syncSearchStrategyProvider(context){var loadingCount$=new _rxjs.BehaviorSubject(0);context.core.http.addLoadingCountSource(loadingCount$);var search=function search(request){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};loadingCount$.next(loadingCount$.getValue()+1);return(0,_rxjs.from)(context.core.http.fetch({path:"/internal/search/".concat(request.serverStrategy),method:"POST",body:JSON.stringify(request),signal:options.signal})).pipe((0,_operators.finalize)((function(){return loadingCount$.next(loadingCount$.getValue()-1)})))};return{search:search}};exports.syncSearchStrategyProvider=syncSearchStrategyProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;Object.defineProperty(exports,"UiActionsSetup",{enumerable:true,get:function get(){return _plugin.UiActionsSetup}});Object.defineProperty(exports,"UiActionsStart",{enumerable:true,get:function get(){return _plugin.UiActionsStart}});Object.defineProperty(exports,"UiActionsServiceParams",{enumerable:true,get:function get(){return _service.UiActionsServiceParams}});Object.defineProperty(exports,"UiActionsService",{enumerable:true,get:function get(){return _service.UiActionsService}});Object.defineProperty(exports,"Action",{enumerable:true,get:function get(){return _actions.Action}});Object.defineProperty(exports,"createAction",{enumerable:true,get:function get(){return _actions.createAction}});Object.defineProperty(exports,"IncompatibleActionError",{enumerable:true,get:function get(){return _actions.IncompatibleActionError}});Object.defineProperty(exports,"ActionByType",{enumerable:true,get:function get(){return _actions.ActionByType}});Object.defineProperty(exports,"buildContextMenuForActions",{enumerable:true,get:function get(){return _context_menu.buildContextMenuForActions}});Object.defineProperty(exports,"Trigger",{enumerable:true,get:function get(){return _triggers.Trigger}});Object.defineProperty(exports,"TriggerContext",{enumerable:true,get:function get(){return _triggers.TriggerContext}});Object.defineProperty(exports,"SELECT_RANGE_TRIGGER",{enumerable:true,get:function get(){return _triggers.SELECT_RANGE_TRIGGER}});Object.defineProperty(exports,"selectRangeTrigger",{enumerable:true,get:function get(){return _triggers.selectRangeTrigger}});Object.defineProperty(exports,"VALUE_CLICK_TRIGGER",{enumerable:true,get:function get(){return _triggers.VALUE_CLICK_TRIGGER}});Object.defineProperty(exports,"valueClickTrigger",{enumerable:true,get:function get(){return _triggers.valueClickTrigger}});Object.defineProperty(exports,"APPLY_FILTER_TRIGGER",{enumerable:true,get:function get(){return _triggers.APPLY_FILTER_TRIGGER}});Object.defineProperty(exports,"applyFilterTrigger",{enumerable:true,get:function get(){return _triggers.applyFilterTrigger}});Object.defineProperty(exports,"TriggerContextMapping",{enumerable:true,get:function get(){return _types.TriggerContextMapping}});Object.defineProperty(exports,"TriggerId",{enumerable:true,get:function get(){return _types.TriggerId}});Object.defineProperty(exports,"ActionContextMapping",{enumerable:true,get:function get(){return _types.ActionContextMapping}});Object.defineProperty(exports,"ActionType",{enumerable:true,get:function get(){return _types.ActionType}});var _plugin=__webpack_require__(664);var _service=__webpack_require__(289);var _actions=__webpack_require__(672);var _context_menu=__webpack_require__(292);var _triggers=__webpack_require__(178);var _types=__webpack_require__(676);function plugin(initializerContext){return new _plugin.UiActionsPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.colorChoices=exports.urlTemplateIconChoicesByClass=exports.urlTemplateIconChoices=exports.iconChoicesByClass=exports.getSuitableIcon=exports.iconChoices=void 0;var _i18n=__webpack_require__(1);var _services=__webpack_require__(87);var iconChoices=[{class:"fa-folder-open-o",code:"",patterns:[/category/i,/folder/i,/group/i],label:_i18n.i18n.translate("xpack.graph.icon.folderOpen",{defaultMessage:"Folder open"})},{class:"fa-cube",code:"",patterns:[/prod/i,/sku/i],label:_i18n.i18n.translate("xpack.graph.icon.cube",{defaultMessage:"Cube"})},{class:"fa-key",code:"",patterns:[/key/i],label:_i18n.i18n.translate("xpack.graph.icon.key",{defaultMessage:"Key"})},{class:"fa-bank",code:"",patterns:[/bank/i,/account/i],label:_i18n.i18n.translate("xpack.graph.icon.bank",{defaultMessage:"Bank"})},{class:"fa-automobile",code:"",patterns:[/car/i,/veh/i],label:_i18n.i18n.translate("xpack.graph.icon.automobile",{defaultMessage:"Automobile"})},{class:"fa-home",code:"",patterns:[/address/i,/home/i],label:_i18n.i18n.translate("xpack.graph.icon.home",{defaultMessage:"Home"})},{class:"fa-question",code:"",patterns:[/query/i,/search/i],label:_i18n.i18n.translate("xpack.graph.icon.question",{defaultMessage:"Question"})},{class:"fa-plane",code:"",patterns:[/flight/i,/plane/i],label:_i18n.i18n.translate("xpack.graph.icon.plane",{defaultMessage:"Plane"})},{class:"fa-file-o",code:"",patterns:[/file/i,/doc/i],label:_i18n.i18n.translate("xpack.graph.icon.file",{defaultMessage:"File open"})},{class:"fa-user",code:"",patterns:[/user/i,/person/i,/people/i,/owner/i,/cust/i,/participant/i,/party/i,/member/i],label:_i18n.i18n.translate("xpack.graph.icon.user",{defaultMessage:"User"})},{class:"fa-users",code:"",patterns:[/group/i,/team/i,/meeting/i],label:_i18n.i18n.translate("xpack.graph.icon.users",{defaultMessage:"Users"})},{class:"fa-music",code:"",patterns:[/artist/i,/sound/i,/music/i],label:_i18n.i18n.translate("xpack.graph.icon.music",{defaultMessage:"Music"})},{class:"fa-flag",code:"",patterns:[/country/i,/warn/i,/flag/i],label:_i18n.i18n.translate("xpack.graph.icon.flag",{defaultMessage:"Flag"})},{class:"fa-tag",code:"",patterns:[/tag/i,/label/i],label:"Tag"},{class:"fa-phone",code:"",patterns:[/phone/i],label:_i18n.i18n.translate("xpack.graph.icon.phone",{defaultMessage:"Phone"})},{class:"fa-desktop",code:"",patterns:[/host/i,/server/i],label:_i18n.i18n.translate("xpack.graph.icon.desktop",{defaultMessage:"Desktop"})},{class:"fa-font",code:"",patterns:[/text/i,/title/i,/body/i,/desc/i],label:_i18n.i18n.translate("xpack.graph.icon.font",{defaultMessage:"Font"})},{class:"fa-at",code:"",patterns:[/account/i,/email/i],label:_i18n.i18n.translate("xpack.graph.icon.at",{defaultMessage:"At"})},{class:"fa-heart",code:"",patterns:[/like/i,/favourite/i,/favorite/i],label:_i18n.i18n.translate("xpack.graph.icon.heart",{defaultMessage:"Heart"})},{class:"fa-bolt",code:"",patterns:[/action/i],label:_i18n.i18n.translate("xpack.graph.icon.bolt",{defaultMessage:"Bolt"})},{class:"fa-map-marker",code:"",patterns:[/location/i,/geo/i,/position/i],label:_i18n.i18n.translate("xpack.graph.icon.mapMarker",{defaultMessage:"Map marker"})},{class:"fa-exclamation",code:"",patterns:[/risk/i,/error/i,/warn/i],label:_i18n.i18n.translate("xpack.graph.icon.exclamation",{defaultMessage:"Exclamation"})},{class:"fa-industry",code:"",patterns:[/business/i,/company/i,/industry/i,/organisation/i],label:_i18n.i18n.translate("xpack.graph.icon.industry",{defaultMessage:"Industry"})}];exports.iconChoices=iconChoices;var getSuitableIcon=function getSuitableIcon(fieldName){return iconChoices.find((function(choice){return choice.patterns.some((function(pattern){return pattern.test(fieldName)}))}))||iconChoices[0]};exports.getSuitableIcon=getSuitableIcon;var iconChoicesByClass={};exports.iconChoicesByClass=iconChoicesByClass;iconChoices.forEach((function(icon){iconChoicesByClass[icon.class]=icon}));var urlTemplateIconChoices=[{class:"fa-line-chart",code:"",label:_i18n.i18n.translate("xpack.graph.icon.lineChart",{defaultMessage:"Line chart"})},{class:"fa-pie-chart",code:"",label:_i18n.i18n.translate("xpack.graph.icon.pieChart",{defaultMessage:"Pie chart"})},{class:"fa-area-chart",code:"",label:_i18n.i18n.translate("xpack.graph.icon.areaChart",{defaultMessage:"Area chart"})},{class:"fa-bar-chart",code:"",label:_i18n.i18n.translate("xpack.graph.icon.barChart",{defaultMessage:"Bar chart"})},{class:"fa-globe",code:"",label:_i18n.i18n.translate("xpack.graph.icon.globe",{defaultMessage:"Globe"})},{class:"fa-file-text-o",code:"",label:_i18n.i18n.translate("xpack.graph.icon.fileText",{defaultMessage:"File"})},{class:"fa-google",code:"",label:_i18n.i18n.translate("xpack.graph.icon.google",{defaultMessage:"Google"})},{class:"fa-eye",code:"",label:_i18n.i18n.translate("xpack.graph.icon.eye",{defaultMessage:"Eye"})},{class:"fa-tachometer",code:"",label:_i18n.i18n.translate("xpack.graph.icon.tachometer",{defaultMessage:"Tachometer"})},{class:"fa-info",code:"",label:_i18n.i18n.translate("xpack.graph.icon.info",{defaultMessage:"Info"})},{class:"fa-external-link",code:"",label:_i18n.i18n.translate("xpack.graph.icon.externalLink",{defaultMessage:"External link"})},{class:"fa-table",code:"",label:_i18n.i18n.translate("xpack.graph.icon.table",{defaultMessage:"Table"})},{class:"fa-list",code:"",label:_i18n.i18n.translate("xpack.graph.icon.list",{defaultMessage:"List"})},{class:"fa-share-alt",code:"",label:_i18n.i18n.translate("xpack.graph.icon.shareAlt",{defaultMessage:"Share alt"})}];exports.urlTemplateIconChoices=urlTemplateIconChoices;var urlTemplateIconChoicesByClass={};exports.urlTemplateIconChoicesByClass=urlTemplateIconChoicesByClass;urlTemplateIconChoices.forEach((function(icon){urlTemplateIconChoicesByClass[icon.class]=icon}));var colorChoices=(0,_services.euiPaletteColorBlind)();exports.colorChoices=colorChoices},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.syncSettingsSaga=exports.settingsSelector=exports.advancedSettingsReducer=exports.updateSettings=void 0;var _typescriptFsa=_interopRequireDefault(__webpack_require__(113));var _dist=__webpack_require__(130);var _effects=__webpack_require__(120);var _global=__webpack_require__(123);var _datasource=__webpack_require__(114);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var actionCreator=(0,_typescriptFsa.default)("x-pack/graph/advancedSettings");var updateSettings=actionCreator("UPDATE_SETTINGS");exports.updateSettings=updateSettings;var initialSettings={useSignificance:true,sampleSize:2e3,timeoutMillis:5e3,sampleDiversityField:undefined,maxValuesPerDoc:1,minDocCount:3};var advancedSettingsReducer=(0,_dist.reducerWithInitialState)(initialSettings).case(_global.reset,(function(){return initialSettings})).cases([_datasource.requestDatasource,_datasource.setDatasource],(function(_ref){var sampleDiversityField=_ref.sampleDiversityField,restSettings=_objectWithoutProperties(_ref,["sampleDiversityField"]);return _objectSpread({},restSettings)})).case(updateSettings,(function(_oldSettings,newSettings){return newSettings})).build();exports.advancedSettingsReducer=advancedSettingsReducer;var settingsSelector=function settingsSelector(state){return state.advancedSettings};exports.settingsSelector=settingsSelector;var syncSettingsSaga=function syncSettingsSaga(_ref2){var _marked=regeneratorRuntime.mark(syncSettings);var getWorkspace=_ref2.getWorkspace,notifyAngular=_ref2.notifyAngular;function syncSettings(action){var workspace;return regeneratorRuntime.wrap((function syncSettings$(_context){while(1){switch(_context.prev=_context.next){case 0:workspace=getWorkspace();if(workspace){_context.next=3;break}return _context.abrupt("return");case 3:workspace.options.exploreControls=action.payload;notifyAngular();case 5:case"end":return _context.stop()}}}),_marked)}return(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return(0,_effects.takeLatest)(updateSettings.match,syncSettings);case 2:case"end":return _context2.stop()}}}),_callee)})))};exports.syncSettingsSaga=syncSettingsSaga},,,,,,,,function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.buildInlineScriptForPhraseFilter=exports.getConvertedValueForField=exports.getPhraseScript=exports.buildPhraseFilter=exports.getPhraseFilterValue=exports.getPhraseFilterField=exports.isScriptedPhraseFilter=exports.isPhraseFilter=void 0;var _lodash=__webpack_require__(0);var isPhraseFilter=function isPhraseFilter(filter){var isMatchPhraseQuery=filter&&filter.query&&filter.query.match_phrase;var isDeprecatedMatchPhraseQuery=filter&&filter.query&&filter.query.match&&Object.values(filter.query.match).find((function(params){return params.type==="phrase"}));return Boolean(isMatchPhraseQuery||isDeprecatedMatchPhraseQuery)};exports.isPhraseFilter=isPhraseFilter;var isScriptedPhraseFilter=function isScriptedPhraseFilter(filter){return Boolean((0,_lodash.get)(filter,"script.script.params.value"))};exports.isScriptedPhraseFilter=isScriptedPhraseFilter;var getPhraseFilterField=function getPhraseFilterField(filter){var queryConfig=filter.query.match_phrase||filter.query.match;return Object.keys(queryConfig)[0]};exports.getPhraseFilterField=getPhraseFilterField;var getPhraseFilterValue=function getPhraseFilterValue(filter){var queryConfig=filter.query.match_phrase||filter.query.match;var queryValue=Object.values(queryConfig)[0];return(0,_lodash.isPlainObject)(queryValue)?queryValue.query:queryValue};exports.getPhraseFilterValue=getPhraseFilterValue;var buildPhraseFilter=function buildPhraseFilter(field,value,indexPattern){var convertedValue=getConvertedValueForField(field,value);if(field.scripted){return{meta:{index:indexPattern.id,field:field.name},script:getPhraseScript(field,value)}}else{return{meta:{index:indexPattern.id},query:{match_phrase:_defineProperty({},field.name,convertedValue)}}}};exports.buildPhraseFilter=buildPhraseFilter;var getPhraseScript=function getPhraseScript(field,value){var convertedValue=getConvertedValueForField(field,value);var script=buildInlineScriptForPhraseFilter(field);return{script:{source:script,lang:field.lang,params:{value:convertedValue}}}};exports.getPhraseScript=getPhraseScript;var getConvertedValueForField=function getConvertedValueForField(field,value){if(typeof value!=="boolean"&&field.type==="boolean"){if([1,"true"].includes(value)){return true}else if([0,"false"].includes(value)){return false}else{throw new Error("".concat(value," is not a valid boolean value for boolean field ").concat(field.name))}}return value};exports.getConvertedValueForField=getConvertedValueForField;var buildInlineScriptForPhraseFilter=function buildInlineScriptForPhraseFilter(scriptedField){if(scriptedField.lang==="painless"){return"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(scriptedField.script," }, params.value);")}else{return"(".concat(scriptedField.script,") == value")}};exports.buildInlineScriptForPhraseFilter=buildInlineScriptForPhraseFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFields=getFields;var literal=_interopRequireWildcard(__webpack_require__(124));var wildcard=_interopRequireWildcard(__webpack_require__(161));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function getFields(node,indexPattern){if(!indexPattern)return[];if(node.type==="literal"){var fieldName=literal.toElasticsearchQuery(node);var field=indexPattern.fields.find((function(fld){return fld.name===fieldName}));if(!field){return[]}return[field]}else if(node.type==="wildcard"){var fields=indexPattern.fields.filter((function(fld){return wildcard.test(node,fld.name)}));return fields}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNode=buildNode;exports.test=test;exports.toElasticsearchQuery=toElasticsearchQuery;exports.toQueryStringQuery=toQueryStringQuery;exports.hasLeadingWildcard=hasLeadingWildcard;exports.wildcardSymbol=void 0;var _ast=__webpack_require__(212);var wildcardSymbol="@kuery-wildcard@";exports.wildcardSymbol=wildcardSymbol;function escapeRegExp(str){return str.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function escapeQueryString(str){return str.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function buildNode(value){if(!value.includes(wildcardSymbol)){return(0,_ast.fromLiteralExpression)(value)}return{type:"wildcard",value:value}}function test(node,str){var value=node.value;var regex=value.split(wildcardSymbol).map(escapeRegExp).join("[\\s\\S]*");var regexp=new RegExp("^".concat(regex,"$"));return regexp.test(str)}function toElasticsearchQuery(node){var value=node.value;return value.split(wildcardSymbol).join("*")}function toQueryStringQuery(node){var value=node.value;return value.split(wildcardSymbol).map(escapeQueryString).join("*")}function hasLeadingWildcard(node){var value=node.value;return value.startsWith(wildcardSymbol)&&value.replace(wildcardSymbol,"").length>0}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTimeZoneFromSettings=getTimeZoneFromSettings;var _momentTimezone=_interopRequireDefault(__webpack_require__(86));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getTimeZoneFromSettings(dateFormatTZ){var detectedTimezone=_momentTimezone.default.tz.guess();return dateFormatTZ==="Browser"?detectedTimezone:dateFormatTZ}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FieldFormatsRegistry",{enumerable:true,get:function get(){return _field_formats_registry.FieldFormatsRegistry}});Object.defineProperty(exports,"FieldFormat",{enumerable:true,get:function get(){return _field_format.FieldFormat}});Object.defineProperty(exports,"baseFormatters",{enumerable:true,get:function get(){return _base_formatters.baseFormatters}});Object.defineProperty(exports,"BoolFormat",{enumerable:true,get:function get(){return _converters.BoolFormat}});Object.defineProperty(exports,"BytesFormat",{enumerable:true,get:function get(){return _converters.BytesFormat}});Object.defineProperty(exports,"ColorFormat",{enumerable:true,get:function get(){return _converters.ColorFormat}});Object.defineProperty(exports,"DateNanosFormat",{enumerable:true,get:function get(){return _converters.DateNanosFormat}});Object.defineProperty(exports,"DurationFormat",{enumerable:true,get:function get(){return _converters.DurationFormat}});Object.defineProperty(exports,"IpFormat",{enumerable:true,get:function get(){return _converters.IpFormat}});Object.defineProperty(exports,"NumberFormat",{enumerable:true,get:function get(){return _converters.NumberFormat}});Object.defineProperty(exports,"PercentFormat",{enumerable:true,get:function get(){return _converters.PercentFormat}});Object.defineProperty(exports,"RelativeDateFormat",{enumerable:true,get:function get(){return _converters.RelativeDateFormat}});Object.defineProperty(exports,"SourceFormat",{enumerable:true,get:function get(){return _converters.SourceFormat}});Object.defineProperty(exports,"StaticLookupFormat",{enumerable:true,get:function get(){return _converters.StaticLookupFormat}});Object.defineProperty(exports,"UrlFormat",{enumerable:true,get:function get(){return _converters.UrlFormat}});Object.defineProperty(exports,"StringFormat",{enumerable:true,get:function get(){return _converters.StringFormat}});Object.defineProperty(exports,"TruncateFormat",{enumerable:true,get:function get(){return _converters.TruncateFormat}});Object.defineProperty(exports,"getHighlightRequest",{enumerable:true,get:function get(){return _utils.getHighlightRequest}});Object.defineProperty(exports,"serializeFieldFormat",{enumerable:true,get:function get(){return _utils.serializeFieldFormat}});Object.defineProperty(exports,"DEFAULT_CONVERTER_COLOR",{enumerable:true,get:function get(){return _color_default.DEFAULT_CONVERTER_COLOR}});Object.defineProperty(exports,"FIELD_FORMAT_IDS",{enumerable:true,get:function get(){return _types.FIELD_FORMAT_IDS}});Object.defineProperty(exports,"FieldFormatsGetConfigFn",{enumerable:true,get:function get(){return _types.FieldFormatsGetConfigFn}});Object.defineProperty(exports,"FieldFormatsContentType",{enumerable:true,get:function get(){return _types.FieldFormatsContentType}});Object.defineProperty(exports,"FieldFormatConfig",{enumerable:true,get:function get(){return _types.FieldFormatConfig}});Object.defineProperty(exports,"FieldFormatId",{enumerable:true,get:function get(){return _types.FieldFormatId}});Object.defineProperty(exports,"IFieldFormatType",{enumerable:true,get:function get(){return _types.IFieldFormatType}});Object.defineProperty(exports,"IFieldFormat",{enumerable:true,get:function get(){return _types.IFieldFormat}});Object.defineProperty(exports,"HTML_CONTEXT_TYPE",{enumerable:true,get:function get(){return _content_types.HTML_CONTEXT_TYPE}});Object.defineProperty(exports,"TEXT_CONTEXT_TYPE",{enumerable:true,get:function get(){return _content_types.TEXT_CONTEXT_TYPE}});var _field_formats_registry=__webpack_require__(400);var _field_format=__webpack_require__(99);var _base_formatters=__webpack_require__(219);var _converters=__webpack_require__(220);var _utils=__webpack_require__(118);var _color_default=__webpack_require__(221);var _types=__webpack_require__(98);var _content_types=__webpack_require__(217)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.NumeralFormat=void 0;var _numeral=_interopRequireDefault(__webpack_require__(412));var _languages=_interopRequireDefault(__webpack_require__(413));var _types=__webpack_require__(100);var _field_format=__webpack_require__(99);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var numeralInst=(0,_numeral.default)();_languages.default.forEach((function(numeralLanguage){_numeral.default.language(numeralLanguage.id,numeralLanguage.lang)}));var NumeralFormat=function(_field_format$FieldFo){_inherits(NumeralFormat,_field_format$FieldFo);function NumeralFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,NumeralFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(NumeralFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"id",void 0);_defineProperty(_assertThisInitialized(_this),"title",void 0);_defineProperty(_assertThisInitialized(_this),"getParamDefaults",(function(){return{pattern:_this.getConfig("format:".concat(_this.id,":defaultPattern"))}}));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){return _this.getConvertedValue(val)}));return _this}_createClass(NumeralFormat,[{key:"getConvertedValue",value:function getConvertedValue(val){if(val===-Infinity)return"-";if(val===+Infinity)return"+";if(typeof val!=="number"){val=parseFloat(val)}if(isNaN(val))return"";var previousLocale=_numeral.default.language();var defaultLocale=this.getConfig&&this.getConfig("format:number:defaultLocale")||"en";_numeral.default.language(defaultLocale);var formatted=numeralInst.set(val).format(this.param("pattern"));_numeral.default.language(previousLocale);return formatted}}]);return NumeralFormat}(_field_format.FieldFormat);exports.NumeralFormat=NumeralFormat;_defineProperty(NumeralFormat,"fieldType",_types.KBN_FIELD_TYPES.NUMBER)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FilterBar",{enumerable:true,get:function get(){return _filter_bar.FilterBar}});Object.defineProperty(exports,"FilterLabel",{enumerable:true,get:function get(){return _filter_label.FilterLabel}});var _filter_bar=__webpack_require__(453);var _filter_label=__webpack_require__(237)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GenericComboBox=GenericComboBox;var _eui=__webpack_require__(12);var _react=_interopRequireDefault(__webpack_require__(4));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function GenericComboBox(props){var options=props.options,selectedOptions=props.selectedOptions,getLabel=props.getLabel,onChange=props.onChange,otherProps=_objectWithoutProperties(props,["options","selectedOptions","getLabel","onChange"]);var labels=options.map(getLabel);var euiOptions=labels.map((function(label){return{label:label}}));var selectedEuiOptions=selectedOptions.filter((function(option){return options.indexOf(option)!==-1})).map((function(option){return euiOptions[options.indexOf(option)]}));var onComboBoxChange=function onComboBoxChange(newOptions){var newValues=newOptions.map((function(_ref){var label=_ref.label;return options[labels.indexOf(label)]}));onChange(newValues)};return _react.default.createElement(_eui.EuiComboBox,_extends({options:euiOptions,selectedOptions:selectedEuiOptions,onChange:onComboBoxChange},otherProps))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _persisted_log=__webpack_require__(465);Object.keys(_persisted_log).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _persisted_log[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={TimefilterService:true,TimefilterSetup:true,Timefilter:true,TimefilterContract:true,TimeHistory:true,TimeHistoryContract:true,getTime:true,changeTimeFilter:true,extractTimeFilter:true};Object.defineProperty(exports,"TimefilterService",{enumerable:true,get:function get(){return _timefilter_service.TimefilterService}});Object.defineProperty(exports,"TimefilterSetup",{enumerable:true,get:function get(){return _timefilter_service.TimefilterSetup}});Object.defineProperty(exports,"Timefilter",{enumerable:true,get:function get(){return _timefilter.Timefilter}});Object.defineProperty(exports,"TimefilterContract",{enumerable:true,get:function get(){return _timefilter.TimefilterContract}});Object.defineProperty(exports,"TimeHistory",{enumerable:true,get:function get(){return _time_history.TimeHistory}});Object.defineProperty(exports,"TimeHistoryContract",{enumerable:true,get:function get(){return _time_history.TimeHistoryContract}});Object.defineProperty(exports,"getTime",{enumerable:true,get:function get(){return _get_time.getTime}});Object.defineProperty(exports,"changeTimeFilter",{enumerable:true,get:function get(){return _change_time_filter.changeTimeFilter}});Object.defineProperty(exports,"extractTimeFilter",{enumerable:true,get:function get(){return _extract_time_filter.extractTimeFilter}});var _timefilter_service=__webpack_require__(484);var _types=__webpack_require__(485);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _timefilter=__webpack_require__(486);var _time_history=__webpack_require__(493);var _get_time=__webpack_require__(241);var _change_time_filter=__webpack_require__(494);var _extract_time_filter=__webpack_require__(495)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ILLEGAL_CHARACTERS_KEY",{enumerable:true,get:function get(){return _lib.ILLEGAL_CHARACTERS_KEY}});Object.defineProperty(exports,"CONTAINS_SPACES_KEY",{enumerable:true,get:function get(){return _lib.CONTAINS_SPACES_KEY}});Object.defineProperty(exports,"ILLEGAL_CHARACTERS_VISIBLE",{enumerable:true,get:function get(){return _lib.ILLEGAL_CHARACTERS_VISIBLE}});Object.defineProperty(exports,"ILLEGAL_CHARACTERS",{enumerable:true,get:function get(){return _lib.ILLEGAL_CHARACTERS}});Object.defineProperty(exports,"validateIndexPattern",{enumerable:true,get:function get(){return _lib.validateIndexPattern}});Object.defineProperty(exports,"getFromSavedObject",{enumerable:true,get:function get(){return _lib.getFromSavedObject}});Object.defineProperty(exports,"isDefault",{enumerable:true,get:function get(){return _lib.isDefault}});Object.defineProperty(exports,"getRoutes",{enumerable:true,get:function get(){return _utils.getRoutes}});Object.defineProperty(exports,"flattenHitWrapper",{enumerable:true,get:function get(){return _index_patterns.flattenHitWrapper}});Object.defineProperty(exports,"formatHitProvider",{enumerable:true,get:function get(){return _index_patterns.formatHitProvider}});Object.defineProperty(exports,"IndexPatternsService",{enumerable:true,get:function get(){return _index_patterns.IndexPatternsService}});Object.defineProperty(exports,"IndexPatternsContract",{enumerable:true,get:function get(){return _index_patterns.IndexPatternsContract}});Object.defineProperty(exports,"IndexPattern",{enumerable:true,get:function get(){return _index_patterns.IndexPattern}});Object.defineProperty(exports,"TypeMeta",{enumerable:true,get:function get(){return _index_patterns.TypeMeta}});Object.defineProperty(exports,"AggregationRestrictions",{enumerable:true,get:function get(){return _index_patterns.AggregationRestrictions}});Object.defineProperty(exports,"Field",{enumerable:true,get:function get(){return _fields.Field}});Object.defineProperty(exports,"FieldList",{enumerable:true,get:function get(){return _fields.FieldList}});var _lib=__webpack_require__(140);var _utils=__webpack_require__(248);var _index_patterns=__webpack_require__(510);var _fields=__webpack_require__(252)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"QuerySuggestion",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestion}});Object.defineProperty(exports,"QuerySuggestionTypes",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestionTypes}});Object.defineProperty(exports,"QuerySuggestionGetFn",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestionGetFn}});Object.defineProperty(exports,"QuerySuggestionGetFnArgs",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestionGetFnArgs}});Object.defineProperty(exports,"QuerySuggestionBasic",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestionBasic}});Object.defineProperty(exports,"QuerySuggestionField",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestionField}});Object.defineProperty(exports,"AutocompleteService",{enumerable:true,get:function get(){return _autocomplete_service.AutocompleteService}});Object.defineProperty(exports,"AutocompleteSetup",{enumerable:true,get:function get(){return _autocomplete_service.AutocompleteSetup}});Object.defineProperty(exports,"AutocompleteStart",{enumerable:true,get:function get(){return _autocomplete_service.AutocompleteStart}});var _query_suggestion_provider=__webpack_require__(517);var _autocomplete_service=__webpack_require__(518)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.OptionedParamType=void 0;var _base=__webpack_require__(111);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var OptionedParamType=function(_BaseParamType){_inherits(OptionedParamType,_BaseParamType);function OptionedParamType(config){var _this;_classCallCheck(this,OptionedParamType);_this=_possibleConstructorReturn(this,_getPrototypeOf(OptionedParamType).call(this,config));_defineProperty(_assertThisInitialized(_this),"options",void 0);if(!config.write){_this.write=function(aggConfig,output){output.params[_this.name]=aggConfig.params[_this.name].value}}if(!config.serialize){_this.serialize=function(selected){return selected.value}}if(!config.deserialize){_this.deserialize=function(value){return _this.options.find((function(option){return option.value===value}))}}_this.options=config.options||[];return _this}return OptionedParamType}(_base.BaseParamType);exports.OptionedParamType=OptionedParamType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aggGroupNamesMap=exports.AggGroupNames=void 0;var _i18n=__webpack_require__(1);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggGroupNames=Object.freeze({Buckets:"buckets",Metrics:"metrics",None:"none"});exports.AggGroupNames=AggGroupNames;var aggGroupNamesMap=function aggGroupNamesMap(){var _ref;return _ref={},_defineProperty(_ref,AggGroupNames.Metrics,_i18n.i18n.translate("data.search.aggs.aggGroups.metricsText",{defaultMessage:"Metrics"})),_defineProperty(_ref,AggGroupNames.Buckets,_i18n.i18n.translate("data.search.aggs.aggGroups.bucketsText",{defaultMessage:"Buckets"})),_ref};exports.aggGroupNamesMap=aggGroupNamesMap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.create=exports.getResponseAggConfigClass=void 0;var _lodash=__webpack_require__(0);var getResponseAggConfigClass=function getResponseAggConfigClass(agg,props){if(agg.$$_ResponseAggConfigClass){return agg.$$_ResponseAggConfigClass}else{return agg.$$_ResponseAggConfigClass=create(agg,props)}};exports.getResponseAggConfigClass=getResponseAggConfigClass;var create=function create(parentAgg,props){function ResponseAggConfig(key){var parentId=parentAgg.id;var id;var subId=String(key);if(subId.indexOf(".")>-1){id=parentId+"['"+subId.replace(/'/g,"\\'")+"']"}else{id=parentId+"."+subId}this.id=id;this.key=key;this.parentId=parentId}ResponseAggConfig.prototype=Object.create(parentAgg);ResponseAggConfig.prototype.constructor=ResponseAggConfig;(0,_lodash.assign)(ResponseAggConfig.prototype,props);return ResponseAggConfig};exports.create=create},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.migrateIncludeExcludeFormat=exports.isStringType=exports.isType=void 0;var _lodash=__webpack_require__(0);var isType=function isType(type){return function(agg){var field=agg.params.field;return field&&field.type===type}};exports.isType=isType;var isStringType=isType("string");exports.isStringType=isStringType;var migrateIncludeExcludeFormat={serialize:function serialize(value,agg){if(this.shouldShow&&!this.shouldShow(agg))return;if(!value||(0,_lodash.isString)(value))return value;else return value.pattern},write:function write(aggConfig,output){var value=aggConfig.getParam(this.name);if((0,_lodash.isObject)(value)){output.params[this.name]=value.pattern}else if(value&&isStringType(aggConfig)){output.params[this.name]=value}}};exports.migrateIncludeExcludeFormat=migrateIncludeExcludeFormat},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DataAdapter",{enumerable:true,get:function get(){return _data.DataAdapter}});Object.defineProperty(exports,"FormattedData",{enumerable:true,get:function get(){return _data.FormattedData}});Object.defineProperty(exports,"RequestAdapter",{enumerable:true,get:function get(){return _request.RequestAdapter}});Object.defineProperty(exports,"RequestStatus",{enumerable:true,get:function get(){return _request.RequestStatus}});var _data=__webpack_require__(617);var _request=__webpack_require__(620)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestStatus=void 0;var RequestStatus;exports.RequestStatus=RequestStatus;(function(RequestStatus){RequestStatus[RequestStatus["PENDING"]=0]="PENDING";RequestStatus[RequestStatus["OK"]=1]="OK";RequestStatus[RequestStatus["ERROR"]=2]="ERROR"})(RequestStatus||(exports.RequestStatus=RequestStatus={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _courier_inspector_stats=__webpack_require__(634);Object.keys(_courier_inspector_stats).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _courier_inspector_stats[key]}})}));var _serialize_agg_config=__webpack_require__(635);Object.keys(_serialize_agg_config).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _serialize_agg_config[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _trigger=__webpack_require__(668);Object.keys(_trigger).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _trigger[key]}})}));var _trigger_contract=__webpack_require__(291);Object.keys(_trigger_contract).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _trigger_contract[key]}})}));var _trigger_internal=__webpack_require__(290);Object.keys(_trigger_internal).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _trigger_internal[key]}})}));var _select_range_trigger=__webpack_require__(669);Object.keys(_select_range_trigger).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _select_range_trigger[key]}})}));var _value_click_trigger=__webpack_require__(670);Object.keys(_value_click_trigger).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _value_click_trigger[key]}})}));var _apply_filter_trigger=__webpack_require__(671);Object.keys(_apply_filter_trigger).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _apply_filter_trigger[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.confirmModalPromise=confirmModalPromise;var _react=_interopRequireDefault(__webpack_require__(4));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(12);var _public=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function confirmModalPromise(){var message=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var title=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var confirmBtnText=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var overlays=arguments.length>3?arguments[3]:undefined;return new Promise((function(resolve,reject){var cancelButtonText=_i18n.i18n.translate("savedObjects.confirmModal.cancelButtonLabel",{defaultMessage:"Cancel"});var modal=overlays.openModal((0,_public.toMountPoint)(_react.default.createElement(_eui.EuiConfirmModal,{onCancel:function onCancel(){modal.close();reject()},onConfirm:function onConfirm(){modal.close();resolve(true)},confirmButtonText:confirmBtnText,cancelButtonText:cancelButtonText,title:title},message)))}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _legacy_icon=__webpack_require__(703);Object.keys(_legacy_icon).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _legacy_icon[key]}})}))},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.syncTemplatesSaga=exports.templatesSelector=exports.urlTemplatesReducer=exports.removeTemplate=exports.saveTemplate=exports.loadTemplates=void 0;var _typescriptFsa=_interopRequireDefault(__webpack_require__(113));var _dist=__webpack_require__(130);var _i18n=__webpack_require__(1);var _risonNode=_interopRequireDefault(__webpack_require__(184));var _effects=__webpack_require__(120);var _url=__webpack_require__(21);var _global=__webpack_require__(123);var _datasource=__webpack_require__(114);var _outlink_encoders=__webpack_require__(185);var _url_template=__webpack_require__(186);var _helpers=__webpack_require__(302);var _utils=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var actionCreator=(0,_typescriptFsa.default)("x-pack/graph/urlTemplates");var loadTemplates=actionCreator("LOAD_TEMPLATES");exports.loadTemplates=loadTemplates;var saveTemplate=actionCreator("SAVE_TEMPLATE");exports.saveTemplate=saveTemplate;var removeTemplate=actionCreator("REMOVE_TEMPLATE");exports.removeTemplate=removeTemplate;var initialTemplates=[];function generateDefaultTemplate(datasource,addBasePath){var appPath=(0,_utils.modifyUrl)("/discover",(function(parsed){parsed.query._a=_risonNode.default.encode({columns:["_source"],index:datasource.id,interval:"auto",query:{language:"kuery",query:_url_template.urlTemplatePlaceholder},sort:["_score","desc"]})}));var parsedAppPath=(0,_url.parse)("/app/kibana#".concat(appPath),true,true);var formattedAppPath=(0,_url.format)({protocol:parsedAppPath.protocol,host:parsedAppPath.host,pathname:parsedAppPath.pathname,query:parsedAppPath.query,hash:parsedAppPath.hash});var discoverUrl=addBasePath(formattedAppPath).replace(encodeURIComponent(_url_template.urlTemplatePlaceholder),_url_template.urlTemplatePlaceholder);return{url:discoverUrl,description:_i18n.i18n.translate("xpack.graph.settings.drillDowns.defaultUrlTemplateTitle",{defaultMessage:"Raw documents"}),encoder:_outlink_encoders.outlinkEncoders[0],isDefault:true,icon:null}}var urlTemplatesReducer=function urlTemplatesReducer(addBasePath){return(0,_dist.reducerWithInitialState)(initialTemplates).case(_global.reset,(function(){return initialTemplates})).cases([_datasource.requestDatasource,_datasource.setDatasource],(function(templates,datasource){if(datasource.type==="none"){return initialTemplates}var customTemplates=templates.filter((function(template){return!template.isDefault}));return[].concat(_toConsumableArray(customTemplates),[generateDefaultTemplate(datasource,addBasePath)])})).case(loadTemplates,(function(_currentTemplates,newTemplates){return newTemplates})).case(saveTemplate,(function(templates,_ref){var indexToUpdate=_ref.index,updatedTemplate=_ref.template;var newTemplate=_objectSpread({},updatedTemplate,{isDefault:false});return indexToUpdate===-1?[].concat(_toConsumableArray(templates),[newTemplate]):templates.map((function(template,index){return index===indexToUpdate?newTemplate:template}))})).case(removeTemplate,(function(templates,templateToDelete){return templates.filter((function(template){return template!==templateToDelete}))})).build()};exports.urlTemplatesReducer=urlTemplatesReducer;var templatesSelector=function templatesSelector(state){return state.urlTemplates};exports.templatesSelector=templatesSelector;var syncTemplatesSaga=function syncTemplatesSaga(_ref2){var _marked=regeneratorRuntime.mark(syncTemplates);var setUrlTemplates=_ref2.setUrlTemplates,notifyAngular=_ref2.notifyAngular;function syncTemplates(){var templates;return regeneratorRuntime.wrap((function syncTemplates$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=templatesSelector;_context.next=3;return(0,_effects.select)();case 3:_context.t1=_context.sent;templates=(0,_context.t0)(_context.t1);setUrlTemplates(templates);notifyAngular();case 7:case"end":return _context.stop()}}}),_marked)}return(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return(0,_effects.takeEvery)((0,_helpers.matchesOne)(loadTemplates,saveTemplate,removeTemplate,_datasource.requestDatasource,_datasource.setDatasource),syncTemplates);case 2:case"end":return _context2.stop()}}}),_callee)})))};exports.syncTemplatesSaga=syncTemplatesSaga},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.outlinkEncoders=void 0;var _risonNode=_interopRequireDefault(__webpack_require__(184));var _i18n=__webpack_require__(1);var _kql_encoder=__webpack_require__(706);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var outlinkEncoders=[{id:"kql-loose",title:_i18n.i18n.translate("xpack.graph.outlinkEncoders.kqlLooseTitle",{defaultMessage:"KQL OR query"}),description:_i18n.i18n.translate("xpack.graph.outlinkEncoders.kqlLooseDescription",{defaultMessage:"KQL query, compatible with Discover, Visualize, and Dashboards"}),encode:function encode(workspace){return(0,_kql_encoder.asKQL)(workspace,"or")},type:"kql"},{id:"kql",title:_i18n.i18n.translate("xpack.graph.outlinkEncoders.kqlTitle",{defaultMessage:"KQL AND query"}),description:_i18n.i18n.translate("xpack.graph.outlinkEncoders.kqlLooseDescription",{defaultMessage:"KQL query, compatible with Discover, Visualize, and Dashboards"}),encode:function encode(workspace){return(0,_kql_encoder.asKQL)(workspace,"and")},type:"kql"},{id:"esq-rison-loose",title:_i18n.i18n.translate("xpack.graph.outlinkEncoders.esqRisonLooseTitle",{defaultMessage:"elasticsearch OR query (rison encoded)"}),description:_i18n.i18n.translate("xpack.graph.outlinkEncoders.esqRisonLooseDescription",{defaultMessage:"rison-encoded JSON, minimum_should_match=1, compatible with most Kibana URLs"}),encode:function encode(workspace){return encodeURIComponent(_risonNode.default.encode(workspace.getQuery(workspace.getSelectedOrAllNodes(),true)))},type:"esq"},{id:"esq-rison",title:_i18n.i18n.translate("xpack.graph.outlinkEncoders.esqRisonTitle",{defaultMessage:"elasticsearch AND query (rison encoded)"}),description:_i18n.i18n.translate("xpack.graph.outlinkEncoders.esqRisonDescription",{defaultMessage:"rison-encoded JSON, minimum_should_match=2, compatible with most Kibana URLs"}),encode:function encode(workspace){return encodeURIComponent(_risonNode.default.encode(workspace.getQuery(workspace.getSelectedOrAllNodes())))},type:"esq"},{id:"esq-similar-rison",title:_i18n.i18n.translate("xpack.graph.outlinkEncoders.esqSimilarRisonTitle",{defaultMessage:"elasticsearch more like this query (rison encoded)"}),description:_i18n.i18n.translate("xpack.graph.outlinkEncoders.esqSimilarRisonDescription",{defaultMessage:'rison-encoded JSON, "like this but not this" type query to find missing docs'}),encode:function encode(workspace){return encodeURIComponent(_risonNode.default.encode(workspace.getLikeThisButNotThisQuery(workspace.getSelectedOrAllNodes())))},type:"esq"},{id:"esq-plain",title:_i18n.i18n.translate("xpack.graph.outlinkEncoders.esqPlainTitle",{defaultMessage:"elasticsearch query (plain encoding)"}),description:_i18n.i18n.translate("xpack.graph.outlinkEncoders.esqPlainDescription",{defaultMessage:"JSON encoded using standard url encoding"}),encode:function encode(workspace){return encodeURIComponent(JSON.stringify(workspace.getQuery(workspace.getSelectedOrAllNodes())))},type:"esq"},{id:"text-plain",title:_i18n.i18n.translate("xpack.graph.outlinkEncoders.textPlainTitle",{defaultMessage:"plain text"}),description:_i18n.i18n.translate("xpack.graph.outlinkEncoders.textPlainDescription",{defaultMessage:"Text of selected vertex labels as a plain url-encoded string"}),encode:function encode(workspace){var q="";var nodes=workspace.getSelectedOrAllNodes();for(var i=0;i<nodes.length;i++){var node=nodes[i];if(i>0){q+=" "}q+=node.label}return encodeURIComponent(q)},type:"plain"},{id:"text-lucene",title:_i18n.i18n.translate("xpack.graph.outlinkEncoders.textLuceneTitle",{defaultMessage:"Lucene-escaped text"}),description:_i18n.i18n.translate("xpack.graph.outlinkEncoders.textLuceneDescription",{defaultMessage:"Text of selected vertex labels with any Lucene special characters encoded"}),encode:function encode(workspace){var q="";var nodes=workspace.getSelectedOrAllNodes();for(var i=0;i<nodes.length;i++){var node=nodes[i];if(i>0){q+=" "}q+=node.label}var luceneChars='+-&|!(){}[]^"~*?:\\';q=q.split("").map((function(char){return luceneChars.includes(char)?"\\".concat(char):char})).join("");return encodeURIComponent(q)},type:"lucene"}];exports.outlinkEncoders=outlinkEncoders},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isUrlTemplateValid=isUrlTemplateValid;exports.isKibanaUrl=isKibanaUrl;exports.replaceKibanaUrlParam=replaceKibanaUrlParam;exports.urlTemplateRegex=exports.urlTemplatePlaceholder=void 0;var urlTemplatePlaceholder="{{gquery}}";exports.urlTemplatePlaceholder=urlTemplatePlaceholder;var urlTemplateRegex=/\{\{gquery\}\}/g;exports.urlTemplateRegex=urlTemplateRegex;var defaultKibanaQuery=/,query:\(language:kuery,query:'.*?'\)/g;function isUrlTemplateValid(url){return url.search(urlTemplateRegex)>-1}function isKibanaUrl(url){return url.search(defaultKibanaQuery)>-1}function replaceKibanaUrlParam(url){return url.replace(defaultKibanaQuery,",query:(language:kuery,query:{{".concat(urlTemplatePlaceholder,"}})"))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _serialize=__webpack_require__(707);Object.keys(_serialize).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _serialize[key]}})}));var _deserialize=__webpack_require__(708);Object.keys(_deserialize).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _deserialize[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.syncBreadcrumbSaga=exports.metaDataSelector=exports.metaDataReducer=exports.updateMetaData=void 0;var _typescriptFsa=_interopRequireDefault(__webpack_require__(113));var _typescriptFsaReducers=__webpack_require__(130);var _effects=__webpack_require__(120);var _i18n=__webpack_require__(1);var _global=__webpack_require__(123);var _url=__webpack_require__(189);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var actionCreator=(0,_typescriptFsa.default)("x-pack/graph/metaData");var updateMetaData=actionCreator("UPDATE_META_DATA");exports.updateMetaData=updateMetaData;var initialMetaData={title:_i18n.i18n.translate("xpack.graph.newGraphTitle",{defaultMessage:"Unsaved graph"}),description:""};var metaDataReducer=(0,_typescriptFsaReducers.reducerWithInitialState)(initialMetaData).case(_global.reset,(function(){return initialMetaData})).case(updateMetaData,(function(oldMetaData,newMetaData){return _objectSpread({},oldMetaData,{},newMetaData)})).build();exports.metaDataReducer=metaDataReducer;var metaDataSelector=function metaDataSelector(state){return state.metaData};exports.metaDataSelector=metaDataSelector;var syncBreadcrumbSaga=function syncBreadcrumbSaga(_ref){var _marked=regeneratorRuntime.mark(syncBreadcrumb);var chrome=_ref.chrome,changeUrl=_ref.changeUrl;function syncBreadcrumb(){var metaData;return regeneratorRuntime.wrap((function syncBreadcrumb$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=metaDataSelector;_context.next=3;return(0,_effects.select)();case 3:_context.t1=_context.sent;metaData=(0,_context.t0)(_context.t1);(0,_url.setBreadcrumbs)({chrome:chrome,metaData:metaData,navigateTo:function navigateTo(path){changeUrl(path)}});case 6:case"end":return _context.stop()}}}),_marked)}return(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return(0,_effects.call)(syncBreadcrumb);case 2:_context2.next=4;return(0,_effects.takeLatest)(updateMetaData.match,syncBreadcrumb);case 4:case"end":return _context2.stop()}}}),_callee)})))};exports.syncBreadcrumbSaga=syncBreadcrumbSaga},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getHomePath=getHomePath;exports.getNewPath=getNewPath;exports.getEditPath=getEditPath;exports.getEditUrl=getEditUrl;exports.setBreadcrumbs=setBreadcrumbs;var _i18n=__webpack_require__(1);function getHomePath(){return"/home"}function getNewPath(){return"/workspace"}function getEditPath(_ref){var id=_ref.id;return"/workspace/".concat(id)}function getEditUrl(addBasePath,workspace){return addBasePath("#".concat(getEditPath(workspace)))}function setBreadcrumbs(options){if("metaData"in options){options.chrome.setBreadcrumbs([{text:_i18n.i18n.translate("xpack.graph.home.breadcrumb",{defaultMessage:"Graph"}),onClick:function onClick(){options.navigateTo(getHomePath())},"data-test-subj":"graphHomeBreadcrumb"},{text:options.metaData.title,"data-test-subj":"graphCurrentGraphBreadcrumb"}])}else{options.chrome.setBreadcrumbs([{text:_i18n.i18n.translate("xpack.graph.home.breadcrumb",{defaultMessage:"Graph"}),href:"#".concat(getHomePath()),"data-test-subj":"graphHomeBreadcrumb"}])}}},,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={KQLSyntaxError:true,nodeTypes:true};Object.defineProperty(exports,"KQLSyntaxError",{enumerable:true,get:function get(){return _kuery_syntax_error.KQLSyntaxError}});Object.defineProperty(exports,"nodeTypes",{enumerable:true,get:function get(){return _node_types.nodeTypes}});var _kuery_syntax_error=__webpack_require__(204);var _node_types=__webpack_require__(117);var _ast=__webpack_require__(106);Object.keys(_ast).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ast[key]}})}));var _types=__webpack_require__(393);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}))},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.KQLSyntaxError=void 0;var _lodash=__webpack_require__(0);var _i18n=__webpack_require__(1);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var endOfInputText=_i18n.i18n.translate("data.common.kql.errors.endOfInputText",{defaultMessage:"end of input"});var grammarRuleTranslations={fieldName:_i18n.i18n.translate("data.common.kql.errors.fieldNameText",{defaultMessage:"field name"}),value:_i18n.i18n.translate("data.common.kql.errors.valueText",{defaultMessage:"value"}),literal:_i18n.i18n.translate("data.common.kql.errors.literalText",{defaultMessage:"literal"}),whitespace:_i18n.i18n.translate("data.common.kql.errors.whitespaceText",{defaultMessage:"whitespace"})};var KQLSyntaxError=function(_Error){_inherits(KQLSyntaxError,_Error);function KQLSyntaxError(error,expression){var _this;_classCallCheck(this,KQLSyntaxError);var message=error.message;if(error.expected){var translatedExpectations=error.expected.map((function(expected){return grammarRuleTranslations[expected.description]||expected.description}));var translatedExpectationText=translatedExpectations.join(", ");message=_i18n.i18n.translate("data.common.kql.errors.syntaxError",{defaultMessage:"Expected {expectedList} but {foundInput} found.",values:{expectedList:translatedExpectationText,foundInput:error.found?'"'.concat(error.found,'"'):endOfInputText}})}var fullMessage=[message,expression,(0,_lodash.repeat)("-",error.location.start.offset)+"^"].join("\n");_this=_possibleConstructorReturn(this,_getPrototypeOf(KQLSyntaxError).call(this,fullMessage));_defineProperty(_assertThisInitialized(_this),"shortMessage",void 0);_this.name="KQLSyntaxError";_this.shortMessage=message;return _this}return KQLSyntaxError}(_wrapNativeSuper(Error));exports.KQLSyntaxError=KQLSyntaxError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildExistsFilter=exports.getExistsFilterField=exports.isExistsFilter=void 0;var isExistsFilter=function isExistsFilter(filter){return filter&&filter.exists};exports.isExistsFilter=isExistsFilter;var getExistsFilterField=function getExistsFilterField(filter){return filter.exists&&filter.exists.field};exports.getExistsFilterField=getExistsFilterField;var buildExistsFilter=function buildExistsFilter(field,indexPattern){return{meta:{index:indexPattern.id},exists:{field:field.name}}};exports.buildExistsFilter=buildExistsFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getGeoBoundingBoxFilterField=exports.isGeoBoundingBoxFilter=void 0;var isGeoBoundingBoxFilter=function isGeoBoundingBoxFilter(filter){return filter&&filter.geo_bounding_box};exports.isGeoBoundingBoxFilter=isGeoBoundingBoxFilter;var getGeoBoundingBoxFilterField=function getGeoBoundingBoxFilterField(filter){return filter.geo_bounding_box&&Object.keys(filter.geo_bounding_box).find((function(key){return key!=="ignore_unmapped"}))};exports.getGeoBoundingBoxFilterField=getGeoBoundingBoxFilterField},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getGeoPolygonFilterField=exports.isGeoPolygonFilter=void 0;var isGeoPolygonFilter=function isGeoPolygonFilter(filter){return filter&&filter.geo_polygon};exports.isGeoPolygonFilter=isGeoPolygonFilter;var getGeoPolygonFilterField=function getGeoPolygonFilterField(filter){return filter.geo_polygon&&Object.keys(filter.geo_polygon).find((function(key){return key!=="ignore_unmapped"}))};exports.getGeoPolygonFilterField=getGeoPolygonFilterField},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getIndexPatternFromFilter=getIndexPatternFromFilter;function getIndexPatternFromFilter(filter,indexPatterns){return indexPatterns.find((function(indexPattern){return indexPattern.id===filter.meta.index}))}},function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.buildPhrasesFilter=exports.getPhrasesFilterField=exports.isPhrasesFilter=void 0;var _phrase_filter=__webpack_require__(159);var _index=__webpack_require__(104);var isPhrasesFilter=function isPhrasesFilter(filter){var _filter$meta;return(filter===null||filter===void 0?void 0:(_filter$meta=filter.meta)===null||_filter$meta===void 0?void 0:_filter$meta.type)===_index.FILTERS.PHRASES};exports.isPhrasesFilter=isPhrasesFilter;var getPhrasesFilterField=function getPhrasesFilterField(filter){return filter.meta.key};exports.getPhrasesFilterField=getPhrasesFilterField;var buildPhrasesFilter=function buildPhrasesFilter(field,params,indexPattern){var index=indexPattern.id;var type=_index.FILTERS.PHRASES;var key=field.name;var format=function format(f,value){return f&&f.format&&f.format.convert?f.format.convert(value):value};var value=params.map((function(v){return format(field,v)})).join(", ");var should;if(field.scripted){should=params.map((function(v){return{script:(0,_phrase_filter.getPhraseScript)(field,v)}}))}else{should=params.map((function(v){return{match_phrase:_defineProperty({},field.name,v)}}))}return{meta:{index:index,type:type,key:key,value:value,params:params},query:{bool:{should:should,minimum_should_match:1}}}};exports.buildPhrasesFilter=buildPhrasesFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRangeScript=exports.buildRangeFilter=exports.getRangeFilterField=exports.isScriptedRangeFilter=exports.isRangeFilter=void 0;var _lodash=__webpack_require__(0);var OPERANDS_IN_RANGE=2;var operators={gt:">",gte:">=",lte:"<=",lt:"<"};var comparators={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"};var dateComparators={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"};var hasRangeKeys=function hasRangeKeys(params){return Boolean((0,_lodash.keys)(params).find((function(key){return["gte","gt","lte","lt","from","to"].includes(key)})))};var isRangeFilter=function isRangeFilter(filter){return filter&&filter.range};exports.isRangeFilter=isRangeFilter;var isScriptedRangeFilter=function isScriptedRangeFilter(filter){var params=(0,_lodash.get)(filter,"script.script.params",{});return hasRangeKeys(params)};exports.isScriptedRangeFilter=isScriptedRangeFilter;var getRangeFilterField=function getRangeFilterField(filter){return filter.range&&Object.keys(filter.range)[0]};exports.getRangeFilterField=getRangeFilterField;var formatValue=function formatValue(field,params){return(0,_lodash.map)(params,(function(val,key){return(0,_lodash.get)(operators,key)+format(field,val)})).join(" ")};var format=function format(field,value){return field&&field.format&&field.format.convert?field.format.convert(value):value};var buildRangeFilter=function buildRangeFilter(field,params,indexPattern,formattedValue){var filter={meta:{index:indexPattern.id,params:{}}};if(formattedValue){filter.meta.formattedValue=formattedValue}params=(0,_lodash.mapValues)(params,(function(value){return field.type==="number"?parseFloat(value):value}));if("gte"in params&&"gt"in params)throw new Error("gte and gt are mutually exclusive");if("lte"in params&&"lt"in params)throw new Error("lte and lt are mutually exclusive");var totalInfinite=["gt","lt"].reduce((function(acc,op){var key=op in params?op:"".concat(op,"e");var isInfinite=Math.abs((0,_lodash.get)(params,key))===Infinity;if(isInfinite){acc++;delete params[key]}return acc}),0);if(totalInfinite===OPERANDS_IN_RANGE){filter.match_all={};filter.meta.field=field.name}else if(field.scripted){filter.script=getRangeScript(field,params);filter.script.script.params.value=formatValue(field,filter.script.script.params);filter.meta.field=field.name}else{filter.range={};filter.range[field.name]=params}return filter};exports.buildRangeFilter=buildRangeFilter;var getRangeScript=function getRangeScript(field,params){var knownParams=(0,_lodash.pick)(params,(function(val,key){return key in operators}));var script=(0,_lodash.map)(knownParams,(function(val,key){return"("+field.script+")"+(0,_lodash.get)(operators,key)+key})).join(" && ");if(field.lang==="painless"){var comp=field.type==="date"?dateComparators:comparators;var currentComparators=(0,_lodash.reduce)(knownParams,(function(acc,val,key){return acc.concat((0,_lodash.get)(comp,key))}),[]).join(" ");var comparisons=(0,_lodash.map)(knownParams,(function(val,key){return"".concat(key,"(() -> { ").concat(field.script," }, params.").concat(key,")")})).join(" && ");script="".concat(currentComparators).concat(comparisons)}return{script:{source:script,params:knownParams,lang:field.lang}}};exports.getRangeScript=getRangeScript},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getMissingFilterField=exports.isMissingFilter=void 0;var isMissingFilter=function isMissingFilter(filter){return filter&&filter.missing};exports.isMissingFilter=isMissingFilter;var getMissingFilterField=function getMissingFilterField(filter){return filter.missing&&filter.missing.field};exports.getMissingFilterField=getMissingFilterField},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.toElasticsearchQuery=exports.doesKueryExpressionHaveLuceneSyntaxError=exports.fromKueryExpression=exports.fromLiteralExpression=void 0;var _index=__webpack_require__(117);var _kuery_syntax_error=__webpack_require__(204);var _kuery=__webpack_require__(382);var fromExpression=function fromExpression(expression){var parseOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var parse=arguments.length>2&&arguments[2]!==undefined?arguments[2]:_kuery.parse;if(typeof expression==="undefined"){throw new Error("expression must be a string, got undefined instead")}return parse(expression,_objectSpread({},parseOptions,{helpers:{nodeTypes:_index.nodeTypes}}))};var fromLiteralExpression=function fromLiteralExpression(expression){var parseOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return fromExpression(expression,_objectSpread({},parseOptions,{startRule:"Literal"}),_kuery.parse)};exports.fromLiteralExpression=fromLiteralExpression;var fromKueryExpression=function fromKueryExpression(expression){var parseOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};try{return fromExpression(expression,parseOptions,_kuery.parse)}catch(error){if(error.name==="SyntaxError"){throw new _kuery_syntax_error.KQLSyntaxError(error,expression)}else{throw error}}};exports.fromKueryExpression=fromKueryExpression;var doesKueryExpressionHaveLuceneSyntaxError=function doesKueryExpressionHaveLuceneSyntaxError(expression){try{fromExpression(expression,{errorOnLuceneSyntax:true},_kuery.parse);return false}catch(e){return e.message.startsWith("Lucene")}};exports.doesKueryExpressionHaveLuceneSyntaxError=doesKueryExpressionHaveLuceneSyntaxError;var toElasticsearchQuery=function toElasticsearchQuery(node,indexPattern,config,context){if(!node||!node.type||!_index.nodeTypes[node.type]){return toElasticsearchQuery(_index.nodeTypes.function.buildNode("and",[]),indexPattern)}var nodeType=_index.nodeTypes[node.type];return nodeType.toElasticsearchQuery(node,indexPattern,config,context)};exports.toElasticsearchQuery=toElasticsearchQuery},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.getFullFieldNameNode=getFullFieldNameNode;var _get_fields=__webpack_require__(160);function getFullFieldNameNode(rootNameNode,indexPattern,nestedPath){var fullFieldNameNode=_objectSpread({},rootNameNode,{value:nestedPath?"".concat(nestedPath,".").concat(rootNameNode.value):rootNameNode.value});if(!indexPattern||fullFieldNameNode.type==="wildcard"&&!nestedPath){return fullFieldNameNode}var fields=(0,_get_fields.getFields)(fullFieldNameNode,indexPattern);var errors=fields.reduce((function(acc,field){var nestedPathFromField=field.subType&&field.subType.nested?field.subType.nested.path:undefined;if(nestedPath&&!nestedPathFromField){return[].concat(_toConsumableArray(acc),["".concat(field.name,' is not a nested field but is in nested group "').concat(nestedPath,'" in the KQL expression.')])}if(nestedPathFromField&&!nestedPath){return[].concat(_toConsumableArray(acc),["".concat(field.name," is a nested field, but is not in a nested group in the KQL expression.")])}if(nestedPathFromField!==nestedPath){return[].concat(_toConsumableArray(acc),["Nested field ".concat(field.name," is being queried with the incorrect nested path. The correct path is ").concat(field.subType.nested.path,".")])}return acc}),[]);if(errors.length>0){throw new Error(errors.join("\n"))}return fullFieldNameNode}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildQueryFromFilters=void 0;var _lodash=__webpack_require__(0);var _migrate_filter=__webpack_require__(394);var _filter_matches_index=__webpack_require__(395);var _filters=__webpack_require__(104);var _handle_nested_filter=__webpack_require__(396);var filterNegate=function filterNegate(reverse){return function(filter){if((0,_lodash.isUndefined)(filter.meta)||(0,_lodash.isUndefined)(filter.meta.negate)){return!reverse}return filter.meta&&filter.meta.negate===reverse}};var translateToQuery=function translateToQuery(filter){if(!filter)return;if(filter.query){return filter.query}return filter};var buildQueryFromFilters=function buildQueryFromFilters(){var filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var indexPattern=arguments.length>1?arguments[1]:undefined;var ignoreFilterIfFieldNotInIndex=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;filters=filters.filter((function(filter){return filter&&!(0,_filters.isFilterDisabled)(filter)}));var filtersToESQueries=function filtersToESQueries(negate){return filters.filter(filterNegate(negate)).filter((function(filter){return!ignoreFilterIfFieldNotInIndex||(0,_filter_matches_index.filterMatchesIndex)(filter,indexPattern)})).map((function(filter){return(0,_migrate_filter.migrateFilter)(filter,indexPattern)})).map((function(filter){return(0,_handle_nested_filter.handleNestedFilter)(filter,indexPattern)})).map(translateToQuery).map(_filters.cleanFilter)};return{must:[],filter:filtersToESQueries(false),should:[],must_not:filtersToESQueries(true)}};exports.buildQueryFromFilters=buildQueryFromFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.decorateQuery=decorateQuery;var _lodash=__webpack_require__(0);var _utils=__webpack_require__(162);var _es_query_dsl=__webpack_require__(398);function decorateQuery(query,queryStringOptions,dateFormatTZ){if((0,_es_query_dsl.isEsQueryString)(query)){(0,_lodash.extend)(query.query_string,queryStringOptions);if(dateFormatTZ){(0,_lodash.defaults)(query.query_string,{time_zone:(0,_utils.getTimeZoneFromSettings)(dateFormatTZ)})}}return query}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.luceneStringToDsl=luceneStringToDsl;var _lodash=__webpack_require__(0);function luceneStringToDsl(query){if((0,_lodash.isString)(query)){if(query.trim()===""){return{match_all:{}}}return{query_string:{query:query}}}return query}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"textContentTypeSetup",{enumerable:true,get:function get(){return _text_content_type.setup}});Object.defineProperty(exports,"TEXT_CONTEXT_TYPE",{enumerable:true,get:function get(){return _text_content_type.TEXT_CONTEXT_TYPE}});Object.defineProperty(exports,"htmlContentTypeSetup",{enumerable:true,get:function get(){return _html_content_type.setup}});Object.defineProperty(exports,"HTML_CONTEXT_TYPE",{enumerable:true,get:function get(){return _html_content_type.HTML_CONTEXT_TYPE}});var _text_content_type=__webpack_require__(402);var _html_content_type=__webpack_require__(409)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.highlightTags=void 0;var highlightTags={pre:"@kibana-highlighted-field@",post:"@/kibana-highlighted-field@"};exports.highlightTags=highlightTags},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.baseFormatters=void 0;var _converters=__webpack_require__(220);var baseFormatters=[_converters.BoolFormat,_converters.BytesFormat,_converters.ColorFormat,_converters.DateNanosFormat,_converters.DurationFormat,_converters.IpFormat,_converters.NumberFormat,_converters.PercentFormat,_converters.RelativeDateFormat,_converters.SourceFormat,_converters.StaticLookupFormat,_converters.StringFormat,_converters.TruncateFormat,_converters.UrlFormat];exports.baseFormatters=baseFormatters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"UrlFormat",{enumerable:true,get:function get(){return _url.UrlFormat}});Object.defineProperty(exports,"BytesFormat",{enumerable:true,get:function get(){return _bytes.BytesFormat}});Object.defineProperty(exports,"DateNanosFormat",{enumerable:true,get:function get(){return _date_nanos.DateNanosFormat}});Object.defineProperty(exports,"RelativeDateFormat",{enumerable:true,get:function get(){return _relative_date.RelativeDateFormat}});Object.defineProperty(exports,"DurationFormat",{enumerable:true,get:function get(){return _duration.DurationFormat}});Object.defineProperty(exports,"IpFormat",{enumerable:true,get:function get(){return _ip.IpFormat}});Object.defineProperty(exports,"NumberFormat",{enumerable:true,get:function get(){return _number.NumberFormat}});Object.defineProperty(exports,"PercentFormat",{enumerable:true,get:function get(){return _percent.PercentFormat}});Object.defineProperty(exports,"StringFormat",{enumerable:true,get:function get(){return _string.StringFormat}});Object.defineProperty(exports,"SourceFormat",{enumerable:true,get:function get(){return _source.SourceFormat}});Object.defineProperty(exports,"ColorFormat",{enumerable:true,get:function get(){return _color.ColorFormat}});Object.defineProperty(exports,"TruncateFormat",{enumerable:true,get:function get(){return _truncate.TruncateFormat}});Object.defineProperty(exports,"BoolFormat",{enumerable:true,get:function get(){return _boolean.BoolFormat}});Object.defineProperty(exports,"StaticLookupFormat",{enumerable:true,get:function get(){return _static_lookup.StaticLookupFormat}});var _url=__webpack_require__(410);var _bytes=__webpack_require__(411);var _date_nanos=__webpack_require__(414);var _relative_date=__webpack_require__(415);var _duration=__webpack_require__(416);var _ip=__webpack_require__(417);var _number=__webpack_require__(418);var _percent=__webpack_require__(419);var _string=__webpack_require__(420);var _source=__webpack_require__(427);var _color=__webpack_require__(428);var _truncate=__webpack_require__(429);var _boolean=__webpack_require__(430);var _static_lookup=__webpack_require__(431)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_CONVERTER_COLOR=void 0;var DEFAULT_CONVERTER_COLOR={range:"".concat(Number.NEGATIVE_INFINITY,":").concat(Number.POSITIVE_INFINITY),regex:"<insert regex>",text:"#000000",background:"#ffffff"};exports.DEFAULT_CONVERTER_COLOR=DEFAULT_CONVERTER_COLOR},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"KbnFieldType",{enumerable:true,get:function get(){return _kbn_field_type.KbnFieldType}});Object.defineProperty(exports,"castEsToKbnFieldTypeName",{enumerable:true,get:function get(){return _kbn_field_types.castEsToKbnFieldTypeName}});Object.defineProperty(exports,"getKbnFieldType",{enumerable:true,get:function get(){return _kbn_field_types.getKbnFieldType}});Object.defineProperty(exports,"getKbnTypeNames",{enumerable:true,get:function get(){return _kbn_field_types.getKbnTypeNames}});Object.defineProperty(exports,"getFilterableKbnTypeNames",{enumerable:true,get:function get(){return _kbn_field_types.getFilterableKbnTypeNames}});var _kbn_field_type=__webpack_require__(223);var _kbn_field_types=__webpack_require__(436)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(exports,"__esModule",{value:true});exports.KbnFieldType=void 0;var _types=__webpack_require__(100);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var KbnFieldType=function KbnFieldType(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,KbnFieldType);_defineProperty(this,"name",void 0);_defineProperty(this,"sortable",void 0);_defineProperty(this,"filterable",void 0);_defineProperty(this,"esTypes",void 0);this.name=options.name||_types.KBN_FIELD_TYPES.UNKNOWN;this.sortable=options.sortable||false;this.filterable=options.filterable||false;this.esTypes=Object.freeze((options.esTypes||[]).slice())};exports.KbnFieldType=KbnFieldType},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dedupFilters=void 0;var _lodash=__webpack_require__(0);var _compare_filters=__webpack_require__(226);var dedupFilters=function dedupFilters(existingFilters,filters){var comparatorOptions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!Array.isArray(filters)){filters=[filters]}return(0,_lodash.filter)(filters,(function(f){return!(0,_lodash.find)(existingFilters,(function(existingFilter){return(0,_compare_filters.compareFilters)(existingFilter,f,comparatorOptions)}))}))};exports.dedupFilters=dedupFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.compareFilters=exports.COMPARE_ALL_OPTIONS=void 0;var _lodash=__webpack_require__(0);var COMPARE_ALL_OPTIONS={disabled:true,negate:true,state:true,alias:true};exports.COMPARE_ALL_OPTIONS=COMPARE_ALL_OPTIONS;var mapFilter=function mapFilter(filter,comparators,excludedAttributes){var _filter$meta;var cleaned=(0,_lodash.omit)(filter,excludedAttributes);if(comparators.negate)cleaned.negate=filter.meta&&Boolean(filter.meta.negate);if(comparators.disabled)cleaned.disabled=filter.meta&&Boolean(filter.meta.disabled);if(comparators.alias)cleaned.alias=(_filter$meta=filter.meta)===null||_filter$meta===void 0?void 0:_filter$meta.alias;return cleaned};var mapFilterArray=function mapFilterArray(filters,comparators,excludedAttributes){return(0,_lodash.map)(filters,(function(filter){return mapFilter(filter,comparators,excludedAttributes)}))};var compareFilters=function compareFilters(first,second){var comparatorOptions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!first||!second)return false;var comparators={};var excludedAttributes=["$$hashKey","meta"];comparators=(0,_lodash.defaults)(comparatorOptions||{},{state:false,negate:false,disabled:false,alias:false});if(!comparators.state)excludedAttributes.push("$state");if(Array.isArray(first)&&Array.isArray(second)){return(0,_lodash.isEqual)(mapFilterArray(first,comparators,excludedAttributes),mapFilterArray(second,comparators,excludedAttributes))}else if(!Array.isArray(first)&&!Array.isArray(second)){return(0,_lodash.isEqual)(mapFilter(first,comparators,excludedAttributes),mapFilter(second,comparators,excludedAttributes))}else{return false}};exports.compareFilters=compareFilters},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IEsSearchRequest",{enumerable:true,get:function get(){return _types.IEsSearchRequest}});Object.defineProperty(exports,"IEsSearchResponse",{enumerable:true,get:function get(){return _types.IEsSearchResponse}});Object.defineProperty(exports,"ES_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _types.ES_SEARCH_STRATEGY}});var _types=__webpack_require__(441)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.InvalidEsCalendarIntervalError=void 0;var _i18n=__webpack_require__(1);var InvalidEsCalendarIntervalError=function(_Error){_inherits(InvalidEsCalendarIntervalError,_Error);function InvalidEsCalendarIntervalError(interval,value,unit,type){var _this;_classCallCheck(this,InvalidEsCalendarIntervalError);_this=_possibleConstructorReturn(this,_getPrototypeOf(InvalidEsCalendarIntervalError).call(this,_i18n.i18n.translate("data.parseEsInterval.invalidEsCalendarIntervalErrorMessage",{defaultMessage:"Invalid calendar interval: {interval}, value must be 1",values:{interval:interval}})));_this.interval=interval;_this.value=value;_this.unit=unit;_this.type=type;_this.name="InvalidEsCalendarIntervalError";_this.value=value;_this.unit=unit;_this.type=type;if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(_this),InvalidEsCalendarIntervalError)}Object.setPrototypeOf(_assertThisInitialized(_this),InvalidEsCalendarIntervalError.prototype);return _this}return InvalidEsCalendarIntervalError}(_wrapNativeSuper(Error));exports.InvalidEsCalendarIntervalError=InvalidEsCalendarIntervalError},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.InvalidEsIntervalFormatError=void 0;var _i18n=__webpack_require__(1);var InvalidEsIntervalFormatError=function(_Error){_inherits(InvalidEsIntervalFormatError,_Error);function InvalidEsIntervalFormatError(interval){var _this;_classCallCheck(this,InvalidEsIntervalFormatError);_this=_possibleConstructorReturn(this,_getPrototypeOf(InvalidEsIntervalFormatError).call(this,_i18n.i18n.translate("data.parseEsInterval.invalidEsIntervalFormatErrorMessage",{defaultMessage:"Invalid interval format: {interval}",values:{interval:interval}})));_this.interval=interval;_this.name="InvalidEsIntervalFormatError";if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(_this),InvalidEsIntervalFormatError)}Object.setPrototypeOf(_assertThisInitialized(_this),InvalidEsIntervalFormatError.prototype);return _this}return InvalidEsIntervalFormatError}(_wrapNativeSuper(Error));exports.InvalidEsIntervalFormatError=InvalidEsIntervalFormatError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isValidEsInterval=isValidEsInterval;var _parse_es_interval=__webpack_require__(137);function isValidEsInterval(interval){try{(0,_parse_es_interval.parseEsInterval)(interval);return true}catch(_unused){return false}}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FilterEditor=void 0;var _eui=__webpack_require__(12);var _i18n=__webpack_require__(1);var _react=__webpack_require__(13);var _lodash=__webpack_require__(0);var _react2=_interopRequireWildcard(__webpack_require__(4));var _generic_combo_box=__webpack_require__(166);var _filter_editor_utils=__webpack_require__(233);var _phrase_value_input=__webpack_require__(454);var _phrases_values_input=__webpack_require__(455);var _range_value_input=__webpack_require__(456);var _common=__webpack_require__(93);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterEditorUI=function(_Component){_inherits(FilterEditorUI,_Component);function FilterEditorUI(props){var _this;_classCallCheck(this,FilterEditorUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(FilterEditorUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"toggleCustomEditor",(function(){var isCustomEditorOpen=!_this.state.isCustomEditorOpen;_this.setState({isCustomEditorOpen:isCustomEditorOpen})}));_defineProperty(_assertThisInitialized(_this),"onIndexPatternChange",(function(_ref){var _ref2=_slicedToArray(_ref,1),selectedIndexPattern=_ref2[0];var selectedField=undefined;var selectedOperator=undefined;var params=undefined;_this.setState({selectedIndexPattern:selectedIndexPattern,selectedField:selectedField,selectedOperator:selectedOperator,params:params})}));_defineProperty(_assertThisInitialized(_this),"onFieldChange",(function(_ref3){var _ref4=_slicedToArray(_ref3,1),selectedField=_ref4[0];var selectedOperator=undefined;var params=undefined;_this.setState({selectedField:selectedField,selectedOperator:selectedOperator,params:params})}));_defineProperty(_assertThisInitialized(_this),"onOperatorChange",(function(_ref5){var _ref6=_slicedToArray(_ref5,1),selectedOperator=_ref6[0];var params=(0,_lodash.get)(_this.state.selectedOperator,"type")===(0,_lodash.get)(selectedOperator,"type")?_this.state.params:undefined;_this.setState({selectedOperator:selectedOperator,params:params})}));_defineProperty(_assertThisInitialized(_this),"onCustomLabelSwitchChange",(function(event){var useCustomLabel=event.target.checked;var customLabel=event.target.checked?"":null;_this.setState({useCustomLabel:useCustomLabel,customLabel:customLabel})}));_defineProperty(_assertThisInitialized(_this),"onCustomLabelChange",(function(event){var customLabel=event.target.value;_this.setState({customLabel:customLabel})}));_defineProperty(_assertThisInitialized(_this),"onParamsChange",(function(params){_this.setState({params:params})}));_defineProperty(_assertThisInitialized(_this),"onQueryDslChange",(function(queryDsl){_this.setState({queryDsl:queryDsl})}));_defineProperty(_assertThisInitialized(_this),"onSubmit",(function(){var _this$state=_this.state,indexPattern=_this$state.selectedIndexPattern,field=_this$state.selectedField,operator=_this$state.selectedOperator,params=_this$state.params,useCustomLabel=_this$state.useCustomLabel,customLabel=_this$state.customLabel,isCustomEditorOpen=_this$state.isCustomEditorOpen,queryDsl=_this$state.queryDsl;var $state=_this.props.filter.$state;if(!$state||!$state.store){return}var alias=useCustomLabel?customLabel:null;if(isCustomEditorOpen){var _this$props$filter$me=_this.props.filter.meta,index=_this$props$filter$me.index,disabled=_this$props$filter$me.disabled,negate=_this$props$filter$me.negate;var newIndex=index||_this.props.indexPatterns[0].id;var body=JSON.parse(queryDsl);var _filter=(0,_common.buildCustomFilter)(newIndex,body,disabled,negate,alias,$state.store);_this.props.onSubmit(_filter)}else if(indexPattern&&field&&operator){var _filter2=(0,_common.buildFilter)(indexPattern,field,operator.type,operator.negate,_this.props.filter.meta.disabled,params!==null&&params!==void 0?params:"",alias,$state.store);_this.props.onSubmit(_filter2)}}));_this.state={selectedIndexPattern:_this.getIndexPatternFromFilter(),selectedField:_this.getFieldFromFilter(),selectedOperator:_this.getSelectedOperator(),params:(0,_common.getFilterParams)(props.filter),useCustomLabel:props.filter.meta.alias!==null,customLabel:props.filter.meta.alias,queryDsl:JSON.stringify((0,_common.cleanFilter)(props.filter),null,2),isCustomEditorOpen:_this.isUnknownFilterType()};return _this}_createClass(FilterEditorUI,[{key:"render",value:function render(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiPopoverTitle,null,_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"baseline",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.editFilterPopupTitle",defaultMessage:"Edit filter"})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false,className:"filterEditor__hiddenItem"}),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:this.toggleCustomEditor},this.state.isCustomEditorOpen?_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.editFilterValuesButtonLabel",defaultMessage:"Edit filter values"}):_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.editQueryDslButtonLabel",defaultMessage:"Edit as Query DSL"}))))),_react2.default.createElement("div",{className:"globalFilterItem__editorForm"},_react2.default.createElement(_eui.EuiForm,null,this.renderIndexPatternInput(),this.state.isCustomEditorOpen?this.renderCustomEditor():this.renderRegularEditor(),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiSwitch,{id:"filterEditorCustomLabelSwitch",label:this.props.intl.formatMessage({id:"data.filter.filterEditor.createCustomLabelSwitchLabel",defaultMessage:"Create custom label?"}),checked:this.state.useCustomLabel,onChange:this.onCustomLabelSwitchChange}),this.state.useCustomLabel&&_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.createCustomLabelInputLabel",defaultMessage:"Custom label"})},_react2.default.createElement(_eui.EuiFieldText,{value:"".concat(this.state.customLabel),onChange:this.onCustomLabelChange}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{direction:"rowReverse",alignItems:"center",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{fill:true,onClick:this.onSubmit,isDisabled:!this.isFilterValid(),"data-test-subj":"saveFilter"},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.saveButtonLabel",defaultMessage:"Save"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{flush:"right",onClick:this.props.onCancel,"data-test-subj":"cancelSaveFilter"},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.cancelButtonLabel",defaultMessage:"Cancel"}))),_react2.default.createElement(_eui.EuiFlexItem,null)))))}},{key:"renderIndexPatternInput",value:function renderIndexPatternInput(){var _this2=this;if(this.props.indexPatterns.length<=1&&this.props.indexPatterns.find((function(indexPattern){return indexPattern===_this2.state.selectedIndexPattern}))){return""}var selectedIndexPattern=this.state.selectedIndexPattern;return _react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.indexPatternSelectLabel",defaultMessage:"Index Pattern"})},_react2.default.createElement(IndexPatternComboBox,{placeholder:this.props.intl.formatMessage({id:"data.filter.filterBar.indexPatternSelectPlaceholder",defaultMessage:"Select an index pattern"}),options:this.props.indexPatterns,selectedOptions:selectedIndexPattern?[selectedIndexPattern]:[],getLabel:function getLabel(indexPattern){return indexPattern.title},onChange:this.onIndexPatternChange,singleSelection:{asPlainText:true},isClearable:false,"data-test-subj":"filterIndexPatternsSelect"}))))}},{key:"renderRegularEditor",value:function renderRegularEditor(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:2},this.renderFieldInput()),_react2.default.createElement(_eui.EuiFlexItem,{grow:false,style:{flexBasis:160}},this.renderOperatorInput())),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement("div",{"data-test-subj":"filterParams"},this.renderParamsEditor()))}},{key:"renderFieldInput",value:function renderFieldInput(){var _this$state2=this.state,selectedIndexPattern=_this$state2.selectedIndexPattern,selectedField=_this$state2.selectedField;var fields=selectedIndexPattern?(0,_filter_editor_utils.getFilterableFields)(selectedIndexPattern):[];return _react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.fieldSelectLabel",defaultMessage:"Field"})},_react2.default.createElement(FieldComboBox,{id:"fieldInput",isDisabled:!selectedIndexPattern,placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.fieldSelectPlaceholder",defaultMessage:"Select a field first"}),options:fields,selectedOptions:selectedField?[selectedField]:[],getLabel:function getLabel(field){return field.name},onChange:this.onFieldChange,singleSelection:{asPlainText:true},isClearable:false,className:"globalFilterEditor__fieldInput","data-test-subj":"filterFieldSuggestionList"}))}},{key:"renderOperatorInput",value:function renderOperatorInput(){var _this$state3=this.state,selectedField=_this$state3.selectedField,selectedOperator=_this$state3.selectedOperator;var operators=selectedField?(0,_filter_editor_utils.getOperatorOptions)(selectedField):[];return _react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectLabel",defaultMessage:"Operator"})},_react2.default.createElement(OperatorComboBox,{isDisabled:!selectedField,placeholder:selectedField?this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectPlaceholderSelect",defaultMessage:"Select"}):this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectPlaceholderWaiting",defaultMessage:"Waiting"}),options:operators,selectedOptions:selectedOperator?[selectedOperator]:[],getLabel:function getLabel(_ref7){var message=_ref7.message;return message},onChange:this.onOperatorChange,singleSelection:{asPlainText:true},isClearable:false,"data-test-subj":"filterOperatorList"}))}},{key:"renderCustomEditor",value:function renderCustomEditor(){return _react2.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("data.filter.filterEditor.queryDslLabel",{defaultMessage:"Elasticsearch Query DSL"})},_react2.default.createElement(_eui.EuiCodeEditor,{value:this.state.queryDsl,onChange:this.onQueryDslChange,mode:"json",width:"100%",height:"250px"}))}},{key:"renderParamsEditor",value:function renderParamsEditor(){var indexPattern=this.state.selectedIndexPattern;if(!indexPattern||!this.state.selectedOperator){return""}switch(this.state.selectedOperator.type){case"exists":return"";case"phrase":return _react2.default.createElement(_phrase_value_input.PhraseValueInput,{indexPattern:indexPattern,field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange,"data-test-subj":"phraseValueInput"});case"phrases":return _react2.default.createElement(_phrases_values_input.PhrasesValuesInput,{indexPattern:indexPattern,field:this.state.selectedField,values:this.state.params,onChange:this.onParamsChange});case"range":return _react2.default.createElement(_range_value_input.RangeValueInput,{field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange})}}},{key:"isUnknownFilterType",value:function isUnknownFilterType(){var type=this.props.filter.meta.type;return!!type&&!["phrase","phrases","range","exists"].includes(type)}},{key:"getIndexPatternFromFilter",value:function getIndexPatternFromFilter(){return(0,_common.getIndexPatternFromFilter)(this.props.filter,this.props.indexPatterns)}},{key:"getFieldFromFilter",value:function getFieldFromFilter(){var indexPattern=this.getIndexPatternFromFilter();return indexPattern&&(0,_filter_editor_utils.getFieldFromFilter)(this.props.filter,indexPattern)}},{key:"getSelectedOperator",value:function getSelectedOperator(){return(0,_filter_editor_utils.getOperatorFromFilter)(this.props.filter)}},{key:"isFilterValid",value:function isFilterValid(){var _this$state4=this.state,isCustomEditorOpen=_this$state4.isCustomEditorOpen,queryDsl=_this$state4.queryDsl,indexPattern=_this$state4.selectedIndexPattern,field=_this$state4.selectedField,operator=_this$state4.selectedOperator,params=_this$state4.params;if(isCustomEditorOpen){try{return Boolean(JSON.parse(queryDsl))}catch(e){return false}}return(0,_filter_editor_utils.isFilterValid)(indexPattern,field,operator,params)}}]);return FilterEditorUI}(_react2.Component);function IndexPatternComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}function FieldComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}function OperatorComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}var FilterEditor=(0,_react.injectI18n)(FilterEditorUI);exports.FilterEditor=FilterEditor},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getFieldFromFilter=getFieldFromFilter;exports.getOperatorFromFilter=getOperatorFromFilter;exports.getFilterableFields=getFilterableFields;exports.getOperatorOptions=getOperatorOptions;exports.validateParams=validateParams;exports.isFilterValid=isFilterValid;var _datemath=_interopRequireDefault(__webpack_require__(110));var _public=__webpack_require__(15);var _filter_operators=__webpack_require__(234);var _common=__webpack_require__(93);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function getFieldFromFilter(filter,indexPattern){return indexPattern.fields.find((function(field){return field.name===filter.meta.key}))}function getOperatorFromFilter(filter){return _filter_operators.FILTER_OPERATORS.find((function(operator){return filter.meta.type===operator.type&&filter.meta.negate===operator.negate}))}function getFilterableFields(indexPattern){return indexPattern.fields.filter(_common.isFilterable)}function getOperatorOptions(field){return _filter_operators.FILTER_OPERATORS.filter((function(operator){return!operator.fieldTypes||operator.fieldTypes.includes(field.type)}))}function validateParams(params,type){switch(type){case"date":var moment=typeof params==="string"?_datemath.default.parse(params):null;return Boolean(typeof params==="string"&&moment&&moment.isValid());case"ip":try{return Boolean(new _public.Ipv4Address(params))}catch(e){return false}default:return true}}function isFilterValid(indexPattern,field,operator,params){if(!indexPattern||!field||!operator){return false}switch(operator.type){case"phrase":return validateParams(params,field.type);case"phrases":if(!Array.isArray(params)||!params.length){return false}return params.every((function(phrase){return validateParams(phrase,field.type)}));case"range":if(_typeof(params)!=="object"){return false}return validateParams(params.from,field.type)||validateParams(params.to,field.type);case"exists":return true;default:throw new Error("Unknown operator type: ".concat(operator.type))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FILTER_OPERATORS=exports.doesNotExistOperator=exports.existsOperator=exports.isNotBetweenOperator=exports.isBetweenOperator=exports.isNotOneOfOperator=exports.isOneOfOperator=exports.isNotOperator=exports.isOperator=void 0;var _i18n=__webpack_require__(1);var _filters=__webpack_require__(104);var isOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isOperatorOptionLabel",{defaultMessage:"is"}),type:_filters.FILTERS.PHRASE,negate:false};exports.isOperator=isOperator;var isNotOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isNotOperatorOptionLabel",{defaultMessage:"is not"}),type:_filters.FILTERS.PHRASE,negate:true};exports.isNotOperator=isNotOperator;var isOneOfOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isOneOfOperatorOptionLabel",{defaultMessage:"is one of"}),type:_filters.FILTERS.PHRASES,negate:false,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]};exports.isOneOfOperator=isOneOfOperator;var isNotOneOfOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isNotOneOfOperatorOptionLabel",{defaultMessage:"is not one of"}),type:_filters.FILTERS.PHRASES,negate:true,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]};exports.isNotOneOfOperator=isNotOneOfOperator;var isBetweenOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isBetweenOperatorOptionLabel",{defaultMessage:"is between"}),type:_filters.FILTERS.RANGE,negate:false,fieldTypes:["number","date","ip"]};exports.isBetweenOperator=isBetweenOperator;var isNotBetweenOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isNotBetweenOperatorOptionLabel",{defaultMessage:"is not between"}),type:_filters.FILTERS.RANGE,negate:true,fieldTypes:["number","date","ip"]};exports.isNotBetweenOperator=isNotBetweenOperator;var existsOperator={message:_i18n.i18n.translate("data.filter.filterEditor.existsOperatorOptionLabel",{defaultMessage:"exists"}),type:_filters.FILTERS.EXISTS,negate:false};exports.existsOperator=existsOperator;var doesNotExistOperator={message:_i18n.i18n.translate("data.filter.filterEditor.doesNotExistOperatorOptionLabel",{defaultMessage:"does not exist"}),type:_filters.FILTERS.EXISTS,negate:true};exports.doesNotExistOperator=doesNotExistOperator;var FILTER_OPERATORS=[isOperator,isNotOperator,isOneOfOperator,isNotOneOfOperator,isBetweenOperator,isNotBetweenOperator,existsOperator,doesNotExistOperator];exports.FILTER_OPERATORS=FILTER_OPERATORS},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PhraseSuggestor=exports.PhraseSuggestorUI=void 0;var _react=__webpack_require__(4);var _lodash=__webpack_require__(0);var _public=__webpack_require__(14);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PhraseSuggestorUI=function(_Component){_inherits(PhraseSuggestorUI,_Component);function PhraseSuggestorUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,PhraseSuggestorUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PhraseSuggestorUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"services",_this.props.kibana.services);_defineProperty(_assertThisInitialized(_this),"state",{suggestions:[],isLoading:false});_defineProperty(_assertThisInitialized(_this),"onSearchChange",(function(value){_this.updateSuggestions("".concat(value))}));_defineProperty(_assertThisInitialized(_this),"updateSuggestions",(0,_lodash.debounce)(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var query,_ref2,indexPattern,field,suggestions,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:query=_args.length>0&&_args[0]!==undefined?_args[0]:"";_ref2=_this.props,indexPattern=_ref2.indexPattern,field=_ref2.field;if(!(!field||!_this.isSuggestingValues())){_context.next=4;break}return _context.abrupt("return");case 4:_this.setState({isLoading:true});_context.next=7;return _this.services.data.autocomplete.getValueSuggestions({indexPattern:indexPattern,field:field,query:query});case 7:suggestions=_context.sent;_this.setState({suggestions:suggestions,isLoading:false});case 9:case"end":return _context.stop()}}}),_callee)})));return function(){return _ref.apply(this,arguments)}}(),500));return _this}_createClass(PhraseSuggestorUI,[{key:"componentDidMount",value:function componentDidMount(){this.updateSuggestions()}},{key:"isSuggestingValues",value:function isSuggestingValues(){var shouldSuggestValues=this.services.uiSettings.get("filterEditor:suggestValues");var field=this.props.field;return shouldSuggestValues&&field&&field.aggregatable&&field.type==="string"}}]);return PhraseSuggestorUI}(_react.Component);exports.PhraseSuggestorUI=PhraseSuggestorUI;var PhraseSuggestor=(0,_public.withKibana)(PhraseSuggestorUI);exports.PhraseSuggestor=PhraseSuggestor},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ValueInputType=void 0;var _eui=__webpack_require__(12);var _react=__webpack_require__(13);var _lodash=__webpack_require__(0);var _react2=_interopRequireWildcard(__webpack_require__(4));var _filter_editor_utils=__webpack_require__(233);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ValueInputTypeUI=function(_Component){_inherits(ValueInputTypeUI,_Component);function ValueInputTypeUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,ValueInputTypeUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ValueInputTypeUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"onBoolChange",(function(event){var boolValue=event.target.value==="true";_this.props.onChange(boolValue)}));_defineProperty(_assertThisInitialized(_this),"onChange",(function(event){var params=event.target.value;_this.props.onChange(params)}));return _this}_createClass(ValueInputTypeUI,[{key:"render",value:function render(){var value=this.props.value;var inputElement;switch(this.props.type){case"string":inputElement=_react2.default.createElement(_eui.EuiFieldText,{placeholder:this.props.placeholder,value:value,onChange:this.onChange,controlOnly:this.props.controlOnly,className:this.props.className});break;case"number":inputElement=_react2.default.createElement(_eui.EuiFieldNumber,{placeholder:this.props.placeholder,value:typeof value==="string"?parseFloat(value):value,onChange:this.onChange,controlOnly:this.props.controlOnly,className:this.props.className});break;case"date":inputElement=_react2.default.createElement(_eui.EuiFieldText,{placeholder:this.props.placeholder,value:value,onChange:this.onChange,isInvalid:!(0,_lodash.isEmpty)(value)&&!(0,_filter_editor_utils.validateParams)(value,this.props.type),controlOnly:this.props.controlOnly,className:this.props.className});break;case"ip":inputElement=_react2.default.createElement(_eui.EuiFieldText,{placeholder:this.props.placeholder,value:value,onChange:this.onChange,isInvalid:!(0,_lodash.isEmpty)(value)&&!(0,_filter_editor_utils.validateParams)(value,this.props.type),controlOnly:this.props.controlOnly,className:this.props.className});break;case"boolean":inputElement=_react2.default.createElement(_eui.EuiSelect,{options:[{value:undefined,text:this.props.placeholder},{value:"true",text:this.props.intl.formatMessage({id:"data.filter.filterEditor.trueOptionLabel",defaultMessage:"true"})},{value:"false",text:this.props.intl.formatMessage({id:"data.filter.filterEditor.falseOptionLabel",defaultMessage:"false"})}],value:value,onChange:this.onBoolChange,className:this.props.className});break;default:break}return inputElement}}]);return ValueInputTypeUI}(_react2.Component);var ValueInputType=(0,_react.injectI18n)(ValueInputTypeUI);exports.ValueInputType=ValueInputType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterLabel=FilterLabel;var _react=_interopRequireWildcard(__webpack_require__(4));var _eui=__webpack_require__(12);var _i18n=__webpack_require__(1);var _filter_operators=__webpack_require__(234);var _common=__webpack_require__(93);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function FilterLabel(_ref){var filter=_ref.filter,valueLabel=_ref.valueLabel;var prefixText=filter.meta.negate?" ".concat(_i18n.i18n.translate("data.filter.filterBar.negatedFilterPrefix",{defaultMessage:"NOT "})):"";var prefix=filter.meta.negate&&!filter.meta.disabled?_react.default.createElement(_eui.EuiTextColor,{color:"danger"},prefixText):prefixText;var getValue=function getValue(text){return _react.default.createElement("span",{className:"globalFilterLabel__value"},text)};if(filter.meta.alias!==null){return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.alias)}switch(filter.meta.type){case _common.FILTERS.EXISTS:return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.key,": ",getValue("".concat(_filter_operators.existsOperator.message)));case _common.FILTERS.GEO_BOUNDING_BOX:return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.key,": ",getValue(valueLabel));case _common.FILTERS.GEO_POLYGON:return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.key,": ",getValue(valueLabel));case _common.FILTERS.PHRASES:return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.key,": ",getValue("".concat(_filter_operators.isOneOfOperator.message," ").concat(valueLabel)));case _common.FILTERS.QUERY_STRING:return _react.default.createElement(_react.Fragment,null,prefix,getValue("".concat(valueLabel)));case _common.FILTERS.PHRASE:case _common.FILTERS.RANGE:return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.key,": ",getValue(valueLabel));default:return _react.default.createElement(_react.Fragment,null,prefix,getValue("".concat(JSON.stringify(filter.query)||filter.meta.value)))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FilterManager",{enumerable:true,get:function get(){return _filter_manager.FilterManager}});Object.defineProperty(exports,"mapAndFlattenFilters",{enumerable:true,get:function get(){return _map_and_flatten_filters.mapAndFlattenFilters}});Object.defineProperty(exports,"onlyDisabledFiltersChanged",{enumerable:true,get:function get(){return _only_disabled.onlyDisabledFiltersChanged}});Object.defineProperty(exports,"generateFilters",{enumerable:true,get:function get(){return _generate_filters.generateFilters}});var _filter_manager=__webpack_require__(468);var _map_and_flatten_filters=__webpack_require__(239);var _only_disabled=__webpack_require__(240);var _generate_filters=__webpack_require__(483)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapAndFlattenFilters=void 0;var _lodash=__webpack_require__(0);var _map_filter=__webpack_require__(470);var mapAndFlattenFilters=function mapAndFlattenFilters(filters){return(0,_lodash.compact)((0,_lodash.flatten)(filters)).map((function(item){return(0,_map_filter.mapFilter)(item)}))};exports.mapAndFlattenFilters=mapAndFlattenFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.onlyDisabledFiltersChanged=void 0;var _lodash=__webpack_require__(0);var _common=__webpack_require__(93);var isEnabled=function isEnabled(f){return f&&f.meta&&!f.meta.disabled};var onlyDisabledFiltersChanged=function onlyDisabledFiltersChanged(newFilters,oldFilters){var newEnabledFilters=(0,_lodash.filter)(newFilters||[],isEnabled);var oldEnabledFilters=(0,_lodash.filter)(oldFilters||[],isEnabled);return(0,_common.compareFilters)(oldEnabledFilters,newEnabledFilters,_common.COMPARE_ALL_OPTIONS)};exports.onlyDisabledFiltersChanged=onlyDisabledFiltersChanged},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateBounds=calculateBounds;exports.getTime=getTime;var _datemath=_interopRequireDefault(__webpack_require__(110));var _common=__webpack_require__(93);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function calculateBounds(timeRange){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return{min:_datemath.default.parse(timeRange.from,{forceNow:options.forceNow}),max:_datemath.default.parse(timeRange.to,{roundUp:true,forceNow:options.forceNow})}}function getTime(indexPattern,timeRange,forceNow){if(!indexPattern){return}var timefield=indexPattern.fields.find((function(field){return field.name===indexPattern.timeFieldName}));if(!timefield){return}var bounds=calculateBounds(timeRange,{forceNow:forceNow});if(!bounds){return}return(0,_common.buildRangeFilter)(timefield,_objectSpread({},bounds.min&&{gte:bounds.min.toISOString()},{},bounds.max&&{lte:bounds.max.toISOString()},{format:"strict_date_optional_time"}),indexPattern)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSavedQueryService=void 0;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var createSavedQueryService=function createSavedQueryService(savedObjectsClient){var saveQuery=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(attributes){var _ref2,_ref2$overwrite,overwrite,query,queryObject,rawQueryResponse,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref2=_args.length>1&&_args[1]!==undefined?_args[1]:{},_ref2$overwrite=_ref2.overwrite,overwrite=_ref2$overwrite===void 0?false:_ref2$overwrite;if(attributes.title.length){_context.next=3;break}throw new Error("Cannot create saved query without a title");case 3:query={query:typeof attributes.query.query==="string"?attributes.query.query:JSON.stringify(attributes.query.query),language:attributes.query.language};queryObject={title:attributes.title.trim(),description:attributes.description,query:query};if(attributes.filters){queryObject.filters=attributes.filters}if(attributes.timefilter){queryObject.timefilter=attributes.timefilter}if(overwrite){_context.next=13;break}_context.next=10;return savedObjectsClient.create("query",queryObject,{id:attributes.title});case 10:rawQueryResponse=_context.sent;_context.next=16;break;case 13:_context.next=15;return savedObjectsClient.create("query",queryObject,{id:attributes.title,overwrite:true});case 15:rawQueryResponse=_context.sent;case 16:if(!rawQueryResponse.error){_context.next=18;break}throw new Error(rawQueryResponse.error.message);case 18:return _context.abrupt("return",parseSavedQueryObject(rawQueryResponse));case 19:case"end":return _context.stop()}}}),_callee)})));return function saveQuery(_x){return _ref.apply(this,arguments)}}();var getAllSavedQueries=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var count,response;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getSavedQueryCount();case 2:count=_context2.sent;_context2.next=5;return savedObjectsClient.find({type:"query",perPage:count,page:1});case 5:response=_context2.sent;return _context2.abrupt("return",response.savedObjects.map((function(savedObject){return parseSavedQueryObject(savedObject)})));case 7:case"end":return _context2.stop()}}}),_callee2)})));return function getAllSavedQueries(){return _ref3.apply(this,arguments)}}();var findSavedQueries=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var searchText,perPage,activePage,response,_args3=arguments;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:searchText=_args3.length>0&&_args3[0]!==undefined?_args3[0]:"";perPage=_args3.length>1&&_args3[1]!==undefined?_args3[1]:50;activePage=_args3.length>2&&_args3[2]!==undefined?_args3[2]:1;_context3.next=5;return savedObjectsClient.find({type:"query",search:searchText,searchFields:["title^5","description"],sortField:"_score",perPage:perPage,page:activePage});case 5:response=_context3.sent;return _context3.abrupt("return",{total:response.total,queries:response.savedObjects.map((function(savedObject){return parseSavedQueryObject(savedObject)}))});case 7:case"end":return _context3.stop()}}}),_callee3)})));return function findSavedQueries(){return _ref4.apply(this,arguments)}}();var getSavedQuery=function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(id){var savedObject;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return savedObjectsClient.get("query",id);case 2:savedObject=_context4.sent;if(!savedObject.error){_context4.next=5;break}throw new Error(savedObject.error.message);case 5:return _context4.abrupt("return",parseSavedQueryObject(savedObject));case 6:case"end":return _context4.stop()}}}),_callee4)})));return function getSavedQuery(_x2){return _ref5.apply(this,arguments)}}();var deleteSavedQuery=function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(id){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return savedObjectsClient.delete("query",id);case 2:return _context5.abrupt("return",_context5.sent);case 3:case"end":return _context5.stop()}}}),_callee5)})));return function deleteSavedQuery(_x3){return _ref6.apply(this,arguments)}}();var parseSavedQueryObject=function parseSavedQueryObject(savedQuery){var queryString;try{queryString=JSON.parse(savedQuery.attributes.query.query)}catch(error){queryString=savedQuery.attributes.query.query}var savedQueryItems={title:savedQuery.attributes.title||"",description:savedQuery.attributes.description||"",query:{query:queryString,language:savedQuery.attributes.query.language}};if(savedQuery.attributes.filters){savedQueryItems.filters=savedQuery.attributes.filters}if(savedQuery.attributes.timefilter){savedQueryItems.timefilter=savedQuery.attributes.timefilter}return{id:savedQuery.id,attributes:savedQueryItems}};var getSavedQueryCount=function(){var _ref7=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){var response;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return savedObjectsClient.find({type:"query",perPage:0,page:1});case 2:response=_context6.sent;return _context6.abrupt("return",response.total);case 4:case"end":return _context6.stop()}}}),_callee6)})));return function getSavedQueryCount(){return _ref7.apply(this,arguments)}}();return{saveQuery:saveQuery,getAllSavedQueries:getAllSavedQueries,findSavedQueries:findSavedQueries,getSavedQuery:getSavedQuery,deleteSavedQuery:deleteSavedQuery,getSavedQueryCount:getSavedQueryCount}};exports.createSavedQueryService=createSavedQueryService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.connectToQueryState=void 0;var _operators=__webpack_require__(85);var _lodash=_interopRequireDefault(__webpack_require__(0));var _common=__webpack_require__(93);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var connectToQueryState=function connectToQueryState(_ref,stateContainer,syncConfig){var timefilter=_ref.timefilter.timefilter,filterManager=_ref.filterManager,state$=_ref.state$;var syncKeys=[];if(syncConfig.time){syncKeys.push("time")}if(syncConfig.refreshInterval){syncKeys.push("refreshInterval")}if(syncConfig.filters){switch(syncConfig.filters){case true:syncKeys.push("filters");break;case _common.FilterStateStore.APP_STATE:syncKeys.push("appFilters");break;case _common.FilterStateStore.GLOBAL_STATE:syncKeys.push("globalFilters");break}}var initialState=_objectSpread({},stateContainer.get());var initialDirty=false;if(syncConfig.time&&!_lodash.default.isEqual(initialState.time,timefilter.getTime())){initialState.time=timefilter.getTime();initialDirty=true}if(syncConfig.refreshInterval&&!_lodash.default.isEqual(initialState.refreshInterval,timefilter.getRefreshInterval())){initialState.refreshInterval=timefilter.getRefreshInterval();initialDirty=true}if(syncConfig.filters){if(syncConfig.filters===true){if(!initialState.filters||!(0,_common.compareFilters)(initialState.filters,filterManager.getFilters(),_common.COMPARE_ALL_OPTIONS)){initialState.filters=filterManager.getFilters();initialDirty=true}}else if(syncConfig.filters===_common.FilterStateStore.GLOBAL_STATE){if(!initialState.filters||!(0,_common.compareFilters)(initialState.filters,filterManager.getGlobalFilters(),_common.COMPARE_ALL_OPTIONS)){initialState.filters=filterManager.getGlobalFilters();initialDirty=true}}else if(syncConfig.filters===_common.FilterStateStore.APP_STATE){if(!initialState.filters||!(0,_common.compareFilters)(initialState.filters,filterManager.getAppFilters(),_common.COMPARE_ALL_OPTIONS)){initialState.filters=filterManager.getAppFilters();initialDirty=true}}}if(initialDirty){stateContainer.set(_objectSpread({},stateContainer.get(),{},initialState))}var updateInProgress=false;var subs=[state$.pipe((0,_operators.filter)((function(_ref2){var changes=_ref2.changes,state=_ref2.state;if(updateInProgress)return false;return syncKeys.some((function(syncKey){return changes[syncKey]}))})),(0,_operators.map)((function(_ref3){var changes=_ref3.changes;var newState={};if(syncConfig.time&&changes.time){newState.time=timefilter.getTime()}if(syncConfig.refreshInterval&&changes.refreshInterval){newState.refreshInterval=timefilter.getRefreshInterval()}if(syncConfig.filters){if(syncConfig.filters===true&&changes.filters){newState.filters=filterManager.getFilters()}else if(syncConfig.filters===_common.FilterStateStore.GLOBAL_STATE&&changes.globalFilters){newState.filters=filterManager.getGlobalFilters()}else if(syncConfig.filters===_common.FilterStateStore.APP_STATE&&changes.appFilters){newState.filters=filterManager.getAppFilters()}}return newState}))).subscribe((function(newState){stateContainer.set(_objectSpread({},stateContainer.get(),{},newState))})),stateContainer.state$.subscribe((function(state){updateInProgress=true;if(syncConfig.time){var time=state.time||timefilter.getTimeDefaults();if(!_lodash.default.isEqual(time,timefilter.getTime())){timefilter.setTime(_lodash.default.cloneDeep(time))}}if(syncConfig.refreshInterval){var refreshInterval=state.refreshInterval||timefilter.getRefreshIntervalDefaults();if(!_lodash.default.isEqual(refreshInterval,timefilter.getRefreshInterval())){timefilter.setRefreshInterval(_lodash.default.cloneDeep(refreshInterval))}}if(syncConfig.filters){var filters=state.filters||[];if(syncConfig.filters===true){if(!(0,_common.compareFilters)(filters,filterManager.getFilters(),_common.COMPARE_ALL_OPTIONS)){filterManager.setFilters(_lodash.default.cloneDeep(filters))}}else if(syncConfig.filters===_common.FilterStateStore.APP_STATE){if(!(0,_common.compareFilters)(filters,filterManager.getAppFilters(),_common.COMPARE_ALL_OPTIONS)){filterManager.setAppFilters(_lodash.default.cloneDeep(filters))}}else if(syncConfig.filters===_common.FilterStateStore.GLOBAL_STATE){if(!(0,_common.compareFilters)(filters,filterManager.getGlobalFilters(),_common.COMPARE_ALL_OPTIONS)){filterManager.setGlobalFilters(_lodash.default.cloneDeep(filters))}}}updateInProgress=false}))];return function(){subs.forEach((function(s){return s.unsubscribe()}))}};exports.connectToQueryState=connectToQueryState},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FieldFormatsService",{enumerable:true,get:function get(){return _field_formats_service.FieldFormatsService}});Object.defineProperty(exports,"FieldFormatsSetup",{enumerable:true,get:function get(){return _field_formats_service.FieldFormatsSetup}});Object.defineProperty(exports,"FieldFormatsStart",{enumerable:true,get:function get(){return _field_formats_service.FieldFormatsStart}});Object.defineProperty(exports,"DateFormat",{enumerable:true,get:function get(){return _converters.DateFormat}});Object.defineProperty(exports,"baseFormattersPublic",{enumerable:true,get:function get(){return _constants.baseFormattersPublic}});var _field_formats_service=__webpack_require__(502);var _converters=__webpack_require__(504);var _constants=__webpack_require__(245)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.baseFormattersPublic=void 0;var _common=__webpack_require__(93);var _date=__webpack_require__(246);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var baseFormattersPublic=[_date.DateFormat].concat(_toConsumableArray(_common.baseFormatters));exports.baseFormattersPublic=baseFormattersPublic},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DateFormat=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(0);var _moment=_interopRequireDefault(__webpack_require__(84));var _common=__webpack_require__(93);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DateFormat=function(_FieldFormat){_inherits(DateFormat,_FieldFormat);function DateFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,DateFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DateFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"memoizedConverter",_lodash.noop);_defineProperty(_assertThisInitialized(_this),"memoizedPattern","");_defineProperty(_assertThisInitialized(_this),"timeZone","");_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var pattern=_this.param("pattern");var timezone=_this.param("timezone");var timezoneChanged=_this.timeZone!==timezone;var datePatternChanged=_this.memoizedPattern!==pattern;if(timezoneChanged||datePatternChanged){_this.timeZone=timezone;_this.memoizedPattern=pattern;_this.memoizedConverter=(0,_lodash.memoize)((function converter(value){if(value===null||value===undefined){return"-"}var date=(0,_moment.default)(value);if(date.isValid()){return date.format(pattern)}else{return value}}))}return _this.memoizedConverter(val)}));return _this}_createClass(DateFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{pattern:this.getConfig("dateFormat"),timezone:this.getConfig("dateFormat:tz")}}}]);return DateFormat}(_common.FieldFormat);exports.DateFormat=DateFormat;_defineProperty(DateFormat,"id",_common.FIELD_FORMAT_IDS.DATE);_defineProperty(DateFormat,"title",_i18n.i18n.translate("data.fieldFormats.date.title",{defaultMessage:"Date"}));_defineProperty(DateFormat,"fieldType",_common.KBN_FIELD_TYPES.DATE)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ILLEGAL_CHARACTERS=exports.ILLEGAL_CHARACTERS_VISIBLE=exports.CONTAINS_SPACES_KEY=exports.ILLEGAL_CHARACTERS_KEY=void 0;var ILLEGAL_CHARACTERS_KEY="ILLEGAL_CHARACTERS";exports.ILLEGAL_CHARACTERS_KEY=ILLEGAL_CHARACTERS_KEY;var CONTAINS_SPACES_KEY="CONTAINS_SPACES";exports.CONTAINS_SPACES_KEY=CONTAINS_SPACES_KEY;var ILLEGAL_CHARACTERS_VISIBLE=["\\","/","?",'"',"<",">","|"];exports.ILLEGAL_CHARACTERS_VISIBLE=ILLEGAL_CHARACTERS_VISIBLE;var ILLEGAL_CHARACTERS=ILLEGAL_CHARACTERS_VISIBLE.concat(" ");exports.ILLEGAL_CHARACTERS=ILLEGAL_CHARACTERS},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findByTitle=findByTitle;exports.getRoutes=getRoutes;var _lodash=__webpack_require__(0);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function findByTitle(_x,_x2){return _findByTitle.apply(this,arguments)}function _findByTitle(){_findByTitle=_asyncToGenerator(regeneratorRuntime.mark((function _callee(client,title){var _ref,savedObjects;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(title){_context.next=2;break}return _context.abrupt("return",Promise.resolve());case 2:_context.next=4;return client.find({type:"index-pattern",perPage:10,search:'"'.concat(title,'"'),searchFields:["title"],fields:["title"]});case 4:_ref=_context.sent;savedObjects=_ref.savedObjects;return _context.abrupt("return",(0,_lodash.find)(savedObjects,(function(obj){return obj.get("title").toLowerCase()===title.toLowerCase()})));case 7:case"end":return _context.stop()}}}),_callee)})));return _findByTitle.apply(this,arguments)}function getRoutes(){return{edit:"/management/kibana/index_patterns/{{id}}",addField:"/management/kibana/index_patterns/{{id}}/create-field",indexedFields:"/management/kibana/index_patterns/{{id}}?_a=(tab:indexedFields)",scriptedFields:"/management/kibana/index_patterns/{{id}}?_a=(tab:scriptedFields)",sourceFilters:"/management/kibana/index_patterns/{{id}}?_a=(tab:sourceFilters)"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.flattenHitWrapper=flattenHitWrapper;exports.createFlattenHitWrapper=createFlattenHitWrapper;var _lodash=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function flattenHit(indexPattern,hit,deep){var flat={};var fields=indexPattern.fields.getByName;(function flatten(obj){var keyPrefix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";keyPrefix=keyPrefix?keyPrefix+".":"";_lodash.default.forOwn(obj,(function(val,key){key=keyPrefix+key;if(deep){var _field=fields(key);var isNestedField=_field&&_field.type==="nested";var isArrayOfObjects=Array.isArray(val)&&_lodash.default.isPlainObject(_lodash.default.first(val));if(isArrayOfObjects&&!isNestedField){_lodash.default.each(val,(function(v){return flatten(v,key)}));return}}else if(flat[key]!==void 0){return}var field=fields(key);var hasValidMapping=field&&field.type!=="conflict";var isValue=!_lodash.default.isPlainObject(val);if(hasValidMapping||isValue){if(!flat[key]){flat[key]=val}else if(Array.isArray(flat[key])){flat[key].push(val)}else{flat[key]=[flat[key],val]}return}flatten(val,key)}))})(hit._source);return flat}function decorateFlattenedWrapper(hit,metaFields){return function(flattened){_lodash.default.each(metaFields,(function(meta){if(meta==="_source")return;flattened[meta]=hit[meta]}));_lodash.default.forOwn(hit.fields,(function(val,key){if(key[0]==="_"&&!_lodash.default.contains(metaFields,key))return;flattened[key]=Array.isArray(val)&&val.length===1?val[0]:val}));return flattened}}function flattenHitWrapper(indexPattern){var metaFields=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var cache=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new WeakMap;return function cachedFlatten(hit){var deep=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var decorateFlattened=decorateFlattenedWrapper(hit,metaFields);var cached=cache.get(hit);var flattened=cached||flattenHit(indexPattern,hit,deep);if(!cached){cache.set(hit,_objectSpread({},flattened))}return decorateFlattened(flattened)}}function createFlattenHitWrapper(){var cache=new WeakMap;return _lodash.default.partial(flattenHitWrapper,_lodash.default,_lodash.default,cache)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatHitProvider=formatHitProvider;var _lodash=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var formattedCache=new WeakMap;var partialFormattedCache=new WeakMap;function formatHitProvider(indexPattern,defaultFormat){function convert(hit,val,fieldName){var type=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"html";var field=indexPattern.fields.getByName(fieldName);var format=field?field.format:defaultFormat;return format.convert(val,type,{field:field,hit:hit})}function formatHit(hit){var type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"html";if(type==="text"){var flattened=indexPattern.flattenHit(hit);var result={};for(var _i=0,_Object$entries=Object.entries(flattened);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];result[key]=convert(hit,value,key,type)}return result}var cached=formattedCache.get(hit);if(cached){return cached}var partials=partialFormattedCache.get(hit)||{};partialFormattedCache.set(hit,partials);var cache={};formattedCache.set(hit,cache);_lodash.default.forOwn(indexPattern.flattenHit(hit),(function(val,fieldName){if(!fieldName){return}var formatted=partials[fieldName]==null?convert(hit,val,fieldName):partials[fieldName];cache[fieldName]=partials[fieldName]=formatted}));return cache}formatHit.formatField=function(hit,fieldName){var partials=partialFormattedCache.get(hit);if(partials&&partials[fieldName]!=null){return partials[fieldName]}if(!partials){partials={};partialFormattedCache.set(hit,partials)}var val=fieldName==="_source"?hit._source:indexPattern.flattenHit(hit)[fieldName];return convert(hit,val,fieldName)};return formatHit}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPattern=void 0;var _lodash=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(1);var _react=__webpack_require__(13);var _eui=__webpack_require__(12);var _react2=_interopRequireDefault(__webpack_require__(4));var _public=__webpack_require__(15);var _public2=__webpack_require__(14);var _common=__webpack_require__(93);var _utils=__webpack_require__(248);var _lib=__webpack_require__(140);var _fields=__webpack_require__(252);var _fields_fetcher=__webpack_require__(513);var _format_hit=__webpack_require__(250);var _flatten_hit=__webpack_require__(249);var _services=__webpack_require__(95);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MAX_ATTEMPTS_TO_RESOLVE_CONFLICTS=3;var type="index-pattern";var IndexPattern=function(){function IndexPattern(id,getConfig,savedObjectsClient,apiClient,patternCache){var _this=this;_classCallCheck(this,IndexPattern);_defineProperty(this,"id",void 0);_defineProperty(this,"title","");_defineProperty(this,"type",void 0);_defineProperty(this,"fieldFormatMap",void 0);_defineProperty(this,"typeMeta",void 0);_defineProperty(this,"fields",void 0);_defineProperty(this,"timeFieldName",void 0);_defineProperty(this,"intervalName",void 0);_defineProperty(this,"formatHit",void 0);_defineProperty(this,"formatField",void 0);_defineProperty(this,"flattenHit",void 0);_defineProperty(this,"metaFields",void 0);_defineProperty(this,"version",void 0);_defineProperty(this,"savedObjectsClient",void 0);_defineProperty(this,"patternCache",void 0);_defineProperty(this,"getConfig",void 0);_defineProperty(this,"sourceFilters",void 0);_defineProperty(this,"originalBody",{});_defineProperty(this,"fieldsFetcher",void 0);_defineProperty(this,"shortDotsEnable",false);_defineProperty(this,"mapping",(0,_public.expandShorthand)({title:_common.ES_FIELD_TYPES.TEXT,timeFieldName:_common.ES_FIELD_TYPES.KEYWORD,intervalName:_common.ES_FIELD_TYPES.KEYWORD,fields:"json",sourceFilters:"json",fieldFormatMap:{type:_common.ES_FIELD_TYPES.TEXT,_serialize:function _serialize(){var map=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var serialized=_lodash.default.transform(map,_this.serializeFieldFormatMap);return _lodash.default.isEmpty(serialized)?undefined:JSON.stringify(serialized)},_deserialize:function _deserialize(){var map=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"{}";return _lodash.default.mapValues(JSON.parse(map),(function(mapping){return _this.deserializeFieldFormatMap(mapping)}))}},type:_common.ES_FIELD_TYPES.KEYWORD,typeMeta:"json"}));this.id=id;this.savedObjectsClient=savedObjectsClient;this.patternCache=patternCache;this.getConfig=getConfig;this.shortDotsEnable=this.getConfig("shortDots:enable");this.metaFields=this.getConfig("metaFields");this.fields=new _fields.FieldList(this,[],this.shortDotsEnable);this.fieldsFetcher=(0,_fields_fetcher.createFieldsFetcher)(this,apiClient,this.getConfig("metaFields"));this.flattenHit=(0,_flatten_hit.flattenHitWrapper)(this,this.getConfig("metaFields"));this.formatHit=(0,_format_hit.formatHitProvider)(this,(0,_services.getFieldFormats)().getDefaultInstance(_common.KBN_FIELD_TYPES.STRING));this.formatField=this.formatHit.formatField}_createClass(IndexPattern,[{key:"serializeFieldFormatMap",value:function serializeFieldFormatMap(flat,format,field){if(format&&field){flat[field]=format}}},{key:"deserializeFieldFormatMap",value:function deserializeFieldFormatMap(mapping){var FieldFormat=(0,_services.getFieldFormats)().getType(mapping.id);return FieldFormat&&new FieldFormat(mapping.params,this.getConfig)}},{key:"initFields",value:function initFields(input){var newValue=input||this.fields;this.fields=new _fields.FieldList(this,newValue,this.shortDotsEnable)}},{key:"isFieldRefreshRequired",value:function isFieldRefreshRequired(){if(!this.fields){return true}return this.fields.every((function(field){var hasFieldCaps="aggregatable"in field&&"searchable"in field;var hasDocValuesFlag="readFromDocValues"in field;return!hasFieldCaps||!hasDocValuesFlag}))}},{key:"indexFields",value:function(){var _indexFields=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var forceFieldRefresh,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:forceFieldRefresh=_args.length>0&&_args[0]!==undefined?_args[0]:false;if(this.id){_context.next=3;break}return _context.abrupt("return");case 3:if(!(forceFieldRefresh||this.isFieldRefreshRequired())){_context.next=6;break}_context.next=6;return this.refreshFields();case 6:this.initFields();case 7:case"end":return _context.stop()}}}),_callee,this)})));function indexFields(){return _indexFields.apply(this,arguments)}return indexFields}()},{key:"updateFromElasticSearch",value:function(){var _updateFromElasticSearch=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(response){var forceFieldRefresh,warningTitle,warningText,editUrlTemplate,editUrl,_getNotifications,toasts,_args2=arguments;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:forceFieldRefresh=_args2.length>1&&_args2[1]!==undefined?_args2[1]:false;if(response.found){_context2.next=3;break}throw new _public.SavedObjectNotFound(type,this.id,"#/management/kibana/index_pattern");case 3:_lodash.default.forOwn(this.mapping,(function(fieldMapping,name){if(!fieldMapping._deserialize||!name){return}response._source[name]=fieldMapping._deserialize(response._source[name])}));_lodash.default.assign(this,response._source);if(!this.title&&this.id){this.title=this.id}if(this.isUnsupportedTimePattern()){warningTitle=_i18n.i18n.translate("data.indexPatterns.warningTitle",{defaultMessage:"Support for time interval index patterns removed"});warningText=_i18n.i18n.translate("data.indexPatterns.warningText",{defaultMessage:"Currently querying all indices matching {index}. {title} should be migrated to a wildcard-based index pattern.",values:{title:this.title,index:this.getIndex()}});editUrlTemplate=(0,_utils.getRoutes)().edit;editUrl="/app/kibana#"+editUrlTemplate.replace("{{id}}",this.id);_getNotifications=(0,_services.getNotifications)(),toasts=_getNotifications.toasts;toasts.addWarning({title:warningTitle,text:(0,_public2.toMountPoint)(_react2.default.createElement("div",null,_react2.default.createElement("p",null,warningText),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{size:"s",href:(0,_services.getHttp)().basePath.prepend(editUrl)},_react2.default.createElement(_react.FormattedMessage,{id:"data.indexPatterns.editIndexPattern",defaultMessage:"Edit index pattern"}))))))})}return _context2.abrupt("return",this.indexFields(forceFieldRefresh));case 8:case"end":return _context2.stop()}}}),_callee2,this)})));function updateFromElasticSearch(_x){return _updateFromElasticSearch.apply(this,arguments)}return updateFromElasticSearch}()},{key:"getComputedFields",value:function getComputedFields(){var scriptFields={};if(!this.fields){return{storedFields:["*"],scriptFields:scriptFields,docvalueFields:[]}}var docvalueFields=(0,_lodash.reject)(this.fields.getByType("date"),"scripted").map((function(dateField){return{field:dateField.name,format:dateField.esTypes&&dateField.esTypes.indexOf("date_nanos")!==-1?"strict_date_time":"date_time"}}));(0,_lodash.each)(this.getScriptedFields(),(function(field){scriptFields[field.name]={script:{source:field.script,lang:field.lang}}}));return{storedFields:["*"],scriptFields:scriptFields,docvalueFields:docvalueFields}}},{key:"init",value:function(){var _init=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var forceFieldRefresh,savedObject,response,_args3=arguments;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:forceFieldRefresh=_args3.length>0&&_args3[0]!==undefined?_args3[0]:false;if(this.id){_context3.next=3;break}return _context3.abrupt("return",this);case 3:_context3.next=5;return this.savedObjectsClient.get(type,this.id);case 5:savedObject=_context3.sent;this.version=savedObject._version;response={_id:savedObject.id,_type:savedObject.type,_source:_lodash.default.cloneDeep(savedObject.attributes),found:savedObject._version?true:false};this.originalBody=this.prepBody();_context3.next=11;return this.updateFromElasticSearch(response,forceFieldRefresh);case 11:this.originalBody=this.prepBody();return _context3.abrupt("return",this);case 13:case"end":return _context3.stop()}}}),_callee3,this)})));function init(){return _init.apply(this,arguments)}return init}()},{key:"migrate",value:function migrate(newTitle){var _this2=this;return this.savedObjectsClient.update(type,this.id,{title:newTitle,intervalName:null}).then((function(_ref){var _ref$attributes=_ref.attributes,title=_ref$attributes.title,intervalName=_ref$attributes.intervalName;_this2.title=title;_this2.intervalName=intervalName})).then((function(){return _this2}))}},{key:"getSourceFiltering",value:function getSourceFiltering(){return{excludes:this.sourceFilters&&this.sourceFilters.map((function(filter){return filter.value}))||[]}}},{key:"addScriptedField",value:function(){var _addScriptedField=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(name,script){var fieldType,lang,scriptedFields,names,_args4=arguments;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fieldType=_args4.length>2&&_args4[2]!==undefined?_args4[2]:"string";lang=_args4.length>3?_args4[3]:undefined;scriptedFields=this.getScriptedFields();names=_lodash.default.pluck(scriptedFields,"name");if(!_lodash.default.contains(names,name)){_context4.next=6;break}throw new _public.DuplicateField(name);case 6:this.fields.add(new _fields.Field(this,{name:name,script:script,fieldType:fieldType,scripted:true,lang:lang,aggregatable:true,filterable:true,searchable:true},false));_context4.next=9;return this.save();case 9:case"end":return _context4.stop()}}}),_callee4,this)})));function addScriptedField(_x2,_x3){return _addScriptedField.apply(this,arguments)}return addScriptedField}()},{key:"removeScriptedField",value:function removeScriptedField(field){this.fields.remove(field);return this.save()}},{key:"popularizeField",value:function(){var _popularizeField=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(fieldName){var unit,field,count,_args5=arguments;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:unit=_args5.length>1&&_args5[1]!==undefined?_args5[1]:1;field=this.fields.getByName(fieldName);if(field){_context5.next=4;break}return _context5.abrupt("return");case 4:count=Math.max((field.count||0)+unit,0);if(!(field.count===count)){_context5.next=7;break}return _context5.abrupt("return");case 7:field.count=count;_context5.next=10;return this.save();case 10:case"end":return _context5.stop()}}}),_callee5,this)})));function popularizeField(_x4){return _popularizeField.apply(this,arguments)}return popularizeField}()},{key:"getNonScriptedFields",value:function getNonScriptedFields(){return _lodash.default.where(this.fields,{scripted:false})}},{key:"getScriptedFields",value:function getScriptedFields(){return _lodash.default.where(this.fields,{scripted:true})}},{key:"getIndex",value:function getIndex(){if(!this.isUnsupportedTimePattern()){return this.title}var regex=/\[[^\]]*]/g;var splits=this.title.split(regex);var matches=this.title.match(regex)||[];return splits.map((function(split,i){var match=i>=matches.length?"":matches[i].replace(/[\[\]]/g,"");return"".concat(split.length?"*":"").concat(match)})).join("")}},{key:"isUnsupportedTimePattern",value:function isUnsupportedTimePattern(){return!!this.intervalName}},{key:"isTimeBased",value:function isTimeBased(){return!!this.timeFieldName&&(!this.fields||!!this.getTimeField())}},{key:"isTimeNanosBased",value:function isTimeNanosBased(){var timeField=this.getTimeField();return timeField&&timeField.esTypes&&timeField.esTypes.indexOf("date_nanos")!==-1}},{key:"isTimeBasedWildcard",value:function isTimeBasedWildcard(){return this.isTimeBased()&&this.isWildcard()}},{key:"getTimeField",value:function getTimeField(){if(!this.timeFieldName||!this.fields||!this.fields.getByName)return;return this.fields.getByName(this.timeFieldName)}},{key:"getFieldByName",value:function getFieldByName(name){if(!this.fields||!this.fields.getByName)return;return this.fields.getByName(name)}},{key:"getAggregationRestrictions",value:function getAggregationRestrictions(){var _this$typeMeta;return(_this$typeMeta=this.typeMeta)===null||_this$typeMeta===void 0?void 0:_this$typeMeta.aggs}},{key:"isWildcard",value:function isWildcard(){return _lodash.default.includes(this.title,"*")}},{key:"prepBody",value:function prepBody(){var _this3=this;var body={};_lodash.default.forOwn(this.mapping,(function(fieldMapping,fieldName){if(!fieldName||_this3[fieldName]==null)return;body[fieldName]=fieldMapping._serialize?fieldMapping._serialize(_this3[fieldName]):_this3[fieldName]}));return body}},{key:"create",value:function(){var _create2=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){var _this4=this;var allowOverride,_create,potentialDuplicateByTitle,_args7=arguments;return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:allowOverride=_args7.length>0&&_args7[0]!==undefined?_args7[0]:false;_create=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(duplicateId){var duplicatePattern,body,response;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!duplicateId){_context6.next=4;break}duplicatePattern=new IndexPattern(duplicateId,_this4.getConfig,_this4.savedObjectsClient,_this4.patternCache,_this4.fieldsFetcher);_context6.next=4;return duplicatePattern.destroy();case 4:body=_this4.prepBody();_context6.next=7;return _this4.savedObjectsClient.create(type,body,{id:_this4.id});case 7:response=_context6.sent;_this4.id=response.id;return _context6.abrupt("return",response.id);case 10:case"end":return _context6.stop()}}}),_callee6)})));return function _create(_x5){return _ref2.apply(this,arguments)}}();_context7.next=4;return(0,_utils.findByTitle)(this.savedObjectsClient,this.title);case 4:potentialDuplicateByTitle=_context7.sent;if(potentialDuplicateByTitle){_context7.next=9;break}_context7.next=8;return _create();case 8:return _context7.abrupt("return",_context7.sent);case 9:if(allowOverride){_context7.next=11;break}return _context7.abrupt("return",false);case 11:_context7.next=13;return _create(potentialDuplicateByTitle.id);case 13:return _context7.abrupt("return",_context7.sent);case 14:case"end":return _context7.stop()}}}),_callee7,this)})));function create(){return _create2.apply(this,arguments)}return create}()},{key:"save",value:function(){var _save=_asyncToGenerator(regeneratorRuntime.mark((function _callee8(){var _this5=this;var saveAttempts,body,originalChangedKeys,_args8=arguments;return regeneratorRuntime.wrap((function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:saveAttempts=_args8.length>0&&_args8[0]!==undefined?_args8[0]:0;if(this.id){_context8.next=3;break}return _context8.abrupt("return");case 3:body=this.prepBody();originalChangedKeys=Object.keys(body).filter((function(key){return body[key]!==_this5.originalBody[key]}));return _context8.abrupt("return",this.savedObjectsClient.update(type,this.id,body,{version:this.version}).then((function(resp){_this5.id=resp.id;_this5.version=resp._version})).catch((function(err){if(_lodash.default.get(err,"res.status")===409&&saveAttempts++<MAX_ATTEMPTS_TO_RESOLVE_CONFLICTS){var samePattern=new IndexPattern(_this5.id,_this5.getConfig,_this5.savedObjectsClient,_this5.patternCache,_this5.fieldsFetcher);return samePattern.init().then((function(){var updatedBody=samePattern.prepBody();var serverChangedKeys=Object.keys(updatedBody).filter((function(key){return updatedBody[key]!==body[key]&&_this5.originalBody[key]!==updatedBody[key]}));var unresolvedCollision=false;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=originalChangedKeys[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var originalKey=_step.value;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=serverChangedKeys[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var serverKey=_step2.value;if(originalKey===serverKey){unresolvedCollision=true;break}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}if(unresolvedCollision){var message=_i18n.i18n.translate("data.indexPatterns.unableWriteLabel",{defaultMessage:"Unable to write index pattern! Refresh the page to get the most up to date changes for this index pattern."});var _getNotifications2=(0,_services.getNotifications)(),toasts=_getNotifications2.toasts;toasts.addDanger(message);throw err}serverChangedKeys.forEach((function(key){_this5[key]=samePattern[key]}));_this5.version=samePattern.version;_this5.patternCache.clear(_this5.id);return _this5.save(saveAttempts)}))}throw err})));case 6:case"end":return _context8.stop()}}}),_callee8,this)})));function save(){return _save.apply(this,arguments)}return save}()},{key:"_fetchFields",value:function(){var _fetchFields2=_asyncToGenerator(regeneratorRuntime.mark((function _callee9(){var fields,scripted,all;return regeneratorRuntime.wrap((function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.fieldsFetcher.fetch(this);case 2:fields=_context9.sent;scripted=this.getScriptedFields();all=fields.concat(scripted);_context9.next=7;return this.initFields(all);case 7:case"end":return _context9.stop()}}}),_callee9,this)})));function _fetchFields(){return _fetchFields2.apply(this,arguments)}return _fetchFields}()},{key:"refreshFields",value:function refreshFields(){var _this6=this;return this._fetchFields().then((function(){return _this6.save()})).catch((function(err){var _getNotifications3=(0,_services.getNotifications)(),toasts=_getNotifications3.toasts;if(err instanceof _lib.IndexPatternMissingIndices){toasts.addDanger(err.message);return[]}toasts.addError(err,{title:_i18n.i18n.translate("data.indexPatterns.fetchFieldErrorTitle",{defaultMessage:"Error fetching fields for index pattern {title} (ID: {id})",values:{id:_this6.id,title:_this6.title}})})}))}},{key:"toJSON",value:function toJSON(){return this.id}},{key:"toString",value:function toString(){return""+this.toJSON()}},{key:"destroy",value:function destroy(){this.patternCache.clear(this.id);if(this.id){return this.savedObjectsClient.delete(type,this.id)}}},{key:"routes",get:function get(){return(0,_utils.getRoutes)()}}]);return IndexPattern}();exports.IndexPattern=IndexPattern},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _field_list=__webpack_require__(511);Object.keys(_field_list).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _field_list[key]}})}));var _field=__webpack_require__(253);Object.keys(_field).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _field[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Field=void 0;var _i18n=__webpack_require__(1);var _obj_define=__webpack_require__(512);var _services=__webpack_require__(95);var _common=__webpack_require__(93);var _utils=__webpack_require__(125);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Field=function Field(indexPattern,spec){var shortDotsEnable=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,Field);_defineProperty(this,"name",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"script",void 0);_defineProperty(this,"lang",void 0);_defineProperty(this,"count",void 0);_defineProperty(this,"esTypes",void 0);_defineProperty(this,"aggregatable",void 0);_defineProperty(this,"filterable",void 0);_defineProperty(this,"searchable",void 0);_defineProperty(this,"sortable",void 0);_defineProperty(this,"visualizable",void 0);_defineProperty(this,"scripted",void 0);_defineProperty(this,"subType",void 0);_defineProperty(this,"displayName",void 0);_defineProperty(this,"format",void 0);_defineProperty(this,"routes",{edit:"/management/kibana/index_patterns/{{indexPattern.id}}/field/{{name}}"});_defineProperty(this,"$$spec",void 0);if(spec instanceof Field)spec=spec.$$spec;var obj=new _obj_define.ObjDefine(spec,Field.prototype);if(spec.name==="_source"){spec.type="_source"}var type=(0,_common.getKbnFieldType)(spec.type);if(spec.type&&!type){var title=_i18n.i18n.translate("data.indexPatterns.unknownFieldHeader",{values:{type:spec.type},defaultMessage:"Unknown field type {type}"});var text=_i18n.i18n.translate("data.indexPatterns.unknownFieldErrorMessage",{values:{name:spec.name,title:indexPattern.title},defaultMessage:"Field {name} in indexPattern {title} is using an unknown field type."});var _getNotifications=(0,_services.getNotifications)(),toasts=_getNotifications.toasts;toasts.addDanger({title:title,text:text})}if(!type)type=(0,_common.getKbnFieldType)("unknown");var format=spec.format;if(!_common.FieldFormat.isInstanceOfFieldFormat(format)){var fieldFormatsService=(0,_services.getFieldFormats)();format=indexPattern.fieldFormatMap[spec.name]||fieldFormatsService.getDefaultInstance(spec.type,spec.esTypes)}var indexed=!!spec.indexed;var scripted=!!spec.scripted;var searchable=!!spec.searchable||scripted;var aggregatable=!!spec.aggregatable||scripted;var readFromDocValues=!!spec.readFromDocValues&&!scripted;var sortable=spec.name==="_score"||(indexed||aggregatable)&&type&&type.sortable;var filterable=spec.name==="_id"||scripted||(indexed||searchable)&&type&&type.filterable;var visualizable=aggregatable;this.name="";obj.fact("name");this.type="";obj.fact("type");obj.fact("esTypes");obj.writ("count",spec.count||0);obj.fact("scripted",scripted);obj.writ("script",scripted?spec.script:null);obj.writ("lang",scripted?spec.lang||"painless":null);obj.fact("searchable",searchable);obj.fact("aggregatable",aggregatable);obj.fact("readFromDocValues",readFromDocValues);obj.comp("format",format);obj.comp("sortable",sortable);obj.comp("filterable",filterable);obj.comp("visualizable",visualizable);obj.comp("indexPattern",indexPattern);obj.comp("displayName",shortDotsEnable?(0,_utils.shortenDottedString)(spec.name):spec.name);this.$$spec=spec;obj.comp("$$spec",spec);obj.writ("conflictDescriptions");obj.fact("subType");return obj.create()};exports.Field=Field;Field.prototype.routes={edit:"/management/kibana/index_patterns/{{indexPattern.id}}/field/{{name}}"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternsApiClient=void 0;var _lib=__webpack_require__(140);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var API_BASE_URL="/api/index_patterns/";var IndexPatternsApiClient=function(){function IndexPatternsApiClient(http){_classCallCheck(this,IndexPatternsApiClient);_defineProperty(this,"http",void 0);this.http=http}_createClass(IndexPatternsApiClient,[{key:"_request",value:function _request(url,query){return this.http.fetch(url,{query:query}).catch((function(resp){var _resp$body$attributes;if(resp.body.statusCode===404&&((_resp$body$attributes=resp.body.attributes)===null||_resp$body$attributes===void 0?void 0:_resp$body$attributes.code)==="no_matching_indices"){throw new _lib.IndexPatternMissingIndices(resp.body.message)}throw new Error(resp.body.message||resp.body.error||"".concat(resp.body.statusCode," Response"))}))}},{key:"_getUrl",value:function _getUrl(path){return API_BASE_URL+path.filter(Boolean).map(encodeURIComponent).join("/")}},{key:"getFieldsForTimePattern",value:function getFieldsForTimePattern(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var pattern=options.pattern,lookBack=options.lookBack,metaFields=options.metaFields;var url=this._getUrl(["_fields_for_time_pattern"]);return this._request(url,{pattern:pattern,look_back:lookBack,meta_fields:metaFields}).then((function(resp){return resp.fields}))}},{key:"getFieldsForWildcard",value:function getFieldsForWildcard(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var pattern=options.pattern,metaFields=options.metaFields,type=options.type,params=options.params;var url;var query;if(type){url=this._getUrl([type,"_fields_for_wildcard"]);query={pattern:pattern,meta_fields:metaFields,params:JSON.stringify(params)}}else{url=this._getUrl(["_fields_for_wildcard"]);query={pattern:pattern,meta_fields:metaFields}}return this._request(url,query).then((function(resp){return resp.fields}))}}]);return IndexPatternsApiClient}();exports.IndexPatternsApiClient=IndexPatternsApiClient},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AggParamType=void 0;var _agg_config=__webpack_require__(142);var _base=__webpack_require__(111);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggParamType=function(_BaseParamType){_inherits(AggParamType,_BaseParamType);function AggParamType(config){var _this;_classCallCheck(this,AggParamType);_this=_possibleConstructorReturn(this,_getPrototypeOf(AggParamType).call(this,config));_defineProperty(_assertThisInitialized(_this),"makeAgg",void 0);_defineProperty(_assertThisInitialized(_this),"allowedAggs",[]);if(config.allowedAggs){_this.allowedAggs=config.allowedAggs}if(!config.write){_this.write=function(aggConfig,output){if(aggConfig.params[_this.name]&&aggConfig.params[_this.name].length){output.params[_this.name]=aggConfig.params[_this.name]}}}if(!config.serialize){_this.serialize=function(agg){return agg.toJSON()}}if(!config.deserialize){_this.deserialize=function(state,agg){if(!agg){throw new Error("aggConfig was not provided to AggParamType deserialize function")}return _this.makeAgg(agg,state)}}_this.makeAgg=config.makeAgg;_this.valueType=_agg_config.AggConfig;return _this}return AggParamType}(_base.BaseParamType);exports.AggParamType=AggParamType},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldParamType=void 0;var _i18n=__webpack_require__(1);var _public=__webpack_require__(15);var _base=__webpack_require__(111);var _filter=__webpack_require__(257);var _common=__webpack_require__(93);var _services=__webpack_require__(95);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var filterByType=(0,_filter.propFilter)("type");var FieldParamType=function(_BaseParamType){_inherits(FieldParamType,_BaseParamType);function FieldParamType(config){var _this;_classCallCheck(this,FieldParamType);_this=_possibleConstructorReturn(this,_getPrototypeOf(FieldParamType).call(this,config));_defineProperty(_assertThisInitialized(_this),"required",true);_defineProperty(_assertThisInitialized(_this),"scriptable",true);_defineProperty(_assertThisInitialized(_this),"filterFieldTypes",void 0);_defineProperty(_assertThisInitialized(_this),"onlyAggregatable",void 0);_defineProperty(_assertThisInitialized(_this),"getAvailableFields",(function(aggConfig){var fields=aggConfig.getIndexPattern().fields;var filteredFields=fields.filter((function(field){var _assertThisInitialize=_assertThisInitialized(_this),onlyAggregatable=_assertThisInitialize.onlyAggregatable,scriptable=_assertThisInitialize.scriptable,filterFieldTypes=_assertThisInitialize.filterFieldTypes;if(onlyAggregatable&&(!field.aggregatable||(0,_common.isNestedField)(field))||!scriptable&&field.scripted){return false}return filterByType([field],filterFieldTypes).length!==0}));return filteredFields}));_this.filterFieldTypes=config.filterFieldTypes||"*";_this.onlyAggregatable=config.onlyAggregatable!==false;if(!config.write){_this.write=function(aggConfig,output){var field=aggConfig.getField();if(!field){throw new TypeError(_i18n.i18n.translate("data.search.aggs.paramTypes.field.requiredFieldParameterErrorMessage",{defaultMessage:"{fieldParameter} is a required parameter",values:{fieldParameter:'"field"'}}))}if(field.scripted){output.params.script={source:field.script,lang:field.lang}}else{output.params.field=field.name}}}_this.serialize=function(field){return field.name};_this.deserialize=function(fieldName,aggConfig){if(!aggConfig){throw new Error("aggConfig was not provided to FieldParamType deserialize function")}var field=aggConfig.getIndexPattern().fields.getByName(fieldName);if(!field){throw new _public.SavedObjectNotFound("index-pattern-field",fieldName)}var validField=_this.getAvailableFields(aggConfig).find((function(f){return f.name===fieldName}));if(!validField){(0,_services.getNotifications)().toasts.addDanger(_i18n.i18n.translate("data.search.aggs.paramTypes.field.invalidSavedFieldParameterErrorMessage",{defaultMessage:"Saved {fieldParameter} parameter is now invalid. Please select a new field.",values:{fieldParameter:'"field"'}}))}return validField};return _this}return FieldParamType}(_base.BaseParamType);exports.FieldParamType=FieldParamType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"aggTypeFilters",{enumerable:true,get:function get(){return _agg_type_filters.aggTypeFilters}});Object.defineProperty(exports,"AggTypeFilters",{enumerable:true,get:function get(){return _agg_type_filters.AggTypeFilters}});Object.defineProperty(exports,"propFilter",{enumerable:true,get:function get(){return _prop_filter.propFilter}});var _agg_type_filters=__webpack_require__(521);var _prop_filter=__webpack_require__(522)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.StringParamType=void 0;var _base=__webpack_require__(111);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var StringParamType=function(_BaseParamType){_inherits(StringParamType,_BaseParamType);function StringParamType(config){var _this;_classCallCheck(this,StringParamType);_this=_possibleConstructorReturn(this,_getPrototypeOf(StringParamType).call(this,config));if(!config.write){_this.write=function(aggConfig,output){if(aggConfig.params[_this.name]&&aggConfig.params[_this.name].length){output.params[_this.name]=aggConfig.params[_this.name]}}}return _this}return StringParamType}(_base.BaseParamType);exports.StringParamType=StringParamType},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.JsonParamType=void 0;var _lodash=_interopRequireDefault(__webpack_require__(0));var _base=__webpack_require__(111);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var JsonParamType=function(_BaseParamType){_inherits(JsonParamType,_BaseParamType);function JsonParamType(config){var _this;_classCallCheck(this,JsonParamType);_this=_possibleConstructorReturn(this,_getPrototypeOf(JsonParamType).call(this,config));_this.name=config.name||"json";if(!config.write){_this.write=function(aggConfig,output){var paramJson;var param=aggConfig.params[_this.name];if(!param){return}try{paramJson=JSON.parse(param)}catch(err){return}function filteredCombine(srcA,srcB){function mergeObjs(a,b){return(0,_lodash.default)(a).keys().union(_lodash.default.keys(b)).transform((function(dest,key){var val=compare(a[key],b[key]);if(val!==undefined)dest[key]=val}),{}).value()}function mergeArrays(a,b){return _lodash.default.times(Math.max(a.length,b.length),(function(i){return compare(a[i],b[i])}))}function compare(a,b){if(_lodash.default.isPlainObject(a)&&_lodash.default.isPlainObject(b))return mergeObjs(a,b);if(Array.isArray(a)&&Array.isArray(b))return mergeArrays(a,b);if(b===null)return undefined;if(b!==undefined)return b;return a}return compare(srcA,srcB)}output.params=filteredCombine(output.params,paramJson);return}}return _this}return JsonParamType}(_base.BaseParamType);exports.JsonParamType=JsonParamType},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AggConfigs=void 0;var _lodash=_interopRequireDefault(__webpack_require__(0));var _agg_config=__webpack_require__(142);var _agg_groups=__webpack_require__(172);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function removeParentAggs(obj){for(var prop in obj){if(prop==="parentAggs")delete obj[prop];else if(_typeof(obj[prop])==="object")removeParentAggs(obj[prop])}}function parseParentAggs(dslLvlCursor,dsl){if(dsl.parentAggs){_lodash.default.each(dsl.parentAggs,(function(agg,key){dslLvlCursor[key]=agg;parseParentAggs(dslLvlCursor,agg)}))}}var AggConfigs=function(){function AggConfigs(indexPattern){var _this=this;var configStates=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var opts=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,AggConfigs);_defineProperty(this,"indexPattern",void 0);_defineProperty(this,"timeRange",void 0);_defineProperty(this,"typesRegistry",void 0);_defineProperty(this,"aggs",void 0);_defineProperty(this,"createAggConfig",(function(params){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$addToAggConfigs=_ref.addToAggConfigs,addToAggConfigs=_ref$addToAggConfigs===void 0?true:_ref$addToAggConfigs;var type=params.type;var aggConfig;if(params instanceof _agg_config.AggConfig){aggConfig=params;params.parent=_this}else{aggConfig=new _agg_config.AggConfig(_this,_objectSpread({},params,{type:typeof type==="string"?_this.typesRegistry.get(type):type}))}if(addToAggConfigs){_this.aggs.push(aggConfig)}return aggConfig}));this.typesRegistry=opts.typesRegistry;configStates=_agg_config.AggConfig.ensureIds(configStates);this.aggs=[];this.indexPattern=indexPattern;configStates.forEach((function(params){return _this.createAggConfig(params)}))}_createClass(AggConfigs,[{key:"setTimeRange",value:function setTimeRange(timeRange){this.timeRange=timeRange;var updateAggTimeRange=function updateAggTimeRange(agg){_lodash.default.each(agg.params,(function(param){if(param instanceof _agg_config.AggConfig){updateAggTimeRange(param)}}));if(_lodash.default.get(agg,"type.name")==="date_histogram"){agg.params.timeRange=timeRange}};this.aggs.forEach(updateAggTimeRange)}},{key:"clone",value:function clone(){var _ref2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref2$enabledOnly=_ref2.enabledOnly,enabledOnly=_ref2$enabledOnly===void 0?true:_ref2$enabledOnly;var filterAggs=function filterAggs(agg){if(!enabledOnly)return true;return agg.enabled};var aggConfigs=new AggConfigs(this.indexPattern,this.aggs.filter(filterAggs),{typesRegistry:this.typesRegistry});return aggConfigs}},{key:"jsonDataEquals",value:function jsonDataEquals(aggConfigs){if(aggConfigs.length!==this.aggs.length){return false}for(var i=0;i<this.aggs.length;i+=1){if(!_lodash.default.isEqual(aggConfigs[i].toJSON(),this.aggs[i].toJSON())){return false}}return true}},{key:"toDsl",value:function toDsl(){var _this2=this;var hierarchical=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var dslTopLvl={};var dslLvlCursor;var nestedMetrics;if(hierarchical){nestedMetrics=this.aggs.filter((function(agg){return agg.type.type==="metrics"&&agg.type.name!=="count"})).map((function(agg){return{config:agg,dsl:agg.toDsl(_this2)}}))}this.getRequestAggs().filter((function(config){return!config.type.hasNoDsl})).forEach((function(config,i,list){if(!dslLvlCursor){dslLvlCursor=dslTopLvl}else{var prevConfig=list[i-1];var prevDsl=dslLvlCursor[prevConfig.id];dslLvlCursor=prevDsl.aggs||dslLvlCursor}var dsl=dslLvlCursor[config.id]=config.toDsl(_this2);var subAggs;parseParentAggs(dslLvlCursor,dsl);if(config.type.type===_agg_groups.AggGroupNames.Buckets&&i<list.length-1){subAggs=dsl.aggs||(dsl.aggs={})}if(subAggs&&nestedMetrics){nestedMetrics.forEach((function(agg){subAggs[agg.config.id]=agg.dsl;if(agg.dsl.parentAggs){Object.entries(agg.dsl.parentAggs).forEach((function(_ref3){var _ref4=_slicedToArray(_ref3,2),parentAggId=_ref4[0],parentAgg=_ref4[1];subAggs[parentAggId]=parentAgg}))}}))}}));removeParentAggs(dslTopLvl);return dslTopLvl}},{key:"getAll",value:function getAll(){return _toConsumableArray(this.aggs)}},{key:"byIndex",value:function byIndex(index){return this.aggs[index]}},{key:"byId",value:function byId(id){return this.aggs.find((function(agg){return agg.id===id}))}},{key:"byName",value:function byName(name){return this.aggs.filter((function(agg){var _agg$type;return((_agg$type=agg.type)===null||_agg$type===void 0?void 0:_agg$type.name)===name}))}},{key:"byType",value:function byType(type){return this.aggs.filter((function(agg){var _agg$type2;return((_agg$type2=agg.type)===null||_agg$type2===void 0?void 0:_agg$type2.type)===type}))}},{key:"byTypeName",value:function byTypeName(type){return this.byName(type)}},{key:"bySchemaName",value:function bySchemaName(schema){return this.aggs.filter((function(agg){return agg.schema===schema}))}},{key:"getRequestAggs",value:function getRequestAggs(){var aggregations=this.aggs.filter((function(agg){return agg.enabled&&agg.type})).reduce((function(requestValuesAggs,agg){var aggs=agg.getRequestAggs();return aggs?requestValuesAggs.concat(aggs):requestValuesAggs}),[]);return _lodash.default.sortBy(aggregations,(function(agg){return agg.type.type===_agg_groups.AggGroupNames.Metrics?1:0}))}},{key:"getRequestAggById",value:function getRequestAggById(id){return this.aggs.find((function(agg){return agg.id===id}))}},{key:"getResponseAggs",value:function getResponseAggs(){return this.getRequestAggs().reduce((function(responseValuesAggs,agg){var aggs=agg.getResponseAggs();return aggs?responseValuesAggs.concat(aggs):responseValuesAggs}),[])}},{key:"getResponseAggById",value:function getResponseAggById(id){id=String(id);var reqAgg=_lodash.default.find(this.getRequestAggs(),(function(agg){return id.substr(0,String(agg.id).length)===agg.id}));if(!reqAgg)return;return _lodash.default.find(reqAgg.getResponseAggs(),{id:id})}},{key:"onSearchRequestStart",value:function onSearchRequestStart(searchSource,options){return Promise.all(this.getRequestAggs().map((function(agg){return agg.onSearchRequestStart(searchSource,options)})))}}]);return AggConfigs}();exports.AggConfigs=AggConfigs},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPercentileValue=void 0;var _lodash=__webpack_require__(0);var getPercentileValue=function getPercentileValue(agg,bucket){var values=bucket[agg.parentId].values;var percentile=(0,_lodash.find)(values,(function(_ref){var key=_ref.key;return key===agg.key}));return percentile?percentile.value:NaN};exports.getPercentileValue=getPercentileValue},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.forwardModifyAggConfigOnSearchRequestStart=void 0;var forwardModifyAggConfigOnSearchRequestStart=function forwardModifyAggConfigOnSearchRequestStart(paramName){return function(aggConfig,searchSource,request){if(!aggConfig||!aggConfig.params){return}var nestedAggConfig=aggConfig.getParam(paramName);if(nestedAggConfig&&nestedAggConfig.type&&nestedAggConfig.type.params){nestedAggConfig.type.params.forEach((function(param){if(param.modifyAggConfigOnSearchRequestStart){param.modifyAggConfigOnSearchRequestStart(nestedAggConfig,searchSource,request)}}))}}};exports.forwardModifyAggConfigOnSearchRequestStart=forwardModifyAggConfigOnSearchRequestStart},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDateHistogramBucketAggConfig=isDateHistogramBucketAggConfig;exports.dateHistogramBucketAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(0));var _momentTimezone=_interopRequireDefault(__webpack_require__(86));var _i18n=__webpack_require__(1);var _time_buckets=__webpack_require__(264);var _bucket_agg_type=__webpack_require__(105);var _bucket_agg_types=__webpack_require__(103);var _date_histogram=__webpack_require__(546);var _interval_options=__webpack_require__(265);var _common=__webpack_require__(93);var _agg_params=__webpack_require__(143);var _metric_agg_type=__webpack_require__(97);var _services=__webpack_require__(95);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var detectedTimezone=_momentTimezone.default.tz.guess();var tzOffset=(0,_momentTimezone.default)().format("Z");var updateTimeBuckets=function updateTimeBuckets(agg,timefilter,customBuckets){var bounds=agg.params.timeRange?timefilter.calculateBounds(agg.params.timeRange):null;var buckets=customBuckets||agg.buckets;buckets.setBounds(agg.fieldIsTimeField()&&bounds);buckets.setInterval(agg.params.interval)};function isDateHistogramBucketAggConfig(agg){return Boolean(agg.buckets)}var dateHistogramBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.DATE_HISTOGRAM,title:_i18n.i18n.translate("data.search.aggs.buckets.dateHistogramTitle",{defaultMessage:"Date Histogram"}),ordered:{date:true},makeLabel:function makeLabel(agg){var output={};if(this.params){output=(0,_agg_params.writeParams)(this.params,agg)}var field=agg.getFieldDisplayName();return _i18n.i18n.translate("data.search.aggs.buckets.dateHistogramLabel",{defaultMessage:"{fieldName} per {intervalDescription}",values:{fieldName:field,intervalDescription:output.metricScaleText||output.bucketInterval.description}})},createFilter:_date_histogram.createFilterDateHistogram,decorateAggConfig:function decorateAggConfig(){var uiSettings=(0,_services.getUiSettings)();var buckets;return{buckets:{configurable:true,get:function get(){if(buckets)return buckets;var timefilter=(0,_services.getQueryService)().timefilter.timefilter;buckets=new _time_buckets.TimeBuckets({uiSettings:uiSettings});updateTimeBuckets(this,timefilter,buckets);return buckets}}}},getFormat:function getFormat(agg){var DateFieldFormat=(0,_services.getFieldFormats)().getType(_common.FIELD_FORMAT_IDS.DATE);if(!DateFieldFormat){throw new Error("Unable to retrieve Date Field Format")}return new DateFieldFormat({pattern:agg.buckets.getScaledDateFormat()},(function(key){return(0,_services.getUiSettings)().get(key)}))},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.DATE,default:function _default(agg){return agg.getIndexPattern().timeFieldName},onChange:function onChange(agg){if(_lodash.default.get(agg,"params.interval")==="auto"&&!agg.fieldIsTimeField()){delete agg.params.interval}}},{name:"timeRange",default:null,write:_lodash.default.noop},{name:"useNormalizedEsInterval",default:true,write:_lodash.default.noop},{name:"scaleMetricValues",default:false,write:_lodash.default.noop,advanced:true},{name:"interval",deserialize:function deserialize(state,agg){if(state==="custom"){return _lodash.default.get(agg,"params.customInterval")}var interval=_lodash.default.find(_interval_options.intervalOptions,{val:state});if(!interval&&state==="year"){return"y"}return state},default:"auto",options:_interval_options.intervalOptions,write:function write(agg,output,aggs){var timefilter=(0,_services.getQueryService)().timefilter.timefilter;updateTimeBuckets(agg,timefilter);var _agg$params=agg.params,useNormalizedEsInterval=_agg$params.useNormalizedEsInterval,scaleMetricValues=_agg$params.scaleMetricValues;var interval=agg.buckets.getInterval(useNormalizedEsInterval);output.bucketInterval=interval;if(interval.expression==="0ms"){return}output.params=_objectSpread({},output.params,{},(0,_common.dateHistogramInterval)(interval.expression));var scaleMetrics=scaleMetricValues&&interval.scaled&&interval.scale<1;if(scaleMetrics&&aggs){var metrics=aggs.aggs.filter((function(a){return(0,_metric_agg_type.isMetricAggType)(a.type)}));var all=_lodash.default.every(metrics,(function(a){var type=a.type;if((0,_metric_agg_type.isMetricAggType)(type)){return type.isScalable()}}));if(all){output.metricScale=interval.scale;output.metricScaleText=interval.preScaled.description}}}},{name:"time_zone",default:undefined,serialize:_lodash.default.noop,write:function write(agg,output){var tz=agg.params.time_zone;if(!tz&&agg.params.field){tz=_lodash.default.get(agg.getIndexPattern(),["typeMeta","aggs","date_histogram",agg.params.field.name,"time_zone"])}if(!tz){var config=(0,_services.getUiSettings)();var isDefaultTimezone=config.isDefault("dateFormat:tz");tz=isDefaultTimezone?detectedTimezone||tzOffset:config.get("dateFormat:tz")}output.params.time_zone=tz}},{name:"drop_partials",default:false,write:_lodash.default.noop,shouldShow:function shouldShow(agg){var field=agg.params.field;return field&&field.name&&field.name===agg.getIndexPattern().timeFieldName}},{name:"format"},{name:"min_doc_count",default:1},{name:"extended_bounds",default:{},write:function write(agg,output){var val=agg.params.extended_bounds;if(val.min!=null||val.max!=null){output.params.extended_bounds={min:(0,_momentTimezone.default)(val.min).valueOf(),max:(0,_momentTimezone.default)(val.max).valueOf()};return}}}]});exports.dateHistogramBucketAgg=dateHistogramBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TimeBuckets",{enumerable:true,get:function get(){return _time_buckets.TimeBuckets}});var _time_buckets=__webpack_require__(543)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.intervalOptions=void 0;var _i18n=__webpack_require__(1);var intervalOptions=[{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.autoDisplayName",{defaultMessage:"Auto"}),val:"auto",enabled:function enabled(agg){return agg.fieldIsTimeField()}},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.millisecondDisplayName",{defaultMessage:"Millisecond"}),val:"ms"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.secondDisplayName",{defaultMessage:"Second"}),val:"s"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.minuteDisplayName",{defaultMessage:"Minute"}),val:"m"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.hourlyDisplayName",{defaultMessage:"Hourly"}),val:"h"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.dailyDisplayName",{defaultMessage:"Daily"}),val:"d"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.weeklyDisplayName",{defaultMessage:"Weekly"}),val:"w"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.monthlyDisplayName",{defaultMessage:"Monthly"}),val:"M"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.yearlyDisplayName",{defaultMessage:"Yearly"}),val:"y"}];exports.intervalOptions=intervalOptions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dateRangeBucketAgg=void 0;var _lodash=__webpack_require__(0);var _momentTimezone=_interopRequireDefault(__webpack_require__(86));var _i18n=__webpack_require__(1);var _bucket_agg_types=__webpack_require__(103);var _bucket_agg_type=__webpack_require__(105);var _date_range=__webpack_require__(552);var _date_range2=__webpack_require__(138);var _common=__webpack_require__(93);var _services=__webpack_require__(95);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var dateRangeTitle=_i18n.i18n.translate("data.search.aggs.buckets.dateRangeTitle",{defaultMessage:"Date Range"});var dateRangeBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.DATE_RANGE,title:dateRangeTitle,createFilter:_date_range.createFilterDateRange,getKey:function getKey(_ref){var from=_ref.from,to=_ref.to;return{from:from,to:to}},getFormat:function getFormat(agg){var fieldFormatsService=(0,_services.getFieldFormats)();var formatter=agg.fieldOwnFormatter(_common.TEXT_CONTEXT_TYPE,fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.DATE));var DateRangeFormat=_common.FieldFormat.from((function(range){return(0,_date_range2.convertDateRangeToString)(range,formatter)}));return new DateRangeFormat},makeLabel:function makeLabel(aggConfig){return aggConfig.getFieldDisplayName()+" date ranges"},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.DATE,default:function _default(agg){return agg.getIndexPattern().timeFieldName}},{name:"ranges",default:[{from:"now-1w/w",to:"now"}]},{name:"time_zone",default:undefined,serialize:function serialize(){return undefined},write:function write(agg,output){var field=agg.getParam("field");var tz=agg.getParam("time_zone");if(!tz&&field){tz=(0,_lodash.get)(agg.getIndexPattern(),["typeMeta","aggs","date_range",field.name,"time_zone"])}if(!tz){var config=(0,_services.getUiSettings)();var detectedTimezone=_momentTimezone.default.tz.guess();var tzOffset=(0,_momentTimezone.default)().format("Z");var isDefaultTimezone=config.isDefault("dateFormat:tz");tz=isDefaultTimezone?detectedTimezone||tzOffset:config.get("dateFormat:tz")}output.params.time_zone=tz}}]});exports.dateRangeBucketAgg=dateRangeBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ipRangeBucketAgg=void 0;var _lodash=__webpack_require__(0);var _i18n=__webpack_require__(1);var _bucket_agg_type=__webpack_require__(105);var _bucket_agg_types=__webpack_require__(103);var _ip_range=__webpack_require__(553);var _ip_range2=__webpack_require__(139);var _common=__webpack_require__(93);var _services=__webpack_require__(95);var ipRangeTitle=_i18n.i18n.translate("data.search.aggs.buckets.ipRangeTitle",{defaultMessage:"IPv4 Range"});var ipRangeBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.IP_RANGE,title:ipRangeTitle,createFilter:_ip_range.createFilterIpRange,getKey:function getKey(bucket,key,agg){if(agg.params.ipRangeType==="mask"){return{type:"mask",mask:key}}return{type:"range",from:bucket.from,to:bucket.to}},getFormat:function getFormat(agg){var fieldFormatsService=(0,_services.getFieldFormats)();var formatter=agg.fieldOwnFormatter(_common.TEXT_CONTEXT_TYPE,fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.IP));var IpRangeFormat=_common.FieldFormat.from((function(range){return(0,_ip_range2.convertIPRangeToString)(range,formatter)}));return new IpRangeFormat},makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.buckets.ipRangeLabel",{defaultMessage:"{fieldName} IP ranges",values:{fieldName:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.IP},{name:"ipRangeType",default:"fromTo",write:_lodash.noop},{name:"ranges",default:{fromTo:[{from:"0.0.0.0",to:"127.255.255.255"},{from:"128.0.0.0",to:"191.255.255.255"}],mask:[{mask:"0.0.0.0/1"},{mask:"128.0.0.0/2"}]},write:function write(aggConfig,output){var ipRangeType=aggConfig.params.ipRangeType;var ranges=aggConfig.params.ranges[ipRangeType];if(ipRangeType==="fromTo"){ranges=(0,_lodash.map)(ranges,(function(range){return(0,_lodash.omit)(range,_lodash.isNull)}))}output.params.ranges=ranges}}]});exports.ipRangeBucketAgg=ipRangeBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CidrMask=void 0;var _public=__webpack_require__(15);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NUM_BITS=32;function throwError(mask){throw Error("Invalid CIDR mask: "+mask)}var CidrMask=function(){function CidrMask(mask){_classCallCheck(this,CidrMask);_defineProperty(this,"initialAddress",void 0);_defineProperty(this,"prefixLength",void 0);var splits=mask.split("/");if(splits.length!==2){throwError(mask)}this.initialAddress=new _public.Ipv4Address(splits[0]);this.prefixLength=Number(splits[1]);if(isNaN(this.prefixLength)||this.prefixLength<1||this.prefixLength>NUM_BITS){throwError(mask)}}_createClass(CidrMask,[{key:"getRange",value:function getRange(){var variableBits=NUM_BITS-this.prefixLength;var fromAddress=this.initialAddress.valueOf()>>variableBits<<variableBits>>>0;var numAddresses=Math.pow(2,variableBits);return{from:new _public.Ipv4Address(fromAddress).toString(),to:new _public.Ipv4Address(fromAddress+numAddresses-1).toString()}}},{key:"toString",value:function toString(){return this.initialAddress.toString()+"/"+this.prefixLength}}]);return CidrMask}();exports.CidrMask=CidrMask},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.termsBucketAgg=exports.termsAggFilter=void 0;var _lodash=__webpack_require__(0);var _i18n=__webpack_require__(1);var _bucket_agg_type=__webpack_require__(105);var _bucket_agg_types=__webpack_require__(103);var _terms=__webpack_require__(270);var _migrate_include_exclude_format=__webpack_require__(174);var _common=__webpack_require__(93);var _expressions=__webpack_require__(145);var _terms_other_bucket_helper=__webpack_require__(636);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var termsAggFilter=["!top_hits","!percentiles","!median","!std_dev","!derivative","!moving_avg","!serial_diff","!cumulative_sum","!avg_bucket","!max_bucket","!min_bucket","!sum_bucket"];exports.termsAggFilter=termsAggFilter;var termsTitle=_i18n.i18n.translate("data.search.aggs.buckets.termsTitle",{defaultMessage:"Terms"});var termsBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.TERMS,title:termsTitle,makeLabel:function makeLabel(agg){var params=agg.params;return agg.getFieldDisplayName()+": "+params.order.text},getFormat:function getFormat(bucket){return{getConverterFor:function getConverterFor(type){return function(val){if(val==="__other__"){return bucket.params.otherBucketLabel}if(val==="__missing__"){return bucket.params.missingBucketLabel}return bucket.params.field.format.convert(val,type)}}}},createFilter:_terms.createFilterTerms,postFlightRequest:function(){var _postFlightRequest=_asyncToGenerator(regeneratorRuntime.mark((function _callee(resp,aggConfigs,aggConfig,searchSource,inspectorAdapters,abortSignal){var nestedSearchSource,filterAgg,request,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(resp.aggregations){_context.next=2;break}return _context.abrupt("return",resp);case 2:nestedSearchSource=searchSource.createChild();if(!aggConfig.params.otherBucket){_context.next=16;break}filterAgg=(0,_terms_other_bucket_helper.buildOtherBucketAgg)(aggConfigs,aggConfig,resp);if(filterAgg){_context.next=7;break}return _context.abrupt("return",resp);case 7:nestedSearchSource.setField("aggs",filterAgg);request=inspectorAdapters.requests.start(_i18n.i18n.translate("data.search.aggs.buckets.terms.otherBucketTitle",{defaultMessage:"Other bucket"}),{description:_i18n.i18n.translate("data.search.aggs.buckets.terms.otherBucketDescription",{defaultMessage:"This request counts the number of documents that fall "+"outside the criterion of the data buckets."})});nestedSearchSource.getSearchRequestBody().then((function(body){request.json(body)}));request.stats((0,_expressions.getRequestInspectorStats)(nestedSearchSource));_context.next=13;return nestedSearchSource.fetch({abortSignal:abortSignal});case 13:response=_context.sent;request.stats((0,_expressions.getResponseInspectorStats)(nestedSearchSource,response)).ok({json:response});resp=(0,_terms_other_bucket_helper.mergeOtherBucketAggResponse)(aggConfigs,resp,response,aggConfig,filterAgg());case 16:if(aggConfig.params.missingBucket){resp=(0,_terms_other_bucket_helper.updateMissingBucket)(resp,aggConfigs,aggConfig)}return _context.abrupt("return",resp);case 18:case"end":return _context.stop()}}}),_callee)})));function postFlightRequest(_x,_x2,_x3,_x4,_x5,_x6){return _postFlightRequest.apply(this,arguments)}return postFlightRequest}(),params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.BOOLEAN,_common.KBN_FIELD_TYPES.DATE,_common.KBN_FIELD_TYPES.IP,_common.KBN_FIELD_TYPES.STRING]},{name:"orderBy",write:_lodash.noop},{name:"orderAgg",type:"agg",allowedAggs:termsAggFilter,default:null,makeAgg:function makeAgg(termsAgg,state){state=state||{};state.schema="orderAgg";var orderAgg=termsAgg.aggConfigs.createAggConfig(state,{addToAggConfigs:false});orderAgg.id=termsAgg.id+"-orderAgg";return orderAgg},write:function write(agg,output,aggs){var dir=agg.params.order.value;var order=output.params.order={};var orderAgg=agg.params.orderAgg||aggs.getResponseAggById(agg.params.orderBy);if(output.params.script){output.params.value_type=agg.getField().type==="number"?"float":agg.getField().type}if(agg.params.missingBucket&&agg.params.field.type==="string"){output.params.missing="__missing__"}if(!orderAgg){order[agg.params.orderBy||"_count"]=dir;return}if(orderAgg.type.name==="count"){order._count=dir;return}var orderAggId=orderAgg.id;if(orderAgg.parentId&&aggs){orderAgg=aggs.byId(orderAgg.parentId)}output.subAggs=(output.subAggs||[]).concat(orderAgg);order[orderAggId]=dir}},{name:"order",type:"optioned",default:"desc",options:[{text:_i18n.i18n.translate("data.search.aggs.buckets.terms.orderDescendingTitle",{defaultMessage:"Descending"}),value:"desc"},{text:_i18n.i18n.translate("data.search.aggs.buckets.terms.orderAscendingTitle",{defaultMessage:"Ascending"}),value:"asc"}],write:_lodash.noop},{name:"size",default:5},{name:"otherBucket",default:false,write:_lodash.noop},{name:"otherBucketLabel",type:"string",default:_i18n.i18n.translate("data.search.aggs.buckets.terms.otherBucketLabel",{defaultMessage:"Other"}),displayName:_i18n.i18n.translate("data.search.aggs.otherBucket.labelForOtherBucketLabel",{defaultMessage:"Label for other bucket"}),shouldShow:function shouldShow(agg){return agg.getParam("otherBucket")},write:_lodash.noop},{name:"missingBucket",default:false,write:_lodash.noop},{name:"missingBucketLabel",default:_i18n.i18n.translate("data.search.aggs.buckets.terms.missingBucketLabel",{defaultMessage:"Missing",description:'Default label used in charts when documents are missing a field.\n          Visible when you create a chart with a terms aggregation and enable "Show missing values"'}),type:"string",displayName:_i18n.i18n.translate("data.search.aggs.otherBucket.labelForMissingValuesLabel",{defaultMessage:"Label for missing values"}),shouldShow:function shouldShow(agg){return agg.getParam("missingBucket")},write:_lodash.noop},_objectSpread({name:"exclude",displayName:_i18n.i18n.translate("data.search.aggs.buckets.terms.excludeLabel",{defaultMessage:"Exclude"}),type:"string",advanced:true,shouldShow:_migrate_include_exclude_format.isStringType},_migrate_include_exclude_format.migrateIncludeExcludeFormat),_objectSpread({name:"include",displayName:_i18n.i18n.translate("data.search.aggs.buckets.terms.includeLabel",{defaultMessage:"Include"}),type:"string",advanced:true,shouldShow:_migrate_include_exclude_format.isStringType},_migrate_include_exclude_format.migrateIncludeExcludeFormat)]});exports.termsBucketAgg=termsBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterTerms=void 0;var _common=__webpack_require__(93);var createFilterTerms=function createFilterTerms(aggConfig,key,params){var field=aggConfig.params.field;var indexPattern=field.indexPattern;if(key==="__other__"){var terms=params.terms;var phraseFilter=(0,_common.buildPhrasesFilter)(field,terms,indexPattern);phraseFilter.meta.negate=true;var filters=[phraseFilter];if(terms.some((function(term){return term==="__missing__"}))){filters.push((0,_common.buildExistsFilter)(field,indexPattern))}return filters}else if(key==="__missing__"){var existsFilter=(0,_common.buildExistsFilter)(field,indexPattern);existsFilter.meta.negate=true;return existsFilter}return(0,_common.buildPhraseFilter)(field,key,indexPattern)};exports.createFilterTerms=createFilterTerms},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={SortDirection:true,EsQuerySortValue:true,SearchSourceFields:true};Object.defineProperty(exports,"SortDirection",{enumerable:true,get:function get(){return _types.SortDirection}});Object.defineProperty(exports,"EsQuerySortValue",{enumerable:true,get:function get(){return _types.EsQuerySortValue}});Object.defineProperty(exports,"SearchSourceFields",{enumerable:true,get:function get(){return _types.SearchSourceFields}});var _search_source=__webpack_require__(272);Object.keys(_search_source).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _search_source[key]}})}));var _types=__webpack_require__(591)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchSource=void 0;var _lodash=_interopRequireDefault(__webpack_require__(0));var _normalize_sort_request=__webpack_require__(555);var _filter_docvalue_fields=__webpack_require__(556);var _public=__webpack_require__(15);var _fetch2=__webpack_require__(273);var _services=__webpack_require__(95);var _common=__webpack_require__(93);var _field_formats=__webpack_require__(163);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchSource=function(){function SearchSource(){var fields=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,SearchSource);this.fields=fields;_defineProperty(this,"id",_lodash.default.uniqueId("data_source"));_defineProperty(this,"searchStrategyId",void 0);_defineProperty(this,"parent",void 0);_defineProperty(this,"requestStartHandlers",[]);_defineProperty(this,"inheritOptions",{});_defineProperty(this,"history",[])}_createClass(SearchSource,[{key:"setPreferredSearchStrategyId",value:function setPreferredSearchStrategyId(searchStrategyId){this.searchStrategyId=searchStrategyId}},{key:"setFields",value:function setFields(newFields){this.fields=newFields;return this}},{key:"setField",value:function setField(field,value){if(value==null){delete this.fields[field]}else{this.fields[field]=value}return this}},{key:"getId",value:function getId(){return this.id}},{key:"getFields",value:function getFields(){return _objectSpread({},this.fields)}},{key:"getField",value:function getField(field){var recurse=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(!recurse||this.fields[field]!==void 0){return this.fields[field]}var parent=this.getParent();return parent&&parent.getField(field)}},{key:"getOwnField",value:function getOwnField(field){return this.getField(field,false)}},{key:"create",value:function create(){return new SearchSource}},{key:"createCopy",value:function createCopy(){var newSearchSource=new SearchSource;newSearchSource.setFields(_objectSpread({},this.fields));newSearchSource.setField("index",this.getField("index"));newSearchSource.setParent(this.getParent());return newSearchSource}},{key:"createChild",value:function createChild(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var childSearchSource=new SearchSource;childSearchSource.setParent(this,options);return childSearchSource}},{key:"setParent",value:function setParent(parent){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.parent=parent;this.inheritOptions=options;return this}},{key:"getParent",value:function getParent(){return this.parent}},{key:"fetch",value:function(){var _fetch=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var options,searchRequest,esShardTimeout,response,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options=_args.length>0&&_args[0]!==undefined?_args[0]:{};_context.next=3;return this.requestIsStarting(options);case 3:_context.next=5;return this.flatten();case 5:searchRequest=_context.sent;this.history=[searchRequest];esShardTimeout=(0,_services.getInjectedMetadata)().getInjectedVar("esShardTimeout");_context.next=10;return(0,_fetch2.fetchSoon)(searchRequest,_objectSpread({},this.searchStrategyId&&{searchStrategyId:this.searchStrategyId},{},options),{searchService:(0,_services.getSearchService)(),config:(0,_services.getUiSettings)(),esShardTimeout:esShardTimeout});case 10:response=_context.sent;if(!response.error){_context.next=13;break}throw new _fetch2.RequestFailure(null,response);case 13:return _context.abrupt("return",response);case 14:case"end":return _context.stop()}}}),_callee,this)})));function fetch(){return _fetch.apply(this,arguments)}return fetch}()},{key:"onRequestStart",value:function onRequestStart(handler){this.requestStartHandlers.push(handler)}},{key:"getSearchRequestBody",value:function(){var _getSearchRequestBody=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var searchRequest;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.flatten();case 2:searchRequest=_context2.sent;return _context2.abrupt("return",searchRequest.body);case 4:case"end":return _context2.stop()}}}),_callee2,this)})));function getSearchRequestBody(){return _getSearchRequestBody.apply(this,arguments)}return getSearchRequestBody}()},{key:"destroy",value:function destroy(){this.requestStartHandlers.length=0}},{key:"requestIsStarting",value:function requestIsStarting(){var _this=this;var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var handlers=_toConsumableArray(this.requestStartHandlers);if(this.inheritOptions.callParentStartHandlers){var _searchSource=this.getParent();while(_searchSource){handlers.push.apply(handlers,_toConsumableArray(_searchSource.requestStartHandlers));_searchSource=_searchSource.getParent()}}return Promise.all(handlers.map((function(fn){return fn(_this,options)})))}},{key:"mergeProp",value:function mergeProp(data,val,key){val=typeof val==="function"?val(this):val;if(val==null||!key)return;var addToRoot=function addToRoot(rootKey,value){data[rootKey]=value};var addToBody=function addToBody(bodyKey,value){if(data.body[bodyKey]==null){data.body[bodyKey]=value}};switch(key){case"filter":return addToRoot("filters",(data.filters||[]).concat(val));case"query":return addToRoot(key,(data[key]||[]).concat(val));case"fields":var _fields=_lodash.default.uniq((data[key]||[]).concat(val));return addToRoot(key,_fields);case"index":case"type":case"highlightAll":return key&&data[key]==null&&addToRoot(key,val);case"searchAfter":return addToBody("search_after",val);case"source":return addToBody("_source",val);case"sort":var sort=(0,_normalize_sort_request.normalizeSortRequest)(val,this.getField("index"),(0,_services.getUiSettings)().get("sort:options"));return addToBody(key,sort);default:return addToBody(key,val)}}},{key:"mergeProps",value:function mergeProps(){var _this2=this;var root=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this;var searchRequest=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{body:{}};Object.entries(this.fields).forEach((function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];_this2.mergeProp(searchRequest,value,key)}));if(this.parent){this.parent.mergeProps(root,searchRequest)}return searchRequest}},{key:"getIndexType",value:function getIndexType(index){if(this.searchStrategyId){return this.searchStrategyId==="default"?undefined:this.searchStrategyId}else{return index===null||index===void 0?void 0:index.type}}},{key:"flatten",value:function flatten(){var searchRequest=this.mergeProps();searchRequest.body=searchRequest.body||{};var body=searchRequest.body,index=searchRequest.index,fields=searchRequest.fields,query=searchRequest.query,filters=searchRequest.filters,highlightAll=searchRequest.highlightAll;searchRequest.indexType=this.getIndexType(index);var computedFields=index?index.getComputedFields():{};body.stored_fields=computedFields.storedFields;body.script_fields=body.script_fields||{};_lodash.default.extend(body.script_fields,computedFields.scriptFields);var defaultDocValueFields=computedFields.docvalueFields?computedFields.docvalueFields:[];body.docvalue_fields=body.docvalue_fields||defaultDocValueFields;if(!body.hasOwnProperty("_source")&&index){body._source=index.getSourceFiltering()}if(body._source){var filter=(0,_public.fieldWildcardFilter)(body._source.excludes,(0,_services.getUiSettings)().get("metaFields"));body.docvalue_fields=body.docvalue_fields.filter((function(docvalueField){return filter(docvalueField.field)}))}if(fields){body.docvalue_fields=(0,_filter_docvalue_fields.filterDocvalueFields)(body.docvalue_fields,fields);body.script_fields=_lodash.default.pick(body.script_fields,fields);var remainingFields=_lodash.default.difference(fields,_lodash.default.keys(body.script_fields));body.stored_fields=remainingFields;_lodash.default.set(body,"_source.includes",remainingFields)}var esQueryConfigs=(0,_common.getEsQueryConfig)((0,_services.getUiSettings)());body.query=(0,_common.buildEsQuery)(index,query,filters,esQueryConfigs);if(highlightAll&&body.query){body.highlight=(0,_field_formats.getHighlightRequest)(body.query,(0,_services.getUiSettings)().get("doc_table:highlight"));delete searchRequest.highlightAll}var translateToQuery=function translateToQuery(filter){return filter&&(filter.query||filter)};(function recurse(aggBranch){if(!aggBranch)return;Object.keys(aggBranch).forEach((function(id){var agg=aggBranch[id];if(agg.filters){var aggFilters=agg.filters.filters;Object.keys(aggFilters).forEach((function(filterId){aggFilters[filterId]=translateToQuery(aggFilters[filterId])}))}recurse(agg.aggs||agg.aggregations)}))})(body.aggs||body.aggregations);return searchRequest}}]);return SearchSource}();exports.SearchSource=SearchSource},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={fetchSoon:true,RequestFailure:true};Object.defineProperty(exports,"fetchSoon",{enumerable:true,get:function get(){return _fetch_soon.fetchSoon}});Object.defineProperty(exports,"RequestFailure",{enumerable:true,get:function get(){return _errors.RequestFailure}});var _types=__webpack_require__(557);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _fetch_soon=__webpack_require__(558);var _errors=__webpack_require__(590)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _index_pattern_select=__webpack_require__(564);Object.keys(_index_pattern_select).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_pattern_select[key]}})}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.QueryStringInput=exports.QueryStringInputUI=void 0;var _react=_interopRequireWildcard(__webpack_require__(4));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(12);var _react2=__webpack_require__(13);var _lodash=__webpack_require__(0);var _autocomplete=__webpack_require__(170);var _public=__webpack_require__(14);var _fetch_index_patterns=__webpack_require__(565);var _language_switcher=__webpack_require__(566);var _query=__webpack_require__(119);var _=__webpack_require__(146);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var KEY_CODES={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,ESC:27,TAB:9,HOME:36,END:35};var QueryStringInputUI=function(_Component){_inherits(QueryStringInputUI,_Component);function QueryStringInputUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,QueryStringInputUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(QueryStringInputUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isSuggestionsVisible:false,index:null,suggestions:[],suggestionLimit:50,selectionStart:null,selectionEnd:null,indexPatterns:[]});_defineProperty(_assertThisInitialized(_this),"inputRef",null);_defineProperty(_assertThisInitialized(_this),"persistedLog",void 0);_defineProperty(_assertThisInitialized(_this),"abortController",void 0);_defineProperty(_assertThisInitialized(_this),"services",_this.props.kibana.services);_defineProperty(_assertThisInitialized(_this),"componentIsUnmounting",false);_defineProperty(_assertThisInitialized(_this),"getQueryString",(function(){return(0,_query.toUser)(_this.props.query.query)}));_defineProperty(_assertThisInitialized(_this),"fetchIndexPatterns",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var stringPatterns,objectPatterns,objectPatternsFromStrings;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:stringPatterns=_this.props.indexPatterns.filter((function(indexPattern){return typeof indexPattern==="string"}));objectPatterns=_this.props.indexPatterns.filter((function(indexPattern){return typeof indexPattern!=="string"}));_context.next=4;return(0,_fetch_index_patterns.fetchIndexPatterns)(_this.services.savedObjects.client,stringPatterns,_this.services.uiSettings);case 4:objectPatternsFromStrings=_context.sent;_this.setState({indexPatterns:[].concat(_toConsumableArray(objectPatterns),_toConsumableArray(objectPatternsFromStrings))});case 6:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(_assertThisInitialized(_this),"getSuggestions",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var language,queryString,recentSearchSuggestions,hasQuerySuggestions,indexPatterns,_this$inputRef,selectionStart,selectionEnd,suggestions;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(_this.inputRef){_context2.next=2;break}return _context2.abrupt("return");case 2:language=_this.props.query.language;queryString=_this.getQueryString();recentSearchSuggestions=_this.getRecentSearchSuggestions(queryString);hasQuerySuggestions=_this.services.data.autocomplete.hasQuerySuggestions(language);if(!(!hasQuerySuggestions||!Array.isArray(_this.state.indexPatterns)||(0,_lodash.compact)(_this.state.indexPatterns).length===0)){_context2.next=8;break}return _context2.abrupt("return",recentSearchSuggestions);case 8:indexPatterns=_this.state.indexPatterns;_this$inputRef=_this.inputRef,selectionStart=_this$inputRef.selectionStart,selectionEnd=_this$inputRef.selectionEnd;if(!(selectionStart===null||selectionEnd===null)){_context2.next=12;break}return _context2.abrupt("return");case 12:_context2.prev=12;if(_this.abortController)_this.abortController.abort();_this.abortController=new AbortController;_context2.next=17;return _this.services.data.autocomplete.getQuerySuggestions({language:language,indexPatterns:indexPatterns,query:queryString,selectionStart:selectionStart,selectionEnd:selectionEnd,signal:_this.abortController.signal});case 17:_context2.t0=_context2.sent;if(_context2.t0){_context2.next=20;break}_context2.t0=[];case 20:suggestions=_context2.t0;return _context2.abrupt("return",[].concat(_toConsumableArray(suggestions),_toConsumableArray(recentSearchSuggestions)));case 24:_context2.prev=24;_context2.t1=_context2["catch"](12);if(!(_context2.t1.message==="The user aborted a request.")){_context2.next=28;break}return _context2.abrupt("return");case 28:throw _context2.t1;case 29:case"end":return _context2.stop()}}}),_callee2,null,[[12,24]])}))));_defineProperty(_assertThisInitialized(_this),"getRecentSearchSuggestions",(function(query){if(!_this.persistedLog){return[]}var recentSearches=_this.persistedLog.get();var matchingRecentSearches=recentSearches.filter((function(recentQuery){var recentQueryString=_typeof(recentQuery)==="object"?(0,_query.toUser)(recentQuery):recentQuery;return recentQueryString.includes(query)}));return matchingRecentSearches.map((function(recentSearch){var text=(0,_query.toUser)(recentSearch);var start=0;var end=query.length;return{type:_autocomplete.QuerySuggestionTypes.RecentSearch,text:text,start:start,end:end}}))}));_defineProperty(_assertThisInitialized(_this),"updateSuggestions",(0,_lodash.debounce)(_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var suggestions;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.getSuggestions();case 2:_context3.t0=_context3.sent;if(_context3.t0){_context3.next=5;break}_context3.t0=[];case 5:suggestions=_context3.t0;if(!_this.componentIsUnmounting){_this.setState({suggestions:suggestions})}case 7:case"end":return _context3.stop()}}}),_callee3)}))),100));_defineProperty(_assertThisInitialized(_this),"onSubmit",(function(query){if(_this.props.onSubmit){if(_this.persistedLog){_this.persistedLog.add(query.query)}_this.props.onSubmit({query:(0,_query.fromUser)(query.query),language:query.language})}}));_defineProperty(_assertThisInitialized(_this),"onChange",(function(query){_this.updateSuggestions();if(_this.props.onChange){_this.props.onChange({query:(0,_query.fromUser)(query.query),language:query.language})}}));_defineProperty(_assertThisInitialized(_this),"onQueryStringChange",(function(value){_this.setState({isSuggestionsVisible:true,index:null,suggestionLimit:50});_this.onChange({query:value,language:_this.props.query.language})}));_defineProperty(_assertThisInitialized(_this),"onInputChange",(function(event){_this.onQueryStringChange(event.target.value)}));_defineProperty(_assertThisInitialized(_this),"onClickInput",(function(event){if(event.target instanceof HTMLInputElement){_this.onQueryStringChange(event.target.value)}}));_defineProperty(_assertThisInitialized(_this),"onKeyUp",(function(event){if([KEY_CODES.LEFT,KEY_CODES.RIGHT,KEY_CODES.HOME,KEY_CODES.END].includes(event.keyCode)){_this.setState({isSuggestionsVisible:true});if(event.target instanceof HTMLInputElement){_this.onQueryStringChange(event.target.value)}}}));_defineProperty(_assertThisInitialized(_this),"onKeyDown",(function(event){if(event.target instanceof HTMLInputElement){var _this$state=_this.state,isSuggestionsVisible=_this$state.isSuggestionsVisible,index=_this$state.index;var preventDefault=event.preventDefault.bind(event);var target=event.target,key=event.key,metaKey=event.metaKey;var value=target.value,selectionStart=target.selectionStart,selectionEnd=target.selectionEnd;var updateQuery=function updateQuery(query,newSelectionStart,newSelectionEnd){_this.onQueryStringChange(query);_this.setState({selectionStart:newSelectionStart,selectionEnd:newSelectionEnd})};switch(event.keyCode){case KEY_CODES.DOWN:event.preventDefault();if(isSuggestionsVisible&&index!==null){_this.incrementIndex(index)}else{_this.setState({isSuggestionsVisible:true,index:0})}break;case KEY_CODES.UP:event.preventDefault();if(isSuggestionsVisible&&index!==null){_this.decrementIndex(index)}break;case KEY_CODES.ENTER:if(!_this.props.bubbleSubmitEvent){event.preventDefault()}if(isSuggestionsVisible&&index!==null&&_this.state.suggestions[index]){event.preventDefault();_this.selectSuggestion(_this.state.suggestions[index])}else{_this.onSubmit(_this.props.query);_this.setState({isSuggestionsVisible:false})}break;case KEY_CODES.ESC:event.preventDefault();_this.setState({isSuggestionsVisible:false,index:null});break;case KEY_CODES.TAB:_this.setState({isSuggestionsVisible:false,index:null});break;default:if(selectionStart!==null&&selectionEnd!==null){(0,_query.matchPairs)({value:value,selectionStart:selectionStart,selectionEnd:selectionEnd,key:key,metaKey:metaKey,updateQuery:updateQuery,preventDefault:preventDefault})}break}}}));_defineProperty(_assertThisInitialized(_this),"selectSuggestion",(function(suggestion){if(!_this.inputRef){return}var type=suggestion.type,text=suggestion.text,start=suggestion.start,end=suggestion.end,cursorIndex=suggestion.cursorIndex;_this.handleNestedFieldSyntaxNotification(suggestion);var query=_this.getQueryString();var _this$inputRef2=_this.inputRef,selectionStart=_this$inputRef2.selectionStart,selectionEnd=_this$inputRef2.selectionEnd;if(selectionStart===null||selectionEnd===null){return}var value=query.substr(0,selectionStart)+query.substr(selectionEnd);var newQueryString=value.substr(0,start)+text+value.substr(end);_this.onQueryStringChange(newQueryString);_this.setState({selectionStart:start+(cursorIndex?cursorIndex:text.length),selectionEnd:start+(cursorIndex?cursorIndex:text.length)});if(type===_autocomplete.QuerySuggestionTypes.RecentSearch){_this.setState({isSuggestionsVisible:false,index:null});_this.onSubmit({query:newQueryString,language:_this.props.query.language})}}));_defineProperty(_assertThisInitialized(_this),"handleNestedFieldSyntaxNotification",(function(suggestion){if("field"in suggestion&&suggestion.field.subType&&suggestion.field.subType.nested&&!_this.services.storage.get("kibana.KQLNestedQuerySyntaxInfoOptOut")){var _this$services=_this.services,notifications=_this$services.notifications,docLinks=_this$services.docLinks;var onKQLNestedQuerySyntaxInfoOptOut=function onKQLNestedQuerySyntaxInfoOptOut(toast){if(!_this.services.storage)return;_this.services.storage.set("kibana.KQLNestedQuerySyntaxInfoOptOut",true);notifications.toasts.remove(toast)};if(notifications&&docLinks){var toast=notifications.toasts.add({title:_i18n.i18n.translate("data.query.queryBar.KQLNestedQuerySyntaxInfoTitle",{defaultMessage:"KQL nested query syntax"}),text:(0,_public.toMountPoint)(_react.default.createElement("div",null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.KQLNestedQuerySyntaxInfoText",defaultMessage:"It looks like you're querying on a nested field. You can construct KQL syntax for nested queries in different ways, depending on the results you want. Learn more in our {link}.",values:{link:_react.default.createElement(_eui.EuiLink,{href:docLinks.links.query.kueryQuerySyntax,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.KQLNestedQuerySyntaxInfoDocLinkText",defaultMessage:"docs"}))}})),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return onKQLNestedQuerySyntaxInfoOptOut(toast)}},_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.KQLNestedQuerySyntaxInfoOptOutText",defaultMessage:"Don't show again"}))))))})}}}));_defineProperty(_assertThisInitialized(_this),"increaseLimit",(function(){_this.setState({suggestionLimit:_this.state.suggestionLimit+50})}));_defineProperty(_assertThisInitialized(_this),"incrementIndex",(function(currentIndex){var nextIndex=currentIndex+1;if(currentIndex===null||nextIndex>=_this.state.suggestions.length){nextIndex=0}_this.setState({index:nextIndex})}));_defineProperty(_assertThisInitialized(_this),"decrementIndex",(function(currentIndex){var previousIndex=currentIndex-1;if(previousIndex<0){_this.setState({index:_this.state.suggestions.length-1})}else{_this.setState({index:previousIndex})}}));_defineProperty(_assertThisInitialized(_this),"onSelectLanguage",(function(language){_this.services.http.post("/api/kibana/kql_opt_in_telemetry",{body:JSON.stringify({opt_in:language==="kuery"})});_this.services.storage.set("kibana.userQueryLanguage",language);var newQuery={query:"",language:language};_this.onChange(newQuery);_this.onSubmit(newQuery)}));_defineProperty(_assertThisInitialized(_this),"onOutsideClick",(function(){if(_this.state.isSuggestionsVisible){_this.setState({isSuggestionsVisible:false,index:null})}}));_defineProperty(_assertThisInitialized(_this),"onClickSuggestion",(function(suggestion){if(!_this.inputRef){return}_this.selectSuggestion(suggestion);_this.inputRef.focus()}));_defineProperty(_assertThisInitialized(_this),"initPersistedLog",(function(){var _this$services2=_this.services,uiSettings=_this$services2.uiSettings,storage=_this$services2.storage,appName=_this$services2.appName;_this.persistedLog=_this.props.persistedLog?_this.props.persistedLog:(0,_query.getQueryLog)(uiSettings,storage,appName,_this.props.query.language)}));_defineProperty(_assertThisInitialized(_this),"onMouseEnterSuggestion",(function(index){_this.setState({index:index})}));return _this}_createClass(QueryStringInputUI,[{key:"componentDidMount",value:function componentDidMount(){var parsedQuery=(0,_query.fromUser)((0,_query.toUser)(this.props.query.query));if(!(0,_lodash.isEqual)(this.props.query.query,parsedQuery)){this.onChange(_objectSpread({},this.props.query,{query:parsedQuery}))}this.initPersistedLog();this.fetchIndexPatterns().then(this.updateSuggestions)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var parsedQuery=(0,_query.fromUser)((0,_query.toUser)(this.props.query.query));if(!(0,_lodash.isEqual)(this.props.query.query,parsedQuery)){this.onChange(_objectSpread({},this.props.query,{query:parsedQuery}))}this.initPersistedLog();if(!(0,_lodash.isEqual)(prevProps.indexPatterns,this.props.indexPatterns)){this.fetchIndexPatterns().then(this.updateSuggestions)}else if(!(0,_lodash.isEqual)(prevProps.query,this.props.query)){this.updateSuggestions()}if(this.state.selectionStart!==null&&this.state.selectionEnd!==null){if(this.inputRef){this.inputRef.setSelectionRange(this.state.selectionStart,this.state.selectionEnd)}this.setState({selectionStart:null,selectionEnd:null})}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.updateSuggestions.cancel();this.componentIsUnmounting=true}},{key:"render",value:function render(){var _this2=this;var isSuggestionsVisible=this.state.isSuggestionsVisible&&{"aria-controls":"kbnTypeahead__items","aria-owns":"kbnTypeahead__items"};var ariaCombobox=_objectSpread({},isSuggestionsVisible,{role:"combobox"});return _react.default.createElement(_eui.EuiOutsideClickDetector,{onOutsideClick:this.onOutsideClick},_react.default.createElement("div",_extends({},ariaCombobox,{style:{position:"relative"},"aria-label":_i18n.i18n.translate("data.query.queryBar.comboboxAriaLabel",{defaultMessage:"Search and filter the {pageType} page",values:{pageType:this.services.appName}}),"aria-haspopup":"true","aria-expanded":this.state.isSuggestionsVisible}),_react.default.createElement("div",{role:"search"},_react.default.createElement("div",{className:"kuiLocalSearchAssistedInput"},_react.default.createElement(_eui.EuiFieldText,{placeholder:this.props.placeholder||_i18n.i18n.translate("data.query.queryBar.searchInputPlaceholder",{defaultMessage:"Search"}),value:this.getQueryString(),onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onChange:this.onInputChange,onClick:this.onClickInput,fullWidth:true,autoFocus:!this.props.disableAutoFocus,inputRef:function inputRef(node){if(node){_this2.inputRef=node}},autoComplete:"off",spellCheck:false,"aria-label":_i18n.i18n.translate("data.query.queryBar.searchInputAriaLabel",{defaultMessage:"Start typing to search and filter the {pageType} page",values:{pageType:this.services.appName}}),type:"text","aria-autocomplete":"list","aria-controls":this.state.isSuggestionsVisible?"kbnTypeahead__items":undefined,"aria-activedescendant":this.state.isSuggestionsVisible&&typeof this.state.index==="number"?"suggestion-".concat(this.state.index):undefined,role:"textbox",prepend:this.props.prepend,append:_react.default.createElement(_language_switcher.QueryLanguageSwitcher,{language:this.props.query.language,anchorPosition:this.props.languageSwitcherPopoverAnchorPosition,onSelectLanguage:this.onSelectLanguage}),"data-test-subj":this.props.dataTestSubj||"queryInput"}))),_react.default.createElement(_.SuggestionsComponent,{show:this.state.isSuggestionsVisible,suggestions:this.state.suggestions.slice(0,this.state.suggestionLimit),index:this.state.index,onClick:this.onClickSuggestion,onMouseEnter:this.onMouseEnterSuggestion,loadMore:this.increaseLimit})))}}]);return QueryStringInputUI}(_react.Component);exports.QueryStringInputUI=QueryStringInputUI;var QueryStringInput=(0,_public.withKibana)(QueryStringInputUI);exports.QueryStringInput=QueryStringInput},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SearchBar=void 0;var _lodash=__webpack_require__(0);var _react=__webpack_require__(13);var _classnames=_interopRequireDefault(__webpack_require__(101));var _react2=_interopRequireWildcard(__webpack_require__(4));var _resizeObserverPolyfill=_interopRequireDefault(__webpack_require__(568));var _public=__webpack_require__(14);var _query_bar_top_row=__webpack_require__(569);var _=__webpack_require__(146);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchBarUI=function(_Component){_inherits(SearchBarUI,_Component);function SearchBarUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,SearchBarUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SearchBarUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"services",_this.props.kibana.services);_defineProperty(_assertThisInitialized(_this),"savedQueryService",_this.services.data.query.savedQueries);_defineProperty(_assertThisInitialized(_this),"filterBarRef",null);_defineProperty(_assertThisInitialized(_this),"filterBarWrapperRef",null);_defineProperty(_assertThisInitialized(_this),"state",{isFiltersVisible:true,showSaveQueryModal:false,showSaveNewQueryModal:false,showSavedQueryPopover:false,currentProps:_this.props,query:_this.props.query?_objectSpread({},_this.props.query):undefined,dateRangeFrom:(0,_lodash.get)(_this.props,"dateRangeFrom","now-15m"),dateRangeTo:(0,_lodash.get)(_this.props,"dateRangeTo","now")});_defineProperty(_assertThisInitialized(_this),"isDirty",(function(){if(!_this.props.showDatePicker&&_this.state.query&&_this.props.query){return _this.state.query.query!==_this.props.query.query}return _this.state.query&&_this.props.query&&_this.state.query.query!==_this.props.query.query||_this.state.dateRangeFrom!==_this.props.dateRangeFrom||_this.state.dateRangeTo!==_this.props.dateRangeTo}));_defineProperty(_assertThisInitialized(_this),"setFilterBarHeight",(function(){requestAnimationFrame((function(){var height=_this.filterBarRef&&_this.state.isFiltersVisible?_this.filterBarRef.clientHeight:0;if(_this.filterBarWrapperRef){_this.filterBarWrapperRef.setAttribute("style","height: ".concat(height,"px"))}}))}));_defineProperty(_assertThisInitialized(_this),"ro",new _resizeObserverPolyfill.default(_this.setFilterBarHeight));_defineProperty(_assertThisInitialized(_this),"onSave",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedQueryMeta){var saveAsNew,savedQueryAttributes,response,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:saveAsNew=_args.length>1&&_args[1]!==undefined?_args[1]:false;if(_this.state.query){_context.next=3;break}return _context.abrupt("return");case 3:savedQueryAttributes={title:savedQueryMeta.title,description:savedQueryMeta.description,query:_this.state.query};if(savedQueryMeta.shouldIncludeFilters){savedQueryAttributes.filters=_this.props.filters}if(savedQueryMeta.shouldIncludeTimefilter&&_this.state.dateRangeTo!==undefined&&_this.state.dateRangeFrom!==undefined&&_this.props.refreshInterval!==undefined&&_this.props.isRefreshPaused!==undefined){savedQueryAttributes.timefilter={from:_this.state.dateRangeFrom,to:_this.state.dateRangeTo,refreshInterval:{value:_this.props.refreshInterval,pause:_this.props.isRefreshPaused}}}_context.prev=6;if(!(_this.props.savedQuery&&!saveAsNew)){_context.next=13;break}_context.next=10;return _this.savedQueryService.saveQuery(savedQueryAttributes,{overwrite:true});case 10:response=_context.sent;_context.next=16;break;case 13:_context.next=15;return _this.savedQueryService.saveQuery(savedQueryAttributes);case 15:response=_context.sent;case 16:_this.services.notifications.toasts.addSuccess('Your query "'.concat(response.attributes.title,'" was saved'));_this.setState({showSaveQueryModal:false,showSaveNewQueryModal:false});if(_this.props.onSaved){_this.props.onSaved(response)}_context.next=25;break;case 21:_context.prev=21;_context.t0=_context["catch"](6);_this.services.notifications.toasts.addDanger("An error occured while saving your query: ".concat(_context.t0.message));throw _context.t0;case 25:case"end":return _context.stop()}}}),_callee,null,[[6,21]])})));return function(_x){return _ref.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"onInitiateSave",(function(){_this.setState({showSaveQueryModal:true})}));_defineProperty(_assertThisInitialized(_this),"onInitiateSaveNew",(function(){_this.setState({showSaveNewQueryModal:true})}));_defineProperty(_assertThisInitialized(_this),"onQueryBarChange",(function(queryAndDateRange){_this.setState({query:queryAndDateRange.query,dateRangeFrom:queryAndDateRange.dateRange.from,dateRangeTo:queryAndDateRange.dateRange.to});if(_this.props.onQueryChange){_this.props.onQueryChange(queryAndDateRange)}}));_defineProperty(_assertThisInitialized(_this),"onQueryBarSubmit",(function(queryAndDateRange){_this.setState({query:queryAndDateRange.query,dateRangeFrom:queryAndDateRange.dateRange&&queryAndDateRange.dateRange.from||_this.state.dateRangeFrom,dateRangeTo:queryAndDateRange.dateRange&&queryAndDateRange.dateRange.to||_this.state.dateRangeTo},(function(){if(_this.props.onQuerySubmit){_this.props.onQuerySubmit({query:_this.state.query,dateRange:{from:_this.state.dateRangeFrom,to:_this.state.dateRangeTo}})}}))}));_defineProperty(_assertThisInitialized(_this),"onLoadSavedQuery",(function(savedQuery){var dateRangeFrom=(0,_lodash.get)(savedQuery,"attributes.timefilter.from",_this.state.dateRangeFrom);var dateRangeTo=(0,_lodash.get)(savedQuery,"attributes.timefilter.to",_this.state.dateRangeTo);_this.setState({query:savedQuery.attributes.query,dateRangeFrom:dateRangeFrom,dateRangeTo:dateRangeTo});if(_this.props.onSavedQueryUpdated){_this.props.onSavedQueryUpdated(savedQuery)}}));return _this}_createClass(SearchBarUI,[{key:"shouldRenderQueryBar",value:function shouldRenderQueryBar(){var showDatePicker=this.props.showDatePicker||this.props.showAutoRefreshOnly;var showQueryInput=this.props.showQueryInput&&this.props.indexPatterns&&this.state.query;return this.props.showQueryBar&&(showDatePicker||showQueryInput)}},{key:"shouldRenderFilterBar",value:function shouldRenderFilterBar(){return this.props.showFilterBar&&this.props.filters&&this.props.indexPatterns&&(0,_lodash.compact)(this.props.indexPatterns).length>0}},{key:"shouldRenderTimeFilterInSavedQueryForm",value:function shouldRenderTimeFilterInSavedQueryForm(){var _this$props=this.props,dateRangeFrom=_this$props.dateRangeFrom,dateRangeTo=_this$props.dateRangeTo,showDatePicker=_this$props.showDatePicker;return showDatePicker||!showDatePicker&&dateRangeFrom!==undefined&&dateRangeTo!==undefined}},{key:"componentDidMount",value:function componentDidMount(){if(this.filterBarRef){this.setFilterBarHeight();this.ro.observe(this.filterBarRef)}}},{key:"componentDidUpdate",value:function componentDidUpdate(){if(this.filterBarRef){this.setFilterBarHeight();this.ro.unobserve(this.filterBarRef)}}},{key:"render",value:function render(){var _this2=this;var savedQueryManagement=this.state.query&&this.props.onClearSavedQuery&&_react2.default.createElement(_.SavedQueryManagementComponent,{showSaveQuery:this.props.showSaveQuery,loadedSavedQuery:this.props.savedQuery,onSave:this.onInitiateSave,onSaveAsNew:this.onInitiateSaveNew,onLoad:this.onLoadSavedQuery,savedQueryService:this.savedQueryService,onClearSavedQuery:this.props.onClearSavedQuery});var queryBar;if(this.shouldRenderQueryBar()){queryBar=_react2.default.createElement(_query_bar_top_row.QueryBarTopRow,{timeHistory:this.props.timeHistory,query:this.state.query,screenTitle:this.props.screenTitle,onSubmit:this.onQueryBarSubmit,indexPatterns:this.props.indexPatterns,isLoading:this.props.isLoading,prepend:this.props.showFilterBar?savedQueryManagement:undefined,showDatePicker:this.props.showDatePicker,dateRangeFrom:this.state.dateRangeFrom,dateRangeTo:this.state.dateRangeTo,isRefreshPaused:this.props.isRefreshPaused,refreshInterval:this.props.refreshInterval,showAutoRefreshOnly:this.props.showAutoRefreshOnly,showQueryInput:this.props.showQueryInput,onRefresh:this.props.onRefresh,onRefreshChange:this.props.onRefreshChange,onChange:this.onQueryBarChange,isDirty:this.isDirty(),customSubmitButton:this.props.customSubmitButton?this.props.customSubmitButton:undefined,dataTestSubj:this.props.dataTestSubj})}var filterBar;if(this.shouldRenderFilterBar()){var filterGroupClasses=(0,_classnames.default)("globalFilterGroup__wrapper",{"globalFilterGroup__wrapper-isVisible":this.state.isFiltersVisible});filterBar=_react2.default.createElement("div",{id:"GlobalFilterGroup",ref:function ref(node){_this2.filterBarWrapperRef=node},className:filterGroupClasses},_react2.default.createElement("div",{ref:function ref(node){_this2.filterBarRef=node}},_react2.default.createElement(_.FilterBar,{className:"globalFilterGroup__filterBar",filters:this.props.filters,onFiltersUpdated:this.props.onFiltersUpdated,indexPatterns:this.props.indexPatterns})))}return _react2.default.createElement("div",{className:"globalQueryBar"},queryBar,filterBar,this.state.showSaveQueryModal?_react2.default.createElement(_.SaveQueryForm,{savedQuery:this.props.savedQuery?this.props.savedQuery.attributes:undefined,savedQueryService:this.savedQueryService,onSave:this.onSave,onClose:function onClose(){return _this2.setState({showSaveQueryModal:false})},showFilterOption:this.props.showFilterBar,showTimeFilterOption:this.shouldRenderTimeFilterInSavedQueryForm()}):null,this.state.showSaveNewQueryModal?_react2.default.createElement(_.SaveQueryForm,{savedQueryService:this.savedQueryService,onSave:function onSave(savedQueryMeta){return _this2.onSave(savedQueryMeta,true)},onClose:function onClose(){return _this2.setState({showSaveNewQueryModal:false})},showFilterOption:this.props.showFilterBar,showTimeFilterOption:this.shouldRenderTimeFilterInSavedQueryForm()}):null)}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){if((0,_lodash.isEqual)(prevState.currentProps,nextProps)){return null}var nextQuery=null;if(nextProps.query&&nextProps.query.query!==(0,_lodash.get)(prevState,"currentProps.query.query")){nextQuery={query:nextProps.query.query,language:nextProps.query.language}}else if(nextProps.query&&prevState.query&&nextProps.query.language!==prevState.query.language){nextQuery={query:"",language:nextProps.query.language}}var nextDateRange=null;if(nextProps.dateRangeFrom!==(0,_lodash.get)(prevState,"currentProps.dateRangeFrom")||nextProps.dateRangeTo!==(0,_lodash.get)(prevState,"currentProps.dateRangeTo")){nextDateRange={dateRangeFrom:nextProps.dateRangeFrom,dateRangeTo:nextProps.dateRangeTo}}var nextState={currentProps:nextProps};if(nextQuery){nextState.query=nextQuery}if(nextDateRange){nextState.dateRangeFrom=nextDateRange.dateRangeFrom;nextState.dateRangeTo=nextDateRange.dateRangeTo}return nextState}}]);return SearchBarUI}(_react2.Component);_defineProperty(SearchBarUI,"defaultProps",{showQueryBar:true,showFilterBar:true,showDatePicker:true,showAutoRefreshOnly:false});var SearchBar=(0,_react.injectI18n)((0,_public.withKibana)(SearchBarUI));exports.SearchBar=SearchBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSearchBar=createSearchBar;var _react=_interopRequireWildcard(__webpack_require__(4));var _public=__webpack_require__(14);var _search_bar=__webpack_require__(276);var _use_filter_manager=__webpack_require__(570);var _use_timefilter=__webpack_require__(571);var _use_saved_query=__webpack_require__(572);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var defaultFiltersUpdated=function defaultFiltersUpdated(queryService){return function(filters){queryService.filterManager.setFilters(filters)}};var defaultOnRefreshChange=function defaultOnRefreshChange(queryService){var timefilter=queryService.timefilter.timefilter;return function(options){timefilter.setRefreshInterval({value:options.refreshInterval,pause:options.isPaused})}};var defaultOnQuerySubmit=function defaultOnQuerySubmit(props,queryService,currentQuery,setQueryStringState){if(!props.useDefaultBehaviors)return props.onQuerySubmit;var timefilter=queryService.timefilter.timefilter;return function(payload){var isUpdate=!_.isEqual(timefilter.getTime(),payload.dateRange)||!_.isEqual(payload.query,currentQuery);if(isUpdate){timefilter.setTime(payload.dateRange);setQueryStringState(payload.query)}else{if(props.onQuerySubmit)props.onQuerySubmit({dateRange:timefilter.getTime(),query:currentQuery},false)}}};var defaultOnClearSavedQuery=function defaultOnClearSavedQuery(props,clearSavedQuery){if(!props.useDefaultBehaviors)return props.onClearSavedQuery;return function(){clearSavedQuery();if(props.onSavedQueryIdChange)props.onSavedQueryIdChange()}};var defaultOnSavedQueryUpdated=function defaultOnSavedQueryUpdated(props,setSavedQuery){if(!props.useDefaultBehaviors)return props.onSavedQueryUpdated;return function(savedQuery){setSavedQuery(savedQuery);if(props.onSavedQueryIdChange)props.onSavedQueryIdChange(savedQuery.id)}};var overrideDefaultBehaviors=function overrideDefaultBehaviors(props){return props.useDefaultBehaviors?{}:props};function createSearchBar(_ref){var core=_ref.core,storage=_ref.storage,data=_ref.data;return function(props){var useDefaultBehaviors=props.useDefaultBehaviors;var queryRef=(0,_react.useRef)(props.query);var onQuerySubmitRef=(0,_react.useRef)(props.onQuerySubmit);var defaultQuery={query:"",language:storage.get("kibana.userQueryLanguage")||core.uiSettings.get("search:queryLanguage")};var _useState=(0,_react.useState)(props.query||defaultQuery),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];(0,_react.useEffect)((function(){if(props.query!==queryRef.current){queryRef.current=props.query;setQuery(props.query||defaultQuery)}}),[defaultQuery,props.query]);(0,_react.useEffect)((function(){if(props.onQuerySubmit!==onQuerySubmitRef.current){onQuerySubmitRef.current=props.onQuerySubmit}}),[props.onQuerySubmit]);var _useFilterManager=(0,_use_filter_manager.useFilterManager)({filters:props.filters,filterManager:data.query.filterManager}),filters=_useFilterManager.filters;var _useTimefilter=(0,_use_timefilter.useTimefilter)({dateRangeFrom:props.dateRangeFrom,dateRangeTo:props.dateRangeTo,refreshInterval:props.refreshInterval,isRefreshPaused:props.isRefreshPaused,timefilter:data.query.timefilter.timefilter}),timeRange=_useTimefilter.timeRange,refreshInterval=_useTimefilter.refreshInterval;var _useSavedQuery=(0,_use_saved_query.useSavedQuery)({queryService:data.query,setQuery:setQuery,savedQueryId:props.savedQueryId,notifications:core.notifications,defaultLanguage:defaultQuery.language}),savedQuery=_useSavedQuery.savedQuery,setSavedQuery=_useSavedQuery.setSavedQuery,clearSavedQuery=_useSavedQuery.clearSavedQuery;(0,_react.useEffect)((function(){if(!useDefaultBehaviors||!onQuerySubmitRef.current)return;onQuerySubmitRef.current({dateRange:timeRange,query:query},true)}),[query,timeRange,useDefaultBehaviors]);return _react.default.createElement(_public.KibanaContextProvider,{services:_objectSpread({appName:props.appName,data:data,storage:storage},core)},_react.default.createElement(_search_bar.SearchBar,_extends({showAutoRefreshOnly:props.showAutoRefreshOnly,showDatePicker:props.showDatePicker,showFilterBar:props.showFilterBar,showQueryBar:props.showQueryBar,showQueryInput:props.showQueryInput,showSaveQuery:props.showSaveQuery,screenTitle:props.screenTitle,indexPatterns:props.indexPatterns,timeHistory:data.query.timefilter.history,dateRangeFrom:timeRange.from,dateRangeTo:timeRange.to,refreshInterval:refreshInterval.value,isRefreshPaused:refreshInterval.pause,filters:filters,query:query,onFiltersUpdated:defaultFiltersUpdated(data.query),onRefreshChange:defaultOnRefreshChange(data.query),savedQuery:savedQuery,onQuerySubmit:defaultOnQuerySubmit(props,data.query,query,setQuery),onClearSavedQuery:defaultOnClearSavedQuery(props,clearSavedQuery),onSavedQueryUpdated:defaultOnSavedQueryUpdated(props,setSavedQuery),onSaved:defaultOnSavedQueryUpdated(props,setSavedQuery)},overrideDefaultBehaviors(props))))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFailurePropsForSummary=getFailurePropsForSummary;exports.getFailureSummaryText=getFailureSummaryText;exports.getFailureSummaryDetailsText=getFailureSummaryDetailsText;exports.ShardFailureDescriptionHeader=ShardFailureDescriptionHeader;var _react=_interopRequireDefault(__webpack_require__(4));var _eui=__webpack_require__(12);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getFailurePropsForSummary(failure){var failureDetailProps=["shard","index","node"];return failureDetailProps.filter((function(key){return typeof failure[key]==="number"||typeof failure[key]==="string"})).map((function(key){return{key:key,value:String(failure[key])}}))}function getFailureSummaryText(failure,failureDetails){var failureName=failure.reason.type;var displayDetails=typeof failureDetails==="string"?failureDetails:getFailureSummaryDetailsText(failure);return _i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.failureHeader",{defaultMessage:"{failureName} at {failureDetails}",values:{failureName:failureName,failureDetails:displayDetails},description:'Summary of shard failures, e.g. "IllegalArgumentException at shard 0 node xyz"'})}function getFailureSummaryDetailsText(failure){return getFailurePropsForSummary(failure).map((function(_ref){var key=_ref.key,value=_ref.value;return"".concat(key,": ").concat(value)})).join(", ")}function ShardFailureDescriptionHeader(props){var failureDetails=getFailurePropsForSummary(props).map((function(kv){return _react.default.createElement("span",{className:"shardFailureModal__keyValueTitle",key:kv.key},_react.default.createElement(_eui.EuiCode,null,kv.key)," ",kv.value)}));return _react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h2",null,getFailureSummaryText(props,""),failureDetails))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SearchError",{enumerable:true,get:function get(){return _search_error.SearchError}});Object.defineProperty(exports,"getSearchErrorType",{enumerable:true,get:function get(){return _search_error.getSearchErrorType}});Object.defineProperty(exports,"SearchStrategyProvider",{enumerable:true,get:function get(){return _types.SearchStrategyProvider}});Object.defineProperty(exports,"SearchStrategySearchParams",{enumerable:true,get:function get(){return _types.SearchStrategySearchParams}});Object.defineProperty(exports,"defaultSearchStrategy",{enumerable:true,get:function get(){return _default_search_strategy.defaultSearchStrategy}});var _search_error=__webpack_require__(586);var _types=__webpack_require__(587);var _default_search_strategy=__webpack_require__(588)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"tabifyAggResponse",{enumerable:true,get:function get(){return _tabify.tabifyAggResponse}});Object.defineProperty(exports,"tabifyGetColumns",{enumerable:true,get:function get(){return _get_columns.tabifyGetColumns}});Object.defineProperty(exports,"TabbedTable",{enumerable:true,get:function get(){return _types.TabbedTable}});Object.defineProperty(exports,"TabbedAggRow",{enumerable:true,get:function get(){return _types.TabbedAggRow}});Object.defineProperty(exports,"TabbedAggColumn",{enumerable:true,get:function get(){return _types.TabbedAggColumn}});var _tabify=__webpack_require__(592);var _get_columns=__webpack_require__(281);var _types=__webpack_require__(595)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tabifyGetColumns=tabifyGetColumns;var _lodash=__webpack_require__(0);var getColumn=function getColumn(agg,i){return{aggConfig:agg,id:"col-".concat(i,"-").concat(agg.id),name:agg.makeLabel()}};function tabifyGetColumns(aggs,minimalColumns){if(minimalColumns){return aggs.map((function(agg,i){return getColumn(agg,i)}))}var columns=[];var grouped=(0,_lodash.groupBy)(aggs,(function(agg){return agg.type.type}));if(!grouped.buckets){return grouped.metrics.map((function(agg,i){return getColumn(agg,i)}))}var columnIndex=0;grouped.buckets.forEach((function(agg){columns.push(getColumn(agg,columnIndex++));grouped.metrics.forEach((function(metric){columns.push(getColumn(metric,columnIndex++))}))}));return columns}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _calculate_auto_time_expression=__webpack_require__(640);Object.keys(_calculate_auto_time_expression).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _calculate_auto_time_expression[key]}})}));var _to_angular_json=__webpack_require__(641);Object.keys(_to_angular_json).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _to_angular_json[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _agg=__webpack_require__(255);Object.keys(_agg).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg[key]}})}));var _base=__webpack_require__(111);Object.keys(_base).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _base[key]}})}));var _field=__webpack_require__(256);Object.keys(_field).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _field[key]}})}));var _filter=__webpack_require__(653);Object.keys(_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filter[key]}})}));var _json=__webpack_require__(259);Object.keys(_json).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _json[key]}})}));var _optioned=__webpack_require__(171);Object.keys(_optioned).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _optioned[key]}})}));var _string=__webpack_require__(258);Object.keys(_string).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _string[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.esSearchStrategyProvider=void 0;var _search2=__webpack_require__(136);var _sync_search_strategy=__webpack_require__(148);var _get_es_preference=__webpack_require__(285);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var esSearchStrategyProvider=function esSearchStrategyProvider(context){var syncStrategyProvider=context.getSearchStrategy(_sync_search_strategy.SYNC_SEARCH_STRATEGY);var _syncStrategyProvider=syncStrategyProvider(context),_search=_syncStrategyProvider.search;return{search:function search(request,options){request.params=_objectSpread({preference:(0,_get_es_preference.getEsPreference)(context.core.uiSettings)},request.params);return _search(_objectSpread({},request,{serverStrategy:_search2.ES_SEARCH_STRATEGY}),options)}}};exports.esSearchStrategyProvider=esSearchStrategyProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEsPreference=getEsPreference;var defaultSessionId="".concat(Date.now());function getEsPreference(uiSettings){var sessionId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:defaultSessionId;var setPreference=uiSettings.get("courier:setRequestPreference");if(setPreference==="sessionId")return"".concat(sessionId);var customPreference=uiSettings.get("courier:customRequestPreference");return setPreference==="custom"?customPreference:undefined}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getEsClient",{enumerable:true,get:function get(){return _get_es_client.getEsClient}});Object.defineProperty(exports,"SearchRequest",{enumerable:true,get:function get(){return _types.SearchRequest}});Object.defineProperty(exports,"SearchResponse",{enumerable:true,get:function get(){return _types.SearchResponse}});Object.defineProperty(exports,"LegacyApiCaller",{enumerable:true,get:function get(){return _types.LegacyApiCaller}});var _get_es_client=__webpack_require__(659);var _types=__webpack_require__(660)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchInterceptor=void 0;var _rxjs=__webpack_require__(17);var _operators=__webpack_require__(85);var _utils=__webpack_require__(125);var _request_timeout_error=__webpack_require__(288);var _long_query_notification=__webpack_require__(661);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchInterceptor=function SearchInterceptor(toasts,application,requestTimeout){var _this=this;_classCallCheck(this,SearchInterceptor);this.toasts=toasts;this.application=application;this.requestTimeout=requestTimeout;_defineProperty(this,"abortController",new AbortController);_defineProperty(this,"pendingCount",0);_defineProperty(this,"pendingCount$",new _rxjs.BehaviorSubject(this.pendingCount));_defineProperty(this,"timeoutSubscriptions",new Set);_defineProperty(this,"longRunningToast",void 0);_defineProperty(this,"getPendingCount$",(function(){return _this.pendingCount$.asObservable()}));_defineProperty(this,"search",(function(search,request,options){return(0,_rxjs.defer)((function(){_this.pendingCount$.next(++_this.pendingCount);var timeoutController=new AbortController;var timeoutSignal=timeoutController.signal;var timeout$=(0,_rxjs.timer)(_this.requestTimeout);var subscription=timeout$.subscribe((function(){return timeoutController.abort()}));_this.timeoutSubscriptions.add(subscription);var timeoutError$=(0,_rxjs.fromEvent)(timeoutSignal,"abort").pipe((0,_operators.mergeMapTo)((0,_rxjs.throwError)(new _request_timeout_error.RequestTimeoutError)));var notificationSubscription=(0,_rxjs.timer)(1e4).subscribe(_this.showToast);var signals=[_this.abortController.signal,timeoutSignal].concat(_toConsumableArray((options===null||options===void 0?void 0:options.signal)?[options.signal]:[]));var combinedSignal=(0,_utils.getCombinedSignal)(signals);return search(request,_objectSpread({},options,{signal:combinedSignal})).pipe((0,_operators.takeUntil)(timeoutError$),(0,_operators.finalize)((function(){_this.pendingCount$.next(--_this.pendingCount);_this.timeoutSubscriptions.delete(subscription);notificationSubscription.unsubscribe()})))}))}));_defineProperty(this,"showToast",(function(){if(_this.longRunningToast)return;_this.longRunningToast=_this.toasts.addInfo({title:"Your query is taking awhile",text:(0,_long_query_notification.getLongQueryNotification)({application:_this.application})},{toastLifeTimeMs:1e6})}));_defineProperty(this,"hideToast",(function(){if(_this.longRunningToast){_this.toasts.remove(_this.longRunningToast);delete _this.longRunningToast}}));this.getPendingCount$().pipe((0,_operators.filter)((function(count){return count===0}))).subscribe(this.hideToast)};exports.SearchInterceptor=SearchInterceptor},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestTimeoutError=void 0;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var RequestTimeoutError=function(_Error){_inherits(RequestTimeoutError,_Error);function RequestTimeoutError(){var _this;var message=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"Request timed out";_classCallCheck(this,RequestTimeoutError);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestTimeoutError).call(this,message));_this.message=message;_this.name="RequestTimeoutError";return _this}return RequestTimeoutError}(_wrapNativeSuper(Error));exports.RequestTimeoutError=RequestTimeoutError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _ui_actions_service=__webpack_require__(665);Object.keys(_ui_actions_service).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ui_actions_service[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TriggerInternal=void 0;var _trigger_contract=__webpack_require__(291);var _context_menu=__webpack_require__(292);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TriggerInternal=function(){function TriggerInternal(service,trigger){_classCallCheck(this,TriggerInternal);this.service=service;this.trigger=trigger;_defineProperty(this,"contract",new _trigger_contract.TriggerContract(this))}_createClass(TriggerInternal,[{key:"execute",value:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee(context){var triggerId,actions;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:triggerId=this.trigger.id;_context.next=3;return this.service.getTriggerCompatibleActions(triggerId,context);case 3:actions=_context.sent;if(actions.length){_context.next=6;break}throw new Error("No compatible actions found to execute for trigger [triggerId = ".concat(triggerId,"]."));case 6:if(!(actions.length===1)){_context.next=10;break}_context.next=9;return this.executeSingleAction(actions[0],context);case 9:return _context.abrupt("return");case 10:_context.next=12;return this.executeMultipleActions(actions,context);case 12:case"end":return _context.stop()}}}),_callee,this)})));function execute(_x){return _execute.apply(this,arguments)}return execute}()},{key:"executeSingleAction",value:function(){var _executeSingleAction=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(action,context){var href;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:href=action.getHref&&action.getHref(context);if(!href){_context2.next=4;break}window.location.href=href;return _context2.abrupt("return");case 4:_context2.next=6;return action.execute(context);case 6:case"end":return _context2.stop()}}}),_callee2)})));function executeSingleAction(_x2,_x3){return _executeSingleAction.apply(this,arguments)}return executeSingleAction}()},{key:"executeMultipleActions",value:function(){var _executeMultipleActions=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(actions,context){var panel,session;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return(0,_context_menu.buildContextMenuForActions)({actions:actions,actionContext:context,closeMenu:function closeMenu(){return session.close()}});case 2:panel=_context3.sent;session=(0,_context_menu.openContextMenu)([panel]);case 4:case"end":return _context3.stop()}}}),_callee3)})));function executeMultipleActions(_x4,_x5){return _executeMultipleActions.apply(this,arguments)}return executeMultipleActions}()}]);return TriggerInternal}();exports.TriggerInternal=TriggerInternal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TriggerContract=void 0;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TriggerContract=function TriggerContract(internal){var _this=this;_classCallCheck(this,TriggerContract);this.internal=internal;_defineProperty(this,"id",void 0);_defineProperty(this,"title",void 0);_defineProperty(this,"description",void 0);_defineProperty(this,"exec",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(context){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.internal.execute(context);case 2:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}());this.id=this.internal.trigger.id;this.title=this.internal.trigger.title;this.description=this.internal.trigger.description};exports.TriggerContract=TriggerContract},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"buildContextMenuForActions",{enumerable:true,get:function get(){return _build_eui_context_menu_panels.buildContextMenuForActions}});Object.defineProperty(exports,"openContextMenu",{enumerable:true,get:function get(){return _open_context_menu.openContextMenu}});var _build_eui_context_menu_panels=__webpack_require__(666);var _open_context_menu=__webpack_require__(667)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"applyFiltersPopover",{enumerable:true,get:function get(){return _apply_filters_popover.applyFiltersPopover}});var _apply_filters_popover=__webpack_require__(679)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFiltersFromEvent=void 0;var _expressions=__webpack_require__(145);var _public=__webpack_require__(107);var _services=__webpack_require__(95);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var getOtherBucketFilterTerms=function getOtherBucketFilterTerms(table,columnIndex,rowIndex){if(rowIndex===-1){return[]}var rows=table.rows.filter((function(row){return table.columns.every((function(column,i){return row[column.id]===table.rows[rowIndex][column.id]||i>=columnIndex}))}));var terms=rows.map((function(row){return row[table.columns[columnIndex].id]}));return _toConsumableArray(new Set(terms.filter((function(term){var notOther=term!=="__other__";var notMissing=term!=="__missing__";return notOther&&notMissing}))))};var createFilter=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(table,columnIndex,rowIndex){var column,aggConfig,filter,value,terms;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!table||!table.columns||!table.columns[columnIndex])){_context.next=2;break}return _context.abrupt("return");case 2:column=table.columns[columnIndex];if(!(!column.meta||!column.meta.indexPatternId)){_context.next=5;break}return _context.abrupt("return");case 5:_context.t0=_expressions.deserializeAggConfig;_context.t1=column.meta.type;_context.t2=column.meta.aggConfigParams?column.meta.aggConfigParams:{};_context.next=10;return(0,_services.getIndexPatterns)().get(column.meta.indexPatternId);case 10:_context.t3=_context.sent;_context.t4={type:_context.t1,aggConfigParams:_context.t2,indexPattern:_context.t3};aggConfig=(0,_context.t0)(_context.t4);filter=[];value=rowIndex>-1?table.rows[rowIndex][column.id]:null;if(!(value===null||value===undefined||!aggConfig.isFilterable())){_context.next=17;break}return _context.abrupt("return");case 17:if(aggConfig.type.name==="terms"&&aggConfig.params.otherBucket){terms=getOtherBucketFilterTerms(table,columnIndex,rowIndex);filter=aggConfig.createFilter(value,{terms:terms})}else{filter=aggConfig.createFilter(value)}if(filter){_context.next=20;break}return _context.abrupt("return");case 20:if(!Array.isArray(filter)){filter=[filter]}return _context.abrupt("return",filter);case 22:case"end":return _context.stop()}}}),_callee)})));return function createFilter(_x,_x2,_x3){return _ref.apply(this,arguments)}}();var createFiltersFromEvent=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(dataPoints,negate){var filters;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:filters=[];_context3.next=3;return Promise.all(dataPoints.filter((function(point){return point})).map(function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(val){var table,column,row,filter;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:table=val.table,column=val.column,row=val.row;_context2.next=3;return createFilter(table,column,row);case 3:_context2.t0=_context2.sent;if(_context2.t0){_context2.next=6;break}_context2.t0=[];case 6:filter=_context2.t0;if(filter){filter.forEach((function(f){if(negate){f=_public.esFilters.toggleFilterNegated(f)}filters.push(f)}))}case 8:case"end":return _context2.stop()}}}),_callee2)})));return function(_x6){return _ref3.apply(this,arguments)}}()));case 3:return _context3.abrupt("return",filters);case 4:case"end":return _context3.stop()}}}),_callee3)})));return function createFiltersFromEvent(_x4,_x5){return _ref2.apply(this,arguments)}}();exports.createFiltersFromEvent=createFiltersFromEvent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.selectRangeAction=selectRangeAction;exports.ACTION_SELECT_RANGE=void 0;var _i18n=__webpack_require__(1);var _public=__webpack_require__(149);var _brush_event=__webpack_require__(681);var _=__webpack_require__(107);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var ACTION_SELECT_RANGE="ACTION_SELECT_RANGE";exports.ACTION_SELECT_RANGE=ACTION_SELECT_RANGE;function isCompatible(_x){return _isCompatible.apply(this,arguments)}function _isCompatible(){_isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.t0=Boolean;_context2.next=4;return(0,_brush_event.onBrushEvent)(context.data);case 4:_context2.t1=_context2.sent;return _context2.abrupt("return",(0,_context2.t0)(_context2.t1));case 8:_context2.prev=8;_context2.t2=_context2["catch"](0);return _context2.abrupt("return",false);case 11:case"end":return _context2.stop()}}}),_callee2,null,[[0,8]])})));return _isCompatible.apply(this,arguments)}function selectRangeAction(filterManager,timeFilter){return(0,_public.createAction)({type:ACTION_SELECT_RANGE,id:ACTION_SELECT_RANGE,getDisplayName:function getDisplayName(){return _i18n.i18n.translate("data.filter.applyFilterActionTitle",{defaultMessage:"Apply filter to current view"})},isCompatible:isCompatible,execute:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var timeFieldName,data,filter,selectedFilters,_esFilters$extractTim,timeRangeFilter,restOfFilters;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:timeFieldName=_ref.timeFieldName,data=_ref.data;_context.next=3;return isCompatible({timeFieldName:timeFieldName,data:data});case 3:if(_context.sent){_context.next=5;break}throw new _public.IncompatibleActionError;case 5:_context.next=7;return(0,_brush_event.onBrushEvent)(data);case 7:filter=_context.sent;if(filter){_context.next=10;break}return _context.abrupt("return");case 10:selectedFilters=_.esFilters.mapAndFlattenFilters([filter]);if(timeFieldName){_esFilters$extractTim=_.esFilters.extractTimeFilter(timeFieldName,selectedFilters),timeRangeFilter=_esFilters$extractTim.timeRangeFilter,restOfFilters=_esFilters$extractTim.restOfFilters;filterManager.addFilters(restOfFilters);if(timeRangeFilter){_.esFilters.changeTimeFilter(timeFilter,timeRangeFilter)}}else{filterManager.addFilters(selectedFilters)}case 12:case"end":return _context.stop()}}}),_callee)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.valueClickAction=valueClickAction;exports.ACTION_VALUE_CLICK=void 0;var _i18n=__webpack_require__(1);var _public=__webpack_require__(14);var _public2=__webpack_require__(149);var _services=__webpack_require__(95);var _apply_filters=__webpack_require__(293);var _create_filters_from_event=__webpack_require__(294);var _=__webpack_require__(107);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var ACTION_VALUE_CLICK="ACTION_VALUE_CLICK";exports.ACTION_VALUE_CLICK=ACTION_VALUE_CLICK;function isCompatible(_x){return _isCompatible.apply(this,arguments)}function _isCompatible(){_isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){var filters;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return(0,_create_filters_from_event.createFiltersFromEvent)(context.data.data||[context.data],context.data.negate);case 3:_context2.t0=_context2.sent;if(_context2.t0){_context2.next=6;break}_context2.t0=[];case 6:filters=_context2.t0;return _context2.abrupt("return",filters.length>0);case 10:_context2.prev=10;_context2.t1=_context2["catch"](0);return _context2.abrupt("return",false);case 13:case"end":return _context2.stop()}}}),_callee2,null,[[0,10]])})));return _isCompatible.apply(this,arguments)}function valueClickAction(filterManager,timeFilter){return(0,_public2.createAction)({type:ACTION_VALUE_CLICK,id:ACTION_VALUE_CLICK,getDisplayName:function getDisplayName(){return _i18n.i18n.translate("data.filter.applyFilterActionTitle",{defaultMessage:"Apply filter to current view"})},isCompatible:isCompatible,execute:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var timeFieldName,data,filters,selectedFilters,indexPatterns,filterSelectionPromise,_esFilters$extractTim,timeRangeFilter,restOfFilters;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:timeFieldName=_ref.timeFieldName,data=_ref.data;_context.next=3;return isCompatible({timeFieldName:timeFieldName,data:data});case 3:if(_context.sent){_context.next=5;break}throw new _public2.IncompatibleActionError;case 5:_context.next=7;return(0,_create_filters_from_event.createFiltersFromEvent)(data.data||[data],data.negate);case 7:_context.t0=_context.sent;if(_context.t0){_context.next=10;break}_context.t0=[];case 10:filters=_context.t0;selectedFilters=_.esFilters.mapAndFlattenFilters(filters);if(!(selectedFilters.length>1)){_context.next=20;break}_context.next=15;return Promise.all(filters.map((function(filter){return(0,_services.getIndexPatterns)().get(filter.meta.index)})));case 15:indexPatterns=_context.sent;filterSelectionPromise=new Promise((function(resolve){var overlay=(0,_services.getOverlays)().openModal((0,_public.toMountPoint)((0,_apply_filters.applyFiltersPopover)(filters,indexPatterns,(function(){overlay.close();resolve([])}),(function(filterSelection){overlay.close();resolve(filterSelection)}))),{"data-test-subj":"selectFilterOverlay"})}));_context.next=19;return filterSelectionPromise;case 19:selectedFilters=_context.sent;case 20:if(timeFieldName){_esFilters$extractTim=_.esFilters.extractTimeFilter(timeFieldName,selectedFilters),timeRangeFilter=_esFilters$extractTim.timeRangeFilter,restOfFilters=_esFilters$extractTim.restOfFilters;filterManager.addFilters(restOfFilters);if(timeRangeFilter){_.esFilters.changeTimeFilter(timeFilter,timeRangeFilter)}}else{filterManager.addFilters(selectedFilters)}case 21:case"end":return _context.stop()}}}),_callee)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isErrorNonFatal=isErrorNonFatal;exports.saveSavedObject=saveSavedObject;var _constants=__webpack_require__(128);var _create_source=__webpack_require__(688);var _check_for_duplicate_title=__webpack_require__(298);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function isErrorNonFatal(error){if(!error)return false;return error.message===_constants.OVERWRITE_REJECTED||error.message===_constants.SAVE_DUPLICATE_REJECTED}function saveSavedObject(_x,_x2){return _saveSavedObject.apply(this,arguments)}function _saveSavedObject(){_saveSavedObject=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObject,config){var _ref,_ref$confirmOverwrite,confirmOverwrite,_ref$isTitleDuplicate,isTitleDuplicateConfirmed,onTitleDuplicate,services,savedObjectsClient,chrome,esType,extractReferences,originalId,_savedObject$_seriali,attributes,references,_extractReferences,resp,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref=_args.length>2&&_args[2]!==undefined?_args[2]:{},_ref$confirmOverwrite=_ref.confirmOverwrite,confirmOverwrite=_ref$confirmOverwrite===void 0?false:_ref$confirmOverwrite,_ref$isTitleDuplicate=_ref.isTitleDuplicateConfirmed,isTitleDuplicateConfirmed=_ref$isTitleDuplicate===void 0?false:_ref$isTitleDuplicate,onTitleDuplicate=_ref.onTitleDuplicate;services=_args.length>3?_args[3]:undefined;savedObjectsClient=services.savedObjectsClient,chrome=services.chrome;esType=config.type||"";extractReferences=config.extractReferences;originalId=savedObject.id;if(savedObject.copyOnSave){delete savedObject.id}_savedObject$_seriali=savedObject._serialize(),attributes=_savedObject$_seriali.attributes,references=_savedObject$_seriali.references;if(extractReferences){_extractReferences=extractReferences({attributes:attributes,references:references});attributes=_extractReferences.attributes;references=_extractReferences.references}if(references){_context.next=11;break}throw new Error("References not returned from extractReferences");case 11:_context.prev=11;_context.next=14;return(0,_check_for_duplicate_title.checkForDuplicateTitle)(savedObject,isTitleDuplicateConfirmed,onTitleDuplicate,services);case 14:savedObject.isSaving=true;if(!confirmOverwrite){_context.next=21;break}_context.next=18;return(0,_create_source.createSource)(attributes,savedObject,esType,savedObject.creationOpts({references:references}),services);case 18:_context.t0=_context.sent;_context.next=24;break;case 21:_context.next=23;return savedObjectsClient.create(esType,attributes,savedObject.creationOpts({references:references,overwrite:true}));case 23:_context.t0=_context.sent;case 24:resp=_context.t0;savedObject.id=resp.id;if(savedObject.showInRecentlyAccessed&&savedObject.getFullPath){chrome.recentlyAccessed.add(savedObject.getFullPath(),savedObject.title,String(savedObject.id))}savedObject.isSaving=false;savedObject.lastSavedTitle=savedObject.title;return _context.abrupt("return",savedObject.id);case 32:_context.prev=32;_context.t1=_context["catch"](11);savedObject.isSaving=false;savedObject.id=originalId;if(!isErrorNonFatal(_context.t1)){_context.next=38;break}return _context.abrupt("return","");case 38:return _context.abrupt("return",Promise.reject(_context.t1));case 39:case"end":return _context.stop()}}}),_callee,null,[[11,32]])})));return _saveSavedObject.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.checkForDuplicateTitle=checkForDuplicateTitle;var _find_object_by_title=__webpack_require__(689);var _constants=__webpack_require__(128);var _display_duplicate_title_confirm_modal=__webpack_require__(690);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function checkForDuplicateTitle(_x,_x2,_x3,_x4){return _checkForDuplicateTitle.apply(this,arguments)}function _checkForDuplicateTitle(){_checkForDuplicateTitle=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObject,isTitleDuplicateConfirmed,onTitleDuplicate,services){var savedObjectsClient,overlays,duplicate;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:savedObjectsClient=services.savedObjectsClient,overlays=services.overlays;if(!isTitleDuplicateConfirmed){_context.next=3;break}return _context.abrupt("return",true);case 3:if(!(savedObject.title===savedObject.lastSavedTitle&&!savedObject.copyOnSave)){_context.next=5;break}return _context.abrupt("return",true);case 5:_context.next=7;return(0,_find_object_by_title.findObjectByTitle)(savedObjectsClient,savedObject.getEsType(),savedObject.title);case 7:duplicate=_context.sent;if(!(!duplicate||duplicate.id===savedObject.id)){_context.next=10;break}return _context.abrupt("return",true);case 10:if(!onTitleDuplicate){_context.next=13;break}onTitleDuplicate();return _context.abrupt("return",Promise.reject(new Error(_constants.SAVE_DUPLICATE_REJECTED)));case 13:return _context.abrupt("return",(0,_display_duplicate_title_confirm_modal.displayDuplicateTitleConfirmModal)(savedObject,overlays));case 14:case"end":return _context.stop()}}}),_callee)})));return _checkForDuplicateTitle.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isEqual=isEqual;function isEqual(a,b){return Object.keys(a).every((function(key){return a[key]===b[key]}))}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.matchesOne=void 0;var matchesOne=function matchesOne(){for(var _len=arguments.length,actionCreators=new Array(_len),_key=0;_key<_len;_key++){actionCreators[_key]=arguments[_key]}return function(action){return actionCreators.some((function(actionCreator){return actionCreator.match(action)}))}};exports.matchesOne=matchesOne},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.datasourceSaga=void 0;var _effects=__webpack_require__(120);var _i18n=__webpack_require__(1);var _fields=__webpack_require__(129);var _persistence=__webpack_require__(187);var _advanced_settings=__webpack_require__(151);var _datasource=__webpack_require__(114);var datasourceSaga=function datasourceSaga(_ref){var _marked=regeneratorRuntime.mark(fetchFields);var indexPatternProvider=_ref.indexPatternProvider,notifications=_ref.notifications,createWorkspace=_ref.createWorkspace,notifyAngular=_ref.notifyAngular;function fetchFields(action){var indexPattern,advancedSettings;return regeneratorRuntime.wrap((function fetchFields$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return(0,_effects.call)(indexPatternProvider.get,action.payload.id);case 3:indexPattern=_context.sent;_context.next=6;return(0,_effects.put)((0,_fields.loadFields)((0,_persistence.mapFields)(indexPattern)));case 6:_context.next=8;return(0,_effects.put)((0,_datasource.datasourceLoaded)());case 8:_context.t0=_advanced_settings.settingsSelector;_context.next=11;return(0,_effects.select)();case 11:_context.t1=_context.sent;advancedSettings=(0,_context.t0)(_context.t1);createWorkspace(indexPattern.title,advancedSettings);notifyAngular();_context.next=22;break;case 17:_context.prev=17;_context.t2=_context["catch"](0);_context.next=21;return(0,_effects.put)((0,_datasource.setDatasource)({type:"none"}));case 21:notifications.toasts.addDanger(_i18n.i18n.translate("xpack.graph.loadWorkspace.missingIndexPatternErrorMessage",{defaultMessage:"Index pattern not found"}));case 22:case"end":return _context.stop()}}}),_marked,null,[[0,17]])}return(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return(0,_effects.takeLatest)(_datasource.requestDatasource.match,fetchFields);case 2:case"end":return _context2.stop()}}}),_callee)})))};exports.datasourceSaga=datasourceSaga},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.savingSaga=exports.loadingSaga=exports.saveWorkspace=exports.loadSavedWorkspace=void 0;var _typescriptFsa=_interopRequireDefault(__webpack_require__(113));var _i18n=__webpack_require__(1);var _effects=__webpack_require__(120);var _datasource=__webpack_require__(114);var _fields=__webpack_require__(129);var _advanced_settings=__webpack_require__(151);var _url_templates=__webpack_require__(183);var _persistence=__webpack_require__(187);var _meta_data=__webpack_require__(188);var _save_modal=__webpack_require__(709);var _url=__webpack_require__(189);var _saved_workspace_utils=__webpack_require__(305);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var actionCreator=(0,_typescriptFsa.default)("x-pack/graph");var loadSavedWorkspace=actionCreator("LOAD_WORKSPACE");exports.loadSavedWorkspace=loadSavedWorkspace;var saveWorkspace=actionCreator("SAVE_WORKSPACE");exports.saveWorkspace=saveWorkspace;var loadingSaga=function loadingSaga(_ref){var _marked=regeneratorRuntime.mark(deserializeWorkspace);var createWorkspace=_ref.createWorkspace,getWorkspace=_ref.getWorkspace,indexPatterns=_ref.indexPatterns,notifications=_ref.notifications,indexPatternProvider=_ref.indexPatternProvider;function deserializeWorkspace(action){var selectedIndex,indexPattern,initialSettings,_savedWorkspaceToAppS,urlTemplates,advancedSettings,allFields;return regeneratorRuntime.wrap((function deserializeWorkspace$(_context){while(1){switch(_context.prev=_context.next){case 0:selectedIndex=(0,_persistence.lookupIndexPattern)(action.payload,indexPatterns);if(selectedIndex){_context.next=4;break}notifications.toasts.addDanger(_i18n.i18n.translate("xpack.graph.loadWorkspace.missingIndexPatternErrorMessage",{defaultMessage:"Index pattern not found"}));return _context.abrupt("return");case 4:_context.next=6;return(0,_effects.call)(indexPatternProvider.get,selectedIndex.id);case 6:indexPattern=_context.sent;_context.t0=_advanced_settings.settingsSelector;_context.next=10;return(0,_effects.select)();case 10:_context.t1=_context.sent;initialSettings=(0,_context.t0)(_context.t1);createWorkspace(selectedIndex.attributes.title,initialSettings);_savedWorkspaceToAppS=(0,_persistence.savedWorkspaceToAppState)(action.payload,indexPattern,getWorkspace()),urlTemplates=_savedWorkspaceToAppS.urlTemplates,advancedSettings=_savedWorkspaceToAppS.advancedSettings,allFields=_savedWorkspaceToAppS.allFields;_context.next=16;return(0,_effects.put)((0,_meta_data.updateMetaData)({title:action.payload.title,description:action.payload.description,savedObjectId:action.payload.id}));case 16:_context.next=18;return(0,_effects.put)((0,_datasource.setDatasource)({type:"indexpattern",id:selectedIndex.id,title:selectedIndex.attributes.title}));case 18:_context.next=20;return(0,_effects.put)((0,_fields.loadFields)(allFields));case 20:_context.next=22;return(0,_effects.put)((0,_advanced_settings.updateSettings)(advancedSettings));case 22:_context.next=24;return(0,_effects.put)((0,_url_templates.loadTemplates)(urlTemplates));case 24:getWorkspace().runLayout();case 25:case"end":return _context.stop()}}}),_marked)}return(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return(0,_effects.takeLatest)(loadSavedWorkspace.match,deserializeWorkspace);case 2:case"end":return _context2.stop()}}}),_callee)})))};exports.loadingSaga=loadingSaga;var savingSaga=function savingSaga(deps){var _marked2=regeneratorRuntime.mark(persistWorkspace);function persistWorkspace(){var savedWorkspace,state,workspace,selectedDatasource,savedObjectId;return regeneratorRuntime.wrap((function persistWorkspace$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:savedWorkspace=deps.getSavedWorkspace();_context3.next=3;return(0,_effects.select)();case 3:state=_context3.sent;workspace=deps.getWorkspace();selectedDatasource=(0,_datasource.datasourceSelector)(state).current;if(!(!workspace||selectedDatasource.type==="none")){_context3.next=8;break}return _context3.abrupt("return");case 8:_context3.next=10;return(0,_effects.cps)(showModal,{deps:deps,workspace:workspace,savedWorkspace:savedWorkspace,state:state,selectedDatasource:selectedDatasource});case 10:savedObjectId=_context3.sent;if(!savedObjectId){_context3.next=14;break}_context3.next=14;return(0,_effects.put)((0,_meta_data.updateMetaData)({savedObjectId:savedObjectId}));case 14:case"end":return _context3.stop()}}}),_marked2)}return(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return(0,_effects.takeLatest)(saveWorkspace.match,persistWorkspace);case 2:case"end":return _context4.stop()}}}),_callee2)})))};exports.savingSaga=savingSaga;function showModal(_ref2,savingCallback){var deps=_ref2.deps,workspace=_ref2.workspace,savedWorkspace=_ref2.savedWorkspace,state=_ref2.state,selectedDatasource=_ref2.selectedDatasource;var saveWorkspaceHandler=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(saveOptions,userHasConfirmedSaveWorkspaceData,services){var canSaveData,_id,title,text;return regeneratorRuntime.wrap((function _callee3$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:canSaveData=deps.savePolicy==="configAndData"||deps.savePolicy==="configAndDataWithConsent"&&userHasConfirmedSaveWorkspaceData;(0,_persistence.appStateToSavedWorkspace)(savedWorkspace,{workspace:workspace,urlTemplates:(0,_url_templates.templatesSelector)(state),advancedSettings:(0,_advanced_settings.settingsSelector)(state),selectedIndex:selectedDatasource,selectedFields:(0,_fields.selectedFieldsSelector)(state)},canSaveData);_context5.prev=2;_context5.next=5;return(0,_saved_workspace_utils.saveSavedWorkspace)(savedWorkspace,saveOptions,services);case 5:_id=_context5.sent;if(_id){title=_i18n.i18n.translate("xpack.graph.saveWorkspace.successNotificationTitle",{defaultMessage:'Saved "{workspaceTitle}"',values:{workspaceTitle:savedWorkspace.title}});if(!canSaveData&&workspace.nodes.length>0){text=_i18n.i18n.translate("xpack.graph.saveWorkspace.successNotification.noDataSavedText",{defaultMessage:"The configuration was saved, but the data was not saved"})}deps.notifications.toasts.addSuccess({title:title,text:text,"data-test-subj":"saveGraphSuccess"});if(savedWorkspace.id!==(0,_meta_data.metaDataSelector)(state).savedObjectId){deps.changeUrl((0,_url.getEditPath)(savedWorkspace))}}savingCallback(null,_id);return _context5.abrupt("return",{id:_id});case 11:_context5.prev=11;_context5.t0=_context5["catch"](2);deps.notifications.toasts.addDanger(_i18n.i18n.translate("xpack.graph.saveWorkspace.savingErrorMessage",{defaultMessage:"Failed to save workspace: {message}",values:{message:_context5.t0}}));return _context5.abrupt("return",{error:_context5.t0});case 15:case"end":return _context5.stop()}}}),_callee3,null,[[2,11]])})));return function saveWorkspaceHandler(_x,_x2,_x3){return _ref3.apply(this,arguments)}}();(0,_save_modal.openSaveModal)({savePolicy:deps.savePolicy,hasData:workspace.nodes.length>0||workspace.blacklistedNodes.length>0,workspace:savedWorkspace,showSaveModal:deps.showSaveModal,saveWorkspace:saveWorkspaceHandler,I18nContext:deps.I18nContext,services:{savedObjectsClient:deps.savedObjectsClient,overlays:deps.overlays}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findSavedWorkspace=findSavedWorkspace;exports.getSavedWorkspace=getSavedWorkspace;exports.deleteSavedWorkspace=deleteSavedWorkspace;exports.saveSavedWorkspace=saveSavedWorkspace;var _lodash=__webpack_require__(0);var _i18n=__webpack_require__(1);var _public=__webpack_require__(135);var _saved_workspace_references=__webpack_require__(711);var _public2=__webpack_require__(15);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var savedWorkspaceType="graph-workspace";var mapping={title:"text",description:"text",numLinks:"integer",numVertices:"integer",version:"integer",wsState:"json"};var defaultsProps={title:_i18n.i18n.translate("xpack.graph.savedWorkspace.workspaceNameTitle",{defaultMessage:"New Graph Workspace"}),numLinks:0,numVertices:0,wsState:"{}",version:1};var urlFor=function urlFor(basePath,id){return basePath.prepend("/app/graph#/workspace/".concat(encodeURIComponent(id)))};function mapHits(hit,url){var source=hit.attributes;source.id=hit.id;source.url=url;source.icon="fa-share-alt";return source}function findSavedWorkspace(_ref,searchString){var savedObjectsClient=_ref.savedObjectsClient,basePath=_ref.basePath;var size=arguments.length>2&&arguments[2]!==undefined?arguments[2]:100;return savedObjectsClient.find({type:savedWorkspaceType,search:searchString?"".concat(searchString,"*"):undefined,perPage:size,searchFields:["title^3","description"]}).then((function(resp){return{total:resp.total,hits:resp.savedObjects.map((function(hit){return mapHits(hit,urlFor(basePath,hit.id))}))}}))}function getSavedWorkspace(_x,_x2){return _getSavedWorkspace.apply(this,arguments)}function _getSavedWorkspace(){_getSavedWorkspace=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObjectsClient,id){var savedObject,resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:savedObject={id:id,displayName:"graph workspace",getEsType:function getEsType(){return savedWorkspaceType}};if(id){_context.next=4;break}(0,_lodash.assign)(savedObject,defaultsProps);return _context.abrupt("return",Promise.resolve(savedObject));case 4:_context.next=6;return savedObjectsClient.get(savedWorkspaceType,id);case 6:resp=_context.sent;savedObject._source=(0,_lodash.cloneDeep)(resp.attributes);if(resp._version){_context.next=10;break}throw new _public2.SavedObjectNotFound(savedWorkspaceType,id||"");case 10:(0,_lodash.defaults)(savedObject._source,defaultsProps);if(savedObject._source.wsState){savedObject._source.wsState=JSON.parse(savedObject._source.wsState)}(0,_lodash.assign)(savedObject,savedObject._source);savedObject.lastSavedTitle=savedObject.title;if(resp.references&&resp.references.length>0){(0,_saved_workspace_references.injectReferences)(savedObject,resp.references)}return _context.abrupt("return",savedObject);case 16:case"end":return _context.stop()}}}),_callee)})));return _getSavedWorkspace.apply(this,arguments)}function deleteSavedWorkspace(savedObjectsClient,ids){return Promise.all(ids.map((function(id){return savedObjectsClient.delete(savedWorkspaceType,id)})))}function saveSavedWorkspace(_x3){return _saveSavedWorkspace.apply(this,arguments)}function _saveSavedWorkspace(){_saveSavedWorkspace=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(savedObject){var _ref2,_ref2$confirmOverwrit,confirmOverwrite,_ref2$isTitleDuplicat,isTitleDuplicateConfirmed,onTitleDuplicate,services,originalId,attributes,extractedRefs,references,createOpt,resp,_args2=arguments;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_ref2=_args2.length>1&&_args2[1]!==undefined?_args2[1]:{},_ref2$confirmOverwrit=_ref2.confirmOverwrite,confirmOverwrite=_ref2$confirmOverwrit===void 0?false:_ref2$confirmOverwrit,_ref2$isTitleDuplicat=_ref2.isTitleDuplicateConfirmed,isTitleDuplicateConfirmed=_ref2$isTitleDuplicat===void 0?false:_ref2$isTitleDuplicat,onTitleDuplicate=_ref2.onTitleDuplicate;services=_args2.length>2?_args2[2]:undefined;originalId=savedObject.id;if(savedObject.copyOnSave){delete savedObject.id}attributes={};(0,_lodash.forOwn)(mapping,(function(fieldType,fieldName){var savedObjectFieldVal=savedObject[fieldName];if(savedObjectFieldVal!=null){attributes[fieldName]=fieldName==="wsState"?JSON.stringify(savedObjectFieldVal):savedObjectFieldVal}}));extractedRefs=(0,_saved_workspace_references.extractReferences)({attributes:attributes,references:[]});references=extractedRefs.references;attributes=extractedRefs.attributes;if(references){_context2.next=11;break}throw new Error("References not returned from extractReferences");case 11:_context2.prev=11;_context2.next=14;return(0,_public.checkForDuplicateTitle)(savedObject,isTitleDuplicateConfirmed,onTitleDuplicate,services);case 14:savedObject.isSaving=true;createOpt={id:savedObject.id,migrationVersion:savedObject.migrationVersion,references:references};if(!confirmOverwrite){_context2.next=22;break}_context2.next=19;return(0,_public.saveWithConfirmation)(attributes,savedObject,createOpt,services);case 19:_context2.t0=_context2.sent;_context2.next=25;break;case 22:_context2.next=24;return services.savedObjectsClient.create(savedObject.getEsType(),attributes,_objectSpread({},createOpt,{overwrite:true}));case 24:_context2.t0=_context2.sent;case 25:resp=_context2.t0;savedObject.id=resp.id;savedObject.isSaving=false;savedObject.lastSavedTitle=savedObject.title;return _context2.abrupt("return",savedObject.id);case 32:_context2.prev=32;_context2.t1=_context2["catch"](11);savedObject.isSaving=false;savedObject.id=originalId;if(!(0,_public.isErrorNonFatal)(_context2.t1)){_context2.next=38;break}return _context2.abrupt("return","");case 38:return _context2.abrupt("return",Promise.reject(_context2.t1));case 39:case"end":return _context2.stop()}}}),_callee2,null,[[11,32]])})));return _saveSavedWorkspace.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fillWorkspaceSaga=exports.fillWorkspace=void 0;var _typescriptFsa=_interopRequireDefault(__webpack_require__(113));var _i18n=__webpack_require__(1);var _effects=__webpack_require__(120);var _datasource=__webpack_require__(114);var _fields=__webpack_require__(129);var _fetch_top_nodes=__webpack_require__(712);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var actionCreator=(0,_typescriptFsa.default)("x-pack/graph");var fillWorkspace=actionCreator("FILL_WORKSPACE");exports.fillWorkspace=fillWorkspace;var fillWorkspaceSaga=function fillWorkspaceSaga(_ref){var _marked=regeneratorRuntime.mark(fetchNodes);var getWorkspace=_ref.getWorkspace,setWorkspaceInitialized=_ref.setWorkspaceInitialized,notifyAngular=_ref.notifyAngular,http=_ref.http,notifications=_ref.notifications;function fetchNodes(){var workspace,state,fields,datasource,topTermNodes,message;return regeneratorRuntime.wrap((function fetchNodes$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;workspace=getWorkspace();if(workspace){_context.next=4;break}return _context.abrupt("return");case 4:_context.next=6;return(0,_effects.select)();case 6:state=_context.sent;fields=(0,_fields.selectedFieldsSelector)(state);datasource=(0,_datasource.datasourceSelector)(state).current;if(!(datasource.type==="none")){_context.next=11;break}return _context.abrupt("return");case 11:_context.next=13;return(0,_effects.call)(_fetch_top_nodes.fetchTopNodes,http.post,datasource.title,fields);case 13:topTermNodes=_context.sent;workspace.mergeGraph({nodes:topTermNodes,edges:[]});setWorkspaceInitialized();notifyAngular();workspace.fillInGraph(fields.length*10);_context.next=24;break;case 20:_context.prev=20;_context.t0=_context["catch"](0);message="body"in _context.t0?_context.t0.body.message:_context.t0.message;notifications.toasts.addDanger({title:_i18n.i18n.translate("xpack.graph.fillWorkspaceError",{defaultMessage:"Fetching top terms failed: {message}",values:{message:message}})});case 24:case"end":return _context.stop()}}}),_marked,null,[[0,20]])}return(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return(0,_effects.takeLatest)(fillWorkspace.match,fetchNodes);case 2:case"end":return _context2.stop()}}}),_callee)})))};exports.fillWorkspaceSaga=fillWorkspaceSaga},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.openSourceModal=openSourceModal;var _react=_interopRequireDefault(__webpack_require__(4));var _source_modal=__webpack_require__(720);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function openSourceModal(_ref,onSelected){var overlays=_ref.overlays,savedObjects=_ref.savedObjects,uiSettings=_ref.uiSettings;var modalRef=overlays.openModal(_react.default.createElement(_source_modal.SourceModal,{uiSettings:uiSettings,savedObjects:savedObjects,onIndexPatternSelected:function onIndexPatternSelected(indexPattern){onSelected(indexPattern);modalRef.close()}}))}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useListKeys=useListKeys;var _react=__webpack_require__(4);var _eui=__webpack_require__(12);var generateId=(0,_eui.htmlIdGenerator)();function useListKeys(list){var idStore=(0,_react.useRef)(new Map);var currentIdMap=(0,_react.useMemo)((function(){var newMap=new Map;list.forEach((function(item){if(idStore.current.has(item)){newMap.set(item,idStore.current.get(item))}else{var newId=generateId();newMap.set(item,newId)}}));idStore.current=newMap;return idStore.current}),[list]);return(0,_react.useCallback)((function(item){var itemId=currentIdMap.get(item);if(itemId){return itemId}throw new Error("Object not found. Make sure to pass the whole list to the hook and don't mutate the list with functions like push")}),[currentIdMap])}},,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(318);__webpack_require__(319);__webpack_require__(321);module.exports=window.ace},,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initGraphApp=initGraphApp;var _lodash=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(4));var _reactRedux=__webpack_require__(115);var _eui=__webpack_require__(12);var _public=__webpack_require__(14);var _public2=__webpack_require__(135);var _index=_interopRequireDefault(__webpack_require__(695));var _listing_ng_wrapper=_interopRequireDefault(__webpack_require__(696));var _badge=__webpack_require__(697);var _app=__webpack_require__(698);var _venn_diagram=__webpack_require__(725);var _listing=__webpack_require__(733);var _settings=__webpack_require__(734);var _graph_visualization=__webpack_require__(740);var _graph_client_workspace=_interopRequireDefault(__webpack_require__(742));var _url=__webpack_require__(189);var _index_pattern_cache=__webpack_require__(743);var _url_template=__webpack_require__(186);var _as_observable=__webpack_require__(744);var _style_choices=__webpack_require__(150);var _state_management=__webpack_require__(122);var _format_http_error=__webpack_require__(745);var _saved_workspace_utils=__webpack_require__(305);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function initGraphApp(angularModule,deps){var chrome=deps.chrome,toastNotifications=deps.toastNotifications,savedObjectsClient=deps.savedObjectsClient,indexPatterns=deps.indexPatterns,addBasePath=deps.addBasePath,getBasePath=deps.getBasePath,data=deps.data,config=deps.config,capabilities=deps.capabilities,coreStart=deps.coreStart,storage=deps.storage,canEditDrillDownUrls=deps.canEditDrillDownUrls,graphSavePolicy=deps.graphSavePolicy,overlays=deps.overlays;var app=angularModule;app.directive("vennDiagram",(function(reactDirective){return reactDirective(_venn_diagram.VennDiagram)}));app.directive("graphVisualization",(function(reactDirective){return reactDirective(_graph_visualization.GraphVisualization)}));app.directive("graphListing",(function(reactDirective){return reactDirective(_listing.Listing,[["coreStart",{watchDepth:"reference"}],["createItem",{watchDepth:"reference"}],["findItems",{watchDepth:"reference"}],["deleteItems",{watchDepth:"reference"}],["editItem",{watchDepth:"reference"}],["getViewUrl",{watchDepth:"reference"}],["listingLimit",{watchDepth:"reference"}],["hideWriteControls",{watchDepth:"reference"}],["capabilities",{watchDepth:"reference"}],["initialFilter",{watchDepth:"reference"}]])}));app.directive("graphApp",(function(reactDirective){return reactDirective(_app.GraphApp,[["storage",{watchDepth:"reference"}],["isInitialized",{watchDepth:"reference"}],["currentIndexPattern",{watchDepth:"reference"}],["indexPatternProvider",{watchDepth:"reference"}],["isLoading",{watchDepth:"reference"}],["onQuerySubmit",{watchDepth:"reference"}],["initialQuery",{watchDepth:"reference"}],["confirmWipeWorkspace",{watchDepth:"reference"}],["coreStart",{watchDepth:"reference"}],["noIndexPatterns",{watchDepth:"reference"}],["reduxStore",{watchDepth:"reference"}],["pluginDataStart",{watchDepth:"reference"}]],{restrict:"A"})}));app.directive("graphVisualization",(function(reactDirective){return reactDirective(_graph_visualization.GraphVisualization,undefined,{restrict:"A"})}));app.config((function($routeProvider){$routeProvider.when("/home",{template:_listing_ng_wrapper.default,badge:_badge.getReadonlyBadge,controller:function controller($location,$scope){$scope.listingLimit=config.get("savedObjects:listingLimit");$scope.create=function(){$location.url((0,_url.getNewPath)())};$scope.find=function(search){return(0,_saved_workspace_utils.findSavedWorkspace)({savedObjectsClient:savedObjectsClient,basePath:coreStart.http.basePath},search,$scope.listingLimit)};$scope.editItem=function(workspace){$location.url((0,_url.getEditPath)(workspace))};$scope.getViewUrl=function(workspace){return(0,_url.getEditUrl)(addBasePath,workspace)};$scope.delete=function(workspaces){return(0,_saved_workspace_utils.deleteSavedWorkspace)(savedObjectsClient,workspaces.map((function(_ref){var id=_ref.id;return id})))};$scope.capabilities=capabilities;$scope.initialFilter=$location.search().filter||"";$scope.coreStart=coreStart;(0,_url.setBreadcrumbs)({chrome:chrome})}}).when("/workspace/:id?",{template:_index.default,badge:_badge.getReadonlyBadge,resolve:{savedWorkspace:function savedWorkspace($rootScope,$route,$location){return $route.current.params.id?(0,_saved_workspace_utils.getSavedWorkspace)(savedObjectsClient,$route.current.params.id).catch((function(e){toastNotifications.addError(e,{title:_i18n.i18n.translate("xpack.graph.missingWorkspaceErrorMessage",{defaultMessage:"Couldn't load graph with ID"})});$rootScope.$eval((function(){$location.path("/home");$location.replace()}));return new Promise})):(0,_saved_workspace_utils.getSavedWorkspace)(savedObjectsClient)},indexPatterns:function indexPatterns(){return savedObjectsClient.find({type:"index-pattern",fields:["title","type"],perPage:1e4}).then((function(response){return response.savedObjects}))},GetIndexPatternProvider:function GetIndexPatternProvider(){return indexPatterns}}}).otherwise({redirectTo:"/home"})}));app.controller("graphuiPlugin",(function($scope,$route,$location){function handleError(err){var toastTitle=_i18n.i18n.translate("xpack.graph.errorToastTitle",{defaultMessage:"Graph Error",description:'"Graph" is a product name and should not be translated.'});if(err instanceof Error){toastNotifications.addError(err,{title:toastTitle})}else{toastNotifications.addDanger({title:toastTitle,text:String(err)})}}function handleHttpError(_x){return _handleHttpError.apply(this,arguments)}function _handleHttpError(){_handleHttpError=_asyncToGenerator(regeneratorRuntime.mark((function _callee(error){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:toastNotifications.addDanger((0,_format_http_error.formatHttpError)(error));case 1:case"end":return _context.stop()}}}),_callee)})));return _handleHttpError.apply(this,arguments)}function callNodeProxy(indexName,query,responseHandler){var request={body:JSON.stringify({index:indexName,query:query})};$scope.loading=true;return coreStart.http.post("../api/graph/graphExplore",request).then((function(data){var response=data.resp;if(response.timed_out){toastNotifications.addWarning(_i18n.i18n.translate("xpack.graph.exploreGraph.timedOutWarningText",{defaultMessage:"Exploration timed out"}))}responseHandler(response)})).catch(handleHttpError).finally((function(){$scope.loading=false;$scope.$digest()}))}var callSearchNodeProxy=function callSearchNodeProxy(indexName,query,responseHandler){var request={body:JSON.stringify({index:indexName,body:query})};$scope.loading=true;coreStart.http.post("../api/graph/searchProxy",request).then((function(data){var response=data.resp;responseHandler(response)})).catch(handleHttpError).finally((function(){$scope.loading=false;$scope.$digest()}))};$scope.indexPatternProvider=(0,_index_pattern_cache.createCachedIndexPatternProvider)($route.current.locals.GetIndexPatternProvider.get);var store=(0,_state_management.createGraphStore)({basePath:getBasePath(),addBasePath:addBasePath,indexPatternProvider:$scope.indexPatternProvider,indexPatterns:$route.current.locals.indexPatterns,createWorkspace:function createWorkspace(indexPattern,exploreControls){var options={indexName:indexPattern,vertex_fields:[],nodeLabeller:function nodeLabeller(){},changeHandler:function changeHandler(){$scope.$apply()},graphExploreProxy:callNodeProxy,searchProxy:callSearchNodeProxy,exploreControls:exploreControls};$scope.workspace=_graph_client_workspace.default.createWorkspace(options)},setLiveResponseFields:function setLiveResponseFields(fields){$scope.liveResponseFields=fields},setUrlTemplates:function setUrlTemplates(urlTemplates){$scope.urlTemplates=urlTemplates},getWorkspace:function getWorkspace(){return $scope.workspace},getSavedWorkspace:function getSavedWorkspace(){return $route.current.locals.savedWorkspace},notifications:coreStart.notifications,http:coreStart.http,overlays:coreStart.overlays,savedObjectsClient:savedObjectsClient,showSaveModal:_public2.showSaveModal,setWorkspaceInitialized:function setWorkspaceInitialized(){$scope.workspaceInitialized=true},savePolicy:graphSavePolicy,changeUrl:function changeUrl(newUrl){$scope.$evalAsync((function(){$location.url(newUrl)}))},notifyAngular:function notifyAngular(){$scope.$digest()},chrome:chrome,I18nContext:coreStart.i18n.Context});$scope.pluginDataStart=data;$scope.storage=storage;$scope.coreStart=coreStart;$scope.loading=false;$scope.reduxStore=store;$scope.savedWorkspace=$route.current.locals.savedWorkspace;var allSavingDisabled=graphSavePolicy==="none";$scope.spymode="request";$scope.colors=_style_choices.colorChoices;$scope.isColorDark=function(color){return _eui.isColorDark.apply(void 0,_toConsumableArray((0,_eui.hexToRgb)(color)))};$scope.nodeClick=function(n,$event){if(!$event.shiftKey){var prevSelection=n.isSelected;$scope.workspace.selectNone();n.isSelected=prevSelection}if($scope.workspace.toggleNodeSelection(n)){$scope.selectSelected(n)}else{$scope.detail=null}};$scope.clickEdge=function(edge){$scope.workspace.getAllIntersections($scope.handleMergeCandidatesCallback,[edge.topSrc,edge.topTarget])};$scope.submit=function(searchTerm){$scope.workspaceInitialized=true;var numHops=2;if(searchTerm.startsWith("{")){try{var query=JSON.parse(searchTerm);if(query.vertices){$scope.workspace.callElasticsearch(query)}else{$scope.workspace.search(query,$scope.liveResponseFields,numHops)}}catch(err){handleError(err)}return}$scope.workspace.simpleSearch(searchTerm,$scope.liveResponseFields,numHops)};$scope.selectSelected=function(node){$scope.detail={latestNodeSelection:node};return $scope.selectedSelectedVertex=node};$scope.isSelectedSelected=function(node){return $scope.selectedSelectedVertex===node};$scope.openUrlTemplate=function(template){var url=template.url;var newUrl=url.replace(_url_template.urlTemplateRegex,template.encoder.encode($scope.workspace));window.open(newUrl,"_blank")};$scope.aceLoaded=function(editor){editor.$blockScrolling=Infinity};$scope.setDetail=function(data){$scope.detail=data};function canWipeWorkspace(callback,text,options){if(!(0,_state_management.hasFieldsSelector)(store.getState())){callback();return}var confirmModalOptions=_objectSpread({confirmButtonText:_i18n.i18n.translate("xpack.graph.leaveWorkspace.confirmButtonLabel",{defaultMessage:"Leave anyway"}),title:_i18n.i18n.translate("xpack.graph.leaveWorkspace.modalTitle",{defaultMessage:"Unsaved changes"}),"data-test-subj":"confirmModal"},options);overlays.openConfirm(text||_i18n.i18n.translate("xpack.graph.leaveWorkspace.confirmText",{defaultMessage:"If you leave now, you will lose unsaved changes."}),confirmModalOptions).then((function(isConfirmed){if(isConfirmed){callback()}}))}$scope.confirmWipeWorkspace=canWipeWorkspace;$scope.performMerge=function(parentId,childId){var found=true;while(found){found=false;for(var i in $scope.detail.mergeCandidates){if($scope.detail.mergeCandidates.hasOwnProperty(i)){var mc=$scope.detail.mergeCandidates[i];if(mc.id1===childId||mc.id2===childId){$scope.detail.mergeCandidates.splice(i,1);found=true;break}}}}$scope.workspace.mergeIds(parentId,childId);$scope.detail=null};$scope.handleMergeCandidatesCallback=function(termIntersects){var mergeCandidates=[];termIntersects.forEach((function(ti){mergeCandidates.push({id1:ti.id1,id2:ti.id2,term1:ti.term1,term2:ti.term2,v1:ti.v1,v2:ti.v2,overlap:ti.overlap})}));$scope.detail={mergeCandidates:mergeCandidates}};$scope.topNavMenu=[];$scope.topNavMenu.push({key:"new",label:_i18n.i18n.translate("xpack.graph.topNavMenu.newWorkspaceLabel",{defaultMessage:"New"}),description:_i18n.i18n.translate("xpack.graph.topNavMenu.newWorkspaceAriaLabel",{defaultMessage:"New Workspace"}),tooltip:_i18n.i18n.translate("xpack.graph.topNavMenu.newWorkspaceTooltip",{defaultMessage:"Create a new workspace"}),run:function run(){canWipeWorkspace((function(){$scope.$evalAsync((function(){if($location.url()==="/workspace/"){$route.reload()}else{$location.url("/workspace/")}}))}))},testId:"graphNewButton"});if(capabilities.save){$scope.topNavMenu.push({key:"save",label:_i18n.i18n.translate("xpack.graph.topNavMenu.saveWorkspace.enabledLabel",{defaultMessage:"Save"}),description:_i18n.i18n.translate("xpack.graph.topNavMenu.saveWorkspace.enabledAriaLabel",{defaultMessage:"Save workspace"}),tooltip:function tooltip(){if(allSavingDisabled){return _i18n.i18n.translate("xpack.graph.topNavMenu.saveWorkspace.disabledTooltip",{defaultMessage:"No changes to saved workspaces are permitted by the current save policy"})}else{return _i18n.i18n.translate("xpack.graph.topNavMenu.saveWorkspace.enabledTooltip",{defaultMessage:"Save this workspace"})}},disableButton:function disableButton(){return allSavingDisabled||!(0,_state_management.hasFieldsSelector)(store.getState())},run:function run(){store.dispatch({type:"x-pack/graph/SAVE_WORKSPACE",payload:$route.current.locals.savedWorkspace})},testId:"graphSaveButton"})}$scope.topNavMenu.push({key:"inspect",disableButton:function disableButton(){return $scope.workspace===null},label:_i18n.i18n.translate("xpack.graph.topNavMenu.inspectLabel",{defaultMessage:"Inspect"}),description:_i18n.i18n.translate("xpack.graph.topNavMenu.inspectAriaLabel",{defaultMessage:"Inspect"}),run:function run(){$scope.$evalAsync((function(){var curState=$scope.menus.showInspect;$scope.closeMenus();$scope.menus.showInspect=!curState}))}});$scope.topNavMenu.push({key:"settings",disableButton:function disableButton(){return(0,_state_management.datasourceSelector)(store.getState()).type==="none"},label:_i18n.i18n.translate("xpack.graph.topNavMenu.settingsLabel",{defaultMessage:"Settings"}),description:_i18n.i18n.translate("xpack.graph.topNavMenu.settingsAriaLabel",{defaultMessage:"Settings"}),run:function run(){var settingsObservable=(0,_as_observable.asAngularSyncedObservable)((function(){return{blacklistedNodes:$scope.workspace?_toConsumableArray($scope.workspace.blacklistedNodes):undefined,unblacklistNode:$scope.workspace?$scope.workspace.unblacklist:undefined,canEditDrillDownUrls:canEditDrillDownUrls}}),$scope.$digest.bind($scope));coreStart.overlays.openFlyout((0,_public.toMountPoint)(_react.default.createElement(_reactRedux.Provider,{store:store},_react.default.createElement(_settings.Settings,{observable:settingsObservable}))),{size:"m",closeButtonAriaLabel:_i18n.i18n.translate("xpack.graph.settings.closeLabel",{defaultMessage:"Close"}),"data-test-subj":"graphSettingsFlyout",ownFocus:true,className:"gphSettingsFlyout",maxWidth:520})}});if($route.current.params.query){$scope.initialQuery=$route.current.params.query;var unbind=$scope.$watch("workspace",(function(){if(!$scope.workspace){return}unbind();$scope.submit($route.current.params.query)}))}$scope.menus={showSettings:false};$scope.closeMenus=function(){_lodash.default.forOwn($scope.menus,(function(_,key){$scope.menus[key]=false}))};if($route.current.locals.savedWorkspace.id){store.dispatch({type:"x-pack/graph/LOAD_WORKSPACE",payload:$route.current.locals.savedWorkspace})}else{$scope.noIndexPatterns=$route.current.locals.indexPatterns.length===0}}))}},,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectsPublicPlugin=void 0;__webpack_require__(347);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var SavedObjectsPublicPlugin=function(){function SavedObjectsPublicPlugin(){_classCallCheck(this,SavedObjectsPublicPlugin)}_createClass(SavedObjectsPublicPlugin,[{key:"setup",value:function setup(){}},{key:"start",value:function start(){}}]);return SavedObjectsPublicPlugin}();exports.SavedObjectsPublicPlugin=SavedObjectsPublicPlugin},function(module,exports,__webpack_require__){if(window.__kbnDarkMode__){__webpack_require__(348)}else{__webpack_require__(350)}},function(module,exports,__webpack_require__){var api=__webpack_require__(108);var content=__webpack_require__(349);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(109);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".kbnSavedObjectSaveModal {\n  width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(108);var content=__webpack_require__(351);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(109);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".kbnSavedObjectSaveModal {\n  width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedObjectSaveModal",{enumerable:true,get:function get(){return _saved_object_save_modal.SavedObjectSaveModal}});Object.defineProperty(exports,"OnSaveProps",{enumerable:true,get:function get(){return _saved_object_save_modal.OnSaveProps}});Object.defineProperty(exports,"showSaveModal",{enumerable:true,get:function get(){return _show_saved_object_save_modal.showSaveModal}});Object.defineProperty(exports,"SaveResult",{enumerable:true,get:function get(){return _show_saved_object_save_modal.SaveResult}});var _saved_object_save_modal=__webpack_require__(353);var _show_saved_object_save_modal=__webpack_require__(354)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectSaveModal=void 0;var _eui=__webpack_require__(12);var _react=__webpack_require__(13);var _react2=_interopRequireDefault(__webpack_require__(4));var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var generateId=(0,_eui.htmlIdGenerator)();var SavedObjectSaveModal=function(_React$Component){_inherits(SavedObjectSaveModal,_React$Component);function SavedObjectSaveModal(){var _getPrototypeOf2;var _this;_classCallCheck(this,SavedObjectSaveModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SavedObjectSaveModal)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"warning",_react2.default.createRef());_defineProperty(_assertThisInitialized(_this),"state",{title:_this.props.title,copyOnSave:false,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false,isLoading:false,visualizationDescription:_this.props.description?_this.props.description:""});_defineProperty(_assertThisInitialized(_this),"renderViewDescription",(function(){if(!_this.props.showDescription){return}return _react2.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.descriptionLabel",defaultMessage:"Description"})},_react2.default.createElement(_eui.EuiTextArea,{"data-test-subj":"viewDescription",value:_this.state.visualizationDescription,onChange:_this.onDescriptionChange}))}));_defineProperty(_assertThisInitialized(_this),"onDescriptionChange",(function(event){_this.setState({visualizationDescription:event.target.value})}));_defineProperty(_assertThisInitialized(_this),"onTitleDuplicate",(function(){_this.setState({isLoading:false,isTitleDuplicateConfirmed:true,hasTitleDuplicate:true});if(_this.warning.current){_this.warning.current.focus()}}));_defineProperty(_assertThisInitialized(_this),"saveSavedObject",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!_this.state.isLoading){_context.next=2;break}return _context.abrupt("return");case 2:_this.setState({isLoading:true});_context.next=5;return _this.props.onSave({newTitle:_this.state.title,newCopyOnSave:_this.state.copyOnSave,isTitleDuplicateConfirmed:_this.state.isTitleDuplicateConfirmed,onTitleDuplicate:_this.onTitleDuplicate,newDescription:_this.state.visualizationDescription});case 5:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(_assertThisInitialized(_this),"onTitleChange",(function(event){_this.setState({title:event.target.value,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false})}));_defineProperty(_assertThisInitialized(_this),"onCopyOnSaveChange",(function(event){_this.setState({copyOnSave:event.target.checked})}));_defineProperty(_assertThisInitialized(_this),"onFormSubmit",(function(event){event.preventDefault();_this.saveSavedObject()}));_defineProperty(_assertThisInitialized(_this),"renderConfirmButton",(function(){var _this$state=_this.state,isLoading=_this$state.isLoading,title=_this$state.title;var confirmLabel=_i18n.i18n.translate("savedObjects.saveModal.saveButtonLabel",{defaultMessage:"Save"});if(_this.props.confirmButtonLabel){confirmLabel=_this.props.confirmButtonLabel}return _react2.default.createElement(_eui.EuiButton,{fill:true,"data-test-subj":"confirmSaveSavedObjectButton",isLoading:isLoading,isDisabled:title.length===0,type:"submit"},confirmLabel)}));_defineProperty(_assertThisInitialized(_this),"renderDuplicateTitleCallout",(function(duplicateWarningId){if(!_this.state.hasTitleDuplicate){return}return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("div",{ref:_this.warning,tabIndex:-1},_react2.default.createElement(_eui.EuiCallOut,{title:_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.duplicateTitleLabel",defaultMessage:"A {objectType} with the title '{title}' already exists",values:{objectType:_this.props.objectType,title:_this.state.title}}),color:"warning","data-test-subj":"titleDupicateWarnMsg",id:duplicateWarningId},_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.duplicateTitleDescription",defaultMessage:"Clicking {confirmSaveLabel} will save the {objectType} with this duplicate title.",values:{objectType:_this.props.objectType,confirmSaveLabel:_react2.default.createElement("strong",null,_this.props.confirmButtonLabel?_this.props.confirmButtonLabel:_i18n.i18n.translate("savedObjects.saveModal.saveButtonLabel",{defaultMessage:"Save"}))}})))),_react2.default.createElement(_eui.EuiSpacer,null))}));_defineProperty(_assertThisInitialized(_this),"renderCopyOnSave",(function(){if(!_this.props.showCopyOnSave){return}return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(_eui.EuiSwitch,{"data-test-subj":"saveAsNewCheckbox",checked:_this.state.copyOnSave,onChange:_this.onCopyOnSaveChange,label:_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.saveAsNewLabel",defaultMessage:"Save as new {objectType}",values:{objectType:_this.props.objectType}})}),_react2.default.createElement(_eui.EuiSpacer,null))}));return _this}_createClass(SavedObjectSaveModal,[{key:"render",value:function render(){var _this$state2=this.state,isTitleDuplicateConfirmed=_this$state2.isTitleDuplicateConfirmed,hasTitleDuplicate=_this$state2.hasTitleDuplicate,title=_this$state2.title;var duplicateWarningId=generateId();return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement("form",{onSubmit:this.onFormSubmit},_react2.default.createElement(_eui.EuiModal,{"data-test-subj":"savedObjectSaveModal",className:"kbnSavedObjectSaveModal",onClose:this.props.onClose},_react2.default.createElement(_eui.EuiModalHeader,null,_react2.default.createElement(_eui.EuiModalHeaderTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.saveTitle",defaultMessage:"Save {objectType}",values:{objectType:this.props.objectType}}))),_react2.default.createElement(_eui.EuiModalBody,null,this.renderDuplicateTitleCallout(duplicateWarningId),_react2.default.createElement(_eui.EuiForm,null,!this.props.showDescription&&this.props.description&&_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiText,{color:"subdued"},this.props.description)),this.renderCopyOnSave(),_react2.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.titleLabel",defaultMessage:"Title"})},_react2.default.createElement(_eui.EuiFieldText,{fullWidth:true,autoFocus:true,"data-test-subj":"savedObjectTitle",value:title,onChange:this.onTitleChange,isInvalid:!isTitleDuplicateConfirmed&&hasTitleDuplicate||title.length===0,"aria-describedby":this.state.hasTitleDuplicate?duplicateWarningId:undefined})),this.renderViewDescription(),this.props.options)),_react2.default.createElement(_eui.EuiModalFooter,null,_react2.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"saveCancelButton",onClick:this.props.onClose},_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.cancelButtonLabel",defaultMessage:"Cancel"})),this.renderConfirmButton()))))}}]);return SavedObjectSaveModal}(_react2.default.Component);exports.SavedObjectSaveModal=SavedObjectSaveModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showSaveModal=showSaveModal;var _react=_interopRequireDefault(__webpack_require__(4));var _reactDom=_interopRequireDefault(__webpack_require__(5));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function isSuccess(result){return"id"in result}function showSaveModal(saveModal,I18nContext){var container=document.createElement("div");var closeModal=function closeModal(){_reactDom.default.unmountComponentAtNode(container);document.body.removeChild(container)};var onSave=saveModal.props.onSave;var onSaveConfirmed=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var response,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return onSave.apply(void 0,_args);case 2:response=_context.sent;if(Boolean(isSuccess(response)?response.id:response.error)){closeModal()}return _context.abrupt("return",response);case 5:case"end":return _context.stop()}}}),_callee)})));return function onSaveConfirmed(){return _ref.apply(this,arguments)}}();document.body.appendChild(container);var element=_react.default.cloneElement(saveModal,{onSave:onSaveConfirmed,onClose:closeModal});_reactDom.default.render(_react.default.createElement(I18nContext,null,element),container)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedObjectMetaData",{enumerable:true,get:function get(){return _saved_object_finder.SavedObjectMetaData}});Object.defineProperty(exports,"SavedObjectFinderUi",{enumerable:true,get:function get(){return _saved_object_finder.SavedObjectFinderUi}});Object.defineProperty(exports,"getSavedObjectFinder",{enumerable:true,get:function get(){return _saved_object_finder.getSavedObjectFinder}});var _saved_object_finder=__webpack_require__(356)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectFinderUi=exports.getSavedObjectFinder=void 0;var _lodash=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(94));var _react=_interopRequireDefault(__webpack_require__(4));var _eui=__webpack_require__(12);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SavedObjectFinderUi=function(_React$Component){_inherits(SavedObjectFinderUi,_React$Component);function SavedObjectFinderUi(props){var _this;_classCallCheck(this,SavedObjectFinderUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(SavedObjectFinderUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"isComponentMounted",false);_defineProperty(_assertThisInitialized(_this),"debouncedFetch",_lodash.default.debounce(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(query){var metaDataMap,fields,perPage,resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:metaDataMap=_this.getSavedObjectMetaDataMap();fields=Object.values(metaDataMap).map((function(metaData){return metaData.includeFields||[]})).reduce((function(allFields,currentFields){return allFields.concat(currentFields)}),["title"]);perPage=_this.props.uiSettings.get("savedObjects:listingLimit");_context.next=5;return _this.props.savedObjects.client.find({type:Object.keys(metaDataMap),fields:_toConsumableArray(new Set(fields)),search:query?"".concat(query,"*"):undefined,page:1,perPage:perPage,searchFields:["title^3","description"],defaultSearchOperator:"AND"});case 5:resp=_context.sent;resp.savedObjects=resp.savedObjects.filter((function(savedObject){var metaData=metaDataMap[savedObject.type];if(metaData.showSavedObject){return metaData.showSavedObject(savedObject)}else{return true}}));if(_this.isComponentMounted){_context.next=9;break}return _context.abrupt("return");case 9:if(query===_this.state.query){_this.setState({isFetchingItems:false,page:0,items:resp.savedObjects.map((function(savedObject){var title=savedObject.attributes.title,id=savedObject.id,type=savedObject.type;return{title:typeof title==="string"?title:"",id:id,type:type,savedObject:savedObject}}))})}case 10:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}(),300));_defineProperty(_assertThisInitialized(_this),"getPageOfItems",(function(){var items=_this.state.items.slice();var sortDirection=_this.state.sortDirection;if(sortDirection||!_this.state.query){items.sort((function(_ref2,_ref3){var titleA=_ref2.title;var titleB=_ref3.title;var order=1;if(sortDirection==="desc"){order=-1}return order*(titleA||"").toLowerCase().localeCompare((titleB||"").toLowerCase())}))}var startIndex=_this.state.page*_this.state.perPage;var lastIndex=startIndex+_this.state.perPage;return items.filter((function(item){return _this.state.filteredTypes.length===0||_this.state.filteredTypes.includes(item.type)})).slice(startIndex,lastIndex)}));_defineProperty(_assertThisInitialized(_this),"fetchItems",(function(){_this.setState({isFetchingItems:true},_this.debouncedFetch.bind(null,_this.state.query))}));_this.state={items:[],isFetchingItems:false,page:0,perPage:props.initialPageSize||props.fixedPageSize||10,query:"",filterOpen:false,filteredTypes:[],sortOpen:false};return _this}_createClass(SavedObjectFinderUi,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.isComponentMounted=false;this.debouncedFetch.cancel()}},{key:"componentDidMount",value:function componentDidMount(){this.isComponentMounted=true;this.fetchItems()}},{key:"render",value:function render(){return _react.default.createElement(_react.default.Fragment,null,this.renderSearchBar(),this.renderListing())}},{key:"getSavedObjectMetaDataMap",value:function getSavedObjectMetaDataMap(){return this.props.savedObjectMetaData.reduce((function(map,metaData){return _objectSpread({},map,_defineProperty({},metaData.type,metaData))}),{})}},{key:"getPageCount",value:function getPageCount(){var _this2=this;return Math.ceil((this.state.filteredTypes.length===0?this.state.items.length:this.state.items.filter((function(item){return _this2.state.filteredTypes.length===0||_this2.state.filteredTypes.includes(item.type)})).length)/this.state.perPage)}},{key:"getAvailableSavedObjectMetaData",value:function getAvailableSavedObjectMetaData(){var typesInItems=new Set;this.state.items.forEach((function(item){typesInItems.add(item.type)}));return this.props.savedObjectMetaData.filter((function(metaData){return typesInItems.has(metaData.type)}))}},{key:"getSortOptions",value:function getSortOptions(){var _this3=this;var sortOptions=[_react.default.createElement(_eui.EuiContextMenuItem,{key:"asc",icon:this.state.sortDirection==="asc"||this.state.query===""&&this.state.sortDirection!=="desc"?"check":"empty",onClick:function onClick(){_this3.setState({sortDirection:"asc"})}},_i18n.i18n.translate("savedObjects.finder.sortAsc",{defaultMessage:"Ascending"})),_react.default.createElement(_eui.EuiContextMenuItem,{key:"desc",icon:this.state.sortDirection==="desc"?"check":"empty",onClick:function onClick(){_this3.setState({sortDirection:"desc"})}},_i18n.i18n.translate("savedObjects.finder.sortDesc",{defaultMessage:"Descending"}))];if(this.state.query){sortOptions.push(_react.default.createElement(_eui.EuiContextMenuItem,{key:"auto",icon:!this.state.sortDirection?"check":"empty",onClick:function onClick(){_this3.setState({sortDirection:undefined})}},_i18n.i18n.translate("savedObjects.finder.sortAuto",{defaultMessage:"Best match"})))}return sortOptions}},{key:"renderSearchBar",value:function renderSearchBar(){var _this4=this;var availableSavedObjectMetaData=this.getAvailableSavedObjectMetaData();return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiFieldSearch,{placeholder:_i18n.i18n.translate("savedObjects.finder.searchPlaceholder",{defaultMessage:"Search"}),"aria-label":_i18n.i18n.translate("savedObjects.finder.searchPlaceholder",{defaultMessage:"Search"}),fullWidth:true,value:this.state.query,onChange:function onChange(e){_this4.setState({query:e.target.value},_this4.fetchItems)},"data-test-subj":"savedObjectFinderSearchInput",isLoading:this.state.isFetchingItems})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFilterGroup,null,_react.default.createElement(_eui.EuiPopover,{id:"addPanelSortPopover",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",isOpen:this.state.sortOpen,closePopover:function closePopover(){return _this4.setState({sortOpen:false})},button:_react.default.createElement(_eui.EuiFilterButton,{onClick:function onClick(){return _this4.setState((function(_ref4){var sortOpen=_ref4.sortOpen;return{sortOpen:!sortOpen}}))},iconType:"arrowDown",isSelected:this.state.sortOpen,"data-test-subj":"savedObjectFinderSortButton"},_i18n.i18n.translate("savedObjects.finder.sortButtonLabel",{defaultMessage:"Sort"}))},_react.default.createElement(_eui.EuiContextMenuPanel,{watchedItemProps:["icon","disabled"],items:this.getSortOptions()})),this.props.showFilter&&_react.default.createElement(_eui.EuiPopover,{id:"addPanelFilterPopover",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",isOpen:this.state.filterOpen,closePopover:function closePopover(){return _this4.setState({filterOpen:false})},button:_react.default.createElement(_eui.EuiFilterButton,{onClick:function onClick(){return _this4.setState((function(_ref5){var filterOpen=_ref5.filterOpen;return{filterOpen:!filterOpen}}))},iconType:"arrowDown","data-test-subj":"savedObjectFinderFilterButton",isSelected:this.state.filterOpen,numFilters:this.props.savedObjectMetaData.length,hasActiveFilters:this.state.filteredTypes.length>0,numActiveFilters:this.state.filteredTypes.length},_i18n.i18n.translate("savedObjects.finder.filterButtonLabel",{defaultMessage:"Types"}))},_react.default.createElement(_eui.EuiContextMenuPanel,{watchedItemProps:["icon","disabled"],items:this.props.savedObjectMetaData.map((function(metaData){return _react.default.createElement(_eui.EuiContextMenuItem,{key:metaData.type,disabled:!availableSavedObjectMetaData.includes(metaData),icon:_this4.state.filteredTypes.includes(metaData.type)?"check":"empty","data-test-subj":"savedObjectFinderFilter-".concat(metaData.type),onClick:function onClick(){_this4.setState((function(_ref6){var filteredTypes=_ref6.filteredTypes;return{filteredTypes:filteredTypes.includes(metaData.type)?filteredTypes.filter((function(t){return t!==metaData.type})):[].concat(_toConsumableArray(filteredTypes),[metaData.type]),page:0}}))}},metaData.name)}))})))),this.props.children?_react.default.createElement(_eui.EuiFlexItem,{grow:false},this.props.children):null)}},{key:"renderListing",value:function renderListing(){var _this5=this;var items=this.state.items.length===0?[]:this.getPageOfItems();var _this$props=this.props,onChoose=_this$props.onChoose,savedObjectMetaData=_this$props.savedObjectMetaData;return _react.default.createElement(_react.default.Fragment,null,this.state.isFetchingItems&&this.state.items.length===0&&_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiLoadingSpinner,{"data-test-subj":"savedObjectFinderLoadingIndicator"}))),items.length>0?_react.default.createElement(_eui.EuiListGroup,{"data-test-subj":"savedObjectFinderItemList",maxWidth:false},items.map((function(item){var currentSavedObjectMetaData=savedObjectMetaData.find((function(metaData){return metaData.type===item.type}));var fullName=currentSavedObjectMetaData.getTooltipForSavedObject?currentSavedObjectMetaData.getTooltipForSavedObject(item.savedObject):"".concat(item.title," (").concat(currentSavedObjectMetaData.name,")");var iconType=(currentSavedObjectMetaData||{getIconForSavedObject:function getIconForSavedObject(){return"document"}}).getIconForSavedObject(item.savedObject);return _react.default.createElement(_eui.EuiListGroupItem,{key:item.id,iconType:iconType,label:item.title,onClick:onChoose?function(){onChoose(item.id,item.type,fullName,item.savedObject)}:undefined,title:fullName,"data-test-subj":"savedObjectTitle".concat((item.title||"").split(" ").join("-"))})}))):!this.state.isFetchingItems&&_react.default.createElement(_eui.EuiEmptyPrompt,{body:this.props.noItemsMessage}),this.getPageCount()>1&&(this.props.fixedPageSize?_react.default.createElement(_eui.EuiPagination,{activePage:this.state.page,pageCount:this.getPageCount(),onPageClick:function onPageClick(page){_this5.setState({page:page})}}):_react.default.createElement(_eui.EuiTablePagination,{activePage:this.state.page,pageCount:this.getPageCount(),onChangePage:function onChangePage(page){_this5.setState({page:page})},onChangeItemsPerPage:function onChangeItemsPerPage(perPage){_this5.setState({perPage:perPage})},itemsPerPage:this.state.perPage,itemsPerPageOptions:[5,10,15,25]})))}}]);return SavedObjectFinderUi}(_react.default.Component);exports.SavedObjectFinderUi=SavedObjectFinderUi;_defineProperty(SavedObjectFinderUi,"propTypes",{onChoose:_propTypes.default.func,noItemsMessage:_propTypes.default.node,savedObjectMetaData:_propTypes.default.array.isRequired,initialPageSize:_propTypes.default.oneOf([5,10,15,25]),fixedPageSize:_propTypes.default.number,showFilter:_propTypes.default.bool});var getSavedObjectFinder=function getSavedObjectFinder(savedObject,uiSettings){return function(props){return _react.default.createElement(SavedObjectFinderUi,_extends({},props,{savedObjects:savedObject,uiSettings:uiSettings}))}};exports.getSavedObjectFinder=getSavedObjectFinder},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"createSavedObjectClass",{enumerable:true,get:function get(){return _saved_object.createSavedObjectClass}});Object.defineProperty(exports,"SavedObjectLoader",{enumerable:true,get:function get(){return _saved_object_loader.SavedObjectLoader}});Object.defineProperty(exports,"checkForDuplicateTitle",{enumerable:true,get:function get(){return _check_for_duplicate_title.checkForDuplicateTitle}});Object.defineProperty(exports,"saveWithConfirmation",{enumerable:true,get:function get(){return _save_with_confirmation.saveWithConfirmation}});Object.defineProperty(exports,"isErrorNonFatal",{enumerable:true,get:function get(){return _save_saved_object.isErrorNonFatal}});var _saved_object=__webpack_require__(358);var _saved_object_loader=__webpack_require__(691);var _check_for_duplicate_title=__webpack_require__(298);var _save_with_confirmation=__webpack_require__(693);var _save_saved_object=__webpack_require__(297)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSavedObjectClass=createSavedObjectClass;var _build_saved_object=__webpack_require__(359);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function createSavedObjectClass(services){var SavedObjectClass=function SavedObjectClass(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,SavedObjectClass);var self=this;(0,_build_saved_object.buildSavedObject)(self,config,services)};return SavedObjectClass}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildSavedObject=buildSavedObject;var _lodash=_interopRequireDefault(__webpack_require__(0));var _public=__webpack_require__(107);var _hydrate_index_pattern=__webpack_require__(683);var _initialize_saved_object=__webpack_require__(684);var _serialize_saved_object=__webpack_require__(685);var _apply_es_resp=__webpack_require__(686);var _save_saved_object=__webpack_require__(297);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function buildSavedObject(savedObject){var config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var services=arguments.length>2?arguments[2]:undefined;var indexPatterns=services.indexPatterns,savedObjectsClient=services.savedObjectsClient;var esType=config.type||"";savedObject.getDisplayName=function(){return esType};savedObject.getEsType=function(){return esType};savedObject.isSaving=false;savedObject.defaults=config.defaults||{};savedObject.searchSource=config.searchSource?new _public.SearchSource:undefined;savedObject.id=config.id||void 0;savedObject.migrationVersion=config.migrationVersion;savedObject.copyOnSave=false;savedObject.hydrateIndexPattern=function(id){return(0,_hydrate_index_pattern.hydrateIndexPattern)(id||"",savedObject,indexPatterns,config)};savedObject.init=_lodash.default.once((function(){return(0,_initialize_saved_object.intializeSavedObject)(savedObject,savedObjectsClient,config)}));savedObject.applyESResp=function(resp){return(0,_apply_es_resp.applyESResp)(resp,savedObject,config)};savedObject._serialize=function(){return(0,_serialize_saved_object.serializeSavedObject)(savedObject,config)};savedObject.isTitleChanged=function(){return savedObject._source&&savedObject._source.title!==savedObject.title};savedObject.creationOpts=function(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return _objectSpread({id:savedObject.id,migrationVersion:savedObject.migrationVersion},opts)};savedObject.save=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(opts){var result;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return(0,_save_saved_object.saveSavedObject)(savedObject,config,opts,services);case 3:result=_context.sent;return _context.abrupt("return",Promise.resolve(result));case 7:_context.prev=7;_context.t0=_context["catch"](0);return _context.abrupt("return",Promise.reject(_context.t0));case 10:case"end":return _context.stop()}}}),_callee,null,[[0,7]])})));return function(_x){return _ref.apply(this,arguments)}}();savedObject.destroy=function(){};savedObject.delete=function(){if(!savedObject.id){return Promise.reject(new Error("Deleting a saved Object requires type and id"))}return savedObjectsClient.delete(esType,savedObject.id)}}},function(module,exports,__webpack_require__){if(window.__kbnDarkMode__){__webpack_require__(361)}else{__webpack_require__(363)}},function(module,exports,__webpack_require__){var api=__webpack_require__(108);var content=__webpack_require__(362);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(109);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".globalQueryBar {\n  padding: 0px 8px 8px 8px; }\n\n.globalQueryBar:not(:empty) {\n  padding-bottom: 8px; }\n\n.globalFilterGroup__filterBar {\n  margin-top: 4px; }\n\n.globalFilterBar__addButton {\n  min-height: 28px; }\n\n.globalFilterGroup__branch {\n  padding: 8px 12px 0 0;\n  background-repeat: no-repeat;\n  background-position: 12px -8px;\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='28px' height='28px' viewBox='0 0 28 28' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='rgb%2852, 55, 65%29'%3E%3Crect x='14' y='27' width='14' height='1'%3E%3C/rect%3E%3C/g%3E%3C/svg%3E\"); }\n\n.globalFilterGroup__wrapper {\n  line-height: 1;\n  overflow: hidden;\n  -webkit-transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.globalFilterGroup__filterFlexItem {\n  overflow: hidden;\n  padding-bottom: 2px; }\n\n.globalFilterBar__flexItem {\n  max-width: calc(100% - 4px); }\n\n@media only screen and (max-width: 574px) {\n  .globalFilterGroup__wrapper-isVisible {\n    margin-top: -16px; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .globalFilterGroup__wrapper-isVisible {\n    margin-top: -16px; } }\n\n/**\n * 1.  Allow wrapping of long filter items\n */\n.globalFilterItem {\n  line-height: 16px;\n  border: none;\n  color: #DFE5EF;\n  padding-top: 6px;\n  padding-bottom: 6px;\n  white-space: normal;\n  /* 1 */ }\n  .globalFilterItem .euiBadge__childButton {\n    -webkit-flex-shrink: 1;\n        -ms-flex-negative: 1;\n            flex-shrink: 1;\n    /* 1 */ }\n  .globalFilterItem:not(.globalFilterItem-isDisabled) {\n    background-color: #16171c;\n    background-repeat: no-repeat;\n    background-size: 0% 100%;\n    -webkit-box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px rgba(255, 255, 255, 0.1);\n            box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px rgba(255, 255, 255, 0.1);\n    -webkit-transition: background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    transition: background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    transition: box-shadow 150ms ease-in, background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in;\n    transition: box-shadow 150ms ease-in, background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    -webkit-box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px #424752;\n            box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px #424752; }\n    @supports (-moz-appearance: none) {\n      .globalFilterItem:not(.globalFilterItem-isDisabled) {\n        -webkit-transition-property: background-image, background-size, -webkit-box-shadow;\n        transition-property: background-image, background-size, -webkit-box-shadow;\n        transition-property: box-shadow, background-image, background-size;\n        transition-property: box-shadow, background-image, background-size, -webkit-box-shadow; } }\n  .globalFilterItem:focus-within {\n    -webkit-animation: none !important;\n            animation: none !important; }\n\n.globalFilterItem-isDisabled {\n  color: #98A2B3;\n  background-color: rgba(52, 55, 65, 0.5);\n  text-decoration: line-through;\n  font-weight: 400;\n  font-style: italic; }\n\n.globalFilterItem-isInvalid {\n  text-decoration: none; }\n  .globalFilterItem-isInvalid .globalFilterLabel__value {\n    color: #F66;\n    font-weight: 700; }\n\n.globalFilterItem-isPinned {\n  position: relative; }\n  .globalFilterItem-isPinned::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    width: 4px;\n    background-color: #424752;\n    border-top-left-radius: 2px;\n    border-bottom-left-radius: 2px; }\n\n.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled) {\n  -webkit-box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px #803333;\n          box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px #803333; }\n  .globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled)::before {\n    background-color: #cc5252; }\n\n.globalFilterItem__editorForm {\n  padding: 12px; }\n\n.globalFilterItem__popover,\n.globalFilterItem__popoverAnchor {\n  display: block; }\n\n.globalFilterEditor__fieldInput {\n  max-width: 208px; }\n\n.kbnTypeahead {\n  position: relative; }\n  .kbnTypeahead .kbnTypeahead__popover {\n    -webkit-box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1), 0 6px 12px 0 rgba(0, 0, 0, 0.1), 0 4px 4px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.1);\n            box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1), 0 6px 12px 0 rgba(0, 0, 0, 0.1), 0 4px 4px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.1);\n    border: 1px solid;\n    border-color: #343741;\n    color: #DFE5EF;\n    background-color: #1D1E24;\n    position: absolute;\n    top: -1px;\n    z-index: 2000;\n    width: 100%;\n    border-bottom-left-radius: 4px;\n    border-bottom-right-radius: 4px; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items {\n      scrollbar-width: thin;\n      max-height: 60vh;\n      overflow-y: auto; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-thumb {\n        background-color: rgba(152, 162, 179, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-corner, .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-track {\n        background-color: transparent; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item {\n      height: 32px;\n      white-space: nowrap;\n      font-size: 12px;\n      vertical-align: middle;\n      padding: 0;\n      border-bottom: none;\n      line-height: normal; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:hover {\n      cursor: pointer; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:last-child {\n      border-bottom: none;\n      border-radius: 0 0 4px 4px; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:first-child {\n      border-bottom: none;\n      border-radius: 4px 4px 0 0; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active {\n      background-color: #25262E; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__callout {\n        background: #1D1E24; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__text {\n        color: #FFF; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__type {\n        color: #FFF; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--field .kbnSuggestionItem__type {\n        background-color: #665231; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--value .kbnSuggestionItem__type {\n        background-color: #325a54; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--operator .kbnSuggestionItem__type {\n        background-color: #0b4462; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--conjunction .kbnSuggestionItem__type {\n        background-color: #3a2d4a; }\n\n.kbnSuggestionItem {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  font-size: 12px;\n  white-space: nowrap; }\n  .kbnSuggestionItem.kbnSuggestionItem--field .kbnSuggestionItem__type {\n    background-color: #80673d;\n    color: #ffeaca; }\n  .kbnSuggestionItem.kbnSuggestionItem--value .kbnSuggestionItem__type {\n    background-color: #3f7169;\n    color: #c6f2ea; }\n  .kbnSuggestionItem.kbnSuggestionItem--operator .kbnSuggestionItem__type {\n    background-color: #0e557b;\n    color: #8ad3f6; }\n  .kbnSuggestionItem.kbnSuggestionItem--conjunction .kbnSuggestionItem__type {\n    background-color: #49385c;\n    color: #c0aed6; }\n  .kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__type {\n    background-color: #343741;\n    color: #535966; }\n  .kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__text {\n    width: auto; }\n\n.kbnSuggestionItem__text,\n.kbnSuggestionItem__type,\n.kbnSuggestionItem__description {\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  -webkit-flex-basis: 0%;\n      -ms-flex-preferred-size: 0%;\n          flex-basis: 0%;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column; }\n\n.kbnSuggestionItem__type {\n  -webkit-box-flex: 0;\n  -webkit-flex-grow: 0;\n      -ms-flex-positive: 0;\n          flex-grow: 0;\n  -webkit-flex-shrink: 0;\n      -ms-flex-negative: 0;\n          flex-shrink: 0;\n  -webkit-flex-basis: auto;\n      -ms-flex-preferred-size: auto;\n          flex-basis: auto;\n  width: 32px;\n  height: 32px;\n  text-align: center;\n  overflow: hidden;\n  padding: 4px;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.kbnSuggestionItem__text {\n  -webkit-box-flex: 0;\n  -webkit-flex-grow: 0;\n      -ms-flex-positive: 0;\n          flex-grow: 0;\n  /* 2 */\n  -webkit-flex-basis: auto;\n      -ms-flex-preferred-size: auto;\n          flex-basis: auto;\n  /* 2 */\n  font-family: \"Roboto Mono\", Consolas, Menlo, Courier, monospace;\n  width: 250px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding: 4px 8px;\n  color: #DFE5EF; }\n\n.kbnSuggestionItem__description {\n  color: #98A2B3;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-left: 32px; }\n  .kbnSuggestionItem__description:empty {\n    -webkit-box-flex: 0;\n    -webkit-flex-grow: 0;\n        -ms-flex-positive: 0;\n            flex-grow: 0;\n    margin-left: 0; }\n\n.kbnSuggestionItem__callout {\n  font-family: \"Roboto Mono\", Consolas, Menlo, Courier, monospace;\n  background: #25262E;\n  color: #FFF;\n  padding: 0 4px;\n  display: inline-block; }\n\n.kbnSuggestionItem--value .kbnSuggestionItem__text {\n  -webkit-flex-basis: 50%;\n      -ms-flex-preferred-size: 50%;\n          flex-basis: 50%;\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1; }\n\n.kbnSavedQueryManagement__popover {\n  max-width: 400px; }\n\n.kbnSavedQueryManagement__listWrapper {\n  max-height: 416px;\n  overflow-y: hidden; }\n\n.kbnSavedQueryManagement__pagination {\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  padding: 6px 12px 12px; }\n\n.kbnSavedQueryManagement__text {\n  padding: 12px 12px 6px 12px; }\n\n.kbnSavedQueryManagement__list {\n  scrollbar-width: thin;\n  -webkit-mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n          mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n  height: 100%;\n  overflow-y: auto;\n  max-height: inherit;\n  padding: 6px 4px !important; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar-corner, .kbnSavedQueryManagement__list::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.kbnSavedQueryListItem {\n  margin-top: 0;\n  color: #1BA9F5; }\n\n.kbnSavedQueryListItem-selected button {\n  font-weight: 700; }\n\n.kbnSavedQueryListItem__label {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.kbnSavedQueryListItem__labelText {\n  max-width: 100%;\n  overflow: hidden !important;\n  text-overflow: ellipsis !important;\n  white-space: nowrap !important;\n  word-wrap: normal !important;\n  margin-right: 4px; }\n\n@media only screen and (max-width: 574px) {\n  .kbnQueryBar--withDatePicker > :first-child {\n    -webkit-box-ordinal-group: 2;\n    -webkit-order: 1;\n        -ms-flex-order: 1;\n            order: 1;\n    margin-top: -8px; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .kbnQueryBar--withDatePicker > :first-child {\n    -webkit-box-ordinal-group: 2;\n    -webkit-order: 1;\n        -ms-flex-order: 1;\n            order: 1;\n    margin-top: -8px; } }\n\n@media only screen and (min-width: 768px) and (max-width: 991px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n@media only screen and (min-width: 992px) and (max-width: 1199px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n@media only screen and (min-width: 1200px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n.shardFailureModal {\n  min-height: 75vh;\n  width: 768px; }\n\n.shardFailureModal__desc {\n  max-width: 686px; }\n\n.shardFailureModal__descTitle {\n  width: 20% !important;\n  margin-top: 8px; }\n\n.shardFailureModal__descValue {\n  width: 80% !important;\n  margin-top: 8px; }\n\n.shardFailureModal__keyValueTitle {\n  padding-right: 8px; }\n\n@media only screen and (max-width: 574px) {\n  .shardFailureModal__keyValueTitle {\n    display: block;\n    width: 100%; }\n  .shardFailureModal__descTitle {\n    display: block;\n    width: 100% !important; }\n  .shardFailureModal__descValue {\n    display: block;\n    width: 100% !important; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .shardFailureModal__keyValueTitle {\n    display: block;\n    width: 100%; }\n  .shardFailureModal__descTitle {\n    display: block;\n    width: 100% !important; }\n  .shardFailureModal__descValue {\n    display: block;\n    width: 100% !important; } }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(108);var content=__webpack_require__(364);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(109);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".globalQueryBar {\n  padding: 0px 8px 8px 8px; }\n\n.globalQueryBar:not(:empty) {\n  padding-bottom: 8px; }\n\n.globalFilterGroup__filterBar {\n  margin-top: 4px; }\n\n.globalFilterBar__addButton {\n  min-height: 28px; }\n\n.globalFilterGroup__branch {\n  padding: 8px 12px 0 0;\n  background-repeat: no-repeat;\n  background-position: 12px -8px;\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='28px' height='28px' viewBox='0 0 28 28' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='rgb%28211, 218, 230%29'%3E%3Crect x='14' y='27' width='14' height='1'%3E%3C/rect%3E%3C/g%3E%3C/svg%3E\"); }\n\n.globalFilterGroup__wrapper {\n  line-height: 1;\n  overflow: hidden;\n  -webkit-transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.globalFilterGroup__filterFlexItem {\n  overflow: hidden;\n  padding-bottom: 2px; }\n\n.globalFilterBar__flexItem {\n  max-width: calc(100% - 4px); }\n\n@media only screen and (max-width: 574px) {\n  .globalFilterGroup__wrapper-isVisible {\n    margin-top: -16px; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .globalFilterGroup__wrapper-isVisible {\n    margin-top: -16px; } }\n\n/**\n * 1.  Allow wrapping of long filter items\n */\n.globalFilterItem {\n  line-height: 16px;\n  border: none;\n  color: #343741;\n  padding-top: 6px;\n  padding-bottom: 6px;\n  white-space: normal;\n  /* 1 */ }\n  .globalFilterItem .euiBadge__childButton {\n    -webkit-flex-shrink: 1;\n        -ms-flex-negative: 1;\n            flex-shrink: 1;\n    /* 1 */ }\n  .globalFilterItem:not(.globalFilterItem-isDisabled) {\n    background-color: #fbfcfd;\n    background-repeat: no-repeat;\n    background-size: 0% 100%;\n    -webkit-box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px rgba(15, 39, 118, 0.1);\n            box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px rgba(15, 39, 118, 0.1);\n    -webkit-transition: background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    transition: background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    transition: box-shadow 150ms ease-in, background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in;\n    transition: box-shadow 150ms ease-in, background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    -webkit-box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px #bcc3ce;\n            box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px #bcc3ce; }\n    @supports (-moz-appearance: none) {\n      .globalFilterItem:not(.globalFilterItem-isDisabled) {\n        -webkit-transition-property: background-image, background-size, -webkit-box-shadow;\n        transition-property: background-image, background-size, -webkit-box-shadow;\n        transition-property: box-shadow, background-image, background-size;\n        transition-property: box-shadow, background-image, background-size, -webkit-box-shadow; } }\n  .globalFilterItem:focus-within {\n    -webkit-animation: none !important;\n            animation: none !important; }\n\n.globalFilterItem-isDisabled {\n  color: #69707D;\n  background-color: rgba(211, 218, 230, 0.5);\n  text-decoration: line-through;\n  font-weight: 400;\n  font-style: italic; }\n\n.globalFilterItem-isInvalid {\n  text-decoration: none; }\n  .globalFilterItem-isInvalid .globalFilterLabel__value {\n    color: #BD271E;\n    font-weight: 700; }\n\n.globalFilterItem-isPinned {\n  position: relative; }\n  .globalFilterItem-isPinned::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    width: 4px;\n    background-color: #bcc3ce;\n    border-top-left-radius: 2px;\n    border-bottom-left-radius: 2px; }\n\n.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled) {\n  -webkit-box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px #ebbebc;\n          box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px #ebbebc; }\n  .globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled)::before {\n    background-color: #d16862; }\n\n.globalFilterItem__editorForm {\n  padding: 12px; }\n\n.globalFilterItem__popover,\n.globalFilterItem__popoverAnchor {\n  display: block; }\n\n.globalFilterEditor__fieldInput {\n  max-width: 208px; }\n\n.kbnTypeahead {\n  position: relative; }\n  .kbnTypeahead .kbnTypeahead__popover {\n    -webkit-box-shadow: 0 12px 24px 0 rgba(65, 78, 101, 0.1), 0 6px 12px 0 rgba(65, 78, 101, 0.1), 0 4px 4px 0 rgba(65, 78, 101, 0.1), 0 2px 2px 0 rgba(65, 78, 101, 0.1);\n            box-shadow: 0 12px 24px 0 rgba(65, 78, 101, 0.1), 0 6px 12px 0 rgba(65, 78, 101, 0.1), 0 4px 4px 0 rgba(65, 78, 101, 0.1), 0 2px 2px 0 rgba(65, 78, 101, 0.1);\n    border-color: #d0d3d9;\n    border-top-color: #d9dce0;\n    border-bottom-color: #aaafba;\n    border: 1px solid;\n    border-color: #D3DAE6;\n    color: #343741;\n    background-color: #FFF;\n    position: absolute;\n    top: -1px;\n    z-index: 2000;\n    width: 100%;\n    border-bottom-left-radius: 4px;\n    border-bottom-right-radius: 4px; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items {\n      scrollbar-width: thin;\n      max-height: 60vh;\n      overflow-y: auto; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-thumb {\n        background-color: rgba(105, 112, 125, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-corner, .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-track {\n        background-color: transparent; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item {\n      height: 32px;\n      white-space: nowrap;\n      font-size: 12px;\n      vertical-align: middle;\n      padding: 0;\n      border-bottom: none;\n      line-height: normal; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:hover {\n      cursor: pointer; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:last-child {\n      border-bottom: none;\n      border-radius: 0 0 4px 4px; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:first-child {\n      border-bottom: none;\n      border-radius: 4px 4px 0 0; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active {\n      background-color: #F5F7FA; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__callout {\n        background: #FFF; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__text {\n        color: #000; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__type {\n        color: #000; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--field .kbnSuggestionItem__type {\n        background-color: #fdedcc; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--value .kbnSuggestionItem__type {\n        background-color: #cce5e3; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--operator .kbnSuggestionItem__type {\n        background-color: #cce1f0; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--conjunction .kbnSuggestionItem__type {\n        background-color: #e9e2f1; }\n\n.kbnSuggestionItem {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  font-size: 12px;\n  white-space: nowrap; }\n  .kbnSuggestionItem.kbnSuggestionItem--field .kbnSuggestionItem__type {\n    background-color: #fef6e6;\n    color: #936400; }\n  .kbnSuggestionItem.kbnSuggestionItem--value .kbnSuggestionItem__type {\n    background-color: #e6f2f1;\n    color: #01776d; }\n  .kbnSuggestionItem.kbnSuggestionItem--operator .kbnSuggestionItem__type {\n    background-color: #e6f0f8;\n    color: #006BB4; }\n  .kbnSuggestionItem.kbnSuggestionItem--conjunction .kbnSuggestionItem__type {\n    background-color: #f4f1f8;\n    color: #7c609e; }\n  .kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__type {\n    background-color: #D3DAE6;\n    color: #98A2B3; }\n  .kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__text {\n    width: auto; }\n\n.kbnSuggestionItem__text,\n.kbnSuggestionItem__type,\n.kbnSuggestionItem__description {\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  -webkit-flex-basis: 0%;\n      -ms-flex-preferred-size: 0%;\n          flex-basis: 0%;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column; }\n\n.kbnSuggestionItem__type {\n  -webkit-box-flex: 0;\n  -webkit-flex-grow: 0;\n      -ms-flex-positive: 0;\n          flex-grow: 0;\n  -webkit-flex-shrink: 0;\n      -ms-flex-negative: 0;\n          flex-shrink: 0;\n  -webkit-flex-basis: auto;\n      -ms-flex-preferred-size: auto;\n          flex-basis: auto;\n  width: 32px;\n  height: 32px;\n  text-align: center;\n  overflow: hidden;\n  padding: 4px;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.kbnSuggestionItem__text {\n  -webkit-box-flex: 0;\n  -webkit-flex-grow: 0;\n      -ms-flex-positive: 0;\n          flex-grow: 0;\n  /* 2 */\n  -webkit-flex-basis: auto;\n      -ms-flex-preferred-size: auto;\n          flex-basis: auto;\n  /* 2 */\n  font-family: \"Roboto Mono\", Consolas, Menlo, Courier, monospace;\n  width: 250px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding: 4px 8px;\n  color: #343741; }\n\n.kbnSuggestionItem__description {\n  color: #69707D;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-left: 32px; }\n  .kbnSuggestionItem__description:empty {\n    -webkit-box-flex: 0;\n    -webkit-flex-grow: 0;\n        -ms-flex-positive: 0;\n            flex-grow: 0;\n    margin-left: 0; }\n\n.kbnSuggestionItem__callout {\n  font-family: \"Roboto Mono\", Consolas, Menlo, Courier, monospace;\n  background: #F5F7FA;\n  color: #000;\n  padding: 0 4px;\n  display: inline-block; }\n\n.kbnSuggestionItem--value .kbnSuggestionItem__text {\n  -webkit-flex-basis: 50%;\n      -ms-flex-preferred-size: 50%;\n          flex-basis: 50%;\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1; }\n\n.kbnSavedQueryManagement__popover {\n  max-width: 400px; }\n\n.kbnSavedQueryManagement__listWrapper {\n  max-height: 416px;\n  overflow-y: hidden; }\n\n.kbnSavedQueryManagement__pagination {\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  padding: 6px 12px 12px; }\n\n.kbnSavedQueryManagement__text {\n  padding: 12px 12px 6px 12px; }\n\n.kbnSavedQueryManagement__list {\n  scrollbar-width: thin;\n  -webkit-mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n          mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n  height: 100%;\n  overflow-y: auto;\n  max-height: inherit;\n  padding: 6px 4px !important; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar-corner, .kbnSavedQueryManagement__list::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.kbnSavedQueryListItem {\n  margin-top: 0;\n  color: #006BB4; }\n\n.kbnSavedQueryListItem-selected button {\n  font-weight: 700; }\n\n.kbnSavedQueryListItem__label {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.kbnSavedQueryListItem__labelText {\n  max-width: 100%;\n  overflow: hidden !important;\n  text-overflow: ellipsis !important;\n  white-space: nowrap !important;\n  word-wrap: normal !important;\n  margin-right: 4px; }\n\n@media only screen and (max-width: 574px) {\n  .kbnQueryBar--withDatePicker > :first-child {\n    -webkit-box-ordinal-group: 2;\n    -webkit-order: 1;\n        -ms-flex-order: 1;\n            order: 1;\n    margin-top: -8px; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .kbnQueryBar--withDatePicker > :first-child {\n    -webkit-box-ordinal-group: 2;\n    -webkit-order: 1;\n        -ms-flex-order: 1;\n            order: 1;\n    margin-top: -8px; } }\n\n@media only screen and (min-width: 768px) and (max-width: 991px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n@media only screen and (min-width: 992px) and (max-width: 1199px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n@media only screen and (min-width: 1200px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n.shardFailureModal {\n  min-height: 75vh;\n  width: 768px; }\n\n.shardFailureModal__desc {\n  max-width: 686px; }\n\n.shardFailureModal__descTitle {\n  width: 20% !important;\n  margin-top: 8px; }\n\n.shardFailureModal__descValue {\n  width: 80% !important;\n  margin-top: 8px; }\n\n.shardFailureModal__keyValueTitle {\n  padding-right: 8px; }\n\n@media only screen and (max-width: 574px) {\n  .shardFailureModal__keyValueTitle {\n    display: block;\n    width: 100%; }\n  .shardFailureModal__descTitle {\n    display: block;\n    width: 100% !important; }\n  .shardFailureModal__descValue {\n    display: block;\n    width: 100% !important; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .shardFailureModal__keyValueTitle {\n    display: block;\n    width: 100%; }\n  .shardFailureModal__descTitle {\n    display: block;\n    width: 100% !important; }\n  .shardFailureModal__descValue {\n    display: block;\n    width: 100% !important; } }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_QUERY_LANGUAGE=void 0;var DEFAULT_QUERY_LANGUAGE="kuery";exports.DEFAULT_QUERY_LANGUAGE=DEFAULT_QUERY_LANGUAGE},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _es_query=__webpack_require__(367);Object.keys(_es_query).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _es_query[key]}})}));var _filters=__webpack_require__(104);Object.keys(_filters).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filters[key]}})}));var _kuery=__webpack_require__(203);Object.keys(_kuery).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _kuery[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"buildEsQuery",{enumerable:true,get:function get(){return _build_es_query.buildEsQuery}});Object.defineProperty(exports,"EsQueryConfig",{enumerable:true,get:function get(){return _build_es_query.EsQueryConfig}});Object.defineProperty(exports,"buildQueryFromFilters",{enumerable:true,get:function get(){return _from_filters.buildQueryFromFilters}});Object.defineProperty(exports,"luceneStringToDsl",{enumerable:true,get:function get(){return _lucene_string_to_dsl.luceneStringToDsl}});Object.defineProperty(exports,"decorateQuery",{enumerable:true,get:function get(){return _decorate_query.decorateQuery}});Object.defineProperty(exports,"getEsQueryConfig",{enumerable:true,get:function get(){return _get_es_query_config.getEsQueryConfig}});var _build_es_query=__webpack_require__(368);var _from_filters=__webpack_require__(214);var _lucene_string_to_dsl=__webpack_require__(216);var _decorate_query=__webpack_require__(215);var _get_es_query_config=__webpack_require__(399)},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});exports.buildEsQuery=buildEsQuery;var _lodash=__webpack_require__(0);var _from_kuery=__webpack_require__(369);var _from_filters=__webpack_require__(214);var _from_lucene=__webpack_require__(397);function buildEsQuery(indexPattern,queries,filters){var config=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{allowLeadingWildcards:false,queryStringOptions:{},ignoreFilterIfFieldNotInIndex:false};queries=Array.isArray(queries)?queries:[queries];filters=Array.isArray(filters)?filters:[filters];var validQueries=queries.filter((function(query){return(0,_lodash.has)(query,"query")}));var queriesByLanguage=(0,_lodash.groupBy)(validQueries,"language");var kueryQuery=(0,_from_kuery.buildQueryFromKuery)(indexPattern,queriesByLanguage.kuery,config.allowLeadingWildcards,config.dateFormatTZ);var luceneQuery=(0,_from_lucene.buildQueryFromLucene)(queriesByLanguage.lucene,config.queryStringOptions,config.dateFormatTZ);var filterQuery=(0,_from_filters.buildQueryFromFilters)(filters,indexPattern,config.ignoreFilterIfFieldNotInIndex);return{bool:{must:[].concat(_toConsumableArray(kueryQuery.must),_toConsumableArray(luceneQuery.must),_toConsumableArray(filterQuery.must)),filter:[].concat(_toConsumableArray(kueryQuery.filter),_toConsumableArray(luceneQuery.filter),_toConsumableArray(filterQuery.filter)),should:[].concat(_toConsumableArray(kueryQuery.should),_toConsumableArray(luceneQuery.should),_toConsumableArray(filterQuery.should)),must_not:[].concat(_toConsumableArray(kueryQuery.must_not),_toConsumableArray(luceneQuery.must_not),_toConsumableArray(filterQuery.must_not))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildQueryFromKuery=buildQueryFromKuery;var _kuery=__webpack_require__(203);function buildQueryFromKuery(indexPattern){var queries=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var allowLeadingWildcards=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var dateFormatTZ=arguments.length>3?arguments[3]:undefined;var queryASTs=queries.map((function(query){return(0,_kuery.fromKueryExpression)(query.query,{allowLeadingWildcards:allowLeadingWildcards})}));return buildQuery(indexPattern,queryASTs,{dateFormatTZ:dateFormatTZ})}function buildQuery(indexPattern,queryASTs){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var compoundQueryAST=_kuery.nodeTypes.function.buildNode("and",queryASTs);var kueryQuery=(0,_kuery.toElasticsearchQuery)(compoundQueryAST,indexPattern,config);return Object.assign({must:[],filter:[],should:[],must_not:[]},kueryQuery.bool)}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNode=buildNode;exports.buildNodeWithArgumentNodes=buildNodeWithArgumentNodes;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=_interopRequireDefault(__webpack_require__(0));var _functions=__webpack_require__(371);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function buildNode(functionName){var kueryFunction=_functions.functions[functionName];if(_lodash.default.isUndefined(kueryFunction)){throw new Error('Unknown function "'.concat(functionName,'"'))}for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}return _objectSpread({type:"function",function:functionName},kueryFunction.buildNodeParams.apply(kueryFunction,args))}function buildNodeWithArgumentNodes(functionName,args){if(_lodash.default.isUndefined(_functions.functions[functionName])){throw new Error('Unknown function "'.concat(functionName,'"'))}return{type:"function",function:functionName,arguments:args}}function toElasticsearchQuery(node,indexPattern,config,context){var kueryFunction=_functions.functions[node.function];return kueryFunction.toElasticsearchQuery(node,indexPattern,config,context)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.functions=void 0;var is=_interopRequireWildcard(__webpack_require__(372));var and=_interopRequireWildcard(__webpack_require__(383));var or=_interopRequireWildcard(__webpack_require__(384));var not=_interopRequireWildcard(__webpack_require__(385));var range=_interopRequireWildcard(__webpack_require__(386));var exists=_interopRequireWildcard(__webpack_require__(387));var geoBoundingBox=_interopRequireWildcard(__webpack_require__(388));var geoPolygon=_interopRequireWildcard(__webpack_require__(389));var nested=_interopRequireWildcard(__webpack_require__(390));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var functions={is:is,and:and,or:or,not:not,range:range,exists:exists,geoBoundingBox:geoBoundingBox,geoPolygon:geoPolygon,nested:nested};exports.functions=functions},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=__webpack_require__(0);var _filters=__webpack_require__(104);var _get_fields=__webpack_require__(160);var _utils=__webpack_require__(162);var _get_full_field_name_node=__webpack_require__(213);var ast=_interopRequireWildcard(__webpack_require__(106));var literal=_interopRequireWildcard(__webpack_require__(124));var wildcard=_interopRequireWildcard(__webpack_require__(161));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(fieldName,value){var isPhrase=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if((0,_lodash.isUndefined)(fieldName)){throw new Error("fieldName is a required argument")}if((0,_lodash.isUndefined)(value)){throw new Error("value is a required argument")}var fieldNode=typeof fieldName==="string"?ast.fromLiteralExpression(fieldName):literal.buildNode(fieldName);var valueNode=typeof value==="string"?ast.fromLiteralExpression(value):literal.buildNode(value);var isPhraseNode=literal.buildNode(isPhrase);return{arguments:[fieldNode,valueNode,isPhraseNode]}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _node$arguments=_slicedToArray(node.arguments,3),fieldNameArg=_node$arguments[0],valueArg=_node$arguments[1],isPhraseArg=_node$arguments[2];var fullFieldNameArg=(0,_get_full_field_name_node.getFullFieldNameNode)(fieldNameArg,indexPattern,(context===null||context===void 0?void 0:context.nested)?context.nested.path:undefined);var fieldName=ast.toElasticsearchQuery(fullFieldNameArg);var value=!(0,_lodash.isUndefined)(valueArg)?ast.toElasticsearchQuery(valueArg):valueArg;var type=isPhraseArg.value?"phrase":"best_fields";if(fullFieldNameArg.value===null){if(valueArg.type==="wildcard"){return{query_string:{query:wildcard.toQueryStringQuery(valueArg)}}}return{multi_match:{type:type,query:value,lenient:true}}}var fields=indexPattern?(0,_get_fields.getFields)(fullFieldNameArg,indexPattern):[];if(fields&&fields.length===0){fields.push({name:ast.toElasticsearchQuery(fullFieldNameArg),scripted:false,type:""})}var isExistsQuery=valueArg.type==="wildcard"&&value==="*";var isAllFieldsQuery=fullFieldNameArg.type==="wildcard"&&fieldName==="*"||fields&&indexPattern&&fields.length===indexPattern.fields.length;var isMatchAllQuery=isExistsQuery&&isAllFieldsQuery;if(isMatchAllQuery){return{match_all:{}}}var queries=fields.reduce((function(accumulator,field){var wrapWithNestedQuery=function wrapWithNestedQuery(query){if(!(fullFieldNameArg.type==="wildcard")||!(0,_lodash.get)(field,"subType.nested")||(context===null||context===void 0?void 0:context.nested)){return query}else{return{nested:{path:field.subType.nested.path,query:query,score_mode:"none"}}}};if(field.scripted){if(!isExistsQuery){return[].concat(_toConsumableArray(accumulator),[{script:_objectSpread({},(0,_filters.getPhraseScript)(field,value))}])}}else if(isExistsQuery){return[].concat(_toConsumableArray(accumulator),[wrapWithNestedQuery({exists:{field:field.name}})])}else if(valueArg.type==="wildcard"){return[].concat(_toConsumableArray(accumulator),[wrapWithNestedQuery({query_string:{fields:[field.name],query:wildcard.toQueryStringQuery(valueArg)}})])}else if(field.type==="date"){var timeZoneParam=config.dateFormatTZ?{time_zone:(0,_utils.getTimeZoneFromSettings)(config.dateFormatTZ)}:{};return[].concat(_toConsumableArray(accumulator),[wrapWithNestedQuery({range:_defineProperty({},field.name,_objectSpread({gte:value,lte:value},timeZoneParam))})])}else{var queryType=type==="phrase"?"match_phrase":"match";return[].concat(_toConsumableArray(accumulator),[wrapWithNestedQuery(_defineProperty({},queryType,_defineProperty({},field.name,value)))])}}),[]);return{bool:{should:queries||[],minimum_should_match:1}}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.buildFilter=buildFilter;exports.buildCustomFilter=buildCustomFilter;var _=__webpack_require__(104);function buildFilter(indexPattern,field,type,negate,disabled,params,alias,store){var filter=buildBaseFilter(indexPattern,field,type,params);filter.meta.alias=alias;filter.meta.negate=negate;filter.meta.disabled=disabled;filter.$state={store:store};return filter}function buildCustomFilter(indexPatternString,queryDsl,disabled,negate,alias,store){var meta={index:indexPatternString,type:_.FILTERS.CUSTOM,disabled:disabled,negate:negate,alias:alias};var filter=_objectSpread({},queryDsl,{meta:meta});filter.$state={store:store};return filter}function buildBaseFilter(indexPattern,field,type,params){switch(type){case"phrase":return(0,_.buildPhraseFilter)(field,params,indexPattern);case"phrases":return(0,_.buildPhrasesFilter)(field,params,indexPattern);case"range":var newParams={gte:params.from,lt:params.to};return(0,_.buildRangeFilter)(field,newParams,indexPattern);case"exists":return(0,_.buildExistsFilter)(field,indexPattern);default:throw new Error("Unknown filter type: ".concat(type))}}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDisplayValueFromFilter=getDisplayValueFromFilter;var _lodash=__webpack_require__(0);var _i18n=__webpack_require__(1);var _get_index_pattern_from_filter=__webpack_require__(208);function getValueFormatter(indexPattern,key){if(!indexPattern||!key)return;var format=(0,_lodash.get)(indexPattern,["fields","byName",key,"format"]);if(!format&&indexPattern.fields.getByName){var field=indexPattern.fields.getByName(key);if(!field){throw new Error(_i18n.i18n.translate("data.filter.filterBar.fieldNotFound",{defaultMessage:"Field {key} not found in index pattern {indexPattern}",values:{key:key,indexPattern:indexPattern.title}}))}format=field.format}return format}function getDisplayValueFromFilter(filter,indexPatterns){var indexPattern=(0,_get_index_pattern_from_filter.getIndexPatternFromFilter)(filter,indexPatterns);if(typeof filter.meta.value==="function"){var valueFormatter=getValueFormatter(indexPattern,filter.meta.key);return filter.meta.value(valueFormatter)}else{return filter.meta.value||""}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFilterField=void 0;var _exists_filter=__webpack_require__(205);var _geo_bounding_box_filter=__webpack_require__(206);var _geo_polygon_filter=__webpack_require__(207);var _phrase_filter=__webpack_require__(159);var _phrases_filter=__webpack_require__(209);var _range_filter=__webpack_require__(210);var _missing_filter=__webpack_require__(211);var getFilterField=function getFilterField(filter){if((0,_exists_filter.isExistsFilter)(filter)){return(0,_exists_filter.getExistsFilterField)(filter)}if((0,_geo_bounding_box_filter.isGeoBoundingBoxFilter)(filter)){return(0,_geo_bounding_box_filter.getGeoBoundingBoxFilterField)(filter)}if((0,_geo_polygon_filter.isGeoPolygonFilter)(filter)){return(0,_geo_polygon_filter.getGeoPolygonFilterField)(filter)}if((0,_phrase_filter.isPhraseFilter)(filter)){return(0,_phrase_filter.getPhraseFilterField)(filter)}if((0,_phrases_filter.isPhrasesFilter)(filter)){return(0,_phrases_filter.getPhrasesFilterField)(filter)}if((0,_range_filter.isRangeFilter)(filter)){return(0,_range_filter.getRangeFilterField)(filter)}if((0,_missing_filter.isMissingFilter)(filter)){return(0,_missing_filter.getMissingFilterField)(filter)}return};exports.getFilterField=getFilterField},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFilterParams=getFilterParams;var _=__webpack_require__(104);function getFilterParams(filter){switch(filter.meta.type){case _.FILTERS.PHRASE:return filter.meta.params.query;case _.FILTERS.PHRASES:return filter.meta.params;case _.FILTERS.RANGE:return{from:filter.meta.params.gte,to:filter.meta.params.lt}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isMatchAllFilter=void 0;var isMatchAllFilter=function isMatchAllFilter(filter){return filter&&filter.match_all};exports.isMatchAllFilter=isMatchAllFilter},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.unpinFilter=exports.pinFilter=exports.disableFilter=exports.enableFilter=exports.toggleFilterPinned=exports.toggleFilterNegated=exports.toggleFilterDisabled=exports.isFilterPinned=exports.buildEmptyFilter=exports.FilterStateStore=void 0;var FilterStateStore;exports.FilterStateStore=FilterStateStore;(function(FilterStateStore){FilterStateStore["APP_STATE"]="appState";FilterStateStore["GLOBAL_STATE"]="globalState"})(FilterStateStore||(exports.FilterStateStore=FilterStateStore={}));var buildEmptyFilter=function buildEmptyFilter(isPinned,index){var meta={disabled:false,negate:false,alias:null,index:index};var $state={store:isPinned?FilterStateStore.GLOBAL_STATE:FilterStateStore.APP_STATE};return{meta:meta,$state:$state}};exports.buildEmptyFilter=buildEmptyFilter;var isFilterPinned=function isFilterPinned(filter){return filter.$state&&filter.$state.store===FilterStateStore.GLOBAL_STATE};exports.isFilterPinned=isFilterPinned;var toggleFilterDisabled=function toggleFilterDisabled(filter){var disabled=!filter.meta.disabled;var meta=_objectSpread({},filter.meta,{disabled:disabled});return _objectSpread({},filter,{meta:meta})};exports.toggleFilterDisabled=toggleFilterDisabled;var toggleFilterNegated=function toggleFilterNegated(filter){var negate=!filter.meta.negate;var meta=_objectSpread({},filter.meta,{negate:negate});return _objectSpread({},filter,{meta:meta})};exports.toggleFilterNegated=toggleFilterNegated;var toggleFilterPinned=function toggleFilterPinned(filter){var store=isFilterPinned(filter)?FilterStateStore.APP_STATE:FilterStateStore.GLOBAL_STATE;var $state=_objectSpread({},filter.$state,{store:store});return _objectSpread({},filter,{$state:$state})};exports.toggleFilterPinned=toggleFilterPinned;var enableFilter=function enableFilter(filter){return!filter.meta.disabled?filter:toggleFilterDisabled(filter)};exports.enableFilter=enableFilter;var disableFilter=function disableFilter(filter){return filter.meta.disabled?filter:toggleFilterDisabled(filter)};exports.disableFilter=disableFilter;var pinFilter=function pinFilter(filter){return isFilterPinned(filter)?filter:toggleFilterPinned(filter)};exports.pinFilter=pinFilter;var unpinFilter=function unpinFilter(filter){return!isFilterPinned(filter)?filter:toggleFilterPinned(filter)};exports.unpinFilter=unpinFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildQueryFilter=exports.isQueryStringFilter=void 0;var isQueryStringFilter=function isQueryStringFilter(filter){return filter&&filter.query&&filter.query.query_string};exports.isQueryStringFilter=isQueryStringFilter;var buildQueryFilter=function buildQueryFilter(query,index,alias){return{query:query,meta:{index:index,alias:alias}}};exports.buildQueryFilter=buildQueryFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FILTERS=void 0;var FILTERS;exports.FILTERS=FILTERS;(function(FILTERS){FILTERS["CUSTOM"]="custom";FILTERS["PHRASES"]="phrases";FILTERS["PHRASE"]="phrase";FILTERS["EXISTS"]="exists";FILTERS["MATCH_ALL"]="match_all";FILTERS["MISSING"]="missing";FILTERS["QUERY_STRING"]="query_string";FILTERS["RANGE"]="range";FILTERS["GEO_BOUNDING_BOX"]="geo_bounding_box";FILTERS["GEO_POLYGON"]="geo_polygon";FILTERS["SPATIAL_FILTER"]="spatial_filter"})(FILTERS||(exports.FILTERS=FILTERS={}))},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}module.exports=function(){"use strict";function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor}function peg$SyntaxError(message,expected,found,location){this.message=message;this.expected=expected;this.found=found;this.location=location;this.name="SyntaxError";if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,peg$SyntaxError)}}peg$subclass(peg$SyntaxError,Error);function peg$parse(input){var options=arguments.length>1?arguments[1]:{},parser=this,peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart,Literal:peg$parseLiteral},peg$startRuleFunction=peg$parsestart,peg$c0=function peg$c0(query,trailing){if(trailing.type==="cursor"){return _objectSpread({},trailing,{suggestionTypes:["conjunction"]})}if(query!==null)return query;return nodeTypes.function.buildNode("is","*","*")},peg$c1=function peg$c1(){return errorOnLuceneSyntax},peg$c2=function peg$c2(left,right){var cursor=[left,right].find((function(node){return node.type==="cursor"}));if(cursor)return cursor;return buildFunctionNode("or",[left,right])},peg$c3=function peg$c3(left,right){var cursor=[left,right].find((function(node){return node.type==="cursor"}));if(cursor)return cursor;return buildFunctionNode("and",[left,right])},peg$c4=function peg$c4(query){if(query.type==="cursor")return query;return buildFunctionNode("not",[query])},peg$c5="(",peg$c6={type:"literal",value:"(",description:'"("'},peg$c7=")",peg$c8={type:"literal",value:")",description:'")"'},peg$c9=function peg$c9(query,trailing){if(trailing.type==="cursor"){return _objectSpread({},trailing,{suggestionTypes:["conjunction"]})}return query},peg$c10=":",peg$c11={type:"literal",value:":",description:'":"'},peg$c12="{",peg$c13={type:"literal",value:"{",description:'"{"'},peg$c14="}",peg$c15={type:"literal",value:"}",description:'"}"'},peg$c16=function peg$c16(field,query,trailing){if(query.type==="cursor"){return _objectSpread({},query,{nestedPath:query.nestedPath?"".concat(field.value,".").concat(query.nestedPath):field.value})}if(trailing.type==="cursor"){return _objectSpread({},trailing,{suggestionTypes:["conjunction"]})}return buildFunctionNode("nested",[field,query])},peg$c17={type:"other",description:"fieldName"},peg$c18=function peg$c18(field,operator,value){if(value.type==="cursor"){return _objectSpread({},value,{suggestionTypes:["conjunction"]})}var range=buildNamedArgNode(operator,value);return buildFunctionNode("range",[field,range])},peg$c19=function peg$c19(field,partial){if(partial.type==="cursor"){return _objectSpread({},partial,{fieldName:field.value,suggestionTypes:["value","conjunction"]})}return partial(field)},peg$c20=function peg$c20(partial){if(partial.type==="cursor"){var fieldName="".concat(partial.prefix).concat(partial.suffix).trim();return _objectSpread({},partial,{fieldName:fieldName,suggestionTypes:["field","operator","conjunction"]})}var field=buildLiteralNode(null);return partial(field)},peg$c21=function peg$c21(partial,trailing){if(trailing.type==="cursor"){return _objectSpread({},trailing,{suggestionTypes:["conjunction"]})}return partial},peg$c22=function peg$c22(partialLeft,partialRight){var cursor=[partialLeft,partialRight].find((function(node){return node.type==="cursor"}));if(cursor){return _objectSpread({},cursor,{suggestionTypes:["value"]})}return function(field){return buildFunctionNode("or",[partialLeft(field),partialRight(field)])}},peg$c23=function peg$c23(partialLeft,partialRight){var cursor=[partialLeft,partialRight].find((function(node){return node.type==="cursor"}));if(cursor){return _objectSpread({},cursor,{suggestionTypes:["value"]})}return function(field){return buildFunctionNode("and",[partialLeft(field),partialRight(field)])}},peg$c24=function peg$c24(partial){if(partial.type==="cursor"){return _objectSpread({},list,{suggestionTypes:["value"]})}return function(field){return buildFunctionNode("not",[partial(field)])}},peg$c25={type:"other",description:"value"},peg$c26=function peg$c26(value){if(value.type==="cursor")return value;var isPhrase=buildLiteralNode(true);return function(field){return buildFunctionNode("is",[field,value,isPhrase])}},peg$c27=function peg$c27(value){if(value.type==="cursor")return value;if(!allowLeadingWildcards&&value.type==="wildcard"&&nodeTypes.wildcard.hasLeadingWildcard(value)){error("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.")}var isPhrase=buildLiteralNode(false);return function(field){return buildFunctionNode("is",[field,value,isPhrase])}},peg$c28={type:"other",description:"OR"},peg$c29="or",peg$c30={type:"literal",value:"or",description:'"or"'},peg$c31={type:"other",description:"AND"},peg$c32="and",peg$c33={type:"literal",value:"and",description:'"and"'},peg$c34={type:"other",description:"NOT"},peg$c35="not",peg$c36={type:"literal",value:"not",description:'"not"'},peg$c37={type:"other",description:"literal"},peg$c38='"',peg$c39={type:"literal",value:'"',description:'"\\""'},peg$c40=function peg$c40(prefix,cursor,suffix){var _location=location(),start=_location.start,end=_location.end;return{type:"cursor",start:start.offset,end:end.offset-cursor.length,prefix:prefix.join(""),suffix:suffix.join(""),text:text().replace(cursor,"")}},peg$c41=function peg$c41(chars){return buildLiteralNode(chars.join(""))},peg$c42="\\",peg$c43={type:"literal",value:"\\",description:'"\\\\"'},peg$c44=/^[\\"]/,peg$c45={type:"class",value:'[\\\\"]',description:'[\\\\"]'},peg$c46=function peg$c46(char){return char},peg$c47=/^[^"]/,peg$c48={type:"class",value:'[^"]',description:'[^"]'},peg$c49=function peg$c49(chars){var sequence=chars.join("").trim();if(sequence==="null")return buildLiteralNode(null);if(sequence==="true")return buildLiteralNode(true);if(sequence==="false")return buildLiteralNode(false);if(chars.includes(wildcardSymbol))return buildWildcardNode(sequence);var number=Number(sequence);var value=isNaN(number)?sequence:number;return buildLiteralNode(value)},peg$c50={type:"any",description:"any character"},peg$c51="*",peg$c52={type:"literal",value:"*",description:'"*"'},peg$c53=function peg$c53(){return wildcardSymbol},peg$c54="\\t",peg$c55={type:"literal",value:"\\t",description:'"\\\\t"'},peg$c56=function peg$c56(){return"\t"},peg$c57="\\r",peg$c58={type:"literal",value:"\\r",description:'"\\\\r"'},peg$c59=function peg$c59(){return"\r"},peg$c60="\\n",peg$c61={type:"literal",value:"\\n",description:'"\\\\n"'},peg$c62=function peg$c62(){return"\n"},peg$c63=function peg$c63(keyword){return keyword},peg$c64=/^[\\():<>"*{}]/,peg$c65={type:"class",value:'[\\\\():<>"*{}]',description:'[\\\\():<>"*{}]'},peg$c66="<=",peg$c67={type:"literal",value:"<=",description:'"<="'},peg$c68=function peg$c68(){return"lte"},peg$c69=">=",peg$c70={type:"literal",value:">=",description:'">="'},peg$c71=function peg$c71(){return"gte"},peg$c72="<",peg$c73={type:"literal",value:"<",description:'"<"'},peg$c74=function peg$c74(){return"lt"},peg$c75=">",peg$c76={type:"literal",value:">",description:'">"'},peg$c77=function peg$c77(){return"gt"},peg$c78={type:"other",description:"whitespace"},peg$c79=/^[ \t\r\n]/,peg$c80={type:"class",value:"[\\ \\t\\r\\n]",description:"[\\ \\t\\r\\n]"},peg$c81=function peg$c81(){return parseCursor},peg$c82="@kuery-cursor@",peg$c83={type:"literal",value:"@kuery-cursor@",description:'"@kuery-cursor@"'},peg$c84=function peg$c84(){return cursorSymbol},peg$c85="||",peg$c86={type:"literal",value:"||",description:'"||"'},peg$c87=function peg$c87(){error("LuceneOr")},peg$c88="&&",peg$c89={type:"literal",value:"&&",description:'"&&"'},peg$c90=function peg$c90(){error("LuceneAnd")},peg$c91="+",peg$c92={type:"literal",value:"+",description:'"+"'},peg$c93="-",peg$c94={type:"literal",value:"-",description:'"-"'},peg$c95=function peg$c95(){error("LuceneNot")},peg$c96="!",peg$c97={type:"literal",value:"!",description:'"!"'},peg$c98="_exists_",peg$c99={type:"literal",value:"_exists_",description:'"_exists_"'},peg$c100=function peg$c100(){error("LuceneExists")},peg$c101=function peg$c101(){error("LuceneRange")},peg$c102="?",peg$c103={type:"literal",value:"?",description:'"?"'},peg$c104=function peg$c104(){error("LuceneWildcard")},peg$c105="/",peg$c106={type:"literal",value:"/",description:'"/"'},peg$c107=/^[^\/]/,peg$c108={type:"class",value:"[^/]",description:"[^/]"},peg$c109=function peg$c109(){error("LuceneRegex")},peg$c110="~",peg$c111={type:"literal",value:"~",description:'"~"'},peg$c112=/^[0-9]/,peg$c113={type:"class",value:"[0-9]",description:"[0-9]"},peg$c114=function peg$c114(){error("LuceneFuzzy")},peg$c115=function peg$c115(){error("LuceneProximity")},peg$c116="^",peg$c117={type:"literal",value:"^",description:'"^"'},peg$c118=function peg$c118(){error("LuceneBoost")},peg$c119=function peg$c119(){return char},peg$c120="=",peg$c121={type:"literal",value:"=",description:'"="'},peg$c122="[",peg$c123={type:"literal",value:"[",description:'"["'},peg$c124="]",peg$c125={type:"literal",value:"]",description:'"]"'},peg$c126="TO",peg$c127={type:"literal",value:"TO",description:'"TO"'},peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1,seenCR:false}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0,peg$result;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions)){throw new Error("Can't start parsing from rule \""+options.startRule+'".')}peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$savedPos,peg$currPos)}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function expected(description){throw peg$buildException(null,[{type:"other",description:description}],input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function error(message){throw peg$buildException(message,null,input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function peg$computePosDetails(pos){var details=peg$posDetailsCache[pos],p,ch;if(details){return details}else{p=pos-1;while(!peg$posDetailsCache[p]){p--}details=peg$posDetailsCache[p];details={line:details.line,column:details.column,seenCR:details.seenCR};while(p<pos){ch=input.charAt(p);if(ch==="\n"){if(!details.seenCR){details.line++}details.column=1;details.seenCR=false}else if(ch==="\r"||ch==="\u2028"||ch==="\u2029"){details.line++;details.column=1;details.seenCR=true}else{details.column++;details.seenCR=false}p++}peg$posDetailsCache[pos]=details;return details}}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){if(peg$currPos<peg$maxFailPos){return}if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[]}peg$maxFailExpected.push(expected)}function peg$buildException(message,expected,found,location){function cleanupExpected(expected){var i=1;expected.sort((function(a,b){if(a.description<b.description){return-1}else if(a.description>b.description){return 1}else{return 0}}));while(i<expected.length){if(expected[i-1]===expected[i]){expected.splice(i,1)}else{i++}}}function buildMessage(expected,found){function stringEscape(s){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(ch){return"\\x0"+hex(ch)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(ch){return"\\x"+hex(ch)})).replace(/[\u0100-\u0FFF]/g,(function(ch){return"\\u0"+hex(ch)})).replace(/[\u1000-\uFFFF]/g,(function(ch){return"\\u"+hex(ch)}))}var expectedDescs=new Array(expected.length),expectedDesc,foundDesc,i;for(i=0;i<expected.length;i++){expectedDescs[i]=expected[i].description}expectedDesc=expected.length>1?expectedDescs.slice(0,-1).join(", ")+" or "+expectedDescs[expected.length-1]:expectedDescs[0];foundDesc=found?'"'+stringEscape(found)+'"':"end of input";return"Expected "+expectedDesc+" but "+foundDesc+" found."}if(expected!==null){cleanupExpected(expected)}return new peg$SyntaxError(message!==null?message:buildMessage(expected,found),expected,found,location)}function peg$parsestart(){var s0,s1,s2,s3;s0=peg$currPos;s1=[];s2=peg$parseSpace();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}if(s1!==peg$FAILED){s2=peg$parseOrQuery();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){s3=peg$parseOptionalSpace();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c0(s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseOrQuery(){var s0,s1,s2,s3;s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c1();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$parseLuceneQuery();if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseAndQuery();if(s1!==peg$FAILED){s2=peg$parseOr();if(s2!==peg$FAILED){s3=peg$parseOrQuery();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c2(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseAndQuery()}}return s0}function peg$parseAndQuery(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseNotQuery();if(s1!==peg$FAILED){s2=peg$parseAnd();if(s2!==peg$FAILED){s3=peg$parseAndQuery();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c3(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseNotQuery()}return s0}function peg$parseNotQuery(){var s0,s1,s2;s0=peg$currPos;s1=peg$parseNot();if(s1!==peg$FAILED){s2=peg$parseSubQuery();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c4(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseSubQuery()}return s0}function peg$parseSubQuery(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===40){s1=peg$c5;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseOrQuery();if(s3!==peg$FAILED){s4=peg$parseOptionalSpace();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s5=peg$c7;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c8)}}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c9(s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseNestedQuery()}return s0}function peg$parseNestedQuery(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9;s0=peg$currPos;s1=peg$parseField();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s3=peg$c10;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===123){s5=peg$c12;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}if(s5!==peg$FAILED){s6=[];s7=peg$parseSpace();while(s7!==peg$FAILED){s6.push(s7);s7=peg$parseSpace()}if(s6!==peg$FAILED){s7=peg$parseOrQuery();if(s7!==peg$FAILED){s8=peg$parseOptionalSpace();if(s8!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s9=peg$c14;peg$currPos++}else{s9=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}if(s9!==peg$FAILED){peg$savedPos=s0;s1=peg$c16(s1,s7,s8);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseExpression()}return s0}function peg$parseExpression(){var s0;s0=peg$parseFieldRangeExpression();if(s0===peg$FAILED){s0=peg$parseFieldValueExpression();if(s0===peg$FAILED){s0=peg$parseValueExpression()}}return s0}function peg$parseField(){var s0,s1;peg$silentFails++;s0=peg$parseLiteral();peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c17)}}return s0}function peg$parseFieldRangeExpression(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseField();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseRangeOperator();if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){s5=peg$parseLiteral();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c18(s1,s3,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseFieldValueExpression(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseField();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s3=peg$c10;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){s5=peg$parseListOfValues();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c19(s1,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseValueExpression(){var s0,s1;s0=peg$currPos;s1=peg$parseValue();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c20(s1)}s0=s1;return s0}function peg$parseListOfValues(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===40){s1=peg$c5;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseOrListOfValues();if(s3!==peg$FAILED){s4=peg$parseOptionalSpace();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s5=peg$c7;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c8)}}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c21(s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseValue()}return s0}function peg$parseOrListOfValues(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseAndListOfValues();if(s1!==peg$FAILED){s2=peg$parseOr();if(s2!==peg$FAILED){s3=peg$parseOrListOfValues();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c22(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseAndListOfValues()}return s0}function peg$parseAndListOfValues(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseNotListOfValues();if(s1!==peg$FAILED){s2=peg$parseAnd();if(s2!==peg$FAILED){s3=peg$parseAndListOfValues();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c23(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseNotListOfValues()}return s0}function peg$parseNotListOfValues(){var s0,s1,s2;s0=peg$currPos;s1=peg$parseNot();if(s1!==peg$FAILED){s2=peg$parseListOfValues();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c24(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseListOfValues()}return s0}function peg$parseValue(){var s0,s1;peg$silentFails++;s0=peg$currPos;s1=peg$parseQuotedString();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c26(s1)}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseUnquotedLiteral();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c27(s1)}s0=s1}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c25)}}return s0}function peg$parseOr(){var s0,s1,s2,s3,s4;peg$silentFails++;s0=peg$currPos;s1=[];s2=peg$parseSpace();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}}else{s1=peg$FAILED}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2).toLowerCase()===peg$c29){s2=input.substr(peg$currPos,2);peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c30)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();if(s4!==peg$FAILED){while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}}else{s3=peg$FAILED}if(s3!==peg$FAILED){s1=[s1,s2,s3];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c1();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$parseLuceneOr();if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c28)}}return s0}function peg$parseAnd(){var s0,s1,s2,s3,s4;peg$silentFails++;s0=peg$currPos;s1=[];s2=peg$parseSpace();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}}else{s1=peg$FAILED}if(s1!==peg$FAILED){if(input.substr(peg$currPos,3).toLowerCase()===peg$c32){s2=input.substr(peg$currPos,3);peg$currPos+=3}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c33)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();if(s4!==peg$FAILED){while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}}else{s3=peg$FAILED}if(s3!==peg$FAILED){s1=[s1,s2,s3];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c1();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$parseLuceneAnd();if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c31)}}return s0}function peg$parseNot(){var s0,s1,s2,s3;peg$silentFails++;s0=peg$currPos;if(input.substr(peg$currPos,3).toLowerCase()===peg$c35){s1=input.substr(peg$currPos,3);peg$currPos+=3}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c36)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}}else{s2=peg$FAILED}if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c1();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$parseLuceneNot();if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c34)}}return s0}function peg$parseLiteral(){var s0,s1;peg$silentFails++;s0=peg$parseQuotedString();if(s0===peg$FAILED){s0=peg$parseUnquotedLiteral()}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37)}}return s0}function peg$parseQuotedString(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===34){s1=peg$c38;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseQuotedCharacter();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseQuotedCharacter()}if(s2!==peg$FAILED){s3=peg$parseCursor();if(s3!==peg$FAILED){s4=[];s5=peg$parseQuotedCharacter();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseQuotedCharacter()}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===34){s5=peg$c38;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c40(s2,s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===34){s1=peg$c38;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseQuotedCharacter();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseQuotedCharacter()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===34){s3=peg$c38;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c41(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}return s0}function peg$parseQuotedCharacter(){var s0,s1,s2;s0=peg$parseEscapedWhitespace();if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c42;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s1!==peg$FAILED){if(peg$c44.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c45)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c46(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$parseCursor();peg$silentFails--;if(s2===peg$FAILED){s1=void 0}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){if(peg$c47.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c48)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c46(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}return s0}function peg$parseUnquotedLiteral(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseUnquotedCharacter();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseUnquotedCharacter()}if(s1!==peg$FAILED){s2=peg$parseCursor();if(s2!==peg$FAILED){s3=[];s4=peg$parseUnquotedCharacter();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseUnquotedCharacter()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c40(s1,s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=[];s2=peg$parseUnquotedCharacter();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseUnquotedCharacter()}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c49(s1)}s0=s1}return s0}function peg$parseUnquotedCharacter(){var s0,s1,s2,s3,s4;s0=peg$parseEscapedWhitespace();if(s0===peg$FAILED){s0=peg$parseEscapedSpecialCharacter();if(s0===peg$FAILED){s0=peg$parseEscapedKeyword();if(s0===peg$FAILED){s0=peg$parseWildcard();if(s0===peg$FAILED){s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$parseSpecialCharacter();peg$silentFails--;if(s2===peg$FAILED){s1=void 0}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$currPos;peg$silentFails++;s3=peg$parseKeyword();peg$silentFails--;if(s3===peg$FAILED){s2=void 0}else{peg$currPos=s2;s2=peg$FAILED}if(s2!==peg$FAILED){s3=peg$currPos;peg$silentFails++;s4=peg$parseCursor();peg$silentFails--;if(s4===peg$FAILED){s3=void 0}else{peg$currPos=s3;s3=peg$FAILED}if(s3!==peg$FAILED){if(input.length>peg$currPos){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c50)}}if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c46(s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}}}return s0}function peg$parseWildcard(){var s0,s1;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===42){s1=peg$c51;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c53()}s0=s1;return s0}function peg$parseOptionalSpace(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseSpace();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}if(s1!==peg$FAILED){s2=peg$parseCursor();if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c40(s1,s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=[];s1=peg$parseSpace();while(s1!==peg$FAILED){s0.push(s1);s1=peg$parseSpace()}}return s0}function peg$parseEscapedWhitespace(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c54){s1=peg$c54;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c55)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c56()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c57){s1=peg$c57;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c58)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c59()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c60){s1=peg$c60;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c61)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c62()}s0=s1}}return s0}function peg$parseEscapedSpecialCharacter(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c42;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s1!==peg$FAILED){s2=peg$parseSpecialCharacter();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c46(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseEscapedKeyword(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c42;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2).toLowerCase()===peg$c29){s2=input.substr(peg$currPos,2);peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c30)}}if(s2===peg$FAILED){if(input.substr(peg$currPos,3).toLowerCase()===peg$c32){s2=input.substr(peg$currPos,3);peg$currPos+=3}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c33)}}if(s2===peg$FAILED){if(input.substr(peg$currPos,3).toLowerCase()===peg$c35){s2=input.substr(peg$currPos,3);peg$currPos+=3}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c36)}}}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c63(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseKeyword(){var s0;s0=peg$parseOr();if(s0===peg$FAILED){s0=peg$parseAnd();if(s0===peg$FAILED){s0=peg$parseNot()}}return s0}function peg$parseSpecialCharacter(){var s0;if(peg$c64.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c65)}}return s0}function peg$parseRangeOperator(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c66){s1=peg$c66;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c67)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c68()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c69){s1=peg$c69;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c70)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c71()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===60){s1=peg$c72;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c73)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c74()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===62){s1=peg$c75;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c76)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c77()}s0=s1}}}return s0}function peg$parseSpace(){var s0,s1;peg$silentFails++;if(peg$c79.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c80)}}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c78)}}return s0}function peg$parseCursor(){var s0,s1,s2;s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c81();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){if(input.substr(peg$currPos,14)===peg$c82){s2=peg$c82;peg$currPos+=14}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c83)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c84();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneOr(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseSpace();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c85){s2=peg$c85;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c86)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c87();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneAnd(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseSpace();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c88){s2=peg$c88;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c89)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c90();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===43){s1=peg$c91;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c92)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c90()}s0=s1}return s0}function peg$parseLuceneNot(){var s0,s1;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===45){s1=peg$c93;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c94)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c95()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===33){s1=peg$c96;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c97)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c95()}s0=s1}return s0}function peg$parseLuceneQuery(){var s0;s0=peg$parseLuceneFieldQuery();if(s0===peg$FAILED){s0=peg$parseLuceneValue();if(s0===peg$FAILED){s0=peg$parseLuceneExists()}}return s0}function peg$parseLuceneFieldQuery(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseLuceneLiteral();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s3=peg$c10;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){s5=peg$parseLuceneValue();if(s5!==peg$FAILED){s1=[s1,s2,s3,s4,s5];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneValue(){var s0;s0=peg$parseLuceneRange();if(s0===peg$FAILED){s0=peg$parseLuceneWildcard();if(s0===peg$FAILED){s0=peg$parseLuceneRegex();if(s0===peg$FAILED){s0=peg$parseLuceneFuzzy();if(s0===peg$FAILED){s0=peg$parseLuceneProximity();if(s0===peg$FAILED){s0=peg$parseLuceneBoost()}}}}}return s0}function peg$parseLuceneExists(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.substr(peg$currPos,8)===peg$c98){s1=peg$c98;peg$currPos+=8}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c99)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s3=peg$c10;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){s5=peg$parseLuceneLiteral();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c100();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneRange(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;s1=peg$parseRangeOperator();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseLuceneLiteral();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c101();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseLuceneRangeStart();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseLuceneLiteral();if(s3!==peg$FAILED){s4=peg$parseLuceneTo();if(s4!==peg$FAILED){s5=peg$parseLuceneLiteral();if(s5!==peg$FAILED){s6=peg$parseLuceneRangeEnd();if(s6!==peg$FAILED){peg$savedPos=s0;s1=peg$c101();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}return s0}function peg$parseLuceneWildcard(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseLuceneUnquotedCharacter();if(s2===peg$FAILED){if(input.charCodeAt(peg$currPos)===42){s2=peg$c51;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52)}}}while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseLuceneUnquotedCharacter();if(s2===peg$FAILED){if(input.charCodeAt(peg$currPos)===42){s2=peg$c51;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52)}}}}if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===63){s2=peg$c102;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c103)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseLuceneWildcard();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseLuceneWildcard()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c104();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneRegex(){var s0,s1,s2,s3;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===47){s1=peg$c105;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c106)}}if(s1!==peg$FAILED){s2=[];if(peg$c107.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c108)}}while(s3!==peg$FAILED){s2.push(s3);if(peg$c107.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c108)}}}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===47){s3=peg$c105;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c106)}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c109();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneFuzzy(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseLuceneUnquotedLiteral();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===126){s2=peg$c110;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c111)}}if(s2!==peg$FAILED){s3=[];if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}while(s4!==peg$FAILED){s3.push(s4);if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c114();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneProximity(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseQuotedString();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===126){s2=peg$c110;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c111)}}if(s2!==peg$FAILED){s3=[];if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}while(s4!==peg$FAILED){s3.push(s4);if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c115();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneBoost(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseLuceneLiteral();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===94){s2=peg$c116;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c117)}}if(s2!==peg$FAILED){s3=[];if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}while(s4!==peg$FAILED){s3.push(s4);if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c118();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneLiteral(){var s0;s0=peg$parseQuotedString();if(s0===peg$FAILED){s0=peg$parseLuceneUnquotedLiteral()}return s0}function peg$parseLuceneUnquotedLiteral(){var s0,s1;s0=[];s1=peg$parseLuceneUnquotedCharacter();if(s1!==peg$FAILED){while(s1!==peg$FAILED){s0.push(s1);s1=peg$parseLuceneUnquotedCharacter()}}else{s0=peg$FAILED}return s0}function peg$parseLuceneUnquotedCharacter(){var s0,s1,s2,s3;s0=peg$parseEscapedWhitespace();if(s0===peg$FAILED){s0=peg$parseEscapedLuceneSpecialCharacter();if(s0===peg$FAILED){s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$parseLuceneSpecialCharacter();peg$silentFails--;if(s2===peg$FAILED){s1=void 0}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$currPos;peg$silentFails++;s3=peg$parseLuceneKeyword();peg$silentFails--;if(s3===peg$FAILED){s2=void 0}else{peg$currPos=s2;s2=peg$FAILED}if(s2!==peg$FAILED){if(input.length>peg$currPos){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c50)}}if(s3!==peg$FAILED){s1=[s1,s2,s3];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}return s0}function peg$parseLuceneKeyword(){var s0;s0=peg$parseOr();if(s0===peg$FAILED){s0=peg$parseAnd();if(s0===peg$FAILED){s0=peg$parseLuceneOr();if(s0===peg$FAILED){s0=peg$parseLuceneAnd();if(s0===peg$FAILED){s0=peg$parseLuceneNot();if(s0===peg$FAILED){s0=peg$parseLuceneTo()}}}}}return s0}function peg$parseEscapedLuceneSpecialCharacter(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c42;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s1!==peg$FAILED){s2=peg$parseLuceneSpecialCharacter();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c119();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneSpecialCharacter(){var s0;if(input.charCodeAt(peg$currPos)===43){s0=peg$c91;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c92)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===45){s0=peg$c93;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c94)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===61){s0=peg$c120;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c121)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===62){s0=peg$c75;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c76)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===60){s0=peg$c72;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c73)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===33){s0=peg$c96;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c97)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===40){s0=peg$c5;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s0=peg$c7;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c8)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===123){s0=peg$c12;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s0=peg$c14;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===91){s0=peg$c122;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c123)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===93){s0=peg$c124;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c125)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===94){s0=peg$c116;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c117)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===34){s0=peg$c38;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===126){s0=peg$c110;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c111)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===42){s0=peg$c51;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===63){s0=peg$c102;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c103)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s0=peg$c10;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===92){s0=peg$c42;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===47){s0=peg$c105;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c106)}}}}}}}}}}}}}}}}}}}}}return s0}function peg$parseLuceneTo(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseSpace();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}}else{s1=peg$FAILED}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c126){s2=peg$c126;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c127)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();if(s4!==peg$FAILED){while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}}else{s3=peg$FAILED}if(s3!==peg$FAILED){s1=[s1,s2,s3];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneRangeStart(){var s0;if(input.charCodeAt(peg$currPos)===91){s0=peg$c122;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c123)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===123){s0=peg$c12;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}}return s0}function peg$parseLuceneRangeEnd(){var s0;if(input.charCodeAt(peg$currPos)===93){s0=peg$c124;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c125)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s0=peg$c14;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}}return s0}var errorOnLuceneSyntax=options.errorOnLuceneSyntax,parseCursor=options.parseCursor,cursorSymbol=options.cursorSymbol,_options$allowLeading=options.allowLeadingWildcards,allowLeadingWildcards=_options$allowLeading===void 0?true:_options$allowLeading,nodeTypes=options.helpers.nodeTypes;var buildFunctionNode=nodeTypes.function.buildNodeWithArgumentNodes;var buildLiteralNode=nodeTypes.literal.buildNode;var buildWildcardNode=nodeTypes.wildcard.buildNode;var buildNamedArgNode=nodeTypes.namedArg.buildNode;var wildcardSymbol=nodeTypes.wildcard.wildcardSymbol;peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length){return peg$result}else{if(peg$result!==peg$FAILED&&peg$currPos<input.length){peg$fail({type:"end",description:"end of input"})}throw peg$buildException(null,peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}}return{SyntaxError:peg$SyntaxError,parse:peg$parse}}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var ast=_interopRequireWildcard(__webpack_require__(106));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(children){return{arguments:children}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var children=node.arguments||[];return{bool:{filter:children.map((function(child){return ast.toElasticsearchQuery(child,indexPattern,config,context)}))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var ast=_interopRequireWildcard(__webpack_require__(106));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(children){return{arguments:children}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var children=node.arguments||[];return{bool:{should:children.map((function(child){return ast.toElasticsearchQuery(child,indexPattern,config,context)})),minimum_should_match:1}}}},function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var ast=_interopRequireWildcard(__webpack_require__(106));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(child){return{arguments:[child]}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _node$arguments=_slicedToArray(node.arguments,1),argument=_node$arguments[0];return{bool:{must_not:ast.toElasticsearchQuery(argument,indexPattern,config,context)}}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=_interopRequireDefault(__webpack_require__(0));var _node_types=__webpack_require__(117);var ast=_interopRequireWildcard(__webpack_require__(106));var _filters=__webpack_require__(104);var _get_fields=__webpack_require__(160);var _utils=__webpack_require__(162);var _get_full_field_name_node=__webpack_require__(213);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function buildNodeParams(fieldName,params){var paramsToMap=_lodash.default.pick(params,"gt","lt","gte","lte","format");var fieldNameArg=typeof fieldName==="string"?ast.fromLiteralExpression(fieldName):_node_types.nodeTypes.literal.buildNode(fieldName);var args=_lodash.default.map(paramsToMap,(function(value,key){return _node_types.nodeTypes.namedArg.buildNode(key,value)}));return{arguments:[fieldNameArg].concat(_toConsumableArray(args))}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _node$arguments=_toArray(node.arguments),fieldNameArg=_node$arguments[0],args=_node$arguments.slice(1);var fullFieldNameArg=(0,_get_full_field_name_node.getFullFieldNameNode)(fieldNameArg,indexPattern,(context===null||context===void 0?void 0:context.nested)?context.nested.path:undefined);var fields=indexPattern?(0,_get_fields.getFields)(fullFieldNameArg,indexPattern):[];var namedArgs=extractArguments(args);var queryParams=_lodash.default.mapValues(namedArgs,(function(arg){return ast.toElasticsearchQuery(arg)}));if(fields&&fields.length===0){fields.push({name:ast.toElasticsearchQuery(fullFieldNameArg),scripted:false,type:""})}var queries=fields.map((function(field){var wrapWithNestedQuery=function wrapWithNestedQuery(query){if(!(fullFieldNameArg.type==="wildcard")||!_lodash.default.get(field,"subType.nested")||context.nested){return query}else{return{nested:{path:field.subType.nested.path,query:query,score_mode:"none"}}}};if(field.scripted){return{script:(0,_filters.getRangeScript)(field,queryParams)}}else if(field.type==="date"){var timeZoneParam=config.dateFormatTZ?{time_zone:(0,_utils.getTimeZoneFromSettings)(config.dateFormatTZ)}:{};return wrapWithNestedQuery({range:_defineProperty({},field.name,_objectSpread({},queryParams,{},timeZoneParam))})}return wrapWithNestedQuery({range:_defineProperty({},field.name,queryParams)})}));return{bool:{should:queries,minimum_should_match:1}}}function extractArguments(args){if(args.gt&&args.gte||args.lt&&args.lte){throw new Error("range ends cannot be both inclusive and exclusive")}var unnamedArgOrder=["gte","lte","format"];return args.reduce((function(acc,arg,index){if(arg.type==="namedArg"){acc[arg.name]=arg.value}else{acc[unnamedArgOrder[index]]=arg}return acc}),{})}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=__webpack_require__(0);var literal=_interopRequireWildcard(__webpack_require__(124));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(fieldName){return{arguments:[literal.buildNode(fieldName)]}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _node$arguments=_slicedToArray(node.arguments,1),fieldNameArg=_node$arguments[0];var fullFieldNameArg=_objectSpread({},fieldNameArg,{value:(context===null||context===void 0?void 0:context.nested)?"".concat(context.nested.path,".").concat(fieldNameArg.value):fieldNameArg.value});var fieldName=literal.toElasticsearchQuery(fullFieldNameArg);var field=(0,_lodash.get)(indexPattern,"fields",[]).find((function(fld){return fld.name===fieldName}));if(field&&field.scripted){throw new Error("Exists query does not support scripted fields")}return{exists:{field:fieldName}}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=_interopRequireDefault(__webpack_require__(0));var _node_types=__webpack_require__(117);var ast=_interopRequireWildcard(__webpack_require__(106));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function buildNodeParams(fieldName,params){params=_lodash.default.pick(params,"topLeft","bottomRight");var fieldNameArg=_node_types.nodeTypes.literal.buildNode(fieldName);var args=_lodash.default.map(params,(function(value,key){var latLon="".concat(value.lat,", ").concat(value.lon);return _node_types.nodeTypes.namedArg.buildNode(key,latLon)}));return{arguments:[fieldNameArg].concat(_toConsumableArray(args))}}function toElasticsearchQuery(node,indexPattern){var _geo_bounding_box;var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _ref;var _node$arguments=_toArray(node.arguments),fieldNameArg=_node$arguments[0],args=_node$arguments.slice(1);var fullFieldNameArg=_objectSpread({},fieldNameArg,{value:(context===null||context===void 0?void 0:context.nested)?"".concat(context.nested.path,".").concat(fieldNameArg.value):fieldNameArg.value});var fieldName=_node_types.nodeTypes.literal.toElasticsearchQuery(fullFieldNameArg);var fieldList=(_ref=indexPattern===null||indexPattern===void 0?void 0:indexPattern.fields)!==null&&_ref!==void 0?_ref:[];var field=fieldList.find((function(fld){return fld.name===fieldName}));var queryParams=args.reduce((function(acc,arg){var snakeArgName=_lodash.default.snakeCase(arg.name);return _objectSpread({},acc,_defineProperty({},snakeArgName,ast.toElasticsearchQuery(arg)))}),{});if(field===null||field===void 0?void 0:field.scripted){throw new Error("Geo bounding box query does not support scripted fields")}return{geo_bounding_box:(_geo_bounding_box={},_defineProperty(_geo_bounding_box,fieldName,queryParams),_defineProperty(_geo_bounding_box,"ignore_unmapped",true),_geo_bounding_box)}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _node_types=__webpack_require__(117);var ast=_interopRequireWildcard(__webpack_require__(106));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(fieldName,points){var fieldNameArg=_node_types.nodeTypes.literal.buildNode(fieldName);var args=points.map((function(point){var latLon="".concat(point.lat,", ").concat(point.lon);return _node_types.nodeTypes.literal.buildNode(latLon)}));return{arguments:[fieldNameArg].concat(_toConsumableArray(args))}}function toElasticsearchQuery(node,indexPattern){var _geo_polygon;var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _ref;var _node$arguments=_toArray(node.arguments),fieldNameArg=_node$arguments[0],points=_node$arguments.slice(1);var fullFieldNameArg=_objectSpread({},fieldNameArg,{value:(context===null||context===void 0?void 0:context.nested)?"".concat(context.nested.path,".").concat(fieldNameArg.value):fieldNameArg.value});var fieldName=_node_types.nodeTypes.literal.toElasticsearchQuery(fullFieldNameArg);var fieldList=(_ref=indexPattern===null||indexPattern===void 0?void 0:indexPattern.fields)!==null&&_ref!==void 0?_ref:[];var field=fieldList.find((function(fld){return fld.name===fieldName}));var queryParams={points:points.map((function(point){return ast.toElasticsearchQuery(point,indexPattern,config,context)}))};if(field===null||field===void 0?void 0:field.scripted){throw new Error("Geo polygon query does not support scripted fields")}return{geo_polygon:(_geo_polygon={},_defineProperty(_geo_polygon,fieldName,queryParams),_defineProperty(_geo_polygon,"ignore_unmapped",true),_geo_polygon)}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var ast=_interopRequireWildcard(__webpack_require__(106));var literal=_interopRequireWildcard(__webpack_require__(124));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(path,child){var pathNode=typeof path==="string"?ast.fromLiteralExpression(path):literal.buildNode(path);return{arguments:[pathNode,child]}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _context$nested;var _node$arguments=_slicedToArray(node.arguments,2),path=_node$arguments[0],child=_node$arguments[1];var stringPath=ast.toElasticsearchQuery(path);var fullPath=(context===null||context===void 0?void 0:(_context$nested=context.nested)===null||_context$nested===void 0?void 0:_context$nested.path)?"".concat(context.nested.path,".").concat(stringPath):stringPath;return{nested:{path:fullPath,query:ast.toElasticsearchQuery(child,indexPattern,config,_objectSpread({},context,{nested:{path:fullPath}})),score_mode:"none"}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNode=buildNode;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=_interopRequireDefault(__webpack_require__(0));var ast=_interopRequireWildcard(__webpack_require__(106));var _node_types=__webpack_require__(117);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function buildNode(name,value){var argumentNode=_lodash.default.get(value,"type")==="literal"?value:_node_types.nodeTypes.literal.buildNode(value);return{type:"namedArg",name:name,value:argumentNode}}function toElasticsearchQuery(node){return ast.toElasticsearchQuery(node.value)}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"nodeTypes",{enumerable:true,get:function get(){return _node_types.nodeTypes}});var _node_types=__webpack_require__(117)},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.migrateFilter=migrateFilter;var _lodash=__webpack_require__(0);var _filters=__webpack_require__(104);function isDeprecatedMatchPhraseFilter(filter){var fieldName=filter.query&&filter.query.match&&Object.keys(filter.query.match)[0];return Boolean(fieldName&&(0,_lodash.get)(filter,["query","match",fieldName,"type"])==="phrase")}function migrateFilter(filter,indexPattern){if(isDeprecatedMatchPhraseFilter(filter)){var fieldName=Object.keys(filter.query.match)[0];var params=(0,_lodash.get)(filter,["query","match",fieldName]);if(indexPattern){var field=indexPattern.fields.find((function(f){return f.name===fieldName}));if(field){params.query=(0,_filters.getConvertedValueForField)(field,params.query)}}return _objectSpread({},filter,{query:{match_phrase:_defineProperty({},fieldName,(0,_lodash.omit)(params,"type"))}})}return filter}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterMatchesIndex=filterMatchesIndex;function filterMatchesIndex(filter,indexPattern){var _filter$meta;if(!((_filter$meta=filter.meta)===null||_filter$meta===void 0?void 0:_filter$meta.key)||!indexPattern){return true}return indexPattern.fields.some((function(field){return field.name===filter.meta.key}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.handleNestedFilter=void 0;var _filters=__webpack_require__(104);var handleNestedFilter=function handleNestedFilter(filter,indexPattern){if(!indexPattern)return filter;var fieldName=(0,_filters.getFilterField)(filter);if(!fieldName){return filter}var field=indexPattern.fields.find((function(indexPatternField){return indexPatternField.name===fieldName}));if(!field||!field.subType||!field.subType.nested||!field.subType.nested.path){return filter}var query=(0,_filters.cleanFilter)(filter);return{meta:filter.meta,nested:{path:field.subType.nested.path,query:query.query||query}}};exports.handleNestedFilter=handleNestedFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildQueryFromLucene=buildQueryFromLucene;var _decorate_query=__webpack_require__(215);var _lucene_string_to_dsl=__webpack_require__(216);function buildQueryFromLucene(queries,queryStringOptions,dateFormatTZ){var combinedQueries=(queries||[]).map((function(query){var queryDsl=(0,_lucene_string_to_dsl.luceneStringToDsl)(query.query);return(0,_decorate_query.decorateQuery)(queryDsl,queryStringOptions,dateFormatTZ)}));return{must:combinedQueries,filter:[],should:[],must_not:[]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isEsQueryString=void 0;var _lodash=__webpack_require__(0);var isEsQueryString=function isEsQueryString(query){return(0,_lodash.has)(query,"query_string.query")};exports.isEsQueryString=isEsQueryString},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEsQueryConfig=getEsQueryConfig;function getEsQueryConfig(config){var allowLeadingWildcards=config.get("query:allowLeadingWildcards");var queryStringOptions=config.get("query:queryString:options");var ignoreFilterIfFieldNotInIndex=config.get("courier:ignoreFilterIfFieldNotInIndex");var dateFormatTZ=config.get("dateFormat:tz");return{allowLeadingWildcards:allowLeadingWildcards,queryStringOptions:queryStringOptions,ignoreFilterIfFieldNotInIndex:ignoreFilterIfFieldNotInIndex,dateFormatTZ:dateFormatTZ}}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty2(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldFormatsRegistry=void 0;var _lodash=__webpack_require__(0);var _types=__webpack_require__(98);var _base_formatters=__webpack_require__(219);var _field_format=__webpack_require__(99);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FieldFormatsRegistry=function(){function FieldFormatsRegistry(){var _this=this;_classCallCheck(this,FieldFormatsRegistry);_defineProperty(this,"fieldFormats",new Map);_defineProperty(this,"defaultMap",{});_defineProperty(this,"metaParamsOptions",{});_defineProperty(this,"getConfig",void 0);_defineProperty(this,"deserialize",(function(){return new(_field_format.FieldFormat.from(_lodash.identity))}));_defineProperty(this,"getDefaultConfig",(function(fieldType,esTypes){var type=_this.getDefaultTypeName(fieldType,esTypes);return _this.defaultMap&&_this.defaultMap[type]||{id:_types.FIELD_FORMAT_IDS.STRING,params:{}}}));_defineProperty(this,"getType",(function(formatId){var fieldFormat=_this.fieldFormats.get(formatId);if(fieldFormat){var decoratedFieldFormat=_this.fieldFormatMetaParamsDecorator(fieldFormat);if(decoratedFieldFormat){return decoratedFieldFormat}}return undefined}));_defineProperty(this,"getTypeWithoutMetaParams",(function(formatId){return _this.fieldFormats.get(formatId)}));_defineProperty(this,"getDefaultType",(function(fieldType,esTypes){var config=_this.getDefaultConfig(fieldType,esTypes);return _this.getType(config.id)}));_defineProperty(this,"getTypeNameByEsTypes",(function(esTypes){if(!Array.isArray(esTypes)){return undefined}return esTypes.find((function(type){return _this.defaultMap[type]&&_this.defaultMap[type].es}))}));_defineProperty(this,"getDefaultTypeName",(function(fieldType,esTypes){var esType=_this.getTypeNameByEsTypes(esTypes);return esType||fieldType}));_defineProperty(this,"getInstance",(0,_lodash.memoize)((function(formatId){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var ConcreteFieldFormat=_this.getType(formatId);if(!ConcreteFieldFormat){throw new Error("Field Format '".concat(formatId,"' not found!"))}return new ConcreteFieldFormat(params,_this.getConfig)}),(function(formatId,params){return JSON.stringify(_objectSpread({formatId:formatId},params))})));_defineProperty(this,"getDefaultInstance",(0,_lodash.memoize)(this.getDefaultInstancePlain,this.getDefaultInstanceCacheResolver));_defineProperty(this,"fieldFormatMetaParamsDecorator",(function(fieldFormat){var getMetaParams=function getMetaParams(customParams){return _this.buildMetaParams(customParams)};if(fieldFormat){var _class,_temp;return _temp=_class=function(_fieldFormat){_inherits(DecoratedFieldFormat,_fieldFormat);function DecoratedFieldFormat(){var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var getConfig=arguments.length>1?arguments[1]:undefined;_classCallCheck(this,DecoratedFieldFormat);return _possibleConstructorReturn(this,_getPrototypeOf(DecoratedFieldFormat).call(this,getMetaParams(params),getConfig))}return DecoratedFieldFormat}(fieldFormat),_defineProperty(_class,"id",fieldFormat.id),_defineProperty(_class,"fieldType",fieldFormat.fieldType),_temp}return undefined}));_defineProperty(this,"buildMetaParams",(function(customParams){return _objectSpread({},_this.metaParamsOptions,{},customParams)}))}_createClass(FieldFormatsRegistry,[{key:"init",value:function init(getConfig){var metaParamsOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var defaultFieldConverters=arguments.length>2&&arguments[2]!==undefined?arguments[2]:_base_formatters.baseFormatters;var defaultTypeMap=getConfig("format:defaultTypeMap");this.register(defaultFieldConverters);this.parseDefaultTypeMap(defaultTypeMap);this.getConfig=getConfig;this.metaParamsOptions=metaParamsOptions}},{key:"getDefaultInstancePlain",value:function getDefaultInstancePlain(fieldType,esTypes){var conf=this.getDefaultConfig(fieldType,esTypes);return this.getInstance(conf.id,conf.params)}},{key:"getDefaultInstanceCacheResolver",value:function getDefaultInstanceCacheResolver(fieldType,esTypes){return Array.isArray(esTypes)&&esTypes.indexOf(fieldType)===-1?[fieldType].concat(_toConsumableArray(esTypes)).join("-"):fieldType}},{key:"getByFieldType",value:function getByFieldType(fieldType){var _this2=this;return _toConsumableArray(this.fieldFormats.values()).filter((function(format){return format&&format.fieldType.indexOf(fieldType)!==-1})).map((function(format){return _this2.fieldFormatMetaParamsDecorator(format)}))}},{key:"parseDefaultTypeMap",value:function parseDefaultTypeMap(value){this.defaultMap=value;(0,_lodash.forOwn)(this,(function(fn){if((0,_lodash.isFunction)(fn)&&fn.cache){fn.cache=new _lodash.memoize.Cache}}))}},{key:"register",value:function register(fieldFormats){var _this3=this;fieldFormats.forEach((function(fieldFormat){return _this3.fieldFormats.set(fieldFormat.id,fieldFormat)}))}}]);return FieldFormatsRegistry}();exports.FieldFormatsRegistry=FieldFormatsRegistry},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.createCustomFieldFormat=void 0;var _field_format=__webpack_require__(99);var _types=__webpack_require__(98);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createCustomFieldFormat=function createCustomFieldFormat(convert){var _class,_temp;return _temp=_class=function(_field_format$FieldFo){_inherits(CustomFieldFormat,_field_format$FieldFo);function CustomFieldFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,CustomFieldFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CustomFieldFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",convert);return _this}return CustomFieldFormat}(_field_format.FieldFormat),_defineProperty(_class,"id",_types.FIELD_FORMAT_IDS.CUSTOM),_temp};exports.createCustomFieldFormat=createCustomFieldFormat},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setup=exports.TEXT_CONTEXT_TYPE=void 0;var _lodash=__webpack_require__(0);var _utils=__webpack_require__(118);var TEXT_CONTEXT_TYPE="text";exports.TEXT_CONTEXT_TYPE=TEXT_CONTEXT_TYPE;var setup=function setup(format){var convert=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_utils.asPrettyString;var recurse=function recurse(value){if(!value||!(0,_lodash.isFunction)(value.map)){return convert.call(format,value)}return JSON.stringify(value.map(recurse))};return recurse};exports.setup=setup},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.asPrettyString=asPrettyString;function asPrettyString(val){if(val===null||val===undefined)return" - ";switch(_typeof(val)){case"string":return val;case"object":return JSON.stringify(val,null,"  ");default:return""+val}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getHighlightHtml",{enumerable:true,get:function get(){return _highlight_html.getHighlightHtml}});Object.defineProperty(exports,"getHighlightRequest",{enumerable:true,get:function get(){return _highlight_request.getHighlightRequest}});var _highlight_html=__webpack_require__(405);var _highlight_request=__webpack_require__(407)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getHighlightHtml=getHighlightHtml;var _lodash=_interopRequireDefault(__webpack_require__(0));var _highlight_tags=__webpack_require__(218);var _html_tags=__webpack_require__(406);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getHighlightHtml(fieldValue,highlights){var highlightHtml=_typeof(fieldValue)==="object"?JSON.stringify(fieldValue):fieldValue;_lodash.default.each(highlights,(function(highlight){var escapedHighlight=_lodash.default.escape(highlight);var untaggedHighlight=escapedHighlight.split(_highlight_tags.highlightTags.pre).join("").split(_highlight_tags.highlightTags.post).join("");var taggedHighlight=escapedHighlight.split(_highlight_tags.highlightTags.pre).join(_html_tags.htmlTags.pre).split(_highlight_tags.highlightTags.post).join(_html_tags.htmlTags.post);highlightHtml=highlightHtml.split(untaggedHighlight).join(taggedHighlight)}));return highlightHtml}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.htmlTags=void 0;var htmlTags={pre:"<mark>",post:"</mark>"};exports.htmlTags=htmlTags},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getHighlightRequest=getHighlightRequest;var _highlight_tags=__webpack_require__(218);var FRAGMENT_SIZE=Math.pow(2,31)-1;function getHighlightRequest(query,shouldHighlight){if(!shouldHighlight)return;return{pre_tags:[_highlight_tags.highlightTags.pre],post_tags:[_highlight_tags.highlightTags.post],fields:{"*":{}},fragment_size:FRAGMENT_SIZE}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.serializeFieldFormat=void 0;var serializeFieldFormat=function serializeFieldFormat(agg){var format=agg.params.field?agg.params.field.format.toJSON():{};var formats={date_range:function date_range(){return{id:"date_range",params:format}},ip_range:function ip_range(){return{id:"ip_range",params:format}},percentile_ranks:function percentile_ranks(){return{id:"percent"}},count:function count(){return{id:"number"}},cardinality:function cardinality(){return{id:"number"}},date_histogram:function date_histogram(){return{id:"date",params:{pattern:agg.buckets.getScaledDateFormat()}}},terms:function terms(){return{id:"terms",params:_objectSpread({id:format.id,otherBucketLabel:agg.params.otherBucketLabel,missingBucketLabel:agg.params.missingBucketLabel},format.params)}},range:function range(){return{id:"range",params:_objectSpread({id:format.id},format.params)}}};return formats[agg.type.name]?formats[agg.type.name]():format};exports.serializeFieldFormat=serializeFieldFormat},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setup=exports.HTML_CONTEXT_TYPE=void 0;var _lodash=__webpack_require__(0);var _utils=__webpack_require__(118);var HTML_CONTEXT_TYPE="html";exports.HTML_CONTEXT_TYPE=HTML_CONTEXT_TYPE;var getConvertFn=function getConvertFn(format,convert){var fallbackHtml=function fallbackHtml(value){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var field=options.field,hit=options.hit;var formatted=(0,_lodash.escape)(format.convert(value,"text"));return!field||!hit||!hit.highlight||!hit.highlight[field.name]?formatted:(0,_utils.getHighlightHtml)(formatted,hit.highlight[field.name])};return convert||fallbackHtml};var setup=function setup(format,htmlContextTypeConvert){var convert=getConvertFn(format,htmlContextTypeConvert);var recurse=function recurse(value){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(value==null){return(0,_utils.asPrettyString)(value)}if(!value||!(0,_lodash.isFunction)(value.map)){return convert.call(format,value,options)}var subValues=value.map((function(v){return recurse(v,options)}));var useMultiLine=subValues.some((function(sub){return sub.indexOf("\n")>-1}));return subValues.join(","+(useMultiLine?"\n":" "))};var wrap=function wrap(value,options){return"<span ng-non-bindable>".concat(recurse(value,options),"</span>")};return wrap};exports.setup=setup},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.UrlFormat=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(0);var _utils=__webpack_require__(118);var _types=__webpack_require__(100);var _field_format=__webpack_require__(99);var _types2=__webpack_require__(98);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var templateMatchRE=/{{([\s\S]+?)}}/g;var whitelistUrlSchemes=["http://","https://"];var URL_TYPES=[{kind:"a",text:_i18n.i18n.translate("data.fieldFormats.url.types.link",{defaultMessage:"Link"})},{kind:"img",text:_i18n.i18n.translate("data.fieldFormats.url.types.img",{defaultMessage:"Image"})},{kind:"audio",text:_i18n.i18n.translate("data.fieldFormats.url.types.audio",{defaultMessage:"Audio"})}];var DEFAULT_URL_TYPE="a";var UrlFormat=function(_field_format$FieldFo){_inherits(UrlFormat,_field_format$FieldFo);function UrlFormat(params){var _this;_classCallCheck(this,UrlFormat);_this=_possibleConstructorReturn(this,_getPrototypeOf(UrlFormat).call(this,params));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(value){return _this.formatLabel(value)}));_defineProperty(_assertThisInitialized(_this),"htmlConvert",(function(rawValue){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var field=options.field,hit=options.hit;var parsedUrl=_this._params.parsedUrl;var _ref=parsedUrl||{},basePath=_ref.basePath,pathname=_ref.pathname,origin=_ref.origin;var url=(0,_lodash.escape)(_this.formatUrl(rawValue));var label=(0,_lodash.escape)(_this.formatLabel(rawValue,url));switch(_this.param("type")){case"audio":return'<audio controls preload="none" src="'.concat(url,'">');case"img":var imageLabel=label===url?"A dynamically-specified image located at ".concat(url):label;return _this.generateImgHtml(url,imageLabel);default:var inWhitelist=whitelistUrlSchemes.some((function(scheme){return url.indexOf(scheme)===0}));if(!inWhitelist&&!parsedUrl){return url}var prefix="";if(!inWhitelist){if(url[0]==="#"){prefix="".concat(origin).concat(pathname)}else if(url.indexOf(basePath||"/")===0){prefix="".concat(origin)}else{var prefixEnd=url[0]==="/"?"":"/";prefix="".concat(origin).concat(basePath||"","/app").concat(prefixEnd)}}var linkLabel;if(hit&&hit.highlight&&hit.highlight[field.name]){linkLabel=(0,_utils.getHighlightHtml)(label,hit.highlight[field.name])}else{linkLabel=label}var linkTarget=_this.param("openLinkInCurrentTab")?"_self":"_blank";return'<a href="'.concat(prefix).concat(url,'" target="').concat(linkTarget,'" rel="noopener noreferrer">').concat(linkLabel,"</a>")}}));_this.compileTemplate=(0,_lodash.memoize)(_this.compileTemplate);return _this}_createClass(UrlFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{type:DEFAULT_URL_TYPE,urlTemplate:null,labelTemplate:null,width:null,height:null}}},{key:"formatLabel",value:function formatLabel(value,url){var template=this.param("labelTemplate");if(url==null)url=this.formatUrl(value);if(!template)return url;return this.compileTemplate(template)({value:value,url:url})}},{key:"formatUrl",value:function formatUrl(value){var template=this.param("urlTemplate");if(!template)return value;return this.compileTemplate(template)({value:encodeURIComponent(value),rawValue:value})}},{key:"compileTemplate",value:function compileTemplate(template){var parts=template.split(templateMatchRE).map((function(part,i){return i%2?part.trim():part}));return function(locals){var output="";var i=-1;while(++i<parts.length){if(i%2){if(locals.hasOwnProperty(parts[i])){var local=locals[parts[i]];output+=local==null?"":local}}else{output+=parts[i]}}return output}}},{key:"generateImgHtml",value:function generateImgHtml(url,imageLabel){var isValidWidth=!isNaN(parseInt(this.param("width"),10));var isValidHeight=!isNaN(parseInt(this.param("height"),10));var maxWidth=isValidWidth?"".concat(this.param("width"),"px"):"none";var maxHeight=isValidHeight?"".concat(this.param("height"),"px"):"none";return'<img src="'.concat(url,'" alt="').concat(imageLabel,'" style="width:auto; height:auto; max-width:').concat(maxWidth,"; max-height:").concat(maxHeight,';">')}}]);return UrlFormat}(_field_format.FieldFormat);exports.UrlFormat=UrlFormat;_defineProperty(UrlFormat,"id",_types2.FIELD_FORMAT_IDS.URL);_defineProperty(UrlFormat,"title",_i18n.i18n.translate("data.fieldFormats.url.title",{defaultMessage:"Url"}));_defineProperty(UrlFormat,"fieldType",[_types.KBN_FIELD_TYPES.NUMBER,_types.KBN_FIELD_TYPES.BOOLEAN,_types.KBN_FIELD_TYPES.DATE,_types.KBN_FIELD_TYPES.IP,_types.KBN_FIELD_TYPES.STRING,_types.KBN_FIELD_TYPES.MURMUR3,_types.KBN_FIELD_TYPES.UNKNOWN,_types.KBN_FIELD_TYPES.CONFLICT]);_defineProperty(UrlFormat,"urlTypes",URL_TYPES)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.BytesFormat=void 0;var _i18n=__webpack_require__(1);var _numeral=__webpack_require__(164);var _types=__webpack_require__(98);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BytesFormat=function(_numeral$NumeralForma){_inherits(BytesFormat,_numeral$NumeralForma);function BytesFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,BytesFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(BytesFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"id",BytesFormat.id);_defineProperty(_assertThisInitialized(_this),"title",BytesFormat.title);_defineProperty(_assertThisInitialized(_this),"allowsNumericalAggregations",true);return _this}return BytesFormat}(_numeral.NumeralFormat);exports.BytesFormat=BytesFormat;_defineProperty(BytesFormat,"id",_types.FIELD_FORMAT_IDS.BYTES);_defineProperty(BytesFormat,"title",_i18n.i18n.translate("data.fieldFormats.bytes.title",{defaultMessage:"Bytes"}))},,,function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.analysePatternForFract=analysePatternForFract;exports.formatWithNanos=formatWithNanos;exports.DateNanosFormat=void 0;var _i18n=__webpack_require__(1);var _moment=_interopRequireDefault(__webpack_require__(84));var _lodash=__webpack_require__(0);var _types=__webpack_require__(100);var _field_format=__webpack_require__(99);var _types2=__webpack_require__(98);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function analysePatternForFract(pattern){var fracSecMatch=pattern.match("S+");var fracSecMatchStr=fracSecMatch?fracSecMatch[0]:"";return{length:fracSecMatchStr.length,patternNanos:fracSecMatchStr,pattern:pattern,patternEscaped:fracSecMatchStr?pattern.replace(fracSecMatch,"[".concat(fracSecMatch,"]")):""}}function formatWithNanos(dateMomentObj,valRaw,fracPatternObj){if(fracPatternObj.length<=3){return dateMomentObj.format(fracPatternObj.pattern)}else{var valFormatted=dateMomentObj.format(fracPatternObj.patternEscaped);var valNanos=valRaw.substr(20,valRaw.length-21).padEnd(9,"0").substr(0,fracPatternObj.patternNanos.length);return valFormatted.replace(fracPatternObj.patternNanos,valNanos)}}var DateNanosFormat=function(_field_format$FieldFo){_inherits(DateNanosFormat,_field_format$FieldFo);function DateNanosFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,DateNanosFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DateNanosFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"memoizedConverter",_lodash.noop);_defineProperty(_assertThisInitialized(_this),"memoizedPattern","");_defineProperty(_assertThisInitialized(_this),"timeZone","");_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var pattern=_this.param("pattern");var timezone=_this.param("timezone");var fractPattern=analysePatternForFract(pattern);var fallbackPattern=_this.param("patternFallback");var timezoneChanged=_this.timeZone!==timezone;var datePatternChanged=_this.memoizedPattern!==pattern;if(timezoneChanged||datePatternChanged){_this.timeZone=timezone;_this.memoizedPattern=pattern;_this.memoizedConverter=(0,_lodash.memoize)((function converter(value){if(value===null||value===undefined){return"-"}var date=(0,_moment.default)(value);if(typeof value!=="string"&&date.isValid()){return date.format(fallbackPattern)}else if(date.isValid()){return formatWithNanos(date,value,fractPattern)}else{return value}}))}return _this.memoizedConverter(val)}));return _this}_createClass(DateNanosFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{pattern:this.getConfig("dateNanosFormat"),fallbackPattern:this.getConfig("dateFormat"),timezone:this.getConfig("dateFormat:tz")}}}]);return DateNanosFormat}(_field_format.FieldFormat);exports.DateNanosFormat=DateNanosFormat;_defineProperty(DateNanosFormat,"id",_types2.FIELD_FORMAT_IDS.DATE_NANOS);_defineProperty(DateNanosFormat,"title",_i18n.i18n.translate("data.fieldFormats.date_nanos.title",{defaultMessage:"Date nanos"}));_defineProperty(DateNanosFormat,"fieldType",_types.KBN_FIELD_TYPES.DATE)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.RelativeDateFormat=void 0;var _i18n=__webpack_require__(1);var _moment=_interopRequireDefault(__webpack_require__(84));var _types=__webpack_require__(100);var _field_format=__webpack_require__(99);var _types2=__webpack_require__(98);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RelativeDateFormat=function(_field_format$FieldFo){_inherits(RelativeDateFormat,_field_format$FieldFo);function RelativeDateFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,RelativeDateFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RelativeDateFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){if(val===null||val===undefined){return"-"}var date=(0,_moment.default)(val);if(date.isValid()){return date.fromNow()}else{return val}}));return _this}return RelativeDateFormat}(_field_format.FieldFormat);exports.RelativeDateFormat=RelativeDateFormat;_defineProperty(RelativeDateFormat,"id",_types2.FIELD_FORMAT_IDS.RELATIVE_DATE);_defineProperty(RelativeDateFormat,"title",_i18n.i18n.translate("data.fieldFormats.relative_date.title",{defaultMessage:"Relative date"}));_defineProperty(RelativeDateFormat,"fieldType",_types.KBN_FIELD_TYPES.DATE)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty2(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.DurationFormat=void 0;var _i18n=__webpack_require__(1);var _moment=_interopRequireDefault(__webpack_require__(84));var _types=__webpack_require__(100);var _field_format=__webpack_require__(99);var _types2=__webpack_require__(98);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ratioToSeconds={picoseconds:1e-12,nanoseconds:1e-9,microseconds:1e-6};var HUMAN_FRIENDLY="humanize";var DEFAULT_OUTPUT_PRECISION=2;var DEFAULT_INPUT_FORMAT={text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.seconds",{defaultMessage:"Seconds"}),kind:"seconds"};var inputFormats=[{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.picoseconds",{defaultMessage:"Picoseconds"}),kind:"picoseconds"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.nanoseconds",{defaultMessage:"Nanoseconds"}),kind:"nanoseconds"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.microseconds",{defaultMessage:"Microseconds"}),kind:"microseconds"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.milliseconds",{defaultMessage:"Milliseconds"}),kind:"milliseconds"},_objectSpread({},DEFAULT_INPUT_FORMAT),{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.minutes",{defaultMessage:"Minutes"}),kind:"minutes"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.hours",{defaultMessage:"Hours"}),kind:"hours"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.days",{defaultMessage:"Days"}),kind:"days"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.weeks",{defaultMessage:"Weeks"}),kind:"weeks"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.months",{defaultMessage:"Months"}),kind:"months"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.years",{defaultMessage:"Years"}),kind:"years"}];var DEFAULT_OUTPUT_FORMAT={text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.humanize",{defaultMessage:"Human Readable"}),method:"humanize"};var outputFormats=[_objectSpread({},DEFAULT_OUTPUT_FORMAT),{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asMilliseconds",{defaultMessage:"Milliseconds"}),method:"asMilliseconds"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asSeconds",{defaultMessage:"Seconds"}),method:"asSeconds"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asMinutes",{defaultMessage:"Minutes"}),method:"asMinutes"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asHours",{defaultMessage:"Hours"}),method:"asHours"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asDays",{defaultMessage:"Days"}),method:"asDays"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asWeeks",{defaultMessage:"Weeks"}),method:"asWeeks"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asMonths",{defaultMessage:"Months"}),method:"asMonths"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asYears",{defaultMessage:"Years"}),method:"asYears"}];function parseInputAsDuration(val,inputFormat){var ratio=ratioToSeconds[inputFormat]||1;var kind=inputFormat in ratioToSeconds?"seconds":inputFormat;return _moment.default.duration(val*ratio,kind)}var DurationFormat=function(_field_format$FieldFo){_inherits(DurationFormat,_field_format$FieldFo);function DurationFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,DurationFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DurationFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"allowsNumericalAggregations",true);_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var inputFormat=_this.param("inputFormat");var outputFormat=_this.param("outputFormat");var outputPrecision=_this.param("outputPrecision");var human=_this.isHuman();var prefix=val<0&&human?_i18n.i18n.translate("data.fieldFormats.duration.negativeLabel",{defaultMessage:"minus"})+" ":"";var duration=parseInputAsDuration(val,inputFormat);var formatted=duration[outputFormat]();var precise=human?formatted:formatted.toFixed(outputPrecision);return prefix+precise}));return _this}_createClass(DurationFormat,[{key:"isHuman",value:function isHuman(){return this.param("outputFormat")===HUMAN_FRIENDLY}},{key:"getParamDefaults",value:function getParamDefaults(){return{inputFormat:DEFAULT_INPUT_FORMAT.kind,outputFormat:DEFAULT_OUTPUT_FORMAT.method,outputPrecision:DEFAULT_OUTPUT_PRECISION}}}]);return DurationFormat}(_field_format.FieldFormat);exports.DurationFormat=DurationFormat;_defineProperty(DurationFormat,"id",_types2.FIELD_FORMAT_IDS.DURATION);_defineProperty(DurationFormat,"title",_i18n.i18n.translate("data.fieldFormats.duration.title",{defaultMessage:"Duration"}));_defineProperty(DurationFormat,"fieldType",_types.KBN_FIELD_TYPES.NUMBER);_defineProperty(DurationFormat,"inputFormats",inputFormats);_defineProperty(DurationFormat,"outputFormats",outputFormats)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.IpFormat=void 0;var _i18n=__webpack_require__(1);var _types=__webpack_require__(100);var _field_format=__webpack_require__(99);var _types2=__webpack_require__(98);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IpFormat=function(_field_format$FieldFo){_inherits(IpFormat,_field_format$FieldFo);function IpFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,IpFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(IpFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){if(val===undefined||val===null)return"-";if(!isFinite(val))return val;return[val>>>24,val>>>16&255,val>>>8&255,val&255].join(".")}));return _this}return IpFormat}(_field_format.FieldFormat);exports.IpFormat=IpFormat;_defineProperty(IpFormat,"id",_types2.FIELD_FORMAT_IDS.IP);_defineProperty(IpFormat,"title",_i18n.i18n.translate("data.fieldFormats.ip.title",{defaultMessage:"IP address"}));_defineProperty(IpFormat,"fieldType",_types.KBN_FIELD_TYPES.IP)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.NumberFormat=void 0;var _i18n=__webpack_require__(1);var _numeral=__webpack_require__(164);var _types=__webpack_require__(98);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NumberFormat=function(_numeral$NumeralForma){_inherits(NumberFormat,_numeral$NumeralForma);function NumberFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,NumberFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(NumberFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"id",NumberFormat.id);_defineProperty(_assertThisInitialized(_this),"title",NumberFormat.title);_defineProperty(_assertThisInitialized(_this),"allowsNumericalAggregations",true);return _this}return NumberFormat}(_numeral.NumeralFormat);exports.NumberFormat=NumberFormat;_defineProperty(NumberFormat,"id",_types.FIELD_FORMAT_IDS.NUMBER);_defineProperty(NumberFormat,"title",_i18n.i18n.translate("data.fieldFormats.number.title",{defaultMessage:"Number"}))},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.PercentFormat=void 0;var _i18n=__webpack_require__(1);var _numeral=__webpack_require__(164);var _types=__webpack_require__(98);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PercentFormat=function(_numeral$NumeralForma){_inherits(PercentFormat,_numeral$NumeralForma);function PercentFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,PercentFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PercentFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"id",PercentFormat.id);_defineProperty(_assertThisInitialized(_this),"title",PercentFormat.title);_defineProperty(_assertThisInitialized(_this),"allowsNumericalAggregations",true);_defineProperty(_assertThisInitialized(_this),"getParamDefaults",(function(){return{pattern:_this.getConfig("format:percent:defaultPattern"),fractional:true}}));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var formatted=_get(_getPrototypeOf(PercentFormat.prototype),"getConvertedValue",_assertThisInitialized(_this)).call(_assertThisInitialized(_this),val);if(_this.param("fractional")){return formatted}return String(Number(formatted)/100)}));return _this}return PercentFormat}(_numeral.NumeralFormat);exports.PercentFormat=PercentFormat;_defineProperty(PercentFormat,"id",_types.FIELD_FORMAT_IDS.PERCENT);_defineProperty(PercentFormat,"title",_i18n.i18n.translate("data.fieldFormats.percent.title",{defaultMessage:"Percentage"}))},function(module,exports,__webpack_require__){"use strict";(function(Buffer){function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.StringFormat=void 0;var _i18n=__webpack_require__(1);var _utils=__webpack_require__(118);var _types=__webpack_require__(100);var _field_format=__webpack_require__(99);var _types2=__webpack_require__(98);var _utils2=__webpack_require__(125);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TRANSFORM_OPTIONS=[{kind:false,text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.none",{defaultMessage:"- None -"})},{kind:"lower",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.lower",{defaultMessage:"Lower Case"})},{kind:"upper",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.upper",{defaultMessage:"Upper Case"})},{kind:"title",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.title",{defaultMessage:"Title Case"})},{kind:"short",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.short",{defaultMessage:"Short Dots"})},{kind:"base64",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.base64",{defaultMessage:"Base64 Decode"})},{kind:"urlparam",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.url",{defaultMessage:"URL Param Decode"})}];var DEFAULT_TRANSFORM_OPTION=false;var StringFormat=function(_field_format$FieldFo){_inherits(StringFormat,_field_format$FieldFo);function StringFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,StringFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(StringFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){switch(_this.param("transform")){case"lower":return String(val).toLowerCase();case"upper":return String(val).toUpperCase();case"title":return _this.toTitleCase(val);case"short":return(0,_utils2.shortenDottedString)(val);case"base64":return _this.base64Decode(val);case"urlparam":return decodeURIComponent(val);default:return(0,_utils.asPrettyString)(val)}}));return _this}_createClass(StringFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{transform:DEFAULT_TRANSFORM_OPTION}}},{key:"base64Decode",value:function base64Decode(val){try{return Buffer.from(val,"base64").toString("utf8")}catch(e){return(0,_utils.asPrettyString)(val)}}},{key:"toTitleCase",value:function toTitleCase(val){return val.replace(/\w\S*/g,(function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()}))}}]);return StringFormat}(_field_format.FieldFormat);exports.StringFormat=StringFormat;_defineProperty(StringFormat,"id",_types2.FIELD_FORMAT_IDS.STRING);_defineProperty(StringFormat,"title",_i18n.i18n.translate("data.fieldFormats.string.title",{defaultMessage:"String"}));_defineProperty(StringFormat,"fieldType",[_types.KBN_FIELD_TYPES.NUMBER,_types.KBN_FIELD_TYPES.BOOLEAN,_types.KBN_FIELD_TYPES.DATE,_types.KBN_FIELD_TYPES.IP,_types.KBN_FIELD_TYPES.ATTACHMENT,_types.KBN_FIELD_TYPES.GEO_POINT,_types.KBN_FIELD_TYPES.GEO_SHAPE,_types.KBN_FIELD_TYPES.STRING,_types.KBN_FIELD_TYPES.MURMUR3,_types.KBN_FIELD_TYPES.UNKNOWN,_types.KBN_FIELD_TYPES.CONFLICT]);_defineProperty(StringFormat,"transformOptions",TRANSFORM_OPTIONS)}).call(this,__webpack_require__(421).Buffer)},,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shortenDottedString=shortenDottedString;var DOT_PREFIX_RE=/(.).+?\./g;function shortenDottedString(input){return typeof input!=="string"?input:input.replace(DOT_PREFIX_RE,"$1.")}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.toPromise=toPromise;exports.getCombinedSignal=getCombinedSignal;exports.AbortError=void 0;var AbortError=function(_Error){_inherits(AbortError,_Error);function AbortError(){var _this;var message=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"Aborted";_classCallCheck(this,AbortError);_this=_possibleConstructorReturn(this,_getPrototypeOf(AbortError).call(this,message));_this.message=message;_this.name="AbortError";return _this}return AbortError}(_wrapNativeSuper(Error));exports.AbortError=AbortError;function toPromise(signal){var shouldReject=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return new Promise((function(resolve,reject){var action=shouldReject?reject:resolve;if(signal.aborted)action();signal.addEventListener("abort",action)}))}function getCombinedSignal(signals){var promises=signals.map((function(signal){return toPromise(signal)}));var controller=new AbortController;Promise.race(promises).then((function(){return controller.abort()}));return controller.signal}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.SourceFormat=void 0;var _lodash=__webpack_require__(0);var _utils=__webpack_require__(125);var _types=__webpack_require__(100);var _field_format=__webpack_require__(99);var _types2=__webpack_require__(98);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function noWhiteSpace(html){var TAGS_WITH_WS=/>\s+</g;return html.replace(TAGS_WITH_WS,"><")}var templateHtml="\n  <dl class=\"source truncate-by-height\">\n    <% defPairs.forEach(function (def) { %>\n      <dt><%- def[0] %>:</dt>\n      <dd><%= def[1] %></dd>\n      <%= ' ' %>\n    <% }); %>\n  </dl>";var doTemplate=(0,_lodash.template)(noWhiteSpace(templateHtml));var SourceFormat=function(_field_format$FieldFo){_inherits(SourceFormat,_field_format$FieldFo);function SourceFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,SourceFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SourceFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(value){return JSON.stringify(value)}));_defineProperty(_assertThisInitialized(_this),"htmlConvert",(function(value){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var field=options.field,hit=options.hit;if(!field){var converter=_this.getConverterFor("text");return(0,_lodash.escape)(converter(value))}var highlights=hit&&hit.highlight||{};var formatted=field.indexPattern.formatHit(hit);var highlightPairs=[];var sourcePairs=[];var isShortDots=_this.getConfig("shortDots:enable");(0,_lodash.keys)(formatted).forEach((function(key){var pairs=highlights[key]?highlightPairs:sourcePairs;var newField=isShortDots?(0,_utils.shortenDottedString)(key):key;var val=formatted[key];pairs.push([newField,val])}),[]);return doTemplate({defPairs:highlightPairs.concat(sourcePairs)})}));return _this}return SourceFormat}(_field_format.FieldFormat);exports.SourceFormat=SourceFormat;_defineProperty(SourceFormat,"id",_types2.FIELD_FORMAT_IDS._SOURCE);_defineProperty(SourceFormat,"title","_source");_defineProperty(SourceFormat,"fieldType",_types.KBN_FIELD_TYPES._SOURCE)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.ColorFormat=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(0);var _types=__webpack_require__(100);var _field_format=__webpack_require__(99);var _types2=__webpack_require__(98);var _utils=__webpack_require__(118);var _color_default=__webpack_require__(221);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var convertTemplate=(0,_lodash.template)('<span style="<%- style %>"><%- val %></span>');var ColorFormat=function(_field_format$FieldFo){_inherits(ColorFormat,_field_format$FieldFo);function ColorFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,ColorFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ColorFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"htmlConvert",(function(val){var color=_this.findColorRuleForVal(val);if(!color)return(0,_lodash.escape)((0,_utils.asPrettyString)(val));var style="";if(color.text)style+="color: ".concat(color.text,";");if(color.background)style+="background-color: ".concat(color.background,";");return convertTemplate({val:val,style:style})}));return _this}_createClass(ColorFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{fieldType:null,colors:[(0,_lodash.cloneDeep)(_color_default.DEFAULT_CONVERTER_COLOR)]}}},{key:"findColorRuleForVal",value:function findColorRuleForVal(val){switch(this.param("fieldType")){case"string":return(0,_lodash.findLast)(this.param("colors"),(function(colorParam){return new RegExp(colorParam.regex).test(val)}));case"number":return(0,_lodash.findLast)(this.param("colors"),(function(_ref){var range=_ref.range;if(!range)return;var _range$split=range.split(":"),_range$split2=_slicedToArray(_range$split,2),start=_range$split2[0],end=_range$split2[1];return val>=Number(start)&&val<=Number(end)}));default:return null}}}]);return ColorFormat}(_field_format.FieldFormat);exports.ColorFormat=ColorFormat;_defineProperty(ColorFormat,"id",_types2.FIELD_FORMAT_IDS.COLOR);_defineProperty(ColorFormat,"title",_i18n.i18n.translate("data.fieldFormats.color.title",{defaultMessage:"Color"}));_defineProperty(ColorFormat,"fieldType",[_types.KBN_FIELD_TYPES.NUMBER,_types.KBN_FIELD_TYPES.STRING])},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.TruncateFormat=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(0);var _types=__webpack_require__(100);var _field_format=__webpack_require__(99);var _types2=__webpack_require__(98);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var omission="...";var TruncateFormat=function(_field_format$FieldFo){_inherits(TruncateFormat,_field_format$FieldFo);function TruncateFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,TruncateFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TruncateFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var length=_this.param("fieldLength");if(length>0){return(0,_lodash.trunc)(val,{length:length+omission.length,omission:omission})}return val}));return _this}return TruncateFormat}(_field_format.FieldFormat);exports.TruncateFormat=TruncateFormat;_defineProperty(TruncateFormat,"id",_types2.FIELD_FORMAT_IDS.TRUNCATE);_defineProperty(TruncateFormat,"title",_i18n.i18n.translate("data.fieldFormats.truncated_string.title",{defaultMessage:"Truncated string"}));_defineProperty(TruncateFormat,"fieldType",_types.KBN_FIELD_TYPES.STRING)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.BoolFormat=void 0;var _i18n=__webpack_require__(1);var _types=__webpack_require__(100);var _field_format=__webpack_require__(99);var _types2=__webpack_require__(98);var _utils=__webpack_require__(118);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BoolFormat=function(_field_format$FieldFo){_inherits(BoolFormat,_field_format$FieldFo);function BoolFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,BoolFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(BoolFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(value){if(typeof value==="string"){value=value.trim().toLowerCase()}switch(value){case false:case 0:case"false":case"no":return"false";case true:case 1:case"true":case"yes":return"true";default:return(0,_utils.asPrettyString)(value)}}));return _this}return BoolFormat}(_field_format.FieldFormat);exports.BoolFormat=BoolFormat;_defineProperty(BoolFormat,"id",_types2.FIELD_FORMAT_IDS.BOOLEAN);_defineProperty(BoolFormat,"title",_i18n.i18n.translate("data.fieldFormats.boolean.title",{defaultMessage:"Boolean"}));_defineProperty(BoolFormat,"fieldType",[_types.KBN_FIELD_TYPES.BOOLEAN,_types.KBN_FIELD_TYPES.NUMBER,_types.KBN_FIELD_TYPES.STRING])},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.StaticLookupFormat=void 0;var _i18n=__webpack_require__(1);var _types=__webpack_require__(100);var _field_format=__webpack_require__(99);var _types2=__webpack_require__(98);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function convertLookupEntriesToMap(lookupEntries){return lookupEntries.reduce((function(lookupMap,lookupEntry){lookupMap[lookupEntry.key]=lookupEntry.value;return lookupMap}),{})}var StaticLookupFormat=function(_field_format$FieldFo){_inherits(StaticLookupFormat,_field_format$FieldFo);function StaticLookupFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,StaticLookupFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(StaticLookupFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var lookupEntries=_this.param("lookupEntries");var unknownKeyValue=_this.param("unknownKeyValue");var lookupMap=convertLookupEntriesToMap(lookupEntries);return lookupMap[val]||unknownKeyValue||val}));return _this}_createClass(StaticLookupFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{lookupEntries:[{}],unknownKeyValue:null}}}]);return StaticLookupFormat}(_field_format.FieldFormat);exports.StaticLookupFormat=StaticLookupFormat;_defineProperty(StaticLookupFormat,"id",_types2.FIELD_FORMAT_IDS.STATIC_LOOKUP);_defineProperty(StaticLookupFormat,"title",_i18n.i18n.translate("data.fieldFormats.static_lookup.title",{defaultMessage:"Static lookup"}));_defineProperty(StaticLookupFormat,"fieldType",[_types.KBN_FIELD_TYPES.STRING,_types.KBN_FIELD_TYPES.NUMBER,_types.KBN_FIELD_TYPES.IP,_types.KBN_FIELD_TYPES.BOOLEAN])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _fields=__webpack_require__(433);Object.keys(_fields).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _fields[key]}})}));var _types=__webpack_require__(224);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={isFilterable:true,isNestedField:true};Object.defineProperty(exports,"isFilterable",{enumerable:true,get:function get(){return _utils.isFilterable}});Object.defineProperty(exports,"isNestedField",{enumerable:true,get:function get(){return _utils.isNestedField}});var _types=__webpack_require__(434);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _utils=__webpack_require__(435)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isFilterable=isFilterable;exports.isNestedField=isNestedField;var _kbn_field_types=__webpack_require__(222);var filterableTypes=(0,_kbn_field_types.getFilterableKbnTypeNames)();function isFilterable(field){return field.name==="_id"||field.scripted||Boolean(field.searchable&&filterableTypes.includes(field.type))}function isNestedField(field){var _field$subType;return!!((_field$subType=field.subType)===null||_field$subType===void 0?void 0:_field$subType.nested)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFilterableKbnTypeNames=exports.castEsToKbnFieldTypeName=exports.getKbnTypeNames=exports.getKbnFieldType=void 0;var _kbn_field_types_factory=__webpack_require__(437);var _types=__webpack_require__(100);var registeredKbnTypes=(0,_kbn_field_types_factory.createKbnFieldTypes)();var getKbnFieldType=function getKbnFieldType(typeName){return registeredKbnTypes.find((function(t){return t.name===typeName}))};exports.getKbnFieldType=getKbnFieldType;var getKbnTypeNames=function getKbnTypeNames(){return registeredKbnTypes.filter((function(type){return type.name})).map((function(type){return type.name}))};exports.getKbnTypeNames=getKbnTypeNames;var castEsToKbnFieldTypeName=function castEsToKbnFieldTypeName(esType){var type=registeredKbnTypes.find((function(t){return t.esTypes.includes(esType)}));return type&&type.name?type.name:_types.KBN_FIELD_TYPES.UNKNOWN};exports.castEsToKbnFieldTypeName=castEsToKbnFieldTypeName;var getFilterableKbnTypeNames=function getFilterableKbnTypeNames(){return registeredKbnTypes.filter((function(type){return type.filterable})).map((function(type){return type.name}))};exports.getFilterableKbnTypeNames=getFilterableKbnTypeNames},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createKbnFieldTypes=void 0;var _kbn_field_type=__webpack_require__(223);var _types=__webpack_require__(100);var createKbnFieldTypes=function createKbnFieldTypes(){return[new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.STRING,sortable:true,filterable:true,esTypes:[_types.ES_FIELD_TYPES.STRING,_types.ES_FIELD_TYPES.TEXT,_types.ES_FIELD_TYPES.KEYWORD,_types.ES_FIELD_TYPES._TYPE,_types.ES_FIELD_TYPES._ID]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.NUMBER,sortable:true,filterable:true,esTypes:[_types.ES_FIELD_TYPES.FLOAT,_types.ES_FIELD_TYPES.HALF_FLOAT,_types.ES_FIELD_TYPES.SCALED_FLOAT,_types.ES_FIELD_TYPES.DOUBLE,_types.ES_FIELD_TYPES.INTEGER,_types.ES_FIELD_TYPES.LONG,_types.ES_FIELD_TYPES.SHORT,_types.ES_FIELD_TYPES.BYTE,_types.ES_FIELD_TYPES.TOKEN_COUNT]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.DATE,sortable:true,filterable:true,esTypes:[_types.ES_FIELD_TYPES.DATE,_types.ES_FIELD_TYPES.DATE_NANOS]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.IP,sortable:true,filterable:true,esTypes:[_types.ES_FIELD_TYPES.IP]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.BOOLEAN,sortable:true,filterable:true,esTypes:[_types.ES_FIELD_TYPES.BOOLEAN]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.OBJECT,esTypes:[_types.ES_FIELD_TYPES.OBJECT]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.NESTED,esTypes:[_types.ES_FIELD_TYPES.NESTED]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.GEO_POINT,esTypes:[_types.ES_FIELD_TYPES.GEO_POINT]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.GEO_SHAPE,esTypes:[_types.ES_FIELD_TYPES.GEO_SHAPE]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.ATTACHMENT,esTypes:[_types.ES_FIELD_TYPES.ATTACHMENT]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.MURMUR3,esTypes:[_types.ES_FIELD_TYPES.MURMUR3]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES._SOURCE,esTypes:[_types.ES_FIELD_TYPES._SOURCE]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.HISTOGRAM,filterable:true,esTypes:[_types.ES_FIELD_TYPES.HISTOGRAM]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.CONFLICT}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.UNKNOWN})]};exports.createKbnFieldTypes=createKbnFieldTypes},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _filter_manager=__webpack_require__(439);Object.keys(_filter_manager).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filter_manager[key]}})}));var _types=__webpack_require__(227);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"dedupFilters",{enumerable:true,get:function get(){return _dedup_filters.dedupFilters}});Object.defineProperty(exports,"uniqFilters",{enumerable:true,get:function get(){return _uniq_filters.uniqFilters}});Object.defineProperty(exports,"compareFilters",{enumerable:true,get:function get(){return _compare_filters.compareFilters}});Object.defineProperty(exports,"COMPARE_ALL_OPTIONS",{enumerable:true,get:function get(){return _compare_filters.COMPARE_ALL_OPTIONS}});Object.defineProperty(exports,"FilterCompareOptions",{enumerable:true,get:function get(){return _compare_filters.FilterCompareOptions}});var _dedup_filters=__webpack_require__(225);var _uniq_filters=__webpack_require__(440);var _compare_filters=__webpack_require__(226)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uniqFilters=void 0;var _lodash=__webpack_require__(0);var _dedup_filters=__webpack_require__(225);var uniqFilters=function uniqFilters(filters){var comparatorOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var results=[];(0,_lodash.each)(filters,(function(filter){results=(0,_lodash.union)(results,(0,_dedup_filters.dedupFilters)(results,[filter]),comparatorOptions)}));return results};exports.uniqFilters=uniqFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ES_SEARCH_STRATEGY=void 0;var ES_SEARCH_STRATEGY="es";exports.ES_SEARCH_STRATEGY=ES_SEARCH_STRATEGY},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _date_interval_utils=__webpack_require__(444);Object.keys(_date_interval_utils).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _date_interval_utils[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _date_histogram_interval=__webpack_require__(445);Object.keys(_date_histogram_interval).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _date_histogram_interval[key]}})}));var _invalid_es_calendar_interval_error=__webpack_require__(229);Object.keys(_invalid_es_calendar_interval_error).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _invalid_es_calendar_interval_error[key]}})}));var _invalid_es_interval_format_error=__webpack_require__(230);Object.keys(_invalid_es_interval_format_error).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _invalid_es_interval_format_error[key]}})}));var _is_valid_es_interval=__webpack_require__(231);Object.keys(_is_valid_es_interval).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _is_valid_es_interval[key]}})}));var _is_valid_interval=__webpack_require__(446);Object.keys(_is_valid_interval).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _is_valid_interval[key]}})}));var _parse_interval=__webpack_require__(449);Object.keys(_parse_interval).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _parse_interval[key]}})}));var _parse_es_interval=__webpack_require__(137);Object.keys(_parse_es_interval).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _parse_es_interval[key]}})}));var _to_absolute_dates=__webpack_require__(450);Object.keys(_to_absolute_dates).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _to_absolute_dates[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dateHistogramInterval=dateHistogramInterval;var _parse_es_interval=__webpack_require__(137);function dateHistogramInterval(interval){var _ref=(0,_parse_es_interval.parseEsInterval)(interval),type=_ref.type;if(type==="calendar"){return{calendar_interval:interval}}else{return{fixed_interval:interval}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isValidInterval=isValidInterval;var _is_valid_es_interval=__webpack_require__(231);var _least_common_interval=__webpack_require__(447);function _parseWithBase(value,baseInterval){try{var interval=(0,_least_common_interval.leastCommonInterval)(baseInterval,value);return interval===value.replace(/\s/g,"")}catch(e){return false}}function isValidInterval(value,baseInterval){if(baseInterval){return _parseWithBase(value,baseInterval)}else{return(0,_is_valid_es_interval.isValidEsInterval)(value)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.leastCommonInterval=leastCommonInterval;var _datemath=_interopRequireDefault(__webpack_require__(110));var _least_common_multiple=__webpack_require__(448);var _parse_es_interval=__webpack_require__(137);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function leastCommonInterval(a,b){var _datemath$default=_datemath.default,unitsMap=_datemath$default.unitsMap,unitsDesc=_datemath$default.unitsDesc;var aInt=(0,_parse_es_interval.parseEsInterval)(a);var bInt=(0,_parse_es_interval.parseEsInterval)(b);if(a===b){return a}var aUnit=unitsMap[aInt.unit];var bUnit=unitsMap[bInt.unit];if(aInt.type!==bInt.type){throw Error("Incompatible intervals: ".concat(a," (").concat(aInt.type,"), ").concat(b," (").concat(bInt.type,")"))}if(aInt.type==="calendar"||bInt.type==="calendar"){return aUnit.weight>bUnit.weight?"".concat(aInt.value).concat(aInt.unit):"".concat(bInt.value).concat(bInt.unit)}var aMs=aInt.value*aUnit.base;var bMs=bInt.value*bUnit.base;var lcmMs=(0,_least_common_multiple.leastCommonMultiple)(aMs,bMs);if(lcmMs===bMs){return b.replace(/\s/g,"")}if(lcmMs===aMs){return a.replace(/\s/g,"")}var lcmUnit=unitsDesc.find((function(unit){var unitInfo=unitsMap[unit];return!!(unitInfo.type!=="calendar"&&lcmMs%unitInfo.base===0)}));if(!lcmUnit){throw Error("Unable to find common interval for: ".concat(a,", ").concat(b))}return"".concat(lcmMs/unitsMap[lcmUnit].base).concat(lcmUnit)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.leastCommonMultiple=leastCommonMultiple;function greatestCommonDivisor(a,b){return a===0?Math.abs(b):greatestCommonDivisor(b%a,a)}function leastCommonMultiple(a,b){return Math.abs(a*b/greatestCommonDivisor(a,b))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseInterval=parseInterval;var _lodash=__webpack_require__(0);var _moment=_interopRequireDefault(__webpack_require__(84));var _datemath=_interopRequireDefault(__webpack_require__(110));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var INTERVAL_STRING_RE=new RegExp("^([0-9\\.]*)\\s*("+_datemath.default.units.join("|")+")$");function parseInterval(interval){var matches=String(interval).trim().match(INTERVAL_STRING_RE);if(!matches)return null;try{var value=parseFloat(matches[1])||1;var unit=matches[2];var duration=_moment.default.duration(value,unit);var selectedUnit=(0,_lodash.find)(_datemath.default.units,(function(u){return Math.abs(duration.as(u))>=1}));if(_datemath.default.units.indexOf(selectedUnit)<_datemath.default.units.indexOf(unit)){return duration}return _moment.default.duration(duration.as(selectedUnit),selectedUnit)}catch(e){return null}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toAbsoluteDates=toAbsoluteDates;var _datemath=_interopRequireDefault(__webpack_require__(110));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function toAbsoluteDates(range){var fromDate=_datemath.default.parse(range.from);var toDate=_datemath.default.parse(range.to,{roundUp:true});if(!fromDate||!toDate){return}return{from:fromDate.toDate(),to:toDate.toDate()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={TextContextTypeConvert:true,IFieldFormatMetaParams:true};Object.defineProperty(exports,"TextContextTypeConvert",{enumerable:true,get:function get(){return _types5.TextContextTypeConvert}});Object.defineProperty(exports,"IFieldFormatMetaParams",{enumerable:true,get:function get(){return _types5.IFieldFormatMetaParams}});var _types=__webpack_require__(452);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _types2=__webpack_require__(227);Object.keys(_types2).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types2[key]}})}));var _types3=__webpack_require__(100);Object.keys(_types3).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types3[key]}})}));var _types4=__webpack_require__(224);Object.keys(_types4).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types4[key]}})}));var _types5=__webpack_require__(98)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBar=void 0;var _eui=__webpack_require__(12);var _react=__webpack_require__(13);var _classnames=_interopRequireDefault(__webpack_require__(101));var _react2=_interopRequireWildcard(__webpack_require__(4));var _filter_editor=__webpack_require__(232);var _filter_item=__webpack_require__(457);var _filter_options=__webpack_require__(459);var _public=__webpack_require__(14);var _common=__webpack_require__(93);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function FilterBarUI(props){var _useState=(0,_react2.useState)(false),_useState2=_slicedToArray(_useState,2),isAddFilterPopoverOpen=_useState2[0],setIsAddFilterPopoverOpen=_useState2[1];var kibana=(0,_public.useKibana)();var uiSettings=kibana.services.uiSettings;if(!uiSettings)return null;function onFiltersUpdated(filters){if(props.onFiltersUpdated){props.onFiltersUpdated(filters)}}function renderItems(){return props.filters.map((function(filter,i){return _react2.default.createElement(_eui.EuiFlexItem,{key:i,grow:false,className:"globalFilterBar__flexItem"},_react2.default.createElement(_filter_item.FilterItem,{id:"".concat(i),filter:filter,onUpdate:function onUpdate(newFilter){return _onUpdate(i,newFilter)},onRemove:function onRemove(){return _onRemove(i)},indexPatterns:props.indexPatterns,uiSettings:uiSettings}))}))}function renderAddFilter(){var isPinned=uiSettings.get("filters:pinnedByDefault");var _props$indexPatterns=_slicedToArray(props.indexPatterns,1),indexPattern=_props$indexPatterns[0];var index=indexPattern&&indexPattern.id;var newFilter=(0,_common.buildEmptyFilter)(isPinned,index);var button=_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:function onClick(){return setIsAddFilterPopoverOpen(true)},"data-test-subj":"addFilter",className:"globalFilterBar__addButton"},"+"," ",_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterBar.addFilterButtonLabel",defaultMessage:"Add filter"}));return _react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiPopover,{id:"addFilterPopover",button:button,isOpen:isAddFilterPopoverOpen,closePopover:function closePopover(){return setIsAddFilterPopoverOpen(false)},anchorPosition:"downLeft",withTitle:true,panelPaddingSize:"none",ownFocus:true,initialFocus:".filterEditor__hiddenItem"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement("div",{style:{width:400}},_react2.default.createElement(_filter_editor.FilterEditor,{filter:newFilter,indexPatterns:props.indexPatterns,onSubmit:onAdd,onCancel:function onCancel(){return setIsAddFilterPopoverOpen(false)},key:JSON.stringify(newFilter)})))))}function onAdd(filter){setIsAddFilterPopoverOpen(false);var filters=[].concat(_toConsumableArray(props.filters),[filter]);onFiltersUpdated(filters)}function _onRemove(i){var filters=_toConsumableArray(props.filters);filters.splice(i,1);onFiltersUpdated(filters)}function _onUpdate(i,filter){var filters=_toConsumableArray(props.filters);filters[i]=filter;onFiltersUpdated(filters)}function onEnableAll(){var filters=props.filters.map(_common.enableFilter);onFiltersUpdated(filters)}function onDisableAll(){var filters=props.filters.map(_common.disableFilter);onFiltersUpdated(filters)}function onPinAll(){var filters=props.filters.map(_common.pinFilter);onFiltersUpdated(filters)}function onUnpinAll(){var filters=props.filters.map(_common.unpinFilter);onFiltersUpdated(filters)}function onToggleAllNegated(){var filters=props.filters.map(_common.toggleFilterNegated);onFiltersUpdated(filters)}function onToggleAllDisabled(){var filters=props.filters.map(_common.toggleFilterDisabled);onFiltersUpdated(filters)}function onRemoveAll(){onFiltersUpdated([])}var classes=(0,_classnames.default)("globalFilterBar",props.className);return _react2.default.createElement(_eui.EuiFlexGroup,{className:"globalFilterGroup",gutterSize:"none",alignItems:"flexStart",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{className:"globalFilterGroup__branch",grow:false},_react2.default.createElement(_filter_options.FilterOptions,{onEnableAll:onEnableAll,onDisableAll:onDisableAll,onPinAll:onPinAll,onUnpinAll:onUnpinAll,onToggleAllNegated:onToggleAllNegated,onToggleAllDisabled:onToggleAllDisabled,onRemoveAll:onRemoveAll})),_react2.default.createElement(_eui.EuiFlexItem,{className:"globalFilterGroup__filterFlexItem"},_react2.default.createElement(_eui.EuiFlexGroup,{className:classes,wrap:true,responsive:false,gutterSize:"xs",alignItems:"center"},renderItems(),renderAddFilter())))}var FilterBar=(0,_react.injectI18n)(FilterBarUI);exports.FilterBar=FilterBar},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PhraseValueInput=void 0;var _eui=__webpack_require__(12);var _react=__webpack_require__(13);var _lodash=__webpack_require__(0);var _react2=_interopRequireDefault(__webpack_require__(4));var _generic_combo_box=__webpack_require__(166);var _phrase_suggestor=__webpack_require__(235);var _value_input_type=__webpack_require__(236);var _public=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var PhraseValueInputUI=function(_PhraseSuggestorUI){_inherits(PhraseValueInputUI,_PhraseSuggestorUI);function PhraseValueInputUI(){_classCallCheck(this,PhraseValueInputUI);return _possibleConstructorReturn(this,_getPrototypeOf(PhraseValueInputUI).apply(this,arguments))}_createClass(PhraseValueInputUI,[{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.valueInputLabel",defaultMessage:"Value"})},this.isSuggestingValues()?this.renderWithSuggestions():_react2.default.createElement(_value_input_type.ValueInputType,{placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.valueInputPlaceholder",defaultMessage:"Enter a value"}),value:this.props.value,onChange:this.props.onChange,type:this.props.field?this.props.field.type:"string"}))}},{key:"renderWithSuggestions",value:function renderWithSuggestions(){var suggestions=this.state.suggestions;var _this$props=this.props,value=_this$props.value,intl=_this$props.intl,_onChange=_this$props.onChange;var valueAsStr=String(value);var options=value?(0,_lodash.uniq)([valueAsStr].concat(_toConsumableArray(suggestions))):suggestions;return _react2.default.createElement(StringComboBox,{placeholder:intl.formatMessage({id:"data.filter.filterEditor.valueSelectPlaceholder",defaultMessage:"Select a value"}),options:options,getLabel:function getLabel(option){return option},selectedOptions:value?[valueAsStr]:[],onChange:function onChange(_ref){var _ref2=_slicedToArray(_ref,1),_ref2$=_ref2[0],newValue=_ref2$===void 0?"":_ref2$;return _onChange(newValue)},onSearchChange:this.onSearchChange,singleSelection:{asPlainText:true},onCreateOption:_onChange,isClearable:false,"data-test-subj":"filterParamsComboBox phraseParamsComboxBox"})}}]);return PhraseValueInputUI}(_phrase_suggestor.PhraseSuggestorUI);function StringComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}var PhraseValueInput=(0,_react.injectI18n)((0,_public.withKibana)(PhraseValueInputUI));exports.PhraseValueInput=PhraseValueInput},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PhrasesValuesInput=void 0;var _eui=__webpack_require__(12);var _react=__webpack_require__(13);var _lodash=__webpack_require__(0);var _react2=_interopRequireDefault(__webpack_require__(4));var _generic_combo_box=__webpack_require__(166);var _phrase_suggestor=__webpack_require__(235);var _public=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var PhrasesValuesInputUI=function(_PhraseSuggestorUI){_inherits(PhrasesValuesInputUI,_PhraseSuggestorUI);function PhrasesValuesInputUI(){_classCallCheck(this,PhrasesValuesInputUI);return _possibleConstructorReturn(this,_getPrototypeOf(PhrasesValuesInputUI).apply(this,arguments))}_createClass(PhrasesValuesInputUI,[{key:"render",value:function render(){var suggestions=this.state.suggestions;var _this$props=this.props,values=_this$props.values,intl=_this$props.intl,onChange=_this$props.onChange;var options=values?(0,_lodash.uniq)([].concat(_toConsumableArray(values),_toConsumableArray(suggestions))):suggestions;return _react2.default.createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"data.filter.filterEditor.valuesSelectLabel",defaultMessage:"Values"})},_react2.default.createElement(StringComboBox,{placeholder:intl.formatMessage({id:"data.filter.filterEditor.valuesSelectPlaceholder",defaultMessage:"Select values"}),options:options,getLabel:function getLabel(option){return option},selectedOptions:values||[],onSearchChange:this.onSearchChange,onCreateOption:function onCreateOption(option){return onChange([].concat(_toConsumableArray(values||[]),[option]))},onChange:onChange,isClearable:false,"data-test-subj":"filterParamsComboBox phrasesParamsComboxBox"}))}}]);return PhrasesValuesInputUI}(_phrase_suggestor.PhraseSuggestorUI);function StringComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}var PhrasesValuesInput=(0,_react.injectI18n)((0,_public.withKibana)(PhrasesValuesInputUI));exports.PhrasesValuesInput=PhrasesValuesInput},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangeValueInput=void 0;var _eui=__webpack_require__(12);var _react=__webpack_require__(13);var _lodash=__webpack_require__(0);var _react2=_interopRequireDefault(__webpack_require__(4));var _public=__webpack_require__(14);var _value_input_type=__webpack_require__(236);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function RangeValueInputUI(props){var kibana=(0,_public.useKibana)();var dataMathDocLink=kibana.services.docLinks.links.date.dateMath;var type=props.field?props.field.type:"string";var onFromChange=function onFromChange(value){if(typeof value!=="string"&&typeof value!=="number"){throw new Error("Range params must be a string or number")}props.onChange({from:value,to:(0,_lodash.get)(props,"value.to")})};var onToChange=function onToChange(value){if(typeof value!=="string"&&typeof value!=="number"){throw new Error("Range params must be a string or number")}props.onChange({from:(0,_lodash.get)(props,"value.from"),to:value})};return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFormControlLayoutDelimited,{"aria-label":props.intl.formatMessage({id:"data.filter.filterEditor.rangeInputLabel",defaultMessage:"Range"}),startControl:_react2.default.createElement(_value_input_type.ValueInputType,{controlOnly:true,type:type,value:props.value?props.value.from:undefined,onChange:onFromChange,placeholder:props.intl.formatMessage({id:"data.filter.filterEditor.rangeStartInputPlaceholder",defaultMessage:"Start of the range"})}),endControl:_react2.default.createElement(_value_input_type.ValueInputType,{controlOnly:true,type:type,value:props.value?props.value.to:undefined,onChange:onToChange,placeholder:props.intl.formatMessage({id:"data.filter.filterEditor.rangeEndInputPlaceholder",defaultMessage:"End of the range"})})}),type==="date"?_react2.default.createElement(_eui.EuiFormHelpText,null,_react2.default.createElement(_eui.EuiLink,{target:"_blank",href:dataMathDocLink},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.dateFormatHelpLinkLabel",defaultMessage:"Accepted date formats"})," ",_react2.default.createElement(_eui.EuiIcon,{type:"popout",size:"s"}))):"")}var RangeValueInput=(0,_react.injectI18n)(RangeValueInputUI);exports.RangeValueInput=RangeValueInput},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FilterItem=void 0;var _eui=__webpack_require__(12);var _react=__webpack_require__(13);var _classnames=_interopRequireDefault(__webpack_require__(101));var _react2=_interopRequireWildcard(__webpack_require__(4));var _filter_editor=__webpack_require__(232);var _filter_view=__webpack_require__(458);var _common=__webpack_require__(93);var _services=__webpack_require__(95);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterItemUI=function(_Component){_inherits(FilterItemUI,_Component);function FilterItemUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,FilterItemUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(FilterItemUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"handleBadgeClick",(function(e){if(e.shiftKey){_this.onToggleDisabled()}else{_this.togglePopover()}}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"togglePopover",(function(){_this.setState({isPopoverOpen:!_this.state.isPopoverOpen})}));_defineProperty(_assertThisInitialized(_this),"onSubmit",(function(filter){_this.closePopover();_this.props.onUpdate(filter)}));_defineProperty(_assertThisInitialized(_this),"onTogglePinned",(function(){var filter=(0,_common.toggleFilterPinned)(_this.props.filter);_this.props.onUpdate(filter)}));_defineProperty(_assertThisInitialized(_this),"onToggleNegated",(function(){var filter=(0,_common.toggleFilterNegated)(_this.props.filter);_this.props.onUpdate(filter)}));_defineProperty(_assertThisInitialized(_this),"onToggleDisabled",(function(){var filter=(0,_common.toggleFilterDisabled)(_this.props.filter);_this.props.onUpdate(filter)}));return _this}_createClass(FilterItemUI,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,filter=_this$props.filter,id=_this$props.id;var _filter$meta=filter.meta,negate=_filter$meta.negate,disabled=_filter$meta.disabled;var hasError=false;var valueLabel;try{valueLabel=(0,_common.getDisplayValueFromFilter)(filter,this.props.indexPatterns)}catch(e){(0,_services.getNotifications)().toasts.addError(e,{title:this.props.intl.formatMessage({id:"data.filter.filterBar.labelErrorMessage",defaultMessage:"Failed to display filter"})});valueLabel=this.props.intl.formatMessage({id:"data.filter.filterBar.labelErrorText",defaultMessage:"Error"});hasError=true}var dataTestSubjKey=filter.meta.key?"filter-key-".concat(filter.meta.key):"";var dataTestSubjValue=filter.meta.value?"filter-value-".concat(valueLabel):"";var dataTestSubjDisabled="filter-".concat(this.props.filter.meta.disabled?"disabled":"enabled");var dataTestSubjPinned="filter-".concat((0,_common.isFilterPinned)(filter)?"pinned":"unpinned");var classes=(0,_classnames.default)("globalFilterItem",{"globalFilterItem-isDisabled":disabled||hasError,"globalFilterItem-isInvalid":hasError,"globalFilterItem-isPinned":(0,_common.isFilterPinned)(filter),"globalFilterItem-isExcluded":negate},this.props.className);var badge=_react2.default.createElement(_filter_view.FilterView,{filter:filter,valueLabel:valueLabel,className:classes,iconOnClick:function iconOnClick(){return _this2.props.onRemove()},onClick:this.handleBadgeClick,"data-test-subj":"filter ".concat(dataTestSubjDisabled," ").concat(dataTestSubjKey," ").concat(dataTestSubjValue," ").concat(dataTestSubjPinned)});var panelTree=[{id:0,items:[{name:(0,_common.isFilterPinned)(filter)?this.props.intl.formatMessage({id:"data.filter.filterBar.unpinFilterButtonLabel",defaultMessage:"Unpin"}):this.props.intl.formatMessage({id:"data.filter.filterBar.pinFilterButtonLabel",defaultMessage:"Pin across all apps"}),icon:"pin",onClick:function onClick(){_this2.closePopover();_this2.onTogglePinned()},"data-test-subj":"pinFilter"},{name:this.props.intl.formatMessage({id:"data.filter.filterBar.editFilterButtonLabel",defaultMessage:"Edit filter"}),icon:"pencil",panel:1,"data-test-subj":"editFilter"},{name:negate?this.props.intl.formatMessage({id:"data.filter.filterBar.includeFilterButtonLabel",defaultMessage:"Include results"}):this.props.intl.formatMessage({id:"data.filter.filterBar.excludeFilterButtonLabel",defaultMessage:"Exclude results"}),icon:negate?"plusInCircle":"minusInCircle",onClick:function onClick(){_this2.closePopover();_this2.onToggleNegated()},"data-test-subj":"negateFilter"},{name:disabled?this.props.intl.formatMessage({id:"data.filter.filterBar.enableFilterButtonLabel",defaultMessage:"Re-enable"}):this.props.intl.formatMessage({id:"data.filter.filterBar.disableFilterButtonLabel",defaultMessage:"Temporarily disable"}),icon:"".concat(disabled?"eye":"eyeClosed"),onClick:function onClick(){_this2.closePopover();_this2.onToggleDisabled()},"data-test-subj":"disableFilter"},{name:this.props.intl.formatMessage({id:"data.filter.filterBar.deleteFilterButtonLabel",defaultMessage:"Delete"}),icon:"trash",onClick:function onClick(){_this2.closePopover();_this2.props.onRemove()},"data-test-subj":"deleteFilter"}]},{id:1,width:420,content:_react2.default.createElement("div",null,_react2.default.createElement(_filter_editor.FilterEditor,{filter:filter,indexPatterns:this.props.indexPatterns,onSubmit:this.onSubmit,onCancel:this.closePopover}))}];return _react2.default.createElement(_eui.EuiPopover,{id:"popoverFor_filter".concat(id),className:"globalFilterItem__popover",anchorClassName:"globalFilterItem__popoverAnchor",isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,button:badge,anchorPosition:"downLeft",withTitle:true,panelPaddingSize:"none"},_react2.default.createElement(_eui.EuiContextMenu,{initialPanelId:0,panels:panelTree}))}}]);return FilterItemUI}(_react2.Component);var FilterItem=(0,_react.injectI18n)(FilterItemUI);exports.FilterItem=FilterItem},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterView=void 0;var _eui=__webpack_require__(12);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(4));var _filter_label=__webpack_require__(237);var _common=__webpack_require__(93);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var FilterView=function FilterView(_ref){var filter=_ref.filter,iconOnClick=_ref.iconOnClick,onClick=_ref.onClick,valueLabel=_ref.valueLabel,rest=_objectWithoutProperties(_ref,["filter","iconOnClick","onClick","valueLabel"]);var _useInnerText=(0,_eui.useInnerText)(),_useInnerText2=_slicedToArray(_useInnerText,2),ref=_useInnerText2[0],innerText=_useInnerText2[1];var title=_i18n.i18n.translate("data.filter.filterBar.moreFilterActionsMessage",{defaultMessage:"Filter: {innerText}. Select for more filter actions.",values:{innerText:innerText}});if((0,_common.isFilterPinned)(filter)){title="".concat(_i18n.i18n.translate("data.filter.filterBar.pinnedFilterPrefix",{defaultMessage:"Pinned"})," ").concat(title)}if(filter.meta.disabled){title="".concat(_i18n.i18n.translate("data.filter.filterBar.disabledFilterPrefix",{defaultMessage:"Disabled"})," ").concat(title)}return _react.default.createElement(_eui.EuiBadge,_extends({title:title,color:"hollow",iconType:"cross",iconSide:"right",closeButtonProps:{tabIndex:-1},iconOnClick:iconOnClick,iconOnClickAriaLabel:_i18n.i18n.translate("data.filter.filterBar.filterItemBadgeIconAriaLabel",{defaultMessage:"Delete"}),onClick:onClick,onClickAriaLabel:_i18n.i18n.translate("data.filter.filterBar.filterItemBadgeAriaLabel",{defaultMessage:"Filter actions"})},rest),_react.default.createElement("span",{ref:ref},_react.default.createElement(_filter_label.FilterLabel,{filter:filter,valueLabel:valueLabel})))};exports.FilterView=FilterView},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FilterOptions=void 0;var _eui=__webpack_require__(12);var _react=__webpack_require__(13);var _react2=_interopRequireWildcard(__webpack_require__(4));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterOptionsUI=function(_Component){_inherits(FilterOptionsUI,_Component);function FilterOptionsUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,FilterOptionsUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(FilterOptionsUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"togglePopover",(function(){_this.setState((function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}}))}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));return _this}_createClass(FilterOptionsUI,[{key:"render",value:function render(){var _this2=this;var panelTree={id:0,items:[{name:this.props.intl.formatMessage({id:"data.filter.options.enableAllFiltersButtonLabel",defaultMessage:"Enable all"}),icon:"eye",onClick:function onClick(){_this2.closePopover();_this2.props.onEnableAll()},"data-test-subj":"enableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.disableAllFiltersButtonLabel",defaultMessage:"Disable all"}),icon:"eyeClosed",onClick:function onClick(){_this2.closePopover();_this2.props.onDisableAll()},"data-test-subj":"disableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.pinAllFiltersButtonLabel",defaultMessage:"Pin all"}),icon:"pin",onClick:function onClick(){_this2.closePopover();_this2.props.onPinAll()},"data-test-subj":"pinAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.unpinAllFiltersButtonLabel",defaultMessage:"Unpin all"}),icon:"pin",onClick:function onClick(){_this2.closePopover();_this2.props.onUnpinAll()},"data-test-subj":"unpinAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.invertNegatedFiltersButtonLabel",defaultMessage:"Invert inclusion"}),icon:"invert",onClick:function onClick(){_this2.closePopover();_this2.props.onToggleAllNegated()},"data-test-subj":"invertInclusionAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.invertDisabledFiltersButtonLabel",defaultMessage:"Invert enabled/disabled"}),icon:"eye",onClick:function onClick(){_this2.closePopover();_this2.props.onToggleAllDisabled()},"data-test-subj":"invertEnableDisableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.deleteAllFiltersButtonLabel",defaultMessage:"Remove all"}),icon:"trash",onClick:function onClick(){_this2.closePopover();_this2.props.onRemoveAll()},"data-test-subj":"removeAllFilters"}]};return _react2.default.createElement(_eui.EuiPopover,{id:"popoverForAllFilters",className:"globalFilterGroup__allFiltersPopover",isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,button:_react2.default.createElement(_eui.EuiButtonIcon,{onClick:this.togglePopover,iconType:"filter","aria-label":this.props.intl.formatMessage({id:"data.filter.options.changeAllFiltersButtonLabel",defaultMessage:"Change all filters"}),title:this.props.intl.formatMessage({id:"data.filter.options.changeAllFiltersButtonLabel",defaultMessage:"Change all filters"}),"data-test-subj":"showFilterActions"}),anchorPosition:"rightUp",panelPaddingSize:"none",withTitle:true},_react2.default.createElement(_eui.EuiPopoverTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.searchBar.changeAllFiltersTitle",defaultMessage:"Change all filters"})),_react2.default.createElement(_eui.EuiContextMenu,{initialPanelId:0,panels:[panelTree]}))}}]);return FilterOptionsUI}(_react2.Component);var FilterOptions=(0,_react.injectI18n)(FilterOptionsUI);exports.FilterOptions=FilterOptions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _match_pairs=__webpack_require__(461);Object.keys(_match_pairs).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _match_pairs[key]}})}));var _from_user=__webpack_require__(462);Object.keys(_from_user).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _from_user[key]}})}));var _to_user=__webpack_require__(463);Object.keys(_to_user).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _to_user[key]}})}));var _get_query_log=__webpack_require__(464);Object.keys(_get_query_log).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_query_log[key]}})}));var _get_default_query=__webpack_require__(466);Object.keys(_get_default_query).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_default_query[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.matchPairs=matchPairs;var pairs=["()","[]","{}","''",'""'];var openers=pairs.map((function(pair){return pair[0]}));var closers=pairs.map((function(pair){return pair[1]}));function matchPairs(_ref){var value=_ref.value,selectionStart=_ref.selectionStart,selectionEnd=_ref.selectionEnd,key=_ref.key,metaKey=_ref.metaKey,updateQuery=_ref.updateQuery,preventDefault=_ref.preventDefault;if(shouldMoveCursorForward(key,value,selectionStart,selectionEnd)){preventDefault();updateQuery(value,selectionStart+1,selectionEnd+1)}else if(shouldInsertMatchingCloser(key,value,selectionStart,selectionEnd)){preventDefault();var newValue=value.substr(0,selectionStart)+key+value.substring(selectionStart,selectionEnd)+closers[openers.indexOf(key)]+value.substr(selectionEnd);updateQuery(newValue,selectionStart+1,selectionEnd+1)}else if(shouldRemovePair(key,metaKey,value,selectionStart,selectionEnd)){preventDefault();var _newValue=value.substr(0,selectionEnd-1)+value.substr(selectionEnd+1);updateQuery(_newValue,selectionStart-1,selectionEnd-1)}}function shouldMoveCursorForward(key,value,selectionStart,selectionEnd){if(!closers.includes(key)){return false}if(selectionStart!==selectionEnd){return false}return value.charAt(selectionEnd)===key}function shouldInsertMatchingCloser(key,value,selectionStart,selectionEnd){if(!openers.includes(key)){return false}if(selectionStart!==selectionEnd){return true}var precedingCharacter=value.charAt(selectionStart-1);var followingCharacter=value.charAt(selectionStart+1);if(precedingCharacter==="\\"){return false}return!(['"',"'"].includes(key)&&(isAlphanumeric(precedingCharacter)||isAlphanumeric(followingCharacter)))}function shouldRemovePair(key,metaKey,value,selectionStart,selectionEnd){if(key!=="Backspace"||metaKey){return false}if(selectionStart!==selectionEnd){return false}return pairs.includes(value.substr(selectionEnd-1,2))}function isAlphanumeric(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return value.match(/[a-zA-Z0-9_]/)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fromUser=fromUser;var _lodash=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function fromUser(userInput){var matchAll="";if(_lodash.default.isEmpty(userInput)){return""}if(_lodash.default.isObject(userInput)){return userInput}userInput=userInput||"";if(typeof userInput==="string"){var trimmedUserInput=userInput.trim();if(trimmedUserInput.length===0){return matchAll}if(trimmedUserInput[0]==="{"){try{return JSON.parse(trimmedUserInput)}catch(e){return userInput}}else{return userInput}}}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.toUser=toUser;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function toUser(text){if(text==null){return""}if(_typeof(text)==="object"){if(text.match_all){return""}if(text.query_string){return toUser(text.query_string.query)}return JSON.stringify(text)}return""+text}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getQueryLog=getQueryLog;var _persisted_log=__webpack_require__(167);function getQueryLog(uiSettings,storage,appName,language){return new _persisted_log.PersistedLog("typeahead:".concat(appName,"-").concat(language),{maxLength:uiSettings.get("history:limit"),filterDuplicates:true},storage)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PersistedLog=void 0;var _lodash=_interopRequireDefault(__webpack_require__(0));var Rx=_interopRequireWildcard(__webpack_require__(17));var _operators=__webpack_require__(85);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var defaultIsDuplicate=function defaultIsDuplicate(oldItem,newItem){return _lodash.default.isEqual(oldItem,newItem)};var PersistedLog=function(){function PersistedLog(name){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var storage=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,PersistedLog);_defineProperty(this,"name",void 0);_defineProperty(this,"maxLength",void 0);_defineProperty(this,"filterDuplicates",void 0);_defineProperty(this,"isDuplicate",void 0);_defineProperty(this,"storage",void 0);_defineProperty(this,"items",void 0);_defineProperty(this,"update$",new Rx.BehaviorSubject(undefined));this.name=name;this.maxLength=typeof options.maxLength==="string"?this.maxLength=parseInt(options.maxLength,10):options.maxLength;this.filterDuplicates=options.filterDuplicates||false;this.isDuplicate=options.isDuplicate||defaultIsDuplicate;this.storage=storage;this.items=this.storage.get(this.name)||[];if(this.maxLength!==undefined&&!isNaN(this.maxLength)){this.items=_lodash.default.take(this.items,this.maxLength)}}_createClass(PersistedLog,[{key:"add",value:function add(val){var _this=this;if(val==null){return this.items}if(this.filterDuplicates){_lodash.default.remove(this.items,(function(item){return _this.isDuplicate(item,val)}))}this.items.unshift(val);if(this.maxLength&&!isNaN(this.maxLength)){this.items=_lodash.default.take(this.items,this.maxLength)}this.storage.set(this.name,this.items);this.update$.next(undefined);return this.items}},{key:"get",value:function get(){return _lodash.default.cloneDeep(this.items)}},{key:"get$",value:function get$(){var _this2=this;return this.update$.pipe((0,_operators.map)((function(){return _this2.get()})))}}]);return PersistedLog}();exports.PersistedLog=PersistedLog},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultQuery=getDefaultQuery;function getDefaultQuery(){var language=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"kuery";return{query:"",language:language}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueryService=void 0;var _operators=__webpack_require__(85);var _filter_manager=__webpack_require__(238);var _timefilter=__webpack_require__(168);var _saved_query_service=__webpack_require__(242);var _create_global_query_observable=__webpack_require__(496);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var QueryService=function(){function QueryService(){_classCallCheck(this,QueryService);_defineProperty(this,"filterManager",void 0);_defineProperty(this,"timefilter",void 0);_defineProperty(this,"state$",void 0)}_createClass(QueryService,[{key:"setup",value:function setup(_ref){var uiSettings=_ref.uiSettings,storage=_ref.storage;this.filterManager=new _filter_manager.FilterManager(uiSettings);var timefilterService=new _timefilter.TimefilterService;this.timefilter=timefilterService.setup({uiSettings:uiSettings,storage:storage});this.state$=(0,_create_global_query_observable.createQueryStateObservable)({filterManager:this.filterManager,timefilter:this.timefilter}).pipe((0,_operators.share)());return{filterManager:this.filterManager,timefilter:this.timefilter,state$:this.state$}}},{key:"start",value:function start(savedObjects){return{filterManager:this.filterManager,timefilter:this.timefilter,state$:this.state$,savedQueries:(0,_saved_query_service.createSavedQueryService)(savedObjects.client)}}},{key:"stop",value:function stop(){}}]);return QueryService}();exports.QueryService=QueryService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterManager=void 0;var _lodash=_interopRequireDefault(__webpack_require__(0));var _rxjs=__webpack_require__(17);var _sort_filters=__webpack_require__(469);var _map_and_flatten_filters=__webpack_require__(239);var _only_disabled=__webpack_require__(240);var _common=__webpack_require__(93);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterManager=function(){function FilterManager(uiSettings){_classCallCheck(this,FilterManager);_defineProperty(this,"filters",[]);_defineProperty(this,"updated$",new _rxjs.Subject);_defineProperty(this,"fetch$",new _rxjs.Subject);_defineProperty(this,"uiSettings",void 0);this.uiSettings=uiSettings}_createClass(FilterManager,[{key:"mergeIncomingFilters",value:function mergeIncomingFilters(partitionedFilters){var globalFilters=partitionedFilters.globalFilters;var appFilters=partitionedFilters.appFilters;var cleanedAppFilters=[];_lodash.default.each(appFilters,(function(filter,i){var match=_lodash.default.find(globalFilters,(function(globalFilter){return(0,_common.compareFilters)(globalFilter,filter)}));if(!match){return cleanedAppFilters.push(filter)}_lodash.default.assign(match.meta,filter.meta)}));return FilterManager.mergeFilters(cleanedAppFilters,globalFilters)}},{key:"handleStateUpdate",value:function handleStateUpdate(newFilters){newFilters.sort(_sort_filters.sortFilters);var filtersUpdated=!(0,_common.compareFilters)(this.filters,newFilters,_common.COMPARE_ALL_OPTIONS);var updatedOnlyDisabledFilters=(0,_only_disabled.onlyDisabledFiltersChanged)(newFilters,this.filters);this.filters=newFilters;if(filtersUpdated){this.updated$.next();if(!updatedOnlyDisabledFilters){this.fetch$.next()}}}},{key:"getFilters",value:function getFilters(){return _lodash.default.cloneDeep(this.filters)}},{key:"getAppFilters",value:function getAppFilters(){var _this$getPartitionedF=this.getPartitionedFilters(),appFilters=_this$getPartitionedF.appFilters;return appFilters}},{key:"getGlobalFilters",value:function getGlobalFilters(){var _this$getPartitionedF2=this.getPartitionedFilters(),globalFilters=_this$getPartitionedF2.globalFilters;return globalFilters}},{key:"getPartitionedFilters",value:function getPartitionedFilters(){return FilterManager.partitionFilters(this.getFilters())}},{key:"getUpdates$",value:function getUpdates$(){return this.updated$.asObservable()}},{key:"getFetches$",value:function getFetches$(){return this.fetch$.asObservable()}},{key:"addFilters",value:function addFilters(filters){var _currentFilters$appFi,_currentFilters$globa;var pinFilterStatus=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.uiSettings.get("filters:pinnedByDefault");if(!Array.isArray(filters)){filters=[filters]}if(filters.length===0){return}var store=pinFilterStatus?_common.FilterStateStore.GLOBAL_STATE:_common.FilterStateStore.APP_STATE;FilterManager.setFiltersStore(filters,store);var mappedFilters=(0,_map_and_flatten_filters.mapAndFlattenFilters)(filters);var newPartitionedFilters=FilterManager.partitionFilters(mappedFilters);var currentFilters=this.getPartitionedFilters();(_currentFilters$appFi=currentFilters.appFilters).push.apply(_currentFilters$appFi,_toConsumableArray(newPartitionedFilters.appFilters));(_currentFilters$globa=currentFilters.globalFilters).push.apply(_currentFilters$globa,_toConsumableArray(newPartitionedFilters.globalFilters));var newFilters=this.mergeIncomingFilters(currentFilters);this.handleStateUpdate(newFilters)}},{key:"setFilters",value:function setFilters(newFilters){var pinFilterStatus=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.uiSettings.get("filters:pinnedByDefault");var store=pinFilterStatus?_common.FilterStateStore.GLOBAL_STATE:_common.FilterStateStore.APP_STATE;FilterManager.setFiltersStore(newFilters,store);var mappedFilters=(0,_map_and_flatten_filters.mapAndFlattenFilters)(newFilters);var newPartitionedFilters=FilterManager.partitionFilters(mappedFilters);var mergedFilters=this.mergeIncomingFilters(newPartitionedFilters);this.handleStateUpdate(mergedFilters)}},{key:"setGlobalFilters",value:function setGlobalFilters(newGlobalFilters){newGlobalFilters=(0,_map_and_flatten_filters.mapAndFlattenFilters)(newGlobalFilters);FilterManager.setFiltersStore(newGlobalFilters,_common.FilterStateStore.GLOBAL_STATE,true);var _this$getPartitionedF3=this.getPartitionedFilters(),appFilters=_this$getPartitionedF3.appFilters;var newFilters=this.mergeIncomingFilters({appFilters:appFilters,globalFilters:newGlobalFilters});this.handleStateUpdate(newFilters)}},{key:"setAppFilters",value:function setAppFilters(newAppFilters){newAppFilters=(0,_map_and_flatten_filters.mapAndFlattenFilters)(newAppFilters);FilterManager.setFiltersStore(newAppFilters,_common.FilterStateStore.APP_STATE,true);var _this$getPartitionedF4=this.getPartitionedFilters(),globalFilters=_this$getPartitionedF4.globalFilters;var newFilters=this.mergeIncomingFilters({globalFilters:globalFilters,appFilters:newAppFilters});this.handleStateUpdate(newFilters)}},{key:"removeFilter",value:function removeFilter(filter){var filterIndex=_lodash.default.findIndex(this.filters,(function(item){return _lodash.default.isEqual(item.meta,filter.meta)&&_lodash.default.isEqual(item.query,filter.query)}));if(filterIndex>=0){var newFilters=_lodash.default.cloneDeep(this.filters);newFilters.splice(filterIndex,1);this.handleStateUpdate(newFilters)}}},{key:"removeAll",value:function removeAll(){this.setFilters([])}}],[{key:"mergeFilters",value:function mergeFilters(appFilters,globalFilters){return(0,_common.uniqFilters)(appFilters.reverse().concat(globalFilters.reverse())).reverse()}},{key:"partitionFilters",value:function partitionFilters(filters){var _$partition=_lodash.default.partition(filters,_common.isFilterPinned),_$partition2=_slicedToArray(_$partition,2),globalFilters=_$partition2[0],appFilters=_$partition2[1];return{globalFilters:globalFilters,appFilters:appFilters}}},{key:"setFiltersStore",value:function setFiltersStore(filters,store){var shouldOverrideStore=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_lodash.default.map(filters,(function(filter){if(shouldOverrideStore||filter.$state===undefined){filter.$state={store:store}}}))}}]);return FilterManager}();exports.FilterManager=FilterManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sortFilters=void 0;var _common=__webpack_require__(93);var sortFilters=function sortFilters(_ref,_ref2){var a=_ref.$state;var b=_ref2.$state;if(a.store===b.store){return 0}else{return a.store===_common.FilterStateStore.GLOBAL_STATE&&b.store!==_common.FilterStateStore.GLOBAL_STATE?-1:1}};exports.sortFilters=sortFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapFilter=mapFilter;var _lodash=__webpack_require__(0);var _map_spatial_filter=__webpack_require__(471);var _map_match_all=__webpack_require__(472);var _map_phrase=__webpack_require__(473);var _map_phrases=__webpack_require__(474);var _map_range=__webpack_require__(475);var _map_exists=__webpack_require__(476);var _map_missing=__webpack_require__(477);var _map_query_string=__webpack_require__(478);var _map_geo_bounding_box=__webpack_require__(479);var _map_geo_polygon=__webpack_require__(480);var _map_default=__webpack_require__(481);var _generate_mapping_chain=__webpack_require__(482);function mapFilter(filter){var mappers=[_map_spatial_filter.mapSpatialFilter,_map_match_all.mapMatchAll,_map_range.mapRange,_map_phrase.mapPhrase,_map_phrases.mapPhrases,_map_exists.mapExists,_map_missing.mapMissing,_map_query_string.mapQueryString,_map_geo_bounding_box.mapGeoBoundingBox,_map_geo_polygon.mapGeoPolygon,_map_default.mapDefault];var noop=function noop(){throw new Error("No mappings have been found for filter.")};var mapFn=(0,_lodash.reduceRight)(mappers,(function(memo,map){return(0,_generate_mapping_chain.generateMappingChain)(map,memo)}),noop);var mapped=mapFn(filter);filter.meta=filter.meta||{};filter.meta.type=mapped.type;filter.meta.key=mapped.key;filter.meta.value=mapped.value;filter.meta.params=mapped.params;filter.meta.disabled=Boolean(filter.meta.disabled);filter.meta.negate=Boolean(filter.meta.negate);filter.meta.alias=filter.meta.alias||null;return filter}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapSpatialFilter=void 0;var _common=__webpack_require__(93);var mapSpatialFilter=function mapSpatialFilter(filter){if(filter.meta&&filter.meta.key&&filter.meta.alias&&filter.meta.type===_common.FILTERS.SPATIAL_FILTER){return{key:filter.meta.key,type:filter.meta.type,value:""}}throw filter};exports.mapSpatialFilter=mapSpatialFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapMatchAll=void 0;var _common=__webpack_require__(93);var mapMatchAll=function mapMatchAll(filter){if((0,_common.isMatchAllFilter)(filter)){return{type:_common.FILTERS.MATCH_ALL,key:filter.meta.field,value:filter.meta.formattedValue||"all"}}throw filter};exports.mapMatchAll=mapMatchAll},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapPhrase=exports.isMapPhraseFilter=void 0;var _lodash=__webpack_require__(0);var _common=__webpack_require__(93);var getScriptedPhraseValue=function getScriptedPhraseValue(filter){return(0,_lodash.get)(filter,["script","script","params","value"])};var getFormattedValueFn=function getFormattedValueFn(value){return function(formatter){return formatter?formatter.convert(value):value}};var getParams=function getParams(filter){var scriptedPhraseValue=getScriptedPhraseValue(filter);var isScriptedFilter=Boolean(scriptedPhraseValue);var key=isScriptedFilter?filter.meta.field||"":(0,_common.getPhraseFilterField)(filter);var query=scriptedPhraseValue||(0,_common.getPhraseFilterValue)(filter);var params={query:query};return{key:key,params:params,type:_common.FILTERS.PHRASE,value:getFormattedValueFn(query)}};var isMapPhraseFilter=function isMapPhraseFilter(filter){return(0,_common.isPhraseFilter)(filter)||(0,_common.isScriptedPhraseFilter)(filter)};exports.isMapPhraseFilter=isMapPhraseFilter;var mapPhrase=function mapPhrase(filter){if(!isMapPhraseFilter(filter)){throw filter}return getParams(filter)};exports.mapPhrase=mapPhrase},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapPhrases=void 0;var _common=__webpack_require__(93);var mapPhrases=function mapPhrases(filter){if(!(0,_common.isPhrasesFilter)(filter)){throw filter}var _filter$meta=filter.meta,type=_filter$meta.type,key=_filter$meta.key,value=_filter$meta.value,params=_filter$meta.params;return{type:type,key:key,value:value,params:params}};exports.mapPhrases=mapPhrases},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapRange=exports.isMapRangeFilter=void 0;var _lodash=__webpack_require__(0);var _common=__webpack_require__(93);var getFormattedValueFn=function getFormattedValueFn(left,right){return function(formatter){var displayValue="".concat(left," to ").concat(right);if(formatter){var convert=formatter.getConverterFor("text");displayValue="".concat(convert(left)," to ").concat(convert(right))}return displayValue}};var getFirstRangeKey=function getFirstRangeKey(filter){return filter.range&&Object.keys(filter.range)[0]};var getRangeByKey=function getRangeByKey(filter,key){return(0,_lodash.get)(filter,["range",key])};function getParams(filter){var isScriptedRange=(0,_common.isScriptedRangeFilter)(filter);var key=(isScriptedRange?filter.meta.field:getFirstRangeKey(filter))||"";var params=isScriptedRange?(0,_lodash.get)(filter,"script.script.params"):getRangeByKey(filter,key);var left=(0,_lodash.has)(params,"gte")?params.gte:params.gt;if(left==null)left=-Infinity;var right=(0,_lodash.has)(params,"lte")?params.lte:params.lt;if(right==null)right=Infinity;var value=getFormattedValueFn(left,right);return{type:_common.FILTERS.RANGE,key:key,value:value,params:params}}var isMapRangeFilter=function isMapRangeFilter(filter){return(0,_common.isRangeFilter)(filter)||(0,_common.isScriptedRangeFilter)(filter)};exports.isMapRangeFilter=isMapRangeFilter;var mapRange=function mapRange(filter){if(!isMapRangeFilter(filter)){throw filter}return getParams(filter)};exports.mapRange=mapRange},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapExists=void 0;var _lodash=__webpack_require__(0);var _common=__webpack_require__(93);var mapExists=function mapExists(filter){if((0,_common.isExistsFilter)(filter)){return{type:_common.FILTERS.EXISTS,value:_common.FILTERS.EXISTS,key:(0,_lodash.get)(filter,"exists.field")}}throw filter};exports.mapExists=mapExists},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapMissing=void 0;var _common=__webpack_require__(93);var mapMissing=function mapMissing(filter){if((0,_common.isMissingFilter)(filter)){return{type:_common.FILTERS.MISSING,value:_common.FILTERS.MISSING,key:filter.missing.field}}throw filter};exports.mapMissing=mapMissing},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapQueryString=void 0;var _common=__webpack_require__(93);var mapQueryString=function mapQueryString(filter){if((0,_common.isQueryStringFilter)(filter)){return{type:_common.FILTERS.QUERY_STRING,key:"query",value:filter.query.query_string.query}}throw filter};exports.mapQueryString=mapQueryString},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapGeoBoundingBox=void 0;var _common=__webpack_require__(93);var getFormattedValueFn=function getFormattedValueFn(params){return function(formatter){var corners=formatter?{topLeft:formatter.convert(params.top_left),bottomRight:formatter.convert(params.bottom_right)}:{topLeft:JSON.stringify(params.top_left),bottomRight:JSON.stringify(params.bottom_right)};return corners.topLeft+" to "+corners.bottomRight}};var getParams=function getParams(filter){var key=Object.keys(filter.geo_bounding_box).filter((function(k){return k!=="ignore_unmapped"}))[0];var params=filter.geo_bounding_box[key];return{key:key,params:params,type:_common.FILTERS.GEO_BOUNDING_BOX,value:getFormattedValueFn(params)}};var mapGeoBoundingBox=function mapGeoBoundingBox(filter){if(!(0,_common.isGeoBoundingBoxFilter)(filter)){throw filter}return getParams(filter)};exports.mapGeoBoundingBox=mapGeoBoundingBox},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapGeoPolygon=mapGeoPolygon;var _common=__webpack_require__(93);var POINTS_SEPARATOR=", ";var getFormattedValueFn=function getFormattedValueFn(points){return function(formatter){return points.map((function(point){return formatter?formatter.convert(point):JSON.stringify(point)})).join(POINTS_SEPARATOR)}};function getParams(filter){var key=Object.keys(filter.geo_polygon).filter((function(k){return k!=="ignore_unmapped"}))[0];var params=filter.geo_polygon[key];return{key:key,params:params,type:_common.FILTERS.GEO_POLYGON,value:getFormattedValueFn(params.points||[])}}function mapGeoPolygon(filter){if(!(0,_common.isGeoPolygonFilter)(filter)){throw filter}return getParams(filter)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapDefault=void 0;var _lodash=__webpack_require__(0);var _common=__webpack_require__(93);var mapDefault=function mapDefault(filter){var metaProperty=/(^\$|meta)/;var key=(0,_lodash.find)((0,_lodash.keys)(filter),(function(item){return!item.match(metaProperty)}));if(key){var type=_common.FILTERS.CUSTOM;var value=JSON.stringify((0,_lodash.get)(filter,key,{}));return{type:type,key:key,value:value}}throw filter};exports.mapDefault=mapDefault},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.generateMappingChain=void 0;var noop=function noop(){throw new Error("No mappings have been found for filter.")};var generateMappingChain=function generateMappingChain(fn){var next=arguments.length>1&&arguments[1]!==undefined?arguments[1]:noop;return function(filter){try{return fn(filter)}catch(result){if(result===filter){return next(filter)}throw result}}};exports.generateMappingChain=generateMappingChain},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.generateFilters=generateFilters;var _lodash=_interopRequireDefault(__webpack_require__(0));var _common=__webpack_require__(93);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getExistingFilter(appFilters,fieldName,value){return _lodash.default.find(appFilters,(function(filter){if(!filter)return;if(fieldName==="_exists_"&&(0,_common.isExistsFilter)(filter)){return filter.exists.field===value}if((0,_common.isPhraseFilter)(filter)){return(0,_common.getPhraseFilterField)(filter)===fieldName&&(0,_common.getPhraseFilterValue)(filter)===value}if((0,_common.isScriptedPhraseFilter)(filter)){return filter.meta.field===fieldName&&filter.script.script.params.value===value}}))}function updateExistingFilter(existingFilter,negate){existingFilter.meta.disabled=false;if(existingFilter.meta.negate!==negate){existingFilter.meta.negate=!existingFilter.meta.negate}}function generateFilters(filterManager,field,values,operation,index){values=Array.isArray(values)?values:[values];var fieldObj=_lodash.default.isObject(field)?field:{name:field};var fieldName=fieldObj.name;var newFilters=[];var appFilters=filterManager.getAppFilters();var negate=operation==="-";var filter;_lodash.default.each(values,(function(value){var existing=getExistingFilter(appFilters,fieldName,value);if(existing){updateExistingFilter(existing,negate);filter=existing}else{var tmpIndexPattern={id:index};var filterType=fieldName==="_exists_"?_common.FILTERS.EXISTS:_common.FILTERS.PHRASE;var actualFieldObj=fieldName==="_exists_"?{name:value}:fieldObj;filter=(0,_common.buildFilter)(tmpIndexPattern,actualFieldObj,filterType,negate,false,value,null,_common.FilterStateStore.APP_STATE)}newFilters.push(filter)}));return newFilters}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimefilterService=void 0;var _index=__webpack_require__(168);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var TimefilterService=function(){function TimefilterService(){_classCallCheck(this,TimefilterService)}_createClass(TimefilterService,[{key:"setup",value:function setup(_ref){var uiSettings=_ref.uiSettings,storage=_ref.storage;var timefilterConfig={timeDefaults:uiSettings.get("timepicker:timeDefaults"),refreshIntervalDefaults:uiSettings.get("timepicker:refreshIntervalDefaults")};var history=new _index.TimeHistory(storage);var timefilter=new _index.Timefilter(timefilterConfig,history);return{timefilter:timefilter,history:history}}},{key:"start",value:function start(){}},{key:"stop",value:function stop(){}}]);return TimefilterService}();exports.TimefilterService=TimefilterService},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Timefilter=void 0;var _lodash=_interopRequireDefault(__webpack_require__(0));var _rxjs=__webpack_require__(17);var _moment=_interopRequireDefault(__webpack_require__(84));var _diff_time_picker_vals=__webpack_require__(487);var _parse_querystring=__webpack_require__(488);var _get_time=__webpack_require__(241);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Timefilter=function(){function Timefilter(config,timeHistory){var _this=this;_classCallCheck(this,Timefilter);_defineProperty(this,"enabledUpdated$",new _rxjs.BehaviorSubject(false));_defineProperty(this,"timeUpdate$",new _rxjs.Subject);_defineProperty(this,"refreshIntervalUpdate$",new _rxjs.Subject);_defineProperty(this,"autoRefreshFetch$",new _rxjs.Subject);_defineProperty(this,"fetch$",new _rxjs.Subject);_defineProperty(this,"_time",void 0);_defineProperty(this,"_refreshInterval",void 0);_defineProperty(this,"_history",void 0);_defineProperty(this,"_isTimeRangeSelectorEnabled",false);_defineProperty(this,"_isAutoRefreshSelectorEnabled",false);_defineProperty(this,"_autoRefreshIntervalId",0);_defineProperty(this,"timeDefaults",void 0);_defineProperty(this,"refreshIntervalDefaults",void 0);_defineProperty(this,"getEnabledUpdated$",(function(){return _this.enabledUpdated$.asObservable()}));_defineProperty(this,"getTimeUpdate$",(function(){return _this.timeUpdate$.asObservable()}));_defineProperty(this,"getRefreshIntervalUpdate$",(function(){return _this.refreshIntervalUpdate$.asObservable()}));_defineProperty(this,"getAutoRefreshFetch$",(function(){return _this.autoRefreshFetch$.asObservable()}));_defineProperty(this,"getFetch$",(function(){return _this.fetch$.asObservable()}));_defineProperty(this,"getTime",(function(){var _this$_time=_this._time,from=_this$_time.from,to=_this$_time.to;return _objectSpread({},_this._time,{from:_moment.default.isMoment(from)?from.toISOString():from,to:_moment.default.isMoment(to)?to.toISOString():to})}));_defineProperty(this,"setTime",(function(time){var newTime=Object.assign(_this.getTime(),time);if((0,_diff_time_picker_vals.areTimeRangesDifferent)(_this.getTime(),newTime)){_this._time={from:newTime.from,to:newTime.to};_this._history.add(_this._time);_this.timeUpdate$.next();_this.fetch$.next()}}));_defineProperty(this,"getRefreshInterval",(function(){return _lodash.default.clone(_this._refreshInterval)}));_defineProperty(this,"setRefreshInterval",(function(refreshInterval){var prevRefreshInterval=_this.getRefreshInterval();var newRefreshInterval=_objectSpread({},prevRefreshInterval,{},refreshInterval);if(newRefreshInterval.value<=0){newRefreshInterval.value=0;newRefreshInterval.pause=true}_this._refreshInterval={value:newRefreshInterval.value,pause:newRefreshInterval.pause};if(prevRefreshInterval&&(0,_diff_time_picker_vals.areRefreshIntervalsDifferent)(prevRefreshInterval,newRefreshInterval)){_this.refreshIntervalUpdate$.next();if(!newRefreshInterval.pause&&newRefreshInterval.value!==0){_this.fetch$.next()}}clearInterval(_this._autoRefreshIntervalId);if(!newRefreshInterval.pause){_this._autoRefreshIntervalId=window.setInterval((function(){return _this.autoRefreshFetch$.next()}),newRefreshInterval.value)}}));_defineProperty(this,"createFilter",(function(indexPattern,timeRange){return(0,_get_time.getTime)(indexPattern,timeRange?timeRange:_this._time,_this.getForceNow())}));_defineProperty(this,"enableTimeRangeSelector",(function(){_this._isTimeRangeSelectorEnabled=true;_this.enabledUpdated$.next(true)}));_defineProperty(this,"disableTimeRangeSelector",(function(){_this._isTimeRangeSelectorEnabled=false;_this.enabledUpdated$.next(false)}));_defineProperty(this,"enableAutoRefreshSelector",(function(){_this._isAutoRefreshSelectorEnabled=true;_this.enabledUpdated$.next(true)}));_defineProperty(this,"disableAutoRefreshSelector",(function(){_this._isAutoRefreshSelectorEnabled=false;_this.enabledUpdated$.next(false)}));_defineProperty(this,"getForceNow",(function(){var forceNow=(0,_parse_querystring.parseQueryString)().forceNow;if(!forceNow){return}var ticks=Date.parse(forceNow);if(isNaN(ticks)){throw new Error("forceNow query parameter, ".concat(forceNow,", can't be parsed by Date.parse"))}return new Date(ticks)}));this._history=timeHistory;this.timeDefaults=config.timeDefaults;this.refreshIntervalDefaults=config.refreshIntervalDefaults;this._time=config.timeDefaults;this.setRefreshInterval(config.refreshIntervalDefaults)}_createClass(Timefilter,[{key:"isTimeRangeSelectorEnabled",value:function isTimeRangeSelectorEnabled(){return this._isTimeRangeSelectorEnabled}},{key:"isAutoRefreshSelectorEnabled",value:function isAutoRefreshSelectorEnabled(){return this._isAutoRefreshSelectorEnabled}},{key:"getBounds",value:function getBounds(){return this.calculateBounds(this._time)}},{key:"calculateBounds",value:function calculateBounds(timeRange){return(0,_get_time.calculateBounds)(timeRange,{forceNow:this.getForceNow()})}},{key:"getActiveBounds",value:function getActiveBounds(){if(this.isTimeRangeSelectorEnabled()){return this.getBounds()}}},{key:"getTimeDefaults",value:function getTimeDefaults(){return _lodash.default.cloneDeep(this.timeDefaults)}},{key:"getRefreshIntervalDefaults",value:function getRefreshIntervalDefaults(){return _lodash.default.cloneDeep(this.refreshIntervalDefaults)}}]);return Timefilter}();exports.Timefilter=Timefilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.areRefreshIntervalsDifferent=areRefreshIntervalsDifferent;exports.areTimeRangesDifferent=areTimeRangesDifferent;var _lodash=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var valueOf=function valueOf(o){if(o)return o.valueOf()};function areRefreshIntervalsDifferent(rangeA,rangeB){if(_lodash.default.isObject(rangeA)&&_lodash.default.isObject(rangeB)){if(valueOf(rangeA.value)!==valueOf(rangeB.value)||valueOf(rangeA.pause)!==valueOf(rangeB.pause)){return true}}else{return!_lodash.default.isEqual(rangeA,rangeB)}return false}function areTimeRangesDifferent(rangeA,rangeB){if(rangeA&&rangeB&&_lodash.default.isObject(rangeA)&&_lodash.default.isObject(rangeB)){if(valueOf(rangeA.to)!==valueOf(rangeB.to)||valueOf(rangeA.from)!==valueOf(rangeB.from)){return true}}else{return!_lodash.default.isEqual(rangeA,rangeB)}return false}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseQueryString=parseQueryString;var _queryString=__webpack_require__(489);function parseQueryString(){var hrefSplit=window.location.href.split("?");if(hrefSplit.length<=1){return{}}return(0,_queryString.parse)(hrefSplit[1],{sort:false})}},,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeHistory=void 0;var _moment=_interopRequireDefault(__webpack_require__(84));var _persisted_log=__webpack_require__(167);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TimeHistory=function(){function TimeHistory(storage){_classCallCheck(this,TimeHistory);_defineProperty(this,"history",void 0);var historyOptions={maxLength:10,filterDuplicates:true,isDuplicate:function isDuplicate(oldItem,newItem){return oldItem.from===newItem.from&&oldItem.to===newItem.to}};this.history=new _persisted_log.PersistedLog("kibana.timepicker.timeHistory",historyOptions,storage)}_createClass(TimeHistory,[{key:"add",value:function add(time){if(!time||!time.from||!time.to){return}var justStringsTime={from:_moment.default.isMoment(time.from)?time.from.toISOString():time.from,to:_moment.default.isMoment(time.to)?time.to.toISOString():time.to};this.history.add(justStringsTime)}},{key:"get",value:function get(){return this.history.get()}}]);return TimeHistory}();exports.TimeHistory=TimeHistory},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertRangeFilterToTimeRange=convertRangeFilterToTimeRange;exports.changeTimeFilter=changeTimeFilter;var _moment=_interopRequireDefault(__webpack_require__(84));var _lodash=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function convertRangeFilterToTimeRange(filter){var key=(0,_lodash.keys)(filter.range)[0];var values=filter.range[key];return{from:(0,_moment.default)(values.gt||values.gte),to:(0,_moment.default)(values.lt||values.lte)}}function changeTimeFilter(timeFilter,filter){timeFilter.setTime(convertRangeFilterToTimeRange(filter))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractTimeFilter=extractTimeFilter;var _lodash=__webpack_require__(0);var _common=__webpack_require__(93);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function extractTimeFilter(timeFieldName,filters){var _partition=(0,_lodash.partition)(filters,(function(obj){var key;if((0,_common.isRangeFilter)(obj)){key=(0,_lodash.keys)(obj.range)[0]}return Boolean(key&&key===timeFieldName)})),_partition2=_slicedToArray(_partition,2),timeRangeFilter=_partition2[0],restOfFilters=_partition2[1];return{restOfFilters:restOfFilters,timeRangeFilter:timeRangeFilter[0]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createQueryStateObservable=createQueryStateObservable;var _rxjs=__webpack_require__(17);var _operators=__webpack_require__(85);var _public=__webpack_require__(15);var _common=__webpack_require__(93);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createQueryStateObservable(_ref){var timefilter=_ref.timefilter.timefilter,filterManager=_ref.filterManager;return new _rxjs.Observable((function(subscriber){var state=(0,_public.createStateContainer)({time:timefilter.getTime(),refreshInterval:timefilter.getRefreshInterval(),filters:filterManager.getFilters()});var currentChange={};var subs=[timefilter.getTimeUpdate$().subscribe((function(){currentChange.time=true;state.set(_objectSpread({},state.get(),{time:timefilter.getTime()}))})),timefilter.getRefreshIntervalUpdate$().subscribe((function(){currentChange.refreshInterval=true;state.set(_objectSpread({},state.get(),{refreshInterval:timefilter.getRefreshInterval()}))})),filterManager.getUpdates$().subscribe((function(){currentChange.filters=true;var _state$get=state.get(),filters=_state$get.filters;var globalOld=filters===null||filters===void 0?void 0:filters.filter((function(f){return(0,_common.isFilterPinned)(f)}));var appOld=filters===null||filters===void 0?void 0:filters.filter((function(f){return!(0,_common.isFilterPinned)(f)}));var globalNew=filterManager.getGlobalFilters();var appNew=filterManager.getAppFilters();if(!globalOld||!(0,_common.compareFilters)(globalOld,globalNew,_common.COMPARE_ALL_OPTIONS)){currentChange.globalFilters=true}if(!appOld||!(0,_common.compareFilters)(appOld,appNew,_common.COMPARE_ALL_OPTIONS)){currentChange.appFilters=true}state.set(_objectSpread({},state.get(),{filters:filterManager.getFilters()}))})),state.state$.pipe((0,_operators.map)((function(newState){return{state:newState,changes:currentChange}})),(0,_operators.tap)((function(){currentChange={}}))).subscribe(subscriber)];return function(){subs.forEach((function(s){return s.unsubscribe()}))}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedQuery",{enumerable:true,get:function get(){return _types.SavedQuery}});Object.defineProperty(exports,"SavedQueryAttributes",{enumerable:true,get:function get(){return _types.SavedQueryAttributes}});Object.defineProperty(exports,"SavedQueryService",{enumerable:true,get:function get(){return _types.SavedQueryService}});Object.defineProperty(exports,"SavedQueryTimeFilter",{enumerable:true,get:function get(){return _types.SavedQueryTimeFilter}});Object.defineProperty(exports,"createSavedQueryService",{enumerable:true,get:function get(){return _saved_query_service.createSavedQueryService}});var _types=__webpack_require__(498);var _saved_query_service=__webpack_require__(242)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"connectToQueryState",{enumerable:true,get:function get(){return _connect_to_query_state.connectToQueryState}});Object.defineProperty(exports,"syncQueryStateWithUrl",{enumerable:true,get:function get(){return _sync_state_with_url.syncQueryStateWithUrl}});Object.defineProperty(exports,"QueryState",{enumerable:true,get:function get(){return _types.QueryState}});Object.defineProperty(exports,"QueryStateChange",{enumerable:true,get:function get(){return _types.QueryStateChange}});var _connect_to_query_state=__webpack_require__(243);var _sync_state_with_url=__webpack_require__(500);var _types=__webpack_require__(501)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.syncQueryStateWithUrl=void 0;var _public=__webpack_require__(15);var _connect_to_query_state=__webpack_require__(243);var _filters=__webpack_require__(104);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var GLOBAL_STATE_STORAGE_KEY="_g";var syncQueryStateWithUrl=function syncQueryStateWithUrl(query,kbnUrlStateStorage){var timefilter=query.timefilter.timefilter,filterManager=query.filterManager;var defaultState={time:timefilter.getTime(),refreshInterval:timefilter.getRefreshInterval(),filters:filterManager.getGlobalFilters()};var initialStateFromUrl=kbnUrlStateStorage.get(GLOBAL_STATE_STORAGE_KEY);var hasInheritedQueryFromUrl=Boolean(initialStateFromUrl&&Object.keys(initialStateFromUrl).length);var initialState=_objectSpread({},defaultState,{},initialStateFromUrl);var globalQueryStateContainer=(0,_public.createStateContainer)(initialState);var stopSyncingWithStateContainer=(0,_connect_to_query_state.connectToQueryState)(query,globalQueryStateContainer,{refreshInterval:true,time:true,filters:_filters.FilterStateStore.GLOBAL_STATE});if(!initialStateFromUrl){kbnUrlStateStorage.set(GLOBAL_STATE_STORAGE_KEY,initialState,{replace:true})}globalQueryStateContainer.set(initialState);var _syncState=(0,_public.syncState)({stateStorage:kbnUrlStateStorage,stateContainer:_objectSpread({},globalQueryStateContainer,{set:function set(state){if(state){globalQueryStateContainer.set(state)}}}),storageKey:GLOBAL_STATE_STORAGE_KEY}),start=_syncState.start,stopSyncingWithUrl=_syncState.stop;start();return{stop:function stop(){stopSyncingWithStateContainer();stopSyncingWithUrl()},hasInheritedQueryFromUrl:hasInheritedQueryFromUrl}};exports.syncQueryStateWithUrl=syncQueryStateWithUrl},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldFormatsService=void 0;var _common=__webpack_require__(93);var _deserialize=__webpack_require__(503);var _constants=__webpack_require__(245);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FieldFormatsService=function(){function FieldFormatsService(){_classCallCheck(this,FieldFormatsService);_defineProperty(this,"fieldFormatsRegistry",new _common.FieldFormatsRegistry)}_createClass(FieldFormatsService,[{key:"setup",value:function setup(core){var _this=this;core.uiSettings.getUpdate$().subscribe((function(_ref){var key=_ref.key,newValue=_ref.newValue;if(key==="format:defaultTypeMap"){_this.fieldFormatsRegistry.parseDefaultTypeMap(newValue)}}));var getConfig=core.uiSettings.get.bind(core.uiSettings);this.fieldFormatsRegistry.init(getConfig,{parsedUrl:{origin:window.location.origin,pathname:window.location.pathname,basePath:core.http.basePath.get()}},_constants.baseFormattersPublic);return this.fieldFormatsRegistry}},{key:"start",value:function start(){this.fieldFormatsRegistry.deserialize=_deserialize.deserializeFieldFormat.bind(this.fieldFormatsRegistry);return this.fieldFormatsRegistry}}]);return FieldFormatsService}();exports.FieldFormatsService=FieldFormatsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.deserializeFieldFormat=void 0;var _lodash=__webpack_require__(0);var _i18n=__webpack_require__(1);var _date_range=__webpack_require__(138);var _ip_range=__webpack_require__(139);var _common=__webpack_require__(93);var _services=__webpack_require__(95);function isTermsFieldFormat(serializedFieldFormat){return serializedFieldFormat.id==="terms"}var getConfig=function getConfig(key,defaultOverride){return(0,_services.getUiSettings)().get(key,defaultOverride)};var DefaultFieldFormat=_common.FieldFormat.from(_lodash.identity);var getFieldFormat=function getFieldFormat(fieldFormatsService,id){var params=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(id){var Format=fieldFormatsService.getType(id);if(Format){return new Format(params,getConfig)}}return new DefaultFieldFormat};var deserializeFieldFormat=function deserializeFieldFormat(mapping){var _this=this;if(!mapping){return new DefaultFieldFormat}var id=mapping.id;if(id==="range"){var RangeFormat=_common.FieldFormat.from((function(range){var nestedFormatter=mapping.params;var format=getFieldFormat(_this,nestedFormatter.id,nestedFormatter.params);var gte="";var lt="<";return _i18n.i18n.translate("data.aggTypes.buckets.ranges.rangesFormatMessage",{defaultMessage:"{gte} {from} and {lt} {to}",values:{gte:gte,from:format.convert(range.gte),lt:lt,to:format.convert(range.lt)}})}));return new RangeFormat}else if(id==="date_range"){var nestedFormatter=mapping.params;var DateRangeFormat=_common.FieldFormat.from((function(range){var format=getFieldFormat(_this,nestedFormatter.id,nestedFormatter.params);return(0,_date_range.convertDateRangeToString)(range,format.convert.bind(format))}));return new DateRangeFormat}else if(id==="ip_range"){var _nestedFormatter=mapping.params;var IpRangeFormat=_common.FieldFormat.from((function(range){var format=getFieldFormat(_this,_nestedFormatter.id,_nestedFormatter.params);return(0,_ip_range.convertIPRangeToString)(range,format.convert.bind(format))}));return new IpRangeFormat}else if(isTermsFieldFormat(mapping)&&mapping.params){var params=mapping.params;var convert=function convert(val,type){var format=getFieldFormat(_this,params.id,mapping.params);if(val==="__other__"){return params.otherBucketLabel}if(val==="__missing__"){return params.missingBucketLabel}return format.convert(val,type)};return{convert:convert,getConverterFor:function getConverterFor(type){return function(val){return convert(val,type)}}}}else{return getFieldFormat(this,id,mapping.params)}};exports.deserializeFieldFormat=deserializeFieldFormat},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DateFormat",{enumerable:true,get:function get(){return _date.DateFormat}});var _date=__webpack_require__(246)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTitle=getTitle;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getTitle(_x,_x2){return _getTitle.apply(this,arguments)}function _getTitle(){_getTitle=_asyncToGenerator(regeneratorRuntime.mark((function _callee(client,indexPatternId){var savedObject;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.get("index-pattern",indexPatternId);case 2:savedObject=_context.sent;if(!savedObject.error){_context.next=5;break}throw new Error("Unable to get index-pattern title: ".concat(savedObject.error.message));case 5:return _context.abrupt("return",savedObject.attributes.title);case 6:case"end":return _context.stop()}}}),_callee)})));return _getTitle.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateIndexPattern=validateIndexPattern;var _types=__webpack_require__(247);function indexPatternContainsSpaces(indexPattern){return indexPattern.includes(" ")}function findIllegalCharacters(indexPattern){var illegalCharacters=_types.ILLEGAL_CHARACTERS_VISIBLE.reduce((function(chars,char){if(indexPattern.includes(char)){chars.push(char)}return chars}),[]);return illegalCharacters}function validateIndexPattern(indexPattern){var errors={};var illegalCharacters=findIllegalCharacters(indexPattern);if(illegalCharacters.length){errors[_types.ILLEGAL_CHARACTERS_KEY]=illegalCharacters}if(indexPatternContainsSpaces(indexPattern)){errors[_types.CONTAINS_SPACES_KEY]=true}return errors}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternMissingIndices=void 0;var _public=__webpack_require__(15);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var IndexPatternMissingIndices=function(_KbnError){_inherits(IndexPatternMissingIndices,_KbnError);function IndexPatternMissingIndices(message){_classCallCheck(this,IndexPatternMissingIndices);var defaultMessage="IndexPattern's configured pattern does not match any indices";return _possibleConstructorReturn(this,_getPrototypeOf(IndexPatternMissingIndices).call(this,message&&message.length?"No matching indices found: ".concat(message):defaultMessage))}return IndexPatternMissingIndices}(_public.KbnError);exports.IndexPatternMissingIndices=IndexPatternMissingIndices},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFromSavedObject=getFromSavedObject;var _lodash=__webpack_require__(0);function getFromSavedObject(savedObject){if((0,_lodash.get)(savedObject,"attributes.fields")===undefined){return}return{id:savedObject.id,fields:JSON.parse(savedObject.attributes.fields),title:savedObject.attributes.title}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDefault=void 0;var isDefault=function isDefault(indexPattern){return!indexPattern.type};exports.isDefault=isDefault},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _flatten_hit=__webpack_require__(249);Object.keys(_flatten_hit).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _flatten_hit[key]}})}));var _format_hit=__webpack_require__(250);Object.keys(_format_hit).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _format_hit[key]}})}));var _index_pattern=__webpack_require__(251);Object.keys(_index_pattern).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_pattern[key]}})}));var _index_patterns=__webpack_require__(514);Object.keys(_index_patterns).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_patterns[key]}})}));var _index_patterns_api_client=__webpack_require__(254);Object.keys(_index_patterns_api_client).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_patterns_api_client[key]}})}));var _types=__webpack_require__(516);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldList=void 0;var _lodash=__webpack_require__(0);var _field=__webpack_require__(253);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FieldList=function(_Array){_inherits(FieldList,_Array);function FieldList(indexPattern){var _this;var specs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var shortDotsEnable=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,FieldList);_this=_possibleConstructorReturn(this,_getPrototypeOf(FieldList).call(this));_defineProperty(_assertThisInitialized(_this),"byName",new Map);_defineProperty(_assertThisInitialized(_this),"groups",new Map);_defineProperty(_assertThisInitialized(_this),"indexPattern",void 0);_defineProperty(_assertThisInitialized(_this),"shortDotsEnable",void 0);_defineProperty(_assertThisInitialized(_this),"setByName",(function(field){return _this.byName.set(field.name,field)}));_defineProperty(_assertThisInitialized(_this),"setByGroup",(function(field){if(typeof _this.groups.get(field.type)==="undefined"){_this.groups.set(field.type,new Map)}_this.groups.get(field.type).set(field.name,field)}));_defineProperty(_assertThisInitialized(_this),"removeByGroup",(function(field){return _this.groups.get(field.type).delete(field.name)}));_defineProperty(_assertThisInitialized(_this),"getByName",(function(name){return _this.byName.get(name)}));_defineProperty(_assertThisInitialized(_this),"getByType",(function(type){return _toConsumableArray((_this.groups.get(type)||new Map).values())}));_defineProperty(_assertThisInitialized(_this),"add",(function(field){var newField=new _field.Field(_this.indexPattern,field,_this.shortDotsEnable);_this.push(newField);_this.setByName(newField);_this.setByGroup(newField)}));_defineProperty(_assertThisInitialized(_this),"remove",(function(field){_this.removeByGroup(field);_this.byName.delete(field.name);var fieldIndex=(0,_lodash.findIndex)(_assertThisInitialized(_this),{name:field.name});_this.splice(fieldIndex,1)}));_defineProperty(_assertThisInitialized(_this),"update",(function(field){var index=_this.findIndex((function(f){return f.name===field.name}));_this.splice(index,1,field);_this.setByName(field);_this.removeByGroup(field);_this.setByGroup(field)}));_this.indexPattern=indexPattern;_this.shortDotsEnable=shortDotsEnable;specs.map((function(field){return _this.add(field)}));return _this}return FieldList}(_wrapNativeSuper(Array));exports.FieldList=FieldList},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ObjDefine=ObjDefine;var _lodash=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ObjDefine(defaults,prototype){this.obj;this.descs={};this.defaults=defaults||{};this.prototype=prototype||Object.prototype}ObjDefine.REDEFINE_SUPPORTED=function(){var a=Object.create(Object.prototype,{prop:{configurable:true,value:1}});Object.defineProperty(a,"prop",{configurable:true,value:2});return a.prop===2}();ObjDefine.prototype.writ=function(name,val){this._define(name,val,true,true)};ObjDefine.prototype.fact=function(name,val){this._define(name,val,true)};ObjDefine.prototype.comp=function(name,val){this._define(name,val)};ObjDefine.prototype.create=function(){var self=this;self.obj=Object.create(this.prototype,self.descs);if(!ObjDefine.REDEFINE_SUPPORTED&&!self.prototype.toJSON){self.obj.toJSON=function(){return _lodash.default.transform(self.obj,(function(json,val,key){var desc=self.descs[key];if(desc&&desc.enumerable&&val==null)return;json[key]=val}),{})}}return self.obj};ObjDefine.prototype._define=function(name,val,exported,changeable){val=val!=null?val:this.defaults[name];this.descs[name]=this._describe(name,val,!!exported,!!changeable)};ObjDefine.prototype._describe=function(name,val,exported,changeable){var self=this;var exists=val!=null;if(exported&&ObjDefine.REDEFINE_SUPPORTED){return{enumerable:exists,configurable:true,get:_lodash.default.constant(val),set:function set(update){if(!changeable)return false;self.descs[name]=self._describe(name,update,exported,changeable);Object.defineProperty(self.obj,name,self.descs[name])}}}if(exported&&!ObjDefine.REDEFINE_SUPPORTED){return{enumerable:true,configurable:true,writable:changeable,value:val}}return{enumerable:false,writable:changeable,configurable:true,value:val}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFieldsFetcher=void 0;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createFieldsFetcher=function createFieldsFetcher(indexPattern,apiClient,metaFields){var fieldFetcher={fetch:function fetch(options){return fieldFetcher.fetchForWildcard(indexPattern.getIndex(),_objectSpread({},options,{type:indexPattern.type,params:indexPattern.typeMeta&&indexPattern.typeMeta.params}))},fetchForWildcard:function fetchForWildcard(pattern){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return apiClient.getFieldsForWildcard({pattern:pattern,metaFields:metaFields,type:options.type,params:options.params||{}})}};return fieldFetcher};exports.createFieldsFetcher=createFieldsFetcher},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternsService=void 0;var _pattern_cache=__webpack_require__(515);var _index_pattern=__webpack_require__(251);var _index_patterns_api_client=__webpack_require__(254);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var indexPatternCache=(0,_pattern_cache.createIndexPatternCache)();var IndexPatternsService=function(){function IndexPatternsService(config,savedObjectsClient,http){var _this=this;_classCallCheck(this,IndexPatternsService);_defineProperty(this,"config",void 0);_defineProperty(this,"savedObjectsClient",void 0);_defineProperty(this,"savedObjectsCache",void 0);_defineProperty(this,"apiClient",void 0);_defineProperty(this,"getIds",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var refresh,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:refresh=_args.length>0&&_args[0]!==undefined?_args[0]:false;if(!(!_this.savedObjectsCache||refresh)){_context.next=4;break}_context.next=4;return _this.refreshSavedObjectsCache();case 4:if(_this.savedObjectsCache){_context.next=6;break}return _context.abrupt("return",[]);case 6:return _context.abrupt("return",_this.savedObjectsCache.map((function(obj){return obj===null||obj===void 0?void 0:obj.id})));case 7:case"end":return _context.stop()}}}),_callee)})));return function(){return _ref.apply(this,arguments)}}());_defineProperty(this,"getTitles",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var refresh,_args2=arguments;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:refresh=_args2.length>0&&_args2[0]!==undefined?_args2[0]:false;if(!(!_this.savedObjectsCache||refresh)){_context2.next=4;break}_context2.next=4;return _this.refreshSavedObjectsCache();case 4:if(_this.savedObjectsCache){_context2.next=6;break}return _context2.abrupt("return",[]);case 6:return _context2.abrupt("return",_this.savedObjectsCache.map((function(obj){var _obj$attributes;return obj===null||obj===void 0?void 0:(_obj$attributes=obj.attributes)===null||_obj$attributes===void 0?void 0:_obj$attributes.title})));case 7:case"end":return _context2.stop()}}}),_callee2)})));return function(){return _ref2.apply(this,arguments)}}());_defineProperty(this,"getFields",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(fields){var refresh,_args3=arguments;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:refresh=_args3.length>1&&_args3[1]!==undefined?_args3[1]:false;if(!(!_this.savedObjectsCache||refresh)){_context3.next=4;break}_context3.next=4;return _this.refreshSavedObjectsCache();case 4:if(_this.savedObjectsCache){_context3.next=6;break}return _context3.abrupt("return",[]);case 6:return _context3.abrupt("return",_this.savedObjectsCache.map((function(obj){var result={};fields.forEach((function(f){var _obj$attributes2;return result[f]=obj[f]||(obj===null||obj===void 0?void 0:(_obj$attributes2=obj.attributes)===null||_obj$attributes2===void 0?void 0:_obj$attributes2[f])}));return result})));case 7:case"end":return _context3.stop()}}}),_callee3)})));return function(_x){return _ref3.apply(this,arguments)}}());_defineProperty(this,"getFieldsForTimePattern",(function(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return _this.apiClient.getFieldsForTimePattern(options)}));_defineProperty(this,"getFieldsForWildcard",(function(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return _this.apiClient.getFieldsForWildcard(options)}));_defineProperty(this,"clearCache",(function(id){_this.savedObjectsCache=null;if(id){indexPatternCache.clear(id)}else{indexPatternCache.clearAll()}}));_defineProperty(this,"getCache",_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(_this.savedObjectsCache){_context4.next=3;break}_context4.next=3;return _this.refreshSavedObjectsCache();case 3:return _context4.abrupt("return",_this.savedObjectsCache);case 4:case"end":return _context4.stop()}}}),_callee4)}))));_defineProperty(this,"getDefault",_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){var defaultIndexPatternId;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:defaultIndexPatternId=_this.config.get("defaultIndex");if(!defaultIndexPatternId){_context5.next=5;break}_context5.next=4;return _this.get(defaultIndexPatternId);case 4:return _context5.abrupt("return",_context5.sent);case 5:return _context5.abrupt("return",null);case 6:case"end":return _context5.stop()}}}),_callee5)}))));_defineProperty(this,"get",function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(id){var cache,indexPattern;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:cache=indexPatternCache.get(id);if(!cache){_context6.next=3;break}return _context6.abrupt("return",cache);case 3:_context6.next=5;return _this.make(id);case 5:indexPattern=_context6.sent;return _context6.abrupt("return",indexPatternCache.set(id,indexPattern));case 7:case"end":return _context6.stop()}}}),_callee6)})));return function(_x2){return _ref6.apply(this,arguments)}}());_defineProperty(this,"make",(function(id){var indexPattern=new _index_pattern.IndexPattern(id,(function(cfg){return _this.config.get(cfg)}),_this.savedObjectsClient,_this.apiClient,indexPatternCache);return indexPattern.init()}));this.apiClient=new _index_patterns_api_client.IndexPatternsApiClient(http);this.config=config;this.savedObjectsClient=savedObjectsClient}_createClass(IndexPatternsService,[{key:"refreshSavedObjectsCache",value:function(){var _refreshSavedObjectsCache=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.savedObjectsClient.find({type:"index-pattern",fields:["title"],perPage:1e4});case 2:this.savedObjectsCache=_context7.sent.savedObjects;case 3:case"end":return _context7.stop()}}}),_callee7,this)})));function refreshSavedObjectsCache(){return _refreshSavedObjectsCache.apply(this,arguments)}return refreshSavedObjectsCache}()}]);return IndexPatternsService}();exports.IndexPatternsService=IndexPatternsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createIndexPatternCache=createIndexPatternCache;function createIndexPatternCache(){var vals={};var cache={get:function get(id){return vals[id]},set:function set(id,prom){vals[id]=prom;return prom},clear:function clear(id){delete vals[id]},clearAll:function clearAll(){for(var _id in vals){if(vals.hasOwnProperty(_id)){delete vals[_id]}}}};return cache}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QuerySuggestionTypes=void 0;var QuerySuggestionTypes;exports.QuerySuggestionTypes=QuerySuggestionTypes;(function(QuerySuggestionTypes){QuerySuggestionTypes["Field"]="field";QuerySuggestionTypes["Value"]="value";QuerySuggestionTypes["Operator"]="operator";QuerySuggestionTypes["Conjunction"]="conjunction";QuerySuggestionTypes["RecentSearch"]="recentSearch"})(QuerySuggestionTypes||(exports.QuerySuggestionTypes=QuerySuggestionTypes={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AutocompleteService=void 0;var _value_suggestion_provider=__webpack_require__(519);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AutocompleteService=function(){function AutocompleteService(){var _this=this;_classCallCheck(this,AutocompleteService);_defineProperty(this,"querySuggestionProviders",new Map);_defineProperty(this,"getValueSuggestions",void 0);_defineProperty(this,"addQuerySuggestionProvider",(function(language,provider){if(language&&provider){_this.querySuggestionProviders.set(language,provider)}}));_defineProperty(this,"getQuerySuggestions",(function(args){var language=args.language;var provider=_this.querySuggestionProviders.get(language);if(provider){return provider(args)}}));_defineProperty(this,"hasQuerySuggestions",(function(language){return _this.querySuggestionProviders.has(language)}))}_createClass(AutocompleteService,[{key:"setup",value:function setup(core){this.getValueSuggestions=(0,_value_suggestion_provider.setupValueSuggestionProvider)(core);return{addQuerySuggestionProvider:this.addQuerySuggestionProvider,getQuerySuggestions:this.getQuerySuggestions}}},{key:"start",value:function start(){return{getQuerySuggestions:this.getQuerySuggestions,hasQuerySuggestions:this.hasQuerySuggestions,getValueSuggestions:this.getValueSuggestions}}},{key:"clearProviders",value:function clearProviders(){this.querySuggestionProviders.clear()}}]);return AutocompleteService}();exports.AutocompleteService=AutocompleteService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setupValueSuggestionProvider=void 0;var _lodash=__webpack_require__(0);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function resolver(title,field,query,boolFilter){var ttl=Math.floor(Date.now()/1e3/60);return[ttl,query,title,field.name,JSON.stringify(boolFilter)].join("|")}var setupValueSuggestionProvider=function setupValueSuggestionProvider(core){var requestSuggestions=(0,_lodash.memoize)((function(index,field,query){var boolFilter=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var signal=arguments.length>4?arguments[4]:undefined;return core.http.fetch("/api/kibana/suggestions/values/".concat(index),{method:"POST",body:JSON.stringify({query:query,field:field.name,boolFilter:boolFilter}),signal:signal})}),resolver);return(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref2){var indexPattern,field,query,boolFilter,signal,shouldSuggestValues,title;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPattern=_ref2.indexPattern,field=_ref2.field,query=_ref2.query,boolFilter=_ref2.boolFilter,signal=_ref2.signal;shouldSuggestValues=core.uiSettings.get("filterEditor:suggestValues");title=indexPattern.title;if(!(field.type==="boolean")){_context.next=7;break}return _context.abrupt("return",[true,false]);case 7:if(!(!shouldSuggestValues||!field.aggregatable||field.type!=="string")){_context.next=9;break}return _context.abrupt("return",[]);case 9:_context.next=11;return requestSuggestions(title,field,query,boolFilter,signal);case 11:return _context.abrupt("return",_context.sent);case 12:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}())};exports.setupValueSuggestionProvider=setupValueSuggestionProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={ISearchSetup:true,ISearchStart:true,ISearchContext:true,TSearchStrategyProvider:true,ISearchStrategy:true,ISearch:true,ISearchOptions:true,IRequestTypesMap:true,IResponseTypesMap:true,ISearchGeneric:true,IEsSearchResponse:true,IEsSearchRequest:true,ES_SEARCH_STRATEGY:true,IKibanaSearchResponse:true,IKibanaSearchRequest:true,ISyncSearchRequest:true,SYNC_SEARCH_STRATEGY:true,esSearchStrategyProvider:true,getEsPreference:true,LegacyApiCaller:true,SearchRequest:true,SearchResponse:true,SearchError:true,SearchStrategyProvider:true,getSearchErrorType:true,ISearchSource:true,SearchSource:true,SearchSourceFields:true,EsQuerySortValue:true,SortDirection:true,SearchInterceptor:true,RequestTimeoutError:true,FetchOptions:true};Object.defineProperty(exports,"ISearchSetup",{enumerable:true,get:function get(){return _types.ISearchSetup}});Object.defineProperty(exports,"ISearchStart",{enumerable:true,get:function get(){return _types.ISearchStart}});Object.defineProperty(exports,"ISearchContext",{enumerable:true,get:function get(){return _types.ISearchContext}});Object.defineProperty(exports,"TSearchStrategyProvider",{enumerable:true,get:function get(){return _types.TSearchStrategyProvider}});Object.defineProperty(exports,"ISearchStrategy",{enumerable:true,get:function get(){return _types.ISearchStrategy}});Object.defineProperty(exports,"ISearch",{enumerable:true,get:function get(){return _i_search.ISearch}});Object.defineProperty(exports,"ISearchOptions",{enumerable:true,get:function get(){return _i_search.ISearchOptions}});Object.defineProperty(exports,"IRequestTypesMap",{enumerable:true,get:function get(){return _i_search.IRequestTypesMap}});Object.defineProperty(exports,"IResponseTypesMap",{enumerable:true,get:function get(){return _i_search.IResponseTypesMap}});Object.defineProperty(exports,"ISearchGeneric",{enumerable:true,get:function get(){return _i_search.ISearchGeneric}});Object.defineProperty(exports,"IEsSearchResponse",{enumerable:true,get:function get(){return _search.IEsSearchResponse}});Object.defineProperty(exports,"IEsSearchRequest",{enumerable:true,get:function get(){return _search.IEsSearchRequest}});Object.defineProperty(exports,"ES_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _search.ES_SEARCH_STRATEGY}});Object.defineProperty(exports,"IKibanaSearchResponse",{enumerable:true,get:function get(){return _search.IKibanaSearchResponse}});Object.defineProperty(exports,"IKibanaSearchRequest",{enumerable:true,get:function get(){return _search.IKibanaSearchRequest}});Object.defineProperty(exports,"ISyncSearchRequest",{enumerable:true,get:function get(){return _sync_search_strategy.ISyncSearchRequest}});Object.defineProperty(exports,"SYNC_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _sync_search_strategy.SYNC_SEARCH_STRATEGY}});Object.defineProperty(exports,"esSearchStrategyProvider",{enumerable:true,get:function get(){return _es_search.esSearchStrategyProvider}});Object.defineProperty(exports,"getEsPreference",{enumerable:true,get:function get(){return _es_search.getEsPreference}});Object.defineProperty(exports,"LegacyApiCaller",{enumerable:true,get:function get(){return _es_client.LegacyApiCaller}});Object.defineProperty(exports,"SearchRequest",{enumerable:true,get:function get(){return _es_client.SearchRequest}});Object.defineProperty(exports,"SearchResponse",{enumerable:true,get:function get(){return _es_client.SearchResponse}});Object.defineProperty(exports,"SearchError",{enumerable:true,get:function get(){return _search_strategy.SearchError}});Object.defineProperty(exports,"SearchStrategyProvider",{enumerable:true,get:function get(){return _search_strategy.SearchStrategyProvider}});Object.defineProperty(exports,"getSearchErrorType",{enumerable:true,get:function get(){return _search_strategy.getSearchErrorType}});Object.defineProperty(exports,"ISearchSource",{enumerable:true,get:function get(){return _search_source.ISearchSource}});Object.defineProperty(exports,"SearchSource",{enumerable:true,get:function get(){return _search_source.SearchSource}});Object.defineProperty(exports,"SearchSourceFields",{enumerable:true,get:function get(){return _search_source.SearchSourceFields}});Object.defineProperty(exports,"EsQuerySortValue",{enumerable:true,get:function get(){return _search_source.EsQuerySortValue}});Object.defineProperty(exports,"SortDirection",{enumerable:true,get:function get(){return _search_source.SortDirection}});Object.defineProperty(exports,"SearchInterceptor",{enumerable:true,get:function get(){return _search_interceptor.SearchInterceptor}});Object.defineProperty(exports,"RequestTimeoutError",{enumerable:true,get:function get(){return _request_timeout_error.RequestTimeoutError}});Object.defineProperty(exports,"FetchOptions",{enumerable:true,get:function get(){return _fetch.FetchOptions}});var _aggs=__webpack_require__(141);Object.keys(_aggs).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _aggs[key]}})}));var _expressions=__webpack_require__(145);Object.keys(_expressions).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _expressions[key]}})}));var _tabify=__webpack_require__(280);Object.keys(_tabify).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _tabify[key]}})}));var _types=__webpack_require__(656);var _i_search=__webpack_require__(657);var _search=__webpack_require__(136);var _sync_search_strategy=__webpack_require__(148);var _es_search=__webpack_require__(658);var _es_client=__webpack_require__(286);var _search_strategy=__webpack_require__(279);var _search_source=__webpack_require__(271);var _search_interceptor=__webpack_require__(287);var _request_timeout_error=__webpack_require__(288);var _fetch=__webpack_require__(273)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggTypeFilters=exports.aggTypeFilters=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggTypeFilters=function(){function AggTypeFilters(){_classCallCheck(this,AggTypeFilters);_defineProperty(this,"filters",new Set)}_createClass(AggTypeFilters,[{key:"addFilter",value:function addFilter(filter){this.filters.add(filter)}},{key:"filter",value:function filter(aggTypes,indexPattern,aggConfig,aggFilter){var allFilters=Array.from(this.filters);var allowedAggTypes=aggTypes.filter((function(aggType){var isAggTypeAllowed=allFilters.every((function(filter){return filter(aggType,indexPattern,aggConfig,aggFilter)}));return isAggTypeAllowed}));return allowedAggTypes}}]);return AggTypeFilters}();exports.AggTypeFilters=AggTypeFilters;var aggTypeFilters=new AggTypeFilters;exports.aggTypeFilters=aggTypeFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.propFilter=propFilter;var _lodash=__webpack_require__(0);function propFilter(prop){return function filterByName(list){var filters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if((0,_lodash.isFunction)(filters)){return list.filter((function(item){return filters(item[prop])}))}if(!Array.isArray(filters)){filters=filters.split(",")}if(filters.length===0){return list}if(filters.includes("*")){return list}var options=filters.reduce((function(acc,filter){var type="include";var value=filter;if(filter.charAt(0)==="!"){type="exclude";value=filter.substr(1)}if(!acc[type]){acc[type]=[]}acc[type].push(value);return acc}),{});return list.filter((function(item){var value=item[prop];var excluded=options.exclude&&options.exclude.includes(value);if(excluded){return false}var included=!options.include||options.include.includes(value);if(included){return true}return false}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAggTypes=getAggTypes;var _count=__webpack_require__(524);var _avg=__webpack_require__(525);var _sum=__webpack_require__(526);var _median=__webpack_require__(527);var _min=__webpack_require__(528);var _max=__webpack_require__(529);var _top_hit=__webpack_require__(530);var _std_deviation=__webpack_require__(531);var _cardinality=__webpack_require__(532);var _percentiles=__webpack_require__(533);var _geo_bounds=__webpack_require__(535);var _geo_centroid=__webpack_require__(536);var _percentile_ranks=__webpack_require__(537);var _derivative=__webpack_require__(538);var _cumulative_sum=__webpack_require__(540);var _moving_avg=__webpack_require__(541);var _serial_diff=__webpack_require__(542);var _date_histogram=__webpack_require__(263);var _histogram=__webpack_require__(547);var _range=__webpack_require__(549);var _date_range=__webpack_require__(266);var _ip_range=__webpack_require__(267);var _terms=__webpack_require__(269);var _filter=__webpack_require__(637);var _filters=__webpack_require__(638);var _significant_terms=__webpack_require__(642);var _geo_hash=__webpack_require__(643);var _geo_tile=__webpack_require__(644);var _bucket_sum=__webpack_require__(645);var _bucket_avg=__webpack_require__(647);var _bucket_min=__webpack_require__(648);var _bucket_max=__webpack_require__(649);function getAggTypes(deps){var uiSettings=deps.uiSettings;return{metrics:[_count.countMetricAgg,_avg.avgMetricAgg,_sum.sumMetricAgg,_median.medianMetricAgg,_min.minMetricAgg,_max.maxMetricAgg,_std_deviation.stdDeviationMetricAgg,_cardinality.cardinalityMetricAgg,_percentiles.percentilesMetricAgg,_percentile_ranks.percentileRanksMetricAgg,_top_hit.topHitMetricAgg,_derivative.derivativeMetricAgg,_cumulative_sum.cumulativeSumMetricAgg,_moving_avg.movingAvgMetricAgg,_serial_diff.serialDiffMetricAgg,_bucket_avg.bucketAvgMetricAgg,_bucket_sum.bucketSumMetricAgg,_bucket_min.bucketMinMetricAgg,_bucket_max.bucketMaxMetricAgg,_geo_bounds.geoBoundsMetricAgg,_geo_centroid.geoCentroidMetricAgg],buckets:[_date_histogram.dateHistogramBucketAgg,_histogram.histogramBucketAgg,_range.rangeBucketAgg,_date_range.dateRangeBucketAgg,_ip_range.ipRangeBucketAgg,_terms.termsBucketAgg,_filter.filterBucketAgg,(0,_filters.getFiltersBucketAgg)({uiSettings:uiSettings}),_significant_terms.significantTermsBucketAgg,_geo_hash.geoHashBucketAgg,_geo_tile.geoTileBucketAgg]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.countMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _metric_agg_types=__webpack_require__(96);var _common=__webpack_require__(93);var _services=__webpack_require__(95);var countMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.COUNT,title:_i18n.i18n.translate("data.search.aggs.metrics.countTitle",{defaultMessage:"Count"}),hasNoDsl:true,makeLabel:function makeLabel(){return _i18n.i18n.translate("data.search.aggs.metrics.countLabel",{defaultMessage:"Count"})},getFormat:function getFormat(){var fieldFormatsService=(0,_services.getFieldFormats)();return fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.NUMBER)},getValue:function getValue(agg,bucket){return bucket.doc_count},isScalable:function isScalable(){return true}});exports.countMetricAgg=countMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.avgMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _metric_agg_types=__webpack_require__(96);var _common=__webpack_require__(93);var averageTitle=_i18n.i18n.translate("data.search.aggs.metrics.averageTitle",{defaultMessage:"Average"});var avgMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.AVG,title:averageTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.averageLabel",{defaultMessage:"Average {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.NUMBER}]});exports.avgMetricAgg=avgMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sumMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _metric_agg_types=__webpack_require__(96);var _common=__webpack_require__(93);var sumTitle=_i18n.i18n.translate("data.search.aggs.metrics.sumTitle",{defaultMessage:"Sum"});var sumMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.SUM,title:sumTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.sumLabel",{defaultMessage:"Sum of {field}",values:{field:aggConfig.getFieldDisplayName()}})},isScalable:function isScalable(){return true},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.NUMBER}]});exports.sumMetricAgg=sumMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.medianMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _metric_agg_types=__webpack_require__(96);var _common=__webpack_require__(93);var medianTitle=_i18n.i18n.translate("data.search.aggs.metrics.medianTitle",{defaultMessage:"Median"});var medianMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MEDIAN,dslName:"percentiles",title:medianTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.medianLabel",{defaultMessage:"Median {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.DATE,_common.KBN_FIELD_TYPES.HISTOGRAM],write:function write(agg,output){output.params.field=agg.getParam("field").name;output.params.percents=[50]}}],getValue:function getValue(agg,bucket){return bucket[agg.id].values["50.0"]}});exports.medianMetricAgg=medianMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.minMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _metric_agg_types=__webpack_require__(96);var _common=__webpack_require__(93);var minTitle=_i18n.i18n.translate("data.search.aggs.metrics.minTitle",{defaultMessage:"Min"});var minMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MIN,title:minTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.minLabel",{defaultMessage:"Min {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.DATE]}]});exports.minMetricAgg=minMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.maxMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _metric_agg_types=__webpack_require__(96);var _common=__webpack_require__(93);var maxTitle=_i18n.i18n.translate("data.search.aggs.metrics.maxTitle",{defaultMessage:"Max"});var maxMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MAX,title:maxTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.maxLabel",{defaultMessage:"Max {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.DATE]}]});exports.maxMetricAgg=maxMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.topHitMetricAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _metric_agg_types=__webpack_require__(96);var _common=__webpack_require__(93);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var isNumericFieldSelected=function isNumericFieldSelected(agg){var field=agg.getParam("field");return field&&field.type&&field.type===_common.KBN_FIELD_TYPES.NUMBER};var topHitMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.TOP_HITS,title:_i18n.i18n.translate("data.search.aggs.metrics.topHitTitle",{defaultMessage:"Top Hit"}),makeLabel:function makeLabel(aggConfig){var lastPrefixLabel=_i18n.i18n.translate("data.search.aggs.metrics.topHit.lastPrefixLabel",{defaultMessage:"Last"});var firstPrefixLabel=_i18n.i18n.translate("data.search.aggs.metrics.topHit.firstPrefixLabel",{defaultMessage:"First"});var prefix=aggConfig.getParam("sortOrder").value==="desc"?lastPrefixLabel:firstPrefixLabel;var size=aggConfig.getParam("size");if(size!==1){prefix+=" ".concat(size)}var field=aggConfig.getParam("field");return"".concat(prefix," ").concat(field?field.displayName:"")},params:[{name:"field",type:"field",onlyAggregatable:false,filterFieldTypes:Object.values(_common.KBN_FIELD_TYPES).filter((function(type){return type!==_common.KBN_FIELD_TYPES.HISTOGRAM})),write:function write(agg,output){var field=agg.getParam("field");output.params={};if(field.scripted){output.params.script_fields=_defineProperty({},field.name,{script:{source:field.script,lang:field.lang}})}else{if(field.readFromDocValues){var format=field.type===_common.KBN_FIELD_TYPES.DATE?"date_time":"use_field_mapping";output.params.docvalue_fields=[{field:field.name,format:format}]}output.params._source=field.name==="_source"?true:field.name}}},{name:"aggregate",type:"optioned",options:[{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.minLabel",{defaultMessage:"Min"}),isCompatible:isNumericFieldSelected,disabled:true,value:"min"},{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.maxLabel",{defaultMessage:"Max"}),isCompatible:isNumericFieldSelected,disabled:true,value:"max"},{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.sumLabel",{defaultMessage:"Sum"}),isCompatible:isNumericFieldSelected,disabled:true,value:"sum"},{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.averageLabel",{defaultMessage:"Average"}),isCompatible:isNumericFieldSelected,disabled:true,value:"average"},{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.concatenateLabel",{defaultMessage:"Concatenate"}),isCompatible:function isCompatible(aggConfig){return _lodash.default.get(aggConfig.params,"field.filterFieldTypes","*")==="*"},disabled:true,value:"concat"}],write:_lodash.default.noop},{name:"size",default:1},{name:"sortField",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.DATE,_common.KBN_FIELD_TYPES.IP,_common.KBN_FIELD_TYPES.STRING],default:function _default(agg){return agg.getIndexPattern().timeFieldName},write:_lodash.default.noop},{name:"sortOrder",type:"optioned",default:"desc",options:[{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.descendingLabel",{defaultMessage:"Descending"}),value:"desc"},{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.ascendingLabel",{defaultMessage:"Ascending"}),value:"asc"}],write:function write(agg,output){var sortField=agg.params.sortField;var sortOrder=agg.params.sortOrder;if(sortField.scripted){output.params.sort=[{_script:{script:{source:sortField.script,lang:sortField.lang},type:sortField.type,order:sortOrder.value}}]}else{output.params.sort=[_defineProperty({},sortField.name,{order:sortOrder.value})]}}}],getValue:function getValue(agg,bucket){var hits=_lodash.default.get(bucket,"".concat(agg.id,".hits.hits"));if(!hits||!hits.length){return null}var path=agg.getParam("field").name;var values=_lodash.default.flatten(hits.map((function(hit){return path==="_source"?hit._source:agg.getIndexPattern().flattenHit(hit,true)[path]})));if(values.length===1){values=values[0]}if(Array.isArray(values)){if(!_lodash.default.compact(values).length){return null}var aggregate=agg.getParam("aggregate");switch(aggregate.value){case"max":return _lodash.default.max(values);case"min":return _lodash.default.min(values);case"sum":return _lodash.default.sum(values);case"average":return _lodash.default.sum(values)/values.length}}return values}});exports.topHitMetricAgg=topHitMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.stdDeviationMetricAgg=void 0;var _lodash=__webpack_require__(0);var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _metric_agg_types=__webpack_require__(96);var _get_response_agg_config_class=__webpack_require__(173);var _common=__webpack_require__(93);var responseAggConfigProps={valProp:function valProp(){var customLabel=this.getParam("customLabel");var details=this.keyedDetails(customLabel)[this.key];return details.valProp},makeLabel:function makeLabel(){var fieldDisplayName=this.getFieldDisplayName();var customLabel=this.getParam("customLabel");var details=this.keyedDetails(customLabel,fieldDisplayName);return(0,_lodash.get)(details,[this.key,"title"])},keyedDetails:function keyedDetails(customLabel,fieldDisplayName){var label=customLabel||_i18n.i18n.translate("data.search.aggs.metrics.standardDeviation.keyDetailsLabel",{defaultMessage:"Standard Deviation of {fieldDisplayName}",values:{fieldDisplayName:fieldDisplayName}});return{std_lower:{valProp:["std_deviation_bounds","lower"],title:_i18n.i18n.translate("data.search.aggs.metrics.standardDeviation.lowerKeyDetailsTitle",{defaultMessage:"Lower {label}",values:{label:label}})},std_upper:{valProp:["std_deviation_bounds","upper"],title:_i18n.i18n.translate("data.search.aggs.metrics.standardDeviation.upperKeyDetailsTitle",{defaultMessage:"Upper {label}",values:{label:label}})}}}};var stdDeviationMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.STD_DEV,dslName:"extended_stats",title:_i18n.i18n.translate("data.search.aggs.metrics.standardDeviationTitle",{defaultMessage:"Standard Deviation"}),makeLabel:function makeLabel(agg){return _i18n.i18n.translate("data.search.aggs.metrics.standardDeviationLabel",{defaultMessage:"Standard Deviation of {field}",values:{field:agg.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.NUMBER}],getResponseAggs:function getResponseAggs(agg){var ValueAggConfig=(0,_get_response_agg_config_class.getResponseAggConfigClass)(agg,responseAggConfigProps);return[new ValueAggConfig("std_lower"),new ValueAggConfig("std_upper")]},getValue:function getValue(agg,bucket){return(0,_lodash.get)(bucket[agg.parentId],agg.valProp())}});exports.stdDeviationMetricAgg=stdDeviationMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.cardinalityMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _metric_agg_types=__webpack_require__(96);var _common=__webpack_require__(93);var _services=__webpack_require__(95);var uniqueCountTitle=_i18n.i18n.translate("data.search.aggs.metrics.uniqueCountTitle",{defaultMessage:"Unique Count"});var cardinalityMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.CARDINALITY,title:uniqueCountTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.uniqueCountLabel",{defaultMessage:"Unique count of {field}",values:{field:aggConfig.getFieldDisplayName()}})},getFormat:function getFormat(){var fieldFormatsService=(0,_services.getFieldFormats)();return fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.NUMBER)},params:[{name:"field",type:"field",filterFieldTypes:Object.values(_common.KBN_FIELD_TYPES).filter((function(type){return type!==_common.KBN_FIELD_TYPES.HISTOGRAM}))}]});exports.cardinalityMetricAgg=cardinalityMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.percentilesMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _metric_agg_types=__webpack_require__(96);var _common=__webpack_require__(93);var _get_response_agg_config_class=__webpack_require__(173);var _percentiles_get_value=__webpack_require__(261);var _ordinal_suffix=__webpack_require__(534);var valueProps={makeLabel:function makeLabel(){var customLabel=this.getParam("customLabel");var label=customLabel||this.getFieldDisplayName();return _i18n.i18n.translate("data.search.aggs.metrics.percentiles.valuePropsLabel",{defaultMessage:"{percentile} percentile of {label}",values:{percentile:(0,_ordinal_suffix.ordinalSuffix)(this.key),label:label}})}};var percentilesMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.PERCENTILES,title:_i18n.i18n.translate("data.search.aggs.metrics.percentilesTitle",{defaultMessage:"Percentiles"}),makeLabel:function makeLabel(agg){return _i18n.i18n.translate("data.search.aggs.metrics.percentilesLabel",{defaultMessage:"Percentiles of {field}",values:{field:agg.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.DATE,_common.KBN_FIELD_TYPES.HISTOGRAM]},{name:"percents",default:[1,5,25,50,75,95,99]},{write:function write(agg,output){output.params.keyed=false}}],getResponseAggs:function getResponseAggs(agg){var ValueAggConfig=(0,_get_response_agg_config_class.getResponseAggConfigClass)(agg,valueProps);return agg.getParam("percents").map((function(percent){return new ValueAggConfig(percent)}))},getValue:_percentiles_get_value.getPercentileValue});exports.percentilesMetricAgg=percentilesMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ordinalSuffix=ordinalSuffix;function ordinalSuffix(num){return num+""+suffix(num)}function suffix(num){var int=Math.floor(parseFloat(num));var hunth=int%100;if(hunth>=11&&hunth<=13)return"th";var tenth=int%10;if(tenth===1)return"st";if(tenth===2)return"nd";if(tenth===3)return"rd";return"th"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoBoundsMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _metric_agg_types=__webpack_require__(96);var _common=__webpack_require__(93);var geoBoundsTitle=_i18n.i18n.translate("data.search.aggs.metrics.geoBoundsTitle",{defaultMessage:"Geo Bounds"});var geoBoundsLabel=_i18n.i18n.translate("data.search.aggs.metrics.geoBoundsLabel",{defaultMessage:"Geo Bounds"});var geoBoundsMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.GEO_BOUNDS,title:geoBoundsTitle,makeLabel:function makeLabel(){return geoBoundsLabel},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.GEO_POINT}]});exports.geoBoundsMetricAgg=geoBoundsMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoCentroidMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _metric_agg_types=__webpack_require__(96);var _common=__webpack_require__(93);var geoCentroidTitle=_i18n.i18n.translate("data.search.aggs.metrics.geoCentroidTitle",{defaultMessage:"Geo Centroid"});var geoCentroidLabel=_i18n.i18n.translate("data.search.aggs.metrics.geoCentroidLabel",{defaultMessage:"Geo Centroid"});var geoCentroidMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.GEO_CENTROID,title:geoCentroidTitle,makeLabel:function makeLabel(){return geoCentroidLabel},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.GEO_POINT}],getValue:function getValue(agg,bucket){return bucket[agg.id]&&bucket[agg.id].location}});exports.geoCentroidMetricAgg=geoCentroidMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.percentileRanksMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _get_response_agg_config_class=__webpack_require__(173);var _percentiles_get_value=__webpack_require__(261);var _metric_agg_types=__webpack_require__(96);var _common=__webpack_require__(93);var _services=__webpack_require__(95);var valueProps={makeLabel:function makeLabel(){var fieldFormatsService=(0,_services.getFieldFormats)();var field=this.getField();var format=field&&field.format||fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.NUMBER);var customLabel=this.getParam("customLabel");var label=customLabel||this.getFieldDisplayName();return _i18n.i18n.translate("data.search.aggs.metrics.percentileRanks.valuePropsLabel",{defaultMessage:'Percentile rank {format} of "{label}"',values:{format:format.convert(this.key,"text"),label:label}})}};var percentileRanksMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.PERCENTILE_RANKS,title:_i18n.i18n.translate("data.search.aggs.metrics.percentileRanksTitle",{defaultMessage:"Percentile Ranks"}),makeLabel:function makeLabel(agg){return _i18n.i18n.translate("data.search.aggs.metrics.percentileRanksLabel",{defaultMessage:"Percentile ranks of {field}",values:{field:agg.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.HISTOGRAM]},{name:"values",default:[]},{write:function write(agg,output){output.params.keyed=false}}],getResponseAggs:function getResponseAggs(agg){var ValueAggConfig=(0,_get_response_agg_config_class.getResponseAggConfigClass)(agg,valueProps);var values=agg.getParam("values");return values.map((function(value){return new ValueAggConfig(value)}))},getFormat:function getFormat(){var fieldFormatsService=(0,_services.getFieldFormats)();return fieldFormatsService.getInstance(_common.FIELD_FORMAT_IDS.PERCENT)||fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.NUMBER)},getValue:function getValue(agg,bucket){return(0,_percentiles_get_value.getPercentileValue)(agg,bucket)/100}});exports.percentileRanksMetricAgg=percentileRanksMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.derivativeMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _parent_pipeline_agg_helper=__webpack_require__(126);var _make_nested_label=__webpack_require__(112);var _metric_agg_types=__webpack_require__(96);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var derivativeLabel=_i18n.i18n.translate("data.search.aggs.metrics.derivativeLabel",{defaultMessage:"derivative"});var derivativeTitle=_i18n.i18n.translate("data.search.aggs.metrics.derivativeTitle",{defaultMessage:"Derivative"});var derivativeMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.DERIVATIVE,title:derivativeTitle,subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,derivativeLabel)},params:_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params()),getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat});exports.derivativeMetricAgg=derivativeMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parentPipelineAggWriter=void 0;var parentPipelineAggWriter=function parentPipelineAggWriter(agg,output,aggConfigs){var customMetric=agg.getParam("customMetric");var metricAgg=agg.getParam("metricAgg");var selectedMetric=customMetric||aggConfigs&&aggConfigs.getResponseAggById(metricAgg);if(customMetric&&customMetric.type.name!=="count"){output.parentAggs=(output.parentAggs||[]).concat(selectedMetric)}output.params={buckets_path:selectedMetric.type.name==="count"?"_count":selectedMetric.id}};exports.parentPipelineAggWriter=parentPipelineAggWriter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.cumulativeSumMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _parent_pipeline_agg_helper=__webpack_require__(126);var _make_nested_label=__webpack_require__(112);var _metric_agg_types=__webpack_require__(96);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var cumulativeSumLabel=_i18n.i18n.translate("data.search.aggs.metrics.cumulativeSumLabel",{defaultMessage:"cumulative sum"});var cumulativeSumTitle=_i18n.i18n.translate("data.search.aggs.metrics.cumulativeSumTitle",{defaultMessage:"Cumulative Sum"});var cumulativeSumMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.CUMULATIVE_SUM,title:cumulativeSumTitle,subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,cumulativeSumLabel)},params:_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params()),getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat});exports.cumulativeSumMetricAgg=cumulativeSumMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.movingAvgMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _parent_pipeline_agg_helper=__webpack_require__(126);var _make_nested_label=__webpack_require__(112);var _metric_agg_types=__webpack_require__(96);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var movingAvgTitle=_i18n.i18n.translate("data.search.aggs.metrics.movingAvgTitle",{defaultMessage:"Moving Avg"});var movingAvgLabel=_i18n.i18n.translate("data.search.aggs.metrics.movingAvgLabel",{defaultMessage:"moving avg"});var movingAvgMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MOVING_FN,dslName:"moving_fn",title:movingAvgTitle,subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,movingAvgLabel)},params:[].concat(_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params()),[{name:"window",default:5},{name:"script",default:"MovingFunctions.unweightedAvg(values)"}]),getValue:function getValue(agg,bucket){return bucket[agg.id]?bucket[agg.id].value:null},getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat});exports.movingAvgMetricAgg=movingAvgMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.serialDiffMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _parent_pipeline_agg_helper=__webpack_require__(126);var _make_nested_label=__webpack_require__(112);var _metric_agg_types=__webpack_require__(96);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var serialDiffTitle=_i18n.i18n.translate("data.search.aggs.metrics.serialDiffTitle",{defaultMessage:"Serial Diff"});var serialDiffLabel=_i18n.i18n.translate("data.search.aggs.metrics.serialDiffLabel",{defaultMessage:"serial diff"});var serialDiffMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.SERIAL_DIFF,title:serialDiffTitle,subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,serialDiffLabel)},params:_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params()),getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat});exports.serialDiffMetricAgg=serialDiffMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeBuckets=void 0;var _lodash=_interopRequireDefault(__webpack_require__(0));var _moment=_interopRequireDefault(__webpack_require__(84));var _common=__webpack_require__(93);var _calc_auto_interval=__webpack_require__(544);var _calc_es_interval=__webpack_require__(545);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function isObject(o){return _lodash.default.isObject(o)}function isString(s){return _lodash.default.isString(s)}function isValidMoment(m){return m&&"isValid"in m&&m.isValid()}var TimeBuckets=function(){_createClass(TimeBuckets,null,[{key:"__cached__",value:function __cached__(self){var cache={};var sameMoment=same(_moment.default.isMoment);var sameDuration=same(_moment.default.isDuration);var desc={__cached__:{value:self}};var breakers={setBounds:"bounds",clearBounds:"bounds",setInterval:"interval"};var resources={bounds:{setup:function setup(){return[self._lb,self._ub]},changes:function changes(prev){return!sameMoment(prev[0],self._lb)||!sameMoment(prev[1],self._ub)}},interval:{setup:function setup(){return self._i},changes:function changes(prev){return!sameDuration(prev,self._i)}}};function cachedGetter(prop){return{value:function value(){if(cache.hasOwnProperty(prop)){return cache[prop]}return cache[prop]=self[prop].apply(self,arguments)}}}function cacheBreaker(prop){var resource=resources[breakers[prop]];var setup=resource.setup;var changes=resource.changes;var fn=self[prop];return{value:function value(){var prev=setup.call(self);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var ret=fn.apply.apply(fn,[self].concat(args));if(changes.call(self,prev)){cache={}}return ret}}}function same(checkType){return function(a,b){if(a===b)return true;if(checkType(a)===checkType(b))return+a===+b;return false}}_lodash.default.forOwn(TimeBuckets.prototype,(function(fn,prop){if(!prop||prop[0]==="_")return;if(breakers.hasOwnProperty(prop)){desc[prop]=cacheBreaker(prop)}else{desc[prop]=cachedGetter(prop)}}));return Object.create(self,desc)}}]);function TimeBuckets(_ref){var uiSettings=_ref.uiSettings;_classCallCheck(this,TimeBuckets);_defineProperty(this,"getConfig",void 0);_defineProperty(this,"_lb",null);_defineProperty(this,"_ub",null);_defineProperty(this,"_originalInterval",null);_defineProperty(this,"_i",void 0);this.getConfig=function(key){return uiSettings.get(key)};return TimeBuckets.__cached__(this)}_createClass(TimeBuckets,[{key:"getDuration",value:function getDuration(){if(this._ub===null||this._lb===null||!this.hasBounds()){return}var difference=this._ub-this._lb;return _moment.default.duration(difference,"ms")}},{key:"setBounds",value:function setBounds(input){if(!input)return this.clearBounds();var bounds;if(_lodash.default.isPlainObject(input)&&!Array.isArray(input)){bounds=[input.min,input.max]}else{bounds=Array.isArray(input)?input:[]}var moments=(0,_lodash.default)(bounds).map(_lodash.default.ary(_moment.default,1)).sortBy(Number);var valid=moments.size()===2&&moments.every(isValidMoment);if(!valid){this.clearBounds();throw new Error("invalid bounds set: "+input)}this._lb=moments.shift();this._ub=moments.pop();var duration=this.getDuration();if(!duration||duration.asSeconds()<0){throw new TypeError("Intervals must be positive")}}},{key:"clearBounds",value:function clearBounds(){this._lb=this._ub=null}},{key:"hasBounds",value:function hasBounds(){return isValidMoment(this._ub)&&isValidMoment(this._lb)}},{key:"getBounds",value:function getBounds(){if(!this.hasBounds())return;return{min:this._lb,max:this._ub}}},{key:"setInterval",value:function setInterval(input){var interval=input;if(isObject(input)&&!_moment.default.isDuration(input)){interval=input.val}if(!interval||interval==="auto"){this._i="auto";return}if(isString(interval)){input=interval;this._originalInterval=input;interval=(0,_common.parseInterval)(interval);if(interval===null||+interval===0){interval=null}}if(!_moment.default.isDuration(interval)){throw new TypeError('"'+input+'" is not a valid interval.')}this._i=interval}},{key:"getInterval",value:function getInterval(){var _this=this;var useNormalizedEsInterval=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var duration=this.getDuration();var readInterval=function readInterval(){var interval=_this._i;if(_moment.default.isDuration(interval))return interval;return(0,_calc_auto_interval.calcAutoIntervalNear)(_this.getConfig("histogram:barTarget"),Number(duration))};var parsedInterval=readInterval();var maybeScaleInterval=function maybeScaleInterval(interval){if(!_this.hasBounds()||!duration){return interval}var maxLength=_this.getConfig("histogram:maxBars");var approxLen=Number(duration)/Number(interval);var scaled;if(approxLen>maxLength){scaled=(0,_calc_auto_interval.calcAutoIntervalLessThan)(maxLength,Number(duration))}else{return interval}if(+scaled===+interval)return interval;interval=decorateInterval(interval);return Object.assign(scaled,{preScaled:interval,scale:Number(interval)/Number(scaled),scaled:true})};var decorateInterval=function decorateInterval(interval){var esInterval=useNormalizedEsInterval?(0,_calc_es_interval.convertDurationToNormalizedEsInterval)(interval):(0,_calc_es_interval.convertIntervalToEsInterval)(String(_this._originalInterval));var prettyUnits=_moment.default.normalizeUnits(esInterval.unit);return Object.assign(interval,{description:esInterval.value===1?prettyUnits:esInterval.value+" "+prettyUnits+"s",esValue:esInterval.value,esUnit:esInterval.unit,expression:esInterval.expression,overflow:Number(duration)>Number(interval)?_moment.default.duration(Number(interval)-Number(duration)):false})};if(useNormalizedEsInterval){return decorateInterval(maybeScaleInterval(parsedInterval))}else{return decorateInterval(parsedInterval)}}},{key:"getScaledDateFormat",value:function getScaledDateFormat(){var interval=this.getInterval();var rules=this.getConfig("dateFormat:scaled");for(var i=rules.length-1;i>=0;i--){var rule=rules[i];if(!rule[0]||interval&&interval>=_moment.default.duration(rule[0])){return rule[1]}}return this.getConfig("dateFormat")}}]);return TimeBuckets}();exports.TimeBuckets=TimeBuckets},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calcAutoIntervalNear=calcAutoIntervalNear;exports.calcAutoIntervalLessThan=calcAutoIntervalLessThan;var _moment=_interopRequireDefault(__webpack_require__(84));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var boundsDescending=[{bound:Infinity,interval:Number(_moment.default.duration(1,"year"))},{bound:Number(_moment.default.duration(1,"year")),interval:Number(_moment.default.duration(1,"month"))},{bound:Number(_moment.default.duration(3,"week")),interval:Number(_moment.default.duration(1,"week"))},{bound:Number(_moment.default.duration(1,"week")),interval:Number(_moment.default.duration(1,"d"))},{bound:Number(_moment.default.duration(24,"hour")),interval:Number(_moment.default.duration(12,"hour"))},{bound:Number(_moment.default.duration(6,"hour")),interval:Number(_moment.default.duration(3,"hour"))},{bound:Number(_moment.default.duration(2,"hour")),interval:Number(_moment.default.duration(1,"hour"))},{bound:Number(_moment.default.duration(45,"minute")),interval:Number(_moment.default.duration(30,"minute"))},{bound:Number(_moment.default.duration(20,"minute")),interval:Number(_moment.default.duration(10,"minute"))},{bound:Number(_moment.default.duration(9,"minute")),interval:Number(_moment.default.duration(5,"minute"))},{bound:Number(_moment.default.duration(3,"minute")),interval:Number(_moment.default.duration(1,"minute"))},{bound:Number(_moment.default.duration(45,"second")),interval:Number(_moment.default.duration(30,"second"))},{bound:Number(_moment.default.duration(15,"second")),interval:Number(_moment.default.duration(10,"second"))},{bound:Number(_moment.default.duration(7.5,"second")),interval:Number(_moment.default.duration(5,"second"))},{bound:Number(_moment.default.duration(5,"second")),interval:Number(_moment.default.duration(1,"second"))},{bound:Number(_moment.default.duration(500,"ms")),interval:Number(_moment.default.duration(100,"ms"))}];function getPerBucketMs(count,duration){var ms=duration/count;return isFinite(ms)?ms:NaN}function normalizeMinimumInterval(targetMs){var value=isNaN(targetMs)?0:Math.max(Math.floor(targetMs),1);return _moment.default.duration(value)}function calcAutoIntervalNear(targetBucketCount,duration){var targetPerBucketMs=getPerBucketMs(targetBucketCount,duration);var lowerBoundIndex=boundsDescending.findIndex((function(_ref){var bound=_ref.bound;var boundMs=Number(bound);return boundMs<=targetPerBucketMs}));if(lowerBoundIndex!==-1){var nearestInterval=boundsDescending[lowerBoundIndex-1].interval;return _moment.default.duration(nearestInterval)}return normalizeMinimumInterval(targetPerBucketMs)}function calcAutoIntervalLessThan(maxBucketCount,duration){var maxPerBucketMs=getPerBucketMs(maxBucketCount,duration);for(var _i=0,_boundsDescending=boundsDescending;_i<_boundsDescending.length;_i++){var interval=_boundsDescending[_i].interval;if(interval<=maxPerBucketMs){return _moment.default.duration(interval)}}return normalizeMinimumInterval(maxPerBucketMs)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertDurationToNormalizedEsInterval=convertDurationToNormalizedEsInterval;exports.convertIntervalToEsInterval=convertIntervalToEsInterval;var _datemath=_interopRequireDefault(__webpack_require__(110));var _common=__webpack_require__(93);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var unitsDesc=_datemath.default.unitsDesc;var largeMax=unitsDesc.indexOf("M");function convertDurationToNormalizedEsInterval(duration){for(var i=0;i<unitsDesc.length;i++){var unit=unitsDesc[i];var val=duration.as(unit);if(val>=1&&Math.floor(val)===val){if(i<=largeMax&&val!==1){continue}return{value:val,unit:unit,expression:val+unit}}}var ms=duration.as("ms");return{value:ms,unit:"ms",expression:ms+"ms"}}function convertIntervalToEsInterval(interval){var _parseEsInterval=(0,_common.parseEsInterval)(interval),value=_parseEsInterval.value,unit=_parseEsInterval.unit;return{value:value,unit:unit,expression:interval}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterDateHistogram=void 0;var _moment=_interopRequireDefault(__webpack_require__(84));var _common=__webpack_require__(93);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var createFilterDateHistogram=function createFilterDateHistogram(agg,key){var start=(0,_moment.default)(key);var interval=agg.buckets.getInterval();return(0,_common.buildRangeFilter)(agg.params.field,{gte:start.toISOString(),lt:start.add(interval).toISOString(),format:"strict_date_optional_time"},agg.getIndexPattern())};exports.createFilterDateHistogram=createFilterDateHistogram},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.histogramBucketAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _bucket_agg_type=__webpack_require__(105);var _histogram=__webpack_require__(548);var _bucket_agg_types=__webpack_require__(103);var _common=__webpack_require__(93);var _services=__webpack_require__(95);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var histogramBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.HISTOGRAM,title:_i18n.i18n.translate("data.search.aggs.buckets.histogramTitle",{defaultMessage:"Histogram"}),ordered:{},makeLabel:function makeLabel(aggConfig){return aggConfig.getFieldDisplayName()},createFilter:_histogram.createFilterHistogram,decorateAggConfig:function decorateAggConfig(){var autoBounds;return{setAutoBounds:{configurable:true,value:function value(newValue){autoBounds=newValue}},getAutoBounds:{configurable:true,value:function value(){return autoBounds}}}},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.NUMBER},{name:"intervalBase",default:null,write:function write(){}},{name:"interval",modifyAggConfigOnSearchRequestStart:function modifyAggConfigOnSearchRequestStart(aggConfig,searchSource,options){var field=aggConfig.getField();var aggBody=field.scripted?{script:{source:field.script,lang:field.lang}}:{field:field.name};var childSearchSource=searchSource.createChild().setField("size",0).setField("aggs",{maxAgg:{max:aggBody},minAgg:{min:aggBody}});return childSearchSource.fetch(options).then((function(resp){aggConfig.setAutoBounds({min:_lodash.default.get(resp,"aggregations.minAgg.value"),max:_lodash.default.get(resp,"aggregations.maxAgg.value")})})).catch((function(e){if(e.name==="AbortError")return;(0,_services.getNotifications)().toasts.addWarning(_i18n.i18n.translate("data.search.aggs.histogram.missingMaxMinValuesWarning",{defaultMessage:"Unable to retrieve max and min values to auto-scale histogram buckets. This may lead to poor visualization performance."}))}))},write:function write(aggConfig,output){var interval=parseFloat(aggConfig.params.interval);if(interval<=0){interval=1}var autoBounds=aggConfig.getAutoBounds();if(autoBounds){var range=autoBounds.max-autoBounds.min;var bars=range/interval;var config=(0,_services.getUiSettings)();if(bars>config.get("histogram:maxBars")){var minInterval=range/config.get("histogram:maxBars");var orderOfMagnitude=Math.pow(10,Math.floor(Math.log10(minInterval)));var roundInterval=orderOfMagnitude;while(roundInterval<minInterval){roundInterval+=orderOfMagnitude}interval=roundInterval}}var base=aggConfig.params.intervalBase;if(base){if(interval<base){interval=base}else if(interval%base!==0){interval=Math.round(interval/base)*base}}output.params.interval=interval}},{name:"min_doc_count",default:false,write:function write(aggConfig,output){if(aggConfig.params.min_doc_count){output.params.min_doc_count=0}else{output.params.min_doc_count=1}}},{name:"has_extended_bounds",default:false,write:function write(){}},{name:"extended_bounds",default:{min:"",max:""},write:function write(aggConfig,output){var _aggConfig$params$ext=aggConfig.params.extended_bounds,min=_aggConfig$params$ext.min,max=_aggConfig$params$ext.max;if(aggConfig.params.has_extended_bounds&&(min||min===0)&&(max||max===0)){output.params.extended_bounds={min:min,max:max}}},shouldShow:function shouldShow(aggConfig){return aggConfig.params.has_extended_bounds}}]});exports.histogramBucketAgg=histogramBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterHistogram=void 0;var _common=__webpack_require__(93);var createFilterHistogram=function createFilterHistogram(aggConfig,key){var value=parseInt(key,10);var params={gte:value,lt:value+aggConfig.params.interval};return(0,_common.buildRangeFilter)(aggConfig.params.field,params,aggConfig.getIndexPattern(),aggConfig.fieldFormatter()(key))};exports.createFilterHistogram=createFilterHistogram},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.rangeBucketAgg=void 0;var _i18n=__webpack_require__(1);var _bucket_agg_type=__webpack_require__(105);var _common=__webpack_require__(93);var _range_key=__webpack_require__(550);var _range=__webpack_require__(551);var _bucket_agg_types=__webpack_require__(103);var keyCaches=new WeakMap;var formats=new WeakMap;var rangeTitle=_i18n.i18n.translate("data.search.aggs.buckets.rangeTitle",{defaultMessage:"Range"});var rangeBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.RANGE,title:rangeTitle,createFilter:_range.createFilterRange,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.aggTypesLabel",{defaultMessage:"{fieldName} ranges",values:{fieldName:aggConfig.getFieldDisplayName()}})},getKey:function getKey(bucket,key,agg){var keys=keyCaches.get(agg);if(!keys){keys=new Map;keyCaches.set(agg,keys)}var id=_range_key.RangeKey.idBucket(bucket);key=keys.get(id);if(!key){key=new _range_key.RangeKey(bucket);keys.set(id,key)}return key},getFormat:function getFormat(agg){var aggFormat=formats.get(agg);if(aggFormat)return aggFormat;var RangeFormat=_common.FieldFormat.from((function(range){var format=agg.fieldOwnFormatter();var gte="";var lt="<";return _i18n.i18n.translate("data.search.aggs.aggTypes.rangesFormatMessage",{defaultMessage:"{gte} {from} and {lt} {to}",values:{gte:gte,from:format(range.gte),lt:lt,to:format(range.lt)}})}));aggFormat=new RangeFormat;formats.set(agg,aggFormat);return aggFormat},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER]},{name:"ranges",default:[{from:0,to:1e3},{from:1e3,to:2e3}],write:function write(aggConfig,output){output.params.ranges=aggConfig.params.ranges;output.params.keyed=true}}]});exports.rangeBucketAgg=rangeBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangeKey=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var id=Symbol("id");var RangeKey=function(){function RangeKey(bucket){_classCallCheck(this,RangeKey);_defineProperty(this,id,void 0);_defineProperty(this,"gte",void 0);_defineProperty(this,"lt",void 0);this.gte=bucket.from==null?-Infinity:bucket.from;this.lt=bucket.to==null?+Infinity:bucket.to;this[id]=RangeKey.idBucket(bucket)}_createClass(RangeKey,[{key:"toString",value:function toString(){return this[id]}}],[{key:"idBucket",value:function idBucket(bucket){return"from:".concat(bucket.from,",to:").concat(bucket.to)}}]);return RangeKey}();exports.RangeKey=RangeKey},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterRange=void 0;var _common=__webpack_require__(93);var createFilterRange=function createFilterRange(aggConfig,params){return(0,_common.buildRangeFilter)(aggConfig.params.field,params,aggConfig.getIndexPattern(),aggConfig.fieldFormatter()(params))};exports.createFilterRange=createFilterRange},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterDateRange=void 0;var _moment=_interopRequireDefault(__webpack_require__(84));var _common=__webpack_require__(93);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var createFilterDateRange=function createFilterDateRange(agg,_ref){var from=_ref.from,to=_ref.to;var filter={};if(from)filter.gte=(0,_moment.default)(from).toISOString();if(to)filter.lt=(0,_moment.default)(to).toISOString();if(to&&from)filter.format="strict_date_optional_time";return(0,_common.buildRangeFilter)(agg.params.field,filter,agg.getIndexPattern())};exports.createFilterDateRange=createFilterDateRange},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterIpRange=void 0;var _cidr_mask=__webpack_require__(268);var _common=__webpack_require__(93);var createFilterIpRange=function createFilterIpRange(aggConfig,key){var range;if(key.type==="mask"){range=new _cidr_mask.CidrMask(key.mask).getRange()}else{range={from:key.from?key.from:-Infinity,to:key.to?key.to:Infinity}}return(0,_common.buildRangeFilter)(aggConfig.params.field,{gte:range.from,lte:range.to},aggConfig.getIndexPattern())};exports.createFilterIpRange=createFilterIpRange},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.esaggs=void 0;var _lodash=__webpack_require__(0);var _i18n=__webpack_require__(1);var _public=__webpack_require__(15);var _search_source=__webpack_require__(271);var _tabify=__webpack_require__(280);var _common=__webpack_require__(93);var _query=__webpack_require__(119);var _services=__webpack_require__(95);var _build_tabular_inspector_data=__webpack_require__(596);var _utils=__webpack_require__(177);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var name="esaggs";var handleCourierRequest=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref2){var searchSource,aggs,timeRange,query,filters,forceFetch,partialRows,metricsAtAllLevels,inspectorAdapters,filterManager,abortSignal,timeFilterSearchSource,requestSearchSource,reqBody,queryHash,shouldQuery,request,response,resp,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,agg,parsedTimeRange,tabifyParams,tabifyCacheHash,shouldCalculateNewTabify;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:searchSource=_ref2.searchSource,aggs=_ref2.aggs,timeRange=_ref2.timeRange,query=_ref2.query,filters=_ref2.filters,forceFetch=_ref2.forceFetch,partialRows=_ref2.partialRows,metricsAtAllLevels=_ref2.metricsAtAllLevels,inspectorAdapters=_ref2.inspectorAdapters,filterManager=_ref2.filterManager,abortSignal=_ref2.abortSignal;timeFilterSearchSource=searchSource.createChild({callParentStartHandlers:true});requestSearchSource=timeFilterSearchSource.createChild({callParentStartHandlers:true});aggs.setTimeRange(timeRange);Object.defineProperty(requestSearchSource,"history",{get:function get(){return searchSource.history},set:function set(history){return searchSource.history=history}});requestSearchSource.setField("aggs",(function(){return aggs.toDsl(metricsAtAllLevels)}));requestSearchSource.onRequestStart((function(paramSearchSource,options){return aggs.onSearchRequestStart(paramSearchSource,options)}));if(timeRange){timeFilterSearchSource.setField("filter",(function(){return(0,_query.getTime)(searchSource.getField("index"),timeRange)}))}requestSearchSource.setField("filter",filters);requestSearchSource.setField("query",query);_context.next=12;return requestSearchSource.getSearchRequestBody();case 12:reqBody=_context.sent;queryHash=(0,_public.calculateObjectHash)(reqBody);shouldQuery=forceFetch||searchSource.lastQuery!==queryHash;if(!shouldQuery){_context.next=35;break}inspectorAdapters.requests.reset();request=inspectorAdapters.requests.start(_i18n.i18n.translate("data.functions.esaggs.inspector.dataRequest.title",{defaultMessage:"Data"}),{description:_i18n.i18n.translate("data.functions.esaggs.inspector.dataRequest.description",{defaultMessage:"This request queries Elasticsearch to fetch the data for the visualization."})});request.stats((0,_utils.getRequestInspectorStats)(requestSearchSource));_context.prev=19;_context.next=22;return requestSearchSource.fetch({abortSignal:abortSignal});case 22:response=_context.sent;searchSource.lastQuery=queryHash;request.stats((0,_utils.getResponseInspectorStats)(searchSource,response)).ok({json:response});searchSource.rawResponse=response;_context.next=32;break;case 28:_context.prev=28;_context.t0=_context["catch"](19);request.error({json:_context.t0});throw _context.t0;case 32:_context.prev=32;requestSearchSource.getSearchRequestBody().then((function(req){request.json(req)}));return _context.finish(32);case 35:resp=searchSource.rawResponse;_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=39;_iterator=aggs.aggs[Symbol.iterator]();case 41:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=50;break}agg=_step.value;if(!(0,_lodash.has)(agg,"type.postFlightRequest")){_context.next=47;break}_context.next=46;return agg.type.postFlightRequest(resp,aggs,agg,requestSearchSource,inspectorAdapters,abortSignal);case 46:resp=_context.sent;case 47:_iteratorNormalCompletion=true;_context.next=41;break;case 50:_context.next=56;break;case 52:_context.prev=52;_context.t1=_context["catch"](39);_didIteratorError=true;_iteratorError=_context.t1;case 56:_context.prev=56;_context.prev=57;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}case 59:_context.prev=59;if(!_didIteratorError){_context.next=62;break}throw _iteratorError;case 62:return _context.finish(59);case 63:return _context.finish(56);case 64:searchSource.finalResponse=resp;parsedTimeRange=timeRange?(0,_query.getTime)(aggs.indexPattern,timeRange):null;tabifyParams={metricsAtAllLevels:metricsAtAllLevels,partialRows:partialRows,timeRange:parsedTimeRange?parsedTimeRange.range:undefined};tabifyCacheHash=(0,_public.calculateObjectHash)(_objectSpread({tabifyAggs:aggs},tabifyParams));shouldCalculateNewTabify=shouldQuery||searchSource.lastTabifyHash!==tabifyCacheHash;if(shouldCalculateNewTabify){searchSource.lastTabifyHash=tabifyCacheHash;searchSource.tabifiedResponse=(0,_tabify.tabifyAggResponse)(aggs,searchSource.finalResponse,tabifyParams)}inspectorAdapters.data.setTabularLoader((function(){return(0,_build_tabular_inspector_data.buildTabularInspectorData)(searchSource.tabifiedResponse,filterManager)}),{returnsFormattedValues:true});return _context.abrupt("return",searchSource.tabifiedResponse);case 72:case"end":return _context.stop()}}}),_callee,null,[[19,28,32,35],[39,52,56,64],[57,,59,63]])})));return function handleCourierRequest(_x){return _ref.apply(this,arguments)}}();var esaggs=function esaggs(){return{name:name,type:"kibana_datatable",inputTypes:["kibana_context","null"],help:_i18n.i18n.translate("data.functions.esaggs.help",{defaultMessage:"Run AggConfig aggregation"}),args:{index:{types:["string"],help:""},metricsAtAllLevels:{types:["boolean"],default:false,help:""},partialRows:{types:["boolean"],default:false,help:""},includeFormatHints:{types:["boolean"],default:false,help:""},aggConfigs:{types:["string"],default:'""',help:""}},fn:function fn(input,args,_ref3){var inspectorAdapters=_ref3.inspectorAdapters,abortSignal=_ref3.abortSignal;return _asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var indexPatterns,_getQueryService,filterManager,searchService,aggConfigsState,indexPattern,aggs,searchSource,response,table;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:indexPatterns=(0,_services.getIndexPatterns)();_getQueryService=(0,_services.getQueryService)(),filterManager=_getQueryService.filterManager;searchService=(0,_services.getSearchService)();aggConfigsState=JSON.parse(args.aggConfigs);_context2.next=6;return indexPatterns.get(args.index);case 6:indexPattern=_context2.sent;aggs=searchService.aggs.createAggConfigs(indexPattern,aggConfigsState);searchSource=new _search_source.SearchSource;searchSource.setField("index",indexPattern);searchSource.setField("size",0);_context2.next=13;return handleCourierRequest({searchSource:searchSource,aggs:aggs,timeRange:(0,_lodash.get)(input,"timeRange",undefined),query:(0,_lodash.get)(input,"query",undefined),filters:(0,_lodash.get)(input,"filters",undefined),forceFetch:true,metricsAtAllLevels:args.metricsAtAllLevels,partialRows:args.partialRows,inspectorAdapters:inspectorAdapters,filterManager:filterManager,abortSignal:abortSignal});case 13:response=_context2.sent;table={type:"kibana_datatable",rows:response.rows,columns:response.columns.map((function(column){var cleanedColumn={id:column.id,name:column.name,meta:(0,_utils.serializeAggConfig)(column.aggConfig)};if(args.includeFormatHints){cleanedColumn.formatHint=(0,_common.serializeFieldFormat)(column.aggConfig)}return cleanedColumn}))};return _context2.abrupt("return",table);case 16:case"end":return _context2.stop()}}}),_callee2)})))()}}};exports.esaggs=esaggs},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.normalizeSortRequest=normalizeSortRequest;function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function normalizeSortRequest(sortObject,indexPattern){var defaultSortOptions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var sortArray=Array.isArray(sortObject)?sortObject:[sortObject];return sortArray.map((function(sortable){return normalize(sortable,indexPattern,defaultSortOptions)}))}function normalize(sortable,indexPattern,defaultSortOptions){var _Object$entries=Object.entries(sortable),_Object$entries2=_slicedToArray(_Object$entries,1),_Object$entries2$=_slicedToArray(_Object$entries2[0],2),sortField=_Object$entries2$[0],sortOrder=_Object$entries2$[1];var order=_typeof(sortOrder)==="object"?sortOrder:{order:sortOrder};if(indexPattern&&typeof indexPattern!=="string"){var indexField=indexPattern.fields.find((function(_ref){var name=_ref.name;return name===sortField}));if(indexField&&indexField.scripted&&indexField.sortable){return{_script:_objectSpread({script:{source:indexField.script,lang:indexField.lang},type:castSortType(indexField.type)},order)}}}var unmapped_type=defaultSortOptions.unmapped_type,otherSortOptions=_objectWithoutProperties(defaultSortOptions,["unmapped_type"]);return _defineProperty({},sortField,_objectSpread({},order,{},sortField==="_score"?otherSortOptions:defaultSortOptions))}function castSortType(type){if(["number","string"].includes(type)){return"number"}else if(["string","boolean"].includes(type)){return"string"}throw new Error("Unsupported script sort type: ".concat(type))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterDocvalueFields=filterDocvalueFields;function filterDocvalueFields(docvalueFields,fields){return docvalueFields.filter((function(docValue){var docvalueFieldName=typeof docValue==="string"?docValue:docValue.field;return fields.includes(docvalueFieldName)}))}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchSoon=fetchSoon;var _call_client=__webpack_require__(559);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function fetchSoon(_x,_x2,_x3){return _fetchSoon.apply(this,arguments)}function _fetchSoon(){_fetchSoon=_asyncToGenerator(regeneratorRuntime.mark((function _callee(request,options,fetchHandlers){var msToDelay;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:msToDelay=fetchHandlers.config.get("courier:batchSearches")?50:0;return _context.abrupt("return",delayedFetch(request,options,fetchHandlers,msToDelay));case 2:case"end":return _context.stop()}}}),_callee)})));return _fetchSoon.apply(this,arguments)}function delay(fn,ms){return new Promise((function(resolve){setTimeout((function(){return resolve(fn())}),ms)}))}var requestsToFetch=[];var requestOptions=[];var fetchInProgress=null;function delayedFetch(_x4,_x5,_x6,_x7){return _delayedFetch.apply(this,arguments)}function _delayedFetch(){_delayedFetch=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(request,options,fetchHandlers,ms){var i,responses;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(ms===0)){_context2.next=2;break}return _context2.abrupt("return",(0,_call_client.callClient)([request],[options],fetchHandlers)[0]);case 2:i=requestsToFetch.length;requestsToFetch=[].concat(_toConsumableArray(requestsToFetch),[request]);requestOptions=[].concat(_toConsumableArray(requestOptions),[options]);_context2.next=7;return fetchInProgress=fetchInProgress||delay((function(){var response=(0,_call_client.callClient)(requestsToFetch,requestOptions,fetchHandlers);requestsToFetch=[];requestOptions=[];fetchInProgress=null;return response}),ms);case 7:responses=_context2.sent;return _context2.abrupt("return",responses[i]);case 9:case"end":return _context2.stop()}}}),_callee2)})));return _delayedFetch.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.callClient=callClient;var _handle_response=__webpack_require__(560);var _search_strategy=__webpack_require__(279);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function callClient(searchRequests){var requestsOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var fetchHandlers=arguments.length>2?arguments[2]:undefined;var requestOptionEntries=searchRequests.map((function(request,i){return[request,requestsOptions[i]]}));var requestOptionsMap=new Map(requestOptionEntries);var requestResponseMap=new Map;var _defaultSearchStrateg=_search_strategy.defaultSearchStrategy.search(_objectSpread({searchRequests:searchRequests},fetchHandlers)),searching=_defaultSearchStrateg.searching,abort=_defaultSearchStrateg.abort;searchRequests.forEach((function(request,i){var response=searching.then((function(results){return(0,_handle_response.handleResponse)(request,results[i])}));var _ref=requestOptionsMap.get(request)||{},_ref$abortSignal=_ref.abortSignal,abortSignal=_ref$abortSignal===void 0?null:_ref$abortSignal;if(abortSignal)abortSignal.addEventListener("abort",abort);requestResponseMap.set(request,response)}));return searchRequests.map((function(request){return requestResponseMap.get(request)}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.handleResponse=handleResponse;var _react=_interopRequireDefault(__webpack_require__(4));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(12);var _ui=__webpack_require__(146);var _public=__webpack_require__(14);var _services=__webpack_require__(95);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function handleResponse(request,response){if(response.timed_out){(0,_services.getNotifications)().toasts.addWarning({title:_i18n.i18n.translate("data.search.searchSource.fetch.requestTimedOutNotificationMessage",{defaultMessage:"Data might be incomplete because your request timed out"})})}if(response._shards&&response._shards.failed){var title=_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedNotificationMessage",{defaultMessage:"{shardsFailed} of {shardsTotal} shards failed",values:{shardsFailed:response._shards.failed,shardsTotal:response._shards.total}});var description=_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedNotificationDescription",{defaultMessage:"The data you are seeing might be incomplete or wrong."});var text=(0,_public.toMountPoint)(_react.default.createElement(_react.default.Fragment,null,description,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_ui.ShardFailureOpenModalButton,{request:request.body,response:response,title:title})));(0,_services.getNotifications)().toasts.addWarning({title:title,text:text})}return response}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SuggestionsComponent",{enumerable:true,get:function get(){return _suggestions_component.SuggestionsComponent}});var _suggestions_component=__webpack_require__(562)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SuggestionsComponent=void 0;var _lodash=__webpack_require__(0);var _react=_interopRequireWildcard(__webpack_require__(4));var _suggestion_component=__webpack_require__(563);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SuggestionsComponent=function(_Component){_inherits(SuggestionsComponent,_Component);function SuggestionsComponent(){var _getPrototypeOf2;var _this;_classCallCheck(this,SuggestionsComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SuggestionsComponent)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"childNodes",[]);_defineProperty(_assertThisInitialized(_this),"parentNode",null);_defineProperty(_assertThisInitialized(_this),"scrollIntoView",(function(){if(_this.props.index===null){return}var parent=_this.parentNode;var child=_this.childNodes[_this.props.index];if(_this.props.index==null||!parent||!child){return}var scrollTop=Math.max(Math.min(parent.scrollTop,child.offsetTop),child.offsetTop+child.offsetHeight-parent.offsetHeight);parent.scrollTop=scrollTop}));_defineProperty(_assertThisInitialized(_this),"handleScroll",(function(){if(!_this.props.loadMore||!_this.parentNode){return}var position=_this.parentNode.scrollTop+_this.parentNode.offsetHeight;var height=_this.parentNode.scrollHeight;var remaining=height-position;var margin=50;if(!height||!position){return}if(remaining<=margin){_this.props.loadMore()}}));return _this}_createClass(SuggestionsComponent,[{key:"render",value:function render(){var _this2=this;if(!this.props.show||(0,_lodash.isEmpty)(this.props.suggestions)){return null}var suggestions=this.props.suggestions.map((function(suggestion,index){return _react.default.createElement(_suggestion_component.SuggestionComponent,{innerRef:function innerRef(node){return _this2.childNodes[index]=node},selected:index===_this2.props.index,suggestion:suggestion,onClick:_this2.props.onClick,onMouseEnter:function onMouseEnter(){return _this2.props.onMouseEnter(index)},ariaId:"suggestion-"+index,key:"".concat(suggestion.type," - ").concat(suggestion.text)})}));return _react.default.createElement("div",{className:"reactSuggestionTypeahead"},_react.default.createElement("div",{className:"kbnTypeahead"},_react.default.createElement("div",{className:"kbnTypeahead__popover"},_react.default.createElement("div",{id:"kbnTypeahead__items",className:"kbnTypeahead__items",role:"listbox",ref:function ref(node){return _this2.parentNode=node},onScroll:this.handleScroll},suggestions))))}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.index!==this.props.index){this.scrollIntoView()}}}]);return SuggestionsComponent}(_react.Component);exports.SuggestionsComponent=SuggestionsComponent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SuggestionComponent=SuggestionComponent;var _eui=__webpack_require__(12);var _classnames=_interopRequireDefault(__webpack_require__(101));var _react=_interopRequireDefault(__webpack_require__(4));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getEuiIconType(type){switch(type){case"field":return"kqlField";case"value":return"kqlValue";case"recentSearch":return"search";case"conjunction":return"kqlSelector";case"operator":return"kqlOperand";default:throw new Error("Unknown type: ".concat(type))}}function SuggestionComponent(props){return _react.default.createElement("div",{className:(0,_classnames.default)({kbnTypeahead__item:true,active:props.selected}),role:"option",onClick:function onClick(){return props.onClick(props.suggestion)},onMouseEnter:props.onMouseEnter,ref:props.innerRef,id:props.ariaId,"aria-selected":props.selected,"data-test-subj":"autocompleteSuggestion-".concat(props.suggestion.type,"-").concat(props.suggestion.text.replace(/\s/g,"-"))},_react.default.createElement("div",{className:"kbnSuggestionItem kbnSuggestionItem--"+props.suggestion.type},_react.default.createElement("div",{className:"kbnSuggestionItem__type"},_react.default.createElement(_eui.EuiIcon,{type:getEuiIconType(props.suggestion.type)})),_react.default.createElement("div",{className:"kbnSuggestionItem__text"},props.suggestion.text),_react.default.createElement("div",{className:"kbnSuggestionItem__description"},props.suggestion.description)))}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.createIndexPatternSelect=createIndexPatternSelect;exports.IndexPatternSelect=void 0;var _lodash=_interopRequireDefault(__webpack_require__(0));var _react=_interopRequireWildcard(__webpack_require__(4));var _eui=__webpack_require__(12);var _lib=__webpack_require__(140);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var getIndexPatterns=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(client,search,fields){var resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.find({type:"index-pattern",fields:fields,search:"".concat(search,"*"),searchFields:["title"],perPage:100});case 2:resp=_context.sent;return _context.abrupt("return",resp.savedObjects);case 4:case"end":return _context.stop()}}}),_callee)})));return function getIndexPatterns(_x,_x2,_x3){return _ref.apply(this,arguments)}}();function createIndexPatternSelect(savedObjectsClient){return function(props){return _react.default.createElement(IndexPatternSelect,_extends({},props,{savedObjectsClient:savedObjectsClient}))}}var IndexPatternSelect=function(_Component){_inherits(IndexPatternSelect,_Component);function IndexPatternSelect(props){var _this;_classCallCheck(this,IndexPatternSelect);_this=_possibleConstructorReturn(this,_getPrototypeOf(IndexPatternSelect).call(this,props));_defineProperty(_assertThisInitialized(_this),"isMounted",false);_defineProperty(_assertThisInitialized(_this),"state",void 0);_defineProperty(_assertThisInitialized(_this),"fetchSelectedIndexPattern",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(indexPatternId){var indexPatternTitle;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(indexPatternId){_context2.next=3;break}_this.setState({selectedIndexPattern:undefined});return _context2.abrupt("return");case 3:_context2.prev=3;_context2.next=6;return(0,_lib.getTitle)(_this.props.savedObjectsClient,indexPatternId);case 6:indexPatternTitle=_context2.sent;_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2["catch"](3);return _context2.abrupt("return");case 12:if(_this.isMounted){_context2.next=14;break}return _context2.abrupt("return");case 14:_this.setState({selectedIndexPattern:{value:indexPatternId,label:indexPatternTitle}});case 15:case"end":return _context2.stop()}}}),_callee2,null,[[3,9]])})));return function(_x4){return _ref2.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"debouncedFetch",_lodash.default.debounce(function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(searchValue){var _this$props,fieldTypes,onNoIndexPatterns,savedObjectsClient,savedObjectFields,savedObjects,options;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$props=_this.props,fieldTypes=_this$props.fieldTypes,onNoIndexPatterns=_this$props.onNoIndexPatterns,savedObjectsClient=_this$props.savedObjectsClient;savedObjectFields=["title"];if(fieldTypes){savedObjectFields.push("fields")}_context3.next=5;return getIndexPatterns(savedObjectsClient,searchValue,savedObjectFields);case 5:savedObjects=_context3.sent;if(fieldTypes){savedObjects=savedObjects.filter((function(savedObject){try{var indexPatternFields=JSON.parse(savedObject.attributes.fields);return indexPatternFields.some((function(field){return fieldTypes===null||fieldTypes===void 0?void 0:fieldTypes.includes(field.type)}))}catch(err){return false}}))}if(_this.isMounted){_context3.next=9;break}return _context3.abrupt("return");case 9:if(searchValue===_this.state.searchValue){options=savedObjects.map((function(indexPatternSavedObject){return{label:indexPatternSavedObject.attributes.title,value:indexPatternSavedObject.id}}));_this.setState({isLoading:false,options:options});if(onNoIndexPatterns&&searchValue===""&&options.length===0){onNoIndexPatterns()}}case 10:case"end":return _context3.stop()}}}),_callee3)})));return function(_x5){return _ref3.apply(this,arguments)}}(),300));_defineProperty(_assertThisInitialized(_this),"fetchOptions",(function(){var searchValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_this.setState({isLoading:true,searchValue:searchValue},_this.debouncedFetch.bind(null,searchValue))}));_defineProperty(_assertThisInitialized(_this),"onChange",(function(selectedOptions){_this.props.onChange(_lodash.default.get(selectedOptions,"0.value"))}));_this.state={isLoading:false,options:[],selectedIndexPattern:undefined,searchValue:undefined};return _this}_createClass(IndexPatternSelect,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.isMounted=false;this.debouncedFetch.cancel()}},{key:"componentDidMount",value:function componentDidMount(){this.isMounted=true;this.fetchOptions();this.fetchSelectedIndexPattern(this.props.indexPatternId)}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.indexPatternId!==this.props.indexPatternId){this.fetchSelectedIndexPattern(nextProps.indexPatternId)}}},{key:"render",value:function render(){var _this$props2=this.props,fieldTypes=_this$props2.fieldTypes,onChange=_this$props2.onChange,indexPatternId=_this$props2.indexPatternId,placeholder=_this$props2.placeholder,onNoIndexPatterns=_this$props2.onNoIndexPatterns,savedObjectsClient=_this$props2.savedObjectsClient,rest=_objectWithoutProperties(_this$props2,["fieldTypes","onChange","indexPatternId","placeholder","onNoIndexPatterns","savedObjectsClient"]);return _react.default.createElement(_eui.EuiComboBox,_extends({},rest,{placeholder:placeholder,singleSelection:true,isLoading:this.state.isLoading,onSearchChange:this.fetchOptions,options:this.state.options,selectedOptions:this.state.selectedIndexPattern?[this.state.selectedIndexPattern]:[],onChange:this.onChange}))}}]);return IndexPatternSelect}(_react.Component);exports.IndexPatternSelect=IndexPatternSelect},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchIndexPatterns=fetchIndexPatterns;var _lodash=__webpack_require__(0);var _=__webpack_require__(107);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function fetchIndexPatterns(_x,_x2,_x3){return _fetchIndexPatterns.apply(this,arguments)}function _fetchIndexPatterns(){_fetchIndexPatterns=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObjectsClient,indexPatternStrings,uiSettings){var searchString,indexPatternsFromSavedObjects,exactMatches,defaultIndex,allMatches;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!indexPatternStrings||(0,_lodash.isEmpty)(indexPatternStrings))){_context.next=2;break}return _context.abrupt("return",[]);case 2:searchString=indexPatternStrings.map((function(string){return'"'.concat(string,'"')})).join(" | ");_context.next=5;return savedObjectsClient.find({type:"index-pattern",fields:["title","fields"],search:searchString,searchFields:["title"]});case 5:indexPatternsFromSavedObjects=_context.sent;exactMatches=indexPatternsFromSavedObjects.savedObjects.filter((function(savedObject){return indexPatternStrings.includes(savedObject.attributes.title)}));defaultIndex=uiSettings.get("defaultIndex");if(!(exactMatches.length===indexPatternStrings.length)){_context.next=12;break}_context.t0=exactMatches;_context.next=19;break;case 12:_context.t1=[];_context.t2=_toConsumableArray(exactMatches);_context.next=16;return savedObjectsClient.get("index-pattern",defaultIndex);case 16:_context.t3=_context.sent;_context.t4=[_context.t3];_context.t0=_context.t1.concat.call(_context.t1,_context.t2,_context.t4);case 19:allMatches=_context.t0;return _context.abrupt("return",allMatches.map(_.indexPatterns.getFromSavedObject));case 21:case"end":return _context.stop()}}}),_callee)})));return _fetchIndexPatterns.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueryLanguageSwitcher=QueryLanguageSwitcher;var _eui=__webpack_require__(12);var _react=__webpack_require__(13);var _react2=_interopRequireWildcard(__webpack_require__(4));var _public=__webpack_require__(14);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function QueryLanguageSwitcher(props){var kibana=(0,_public.useKibana)();var kueryQuerySyntaxDocs=kibana.services.docLinks.links.query.kueryQuerySyntax;var _useState=(0,_react2.useState)(false),_useState2=_slicedToArray(_useState,2),isPopoverOpen=_useState2[0],setIsPopoverOpen=_useState2[1];var luceneLabel=_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.luceneLanguageName",defaultMessage:"Lucene"});var kqlLabel=_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.kqlLanguageName",defaultMessage:"KQL"});var kqlFullName=_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.kqlFullLanguageName",defaultMessage:"Kibana Query Language"});var button=_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:function onClick(){return setIsPopoverOpen(!isPopoverOpen)},className:"euiFormControlLayout__append","data-test-subj":"switchQueryLanguageButton"},props.language==="lucene"?luceneLabel:kqlLabel);return _react2.default.createElement(_eui.EuiPopover,{id:"queryLanguageSwitcherPopover",anchorClassName:"euiFormControlLayout__append",ownFocus:true,anchorPosition:props.anchorPosition||"downRight",button:button,isOpen:isPopoverOpen,closePopover:function closePopover(){return setIsPopoverOpen(false)},withTitle:true},_react2.default.createElement(_eui.EuiPopoverTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.syntaxOptionsTitle",defaultMessage:"Syntax options"})),_react2.default.createElement("div",{style:{width:"350px"}},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.syntaxOptionsDescription",defaultMessage:"The {docsLink} (KQL) offers a simplified query syntax and support for scripted fields. KQL also provides autocomplete if you have a Basic license or above. If you turn off KQL, Kibana uses Lucene.",values:{docsLink:_react2.default.createElement(_eui.EuiLink,{href:kueryQuerySyntaxDocs,target:"_blank"},kqlFullName)}}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiForm,null,_react2.default.createElement(_eui.EuiFormRow,{label:kqlFullName},_react2.default.createElement(_eui.EuiSwitch,{id:"queryEnhancementOptIn",name:"popswitch",label:props.language==="kuery"?_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.kqlOnLabel",defaultMessage:"On"}):_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.kqlOffLabel",defaultMessage:"Off"}),checked:props.language==="kuery",onChange:function onChange(){var newLanguage=props.language==="lucene"?"kuery":"lucene";props.onSelectLanguage(newLanguage)},"data-test-subj":"languageToggle"})))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SearchBar",{enumerable:true,get:function get(){return _search_bar.SearchBar}});Object.defineProperty(exports,"SearchBarProps",{enumerable:true,get:function get(){return _search_bar.SearchBarProps}});Object.defineProperty(exports,"StatefulSearchBarProps",{enumerable:true,get:function get(){return _create_search_bar.StatefulSearchBarProps}});var _search_bar=__webpack_require__(276);var _create_search_bar=__webpack_require__(277)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueryBarTopRow=QueryBarTopRow;var _datemath=_interopRequireDefault(__webpack_require__(110));var _classnames=_interopRequireDefault(__webpack_require__(101));var _react=_interopRequireWildcard(__webpack_require__(4));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(12);var _react2=__webpack_require__(13);var _public=__webpack_require__(14);var _query_string_input=__webpack_require__(275);var _common=__webpack_require__(93);var _query=__webpack_require__(119);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function QueryBarTopRow(props){var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isDateRangeInvalid=_useState2[0],setIsDateRangeInvalid=_useState2[1];var kibana=(0,_public.useKibana)();var _kibana$services=kibana.services,uiSettings=_kibana$services.uiSettings,notifications=_kibana$services.notifications,storage=_kibana$services.storage,appName=_kibana$services.appName,docLinks=_kibana$services.docLinks;var kueryQuerySyntaxLink=docLinks.links.query.kueryQuerySyntax;var queryLanguage=props.query&&props.query.language;var persistedLog=_react.default.useMemo((function(){return queryLanguage&&uiSettings&&storage&&appName?(0,_query.getQueryLog)(uiSettings,storage,appName,queryLanguage):undefined}),[appName,queryLanguage,uiSettings,storage]);function onClickSubmitButton(event){if(persistedLog&&props.query){persistedLog.add(props.query.query)}event.preventDefault();onSubmit({query:props.query,dateRange:getDateRange()})}function getDateRange(){var defaultTimeSetting=uiSettings.get("timepicker:timeDefaults");return{from:props.dateRangeFrom||defaultTimeSetting.from,to:props.dateRangeTo||defaultTimeSetting.to}}function onQueryChange(query){props.onChange({query:query,dateRange:getDateRange()})}function onTimeChange(_ref){var start=_ref.start,end=_ref.end,isInvalid=_ref.isInvalid,isQuickSelection=_ref.isQuickSelection;setIsDateRangeInvalid(isInvalid);var retVal={query:props.query,dateRange:{from:start,to:end}};if(isQuickSelection){props.onSubmit(retVal)}else{props.onChange(retVal)}}function onRefresh(_ref2){var start=_ref2.start,end=_ref2.end;var retVal={dateRange:{from:start,to:end}};if(props.onRefresh){props.onRefresh(retVal)}}function onSubmit(_ref3){var query=_ref3.query,dateRange=_ref3.dateRange;handleLuceneSyntaxWarning();if(props.timeHistory){props.timeHistory.add(dateRange)}props.onSubmit({query:query,dateRange:dateRange})}function onInputSubmit(query){onSubmit({query:query,dateRange:getDateRange()})}function toAbsoluteString(value){var roundUp=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var valueAsMoment=_datemath.default.parse(value,{roundUp:roundUp});if(!valueAsMoment){return value}return valueAsMoment.toISOString()}function renderQueryInput(){if(!shouldRenderQueryInput())return;return _react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_query_string_input.QueryStringInput,{disableAutoFocus:props.disableAutoFocus,indexPatterns:props.indexPatterns,prepend:props.prepend,query:props.query,screenTitle:props.screenTitle,onChange:onQueryChange,onSubmit:onInputSubmit,persistedLog:persistedLog,dataTestSubj:props.dataTestSubj}))}function renderSharingMetaFields(){var _getDateRange=getDateRange(),from=_getDateRange.from,to=_getDateRange.to;var dateRangePretty=(0,_eui.prettyDuration)(toAbsoluteString(from),toAbsoluteString(to),[],uiSettings.get("dateFormat"));return _react.default.createElement("div",{"data-shared-timefilter-duration":dateRangePretty,"data-test-subj":"dataSharedTimefilterDuration"})}function shouldRenderDatePicker(){return Boolean(props.showDatePicker||props.showAutoRefreshOnly)}function shouldRenderQueryInput(){return Boolean(props.showQueryInput&&props.indexPatterns&&props.query&&storage)}function renderUpdateButton(){var button=props.customSubmitButton?_react.default.cloneElement(props.customSubmitButton,{onClick:onClickSubmitButton}):_react.default.createElement(_eui.EuiSuperUpdateButton,{needsUpdate:props.isDirty,isDisabled:isDateRangeInvalid,isLoading:props.isLoading,onClick:onClickSubmitButton,"data-test-subj":"querySubmitButton"});if(!shouldRenderDatePicker()){return button}return _react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s"},renderDatePicker(),_react.default.createElement(_eui.EuiFlexItem,{grow:false},button))}function renderDatePicker(){if(!shouldRenderDatePicker()){return null}var recentlyUsedRanges;if(props.timeHistory){recentlyUsedRanges=props.timeHistory.get().map((function(_ref4){var from=_ref4.from,to=_ref4.to;return{start:from,end:to}}))}var commonlyUsedRanges=uiSettings.get("timepicker:quickRanges").map((function(_ref5){var from=_ref5.from,to=_ref5.to,display=_ref5.display;return{start:from,end:to,label:display}}));return _react.default.createElement(_eui.EuiFlexItem,{className:"kbnQueryBar__datePickerWrapper"},_react.default.createElement(_eui.EuiSuperDatePicker,{start:props.dateRangeFrom,end:props.dateRangeTo,isPaused:props.isRefreshPaused,refreshInterval:props.refreshInterval,onTimeChange:onTimeChange,onRefresh:onRefresh,onRefreshChange:props.onRefreshChange,showUpdateButton:false,recentlyUsedRanges:recentlyUsedRanges,commonlyUsedRanges:commonlyUsedRanges,dateFormat:uiSettings.get("dateFormat"),isAutoRefreshOnly:props.showAutoRefreshOnly}))}function handleLuceneSyntaxWarning(){if(!props.query)return;var _props$query=props.query,query=_props$query.query,language=_props$query.language;if(language==="kuery"&&typeof query==="string"&&(!storage||!storage.get("kibana.luceneSyntaxWarningOptOut"))&&(0,_common.doesKueryExpressionHaveLuceneSyntaxError)(query)){var toast=notifications.toasts.addWarning({title:_i18n.i18n.translate("data.query.queryBar.luceneSyntaxWarningTitle",{defaultMessage:"Lucene syntax warning"}),text:(0,_public.toMountPoint)(_react.default.createElement("div",null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.luceneSyntaxWarningMessage",defaultMessage:"It looks like you may be trying to use Lucene query syntax, although you have Kibana Query Language (KQL) selected. Please review the KQL docs {link}.",values:{link:_react.default.createElement(_eui.EuiLink,{href:kueryQuerySyntaxLink,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.syntaxOptionsDescription.docsLinkText",defaultMessage:"here"}))}})),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return onLuceneSyntaxWarningOptOut(toast)}},_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.luceneSyntaxWarningOptOutText",defaultMessage:"Don't show again"}))))))})}}function onLuceneSyntaxWarningOptOut(toast){if(!storage)return;storage.set("kibana.luceneSyntaxWarningOptOut",true);notifications.toasts.remove(toast)}var classes=(0,_classnames.default)("kbnQueryBar",{"kbnQueryBar--withDatePicker":props.showDatePicker});return _react.default.createElement(_eui.EuiFlexGroup,{className:classes,responsive:!!props.showDatePicker,gutterSize:"s",justifyContent:"flexEnd"},renderQueryInput(),renderSharingMetaFields(),_react.default.createElement(_eui.EuiFlexItem,{grow:false},renderUpdateButton()))}QueryBarTopRow.defaultProps={showQueryInput:true,showDatePicker:true,showAutoRefreshOnly:false}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useFilterManager=void 0;var _react=__webpack_require__(4);var _rxjs=__webpack_require__(17);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var useFilterManager=function useFilterManager(props){var _useState=(0,_react.useState)(props.filters||props.filterManager.getFilters()),_useState2=_slicedToArray(_useState,2),filters=_useState2[0],setFilters=_useState2[1];(0,_react.useEffect)((function(){var subscriptions=new _rxjs.Subscription;subscriptions.add(props.filterManager.getUpdates$().subscribe({next:function next(){var newFilters=props.filterManager.getFilters();setFilters(newFilters)}}));return function(){subscriptions.unsubscribe()}}),[props.filterManager]);return{filters:filters}};exports.useFilterManager=useFilterManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useTimefilter=void 0;var _react=__webpack_require__(4);var _rxjs=__webpack_require__(17);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var useTimefilter=function useTimefilter(props){var initialTimeRange={from:props.dateRangeFrom||props.timefilter.getTime().from,to:props.dateRangeTo||props.timefilter.getTime().to};var initialRefreshInterval={value:props.refreshInterval||props.timefilter.getRefreshInterval().value,pause:props.isRefreshPaused||props.timefilter.getRefreshInterval().pause};var _useState=(0,_react.useState)(initialTimeRange),_useState2=_slicedToArray(_useState,2),timeRange=_useState2[0],setTimerange=_useState2[1];var _useState3=(0,_react.useState)(initialRefreshInterval),_useState4=_slicedToArray(_useState3,2),refreshInterval=_useState4[0],setRefreshInterval=_useState4[1];(0,_react.useEffect)((function(){var subscriptions=new _rxjs.Subscription;subscriptions.add(props.timefilter.getRefreshIntervalUpdate$().subscribe({next:function next(){var newRefreshInterval=props.timefilter.getRefreshInterval();setRefreshInterval(newRefreshInterval)}}));subscriptions.add(props.timefilter.getTimeUpdate$().subscribe({next:function next(){setTimerange(props.timefilter.getTime())}}));return function(){subscriptions.unsubscribe()}}),[props.timefilter]);return{refreshInterval:refreshInterval,timeRange:timeRange}};exports.useTimefilter=useTimefilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useSavedQuery=void 0;var _react=__webpack_require__(4);var _i18n=__webpack_require__(1);var _populate_state_from_saved_query=__webpack_require__(573);var _clear_saved_query=__webpack_require__(574);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var useSavedQuery=function useSavedQuery(props){var defaultLanguage=props.defaultLanguage;var _useState=(0,_react.useState)(),_useState2=_slicedToArray(_useState,2),savedQuery=_useState2[0],_setSavedQuery=_useState2[1];(0,_react.useEffect)((function(){var fetchSavedQuery=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedQueryId){var newSavedQuery;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return props.queryService.savedQueries.getSavedQuery(savedQueryId);case 3:newSavedQuery=_context.sent;if(newSavedQuery&&newSavedQuery.id===savedQueryId){_setSavedQuery(newSavedQuery);(0,_populate_state_from_saved_query.populateStateFromSavedQuery)(props.queryService,props.setQuery,newSavedQuery)}_context.next=12;break;case 7:_context.prev=7;_context.t0=_context["catch"](0);_setSavedQuery(undefined);(0,_clear_saved_query.clearStateFromSavedQuery)(props.queryService,props.setQuery,defaultLanguage);props.notifications.toasts.addWarning({title:_i18n.i18n.translate("data.search.unableToGetSavedQueryToastTitle",{defaultMessage:"Unable to load saved query {savedQueryId}",values:{savedQueryId:savedQueryId}}),text:"".concat(_context.t0.message)});case 12:case"end":return _context.stop()}}}),_callee,null,[[0,7]])})));return function fetchSavedQuery(_x){return _ref.apply(this,arguments)}}();if(props.savedQueryId)fetchSavedQuery(props.savedQueryId);else _setSavedQuery(undefined)}),[defaultLanguage,props.notifications.toasts,props.queryService,props.queryService.savedQueries,props.savedQueryId,props.setQuery]);return{savedQuery:savedQuery,setSavedQuery:function setSavedQuery(q){_setSavedQuery(q);(0,_populate_state_from_saved_query.populateStateFromSavedQuery)(props.queryService,props.setQuery,q)},clearSavedQuery:function clearSavedQuery(){_setSavedQuery(undefined);(0,_clear_saved_query.clearStateFromSavedQuery)(props.queryService,props.setQuery,defaultLanguage)}}};exports.useSavedQuery=useSavedQuery},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.populateStateFromSavedQuery=void 0;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var populateStateFromSavedQuery=function populateStateFromSavedQuery(queryService,setQueryStringState,savedQuery){var timefilter=queryService.timefilter.timefilter,filterManager=queryService.filterManager;if(savedQuery.attributes.timefilter){timefilter.setTime({from:savedQuery.attributes.timefilter.from,to:savedQuery.attributes.timefilter.to});if(savedQuery.attributes.timefilter.refreshInterval){timefilter.setRefreshInterval(savedQuery.attributes.timefilter.refreshInterval)}}setQueryStringState(savedQuery.attributes.query);var savedQueryFilters=savedQuery.attributes.filters||[];var globalFilters=filterManager.getGlobalFilters();filterManager.setFilters([].concat(_toConsumableArray(globalFilters),_toConsumableArray(savedQueryFilters)))};exports.populateStateFromSavedQuery=populateStateFromSavedQuery},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.clearStateFromSavedQuery=void 0;var clearStateFromSavedQuery=function clearStateFromSavedQuery(queryService,setQueryStringState,defaultLanguage){queryService.filterManager.removeAll();setQueryStringState({query:"",language:defaultLanguage})};exports.clearStateFromSavedQuery=clearStateFromSavedQuery},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ShardFailureRequest",{enumerable:true,get:function get(){return _shard_failure_types.ShardFailureRequest}});Object.defineProperty(exports,"ShardFailureResponse",{enumerable:true,get:function get(){return _shard_failure_types.ShardFailureResponse}});Object.defineProperty(exports,"ShardFailureOpenModalButton",{enumerable:true,get:function get(){return _shard_failure_open_modal_button.ShardFailureOpenModalButton}});var _shard_failure_types=__webpack_require__(576);var _shard_failure_open_modal_button=__webpack_require__(577)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShardFailureOpenModalButton=ShardFailureOpenModalButton;var _react=_interopRequireDefault(__webpack_require__(4));var _react2=__webpack_require__(13);var _eui=__webpack_require__(12);var _services=__webpack_require__(95);var _public=__webpack_require__(14);var _shard_failure_modal=__webpack_require__(578);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ShardFailureOpenModalButton(_ref){var request=_ref.request,response=_ref.response,title=_ref.title;function onClick(){var modal=(0,_services.getOverlays)().openModal((0,_public.toMountPoint)(_react.default.createElement(_shard_failure_modal.ShardFailureModal,{request:request,response:response,title:title,onClose:function onClose(){return modal.close()}})),{className:"shardFailureModal"})}return _react.default.createElement(_eui.EuiTextAlign,{textAlign:"right"},_react.default.createElement(_eui.EuiButton,{color:"warning",size:"s",onClick:onClick,"data-test-subj":"openShardFailureModalBtn"},_react.default.createElement(_react2.FormattedMessage,{id:"data.search.searchSource.fetch.shardsFailedModal.showDetails",defaultMessage:"Show details",description:"Open the modal to show details"})))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShardFailureModal=ShardFailureModal;var _react=_interopRequireDefault(__webpack_require__(4));var _react2=__webpack_require__(13);var _i18n=__webpack_require__(1);var _eui=__webpack_require__(12);var _shard_failure_table=__webpack_require__(579);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ShardFailureModal(_ref){var request=_ref.request,response=_ref.response,title=_ref.title,onClose=_ref.onClose;if(!response||!response._shards||!Array.isArray(response._shards.failures)||!request){return _react.default.createElement(_eui.EuiCallOut,{title:"Sorry, there was an error",color:"danger",iconType:"alert"},"The ShardFailureModal component received invalid properties")}var requestJSON=JSON.stringify(request,null,2);var responseJSON=JSON.stringify(response,null,2);var failures=response._shards.failures;var tabs=[{id:"table",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tabHeaderShardFailures",{defaultMessage:"Shard failures",description:"Name of the tab displaying shard failures"}),content:_react.default.createElement(_shard_failure_table.ShardFailureTable,{failures:failures})},{id:"json-request",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tabHeaderRequest",{defaultMessage:"Request",description:"Name of the tab displaying the JSON request"}),content:_react.default.createElement(_eui.EuiCodeBlock,{language:"json",isCopyable:true},requestJSON)},{id:"json-response",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tabHeaderResponse",{defaultMessage:"Response",description:"Name of the tab displaying the JSON response"}),content:_react.default.createElement(_eui.EuiCodeBlock,{language:"json",isCopyable:true},responseJSON)}];return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,title)),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_eui.EuiTabbedContent,{tabs:tabs,initialSelectedTab:tabs[0],autoFocus:"selected"})),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiCopy,{textToCopy:responseJSON},(function(copy){return _react.default.createElement(_eui.EuiButtonEmpty,{onClick:copy},_react.default.createElement(_react2.FormattedMessage,{id:"data.search.searchSource.fetch.shardsFailedModal.copyToClipboard",defaultMessage:"Copy response to clipboard"}))})),_react.default.createElement(_eui.EuiButton,{onClick:function onClick(){return onClose()},fill:true,"data-test-sub":"closeShardFailureModal"},_react.default.createElement(_react2.FormattedMessage,{id:"data.search.searchSource.fetch.shardsFailedModal.close",defaultMessage:"Close",description:"Closing the Modal"}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShardFailureTable=ShardFailureTable;var _react=_interopRequireWildcard(__webpack_require__(4));var _eui=__webpack_require__(12);var _services=__webpack_require__(87);var _i18n=__webpack_require__(1);var _shard_failure_description=__webpack_require__(580);var _shard_failure_description_header=__webpack_require__(278);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ShardFailureTable(_ref){var failures=_ref.failures;var itemList=failures.map((function(failure,idx){return _objectSpread({},{id:String(idx)},{},failure)}));var initalMap={};var _useState=(0,_react.useState)(initalMap),_useState2=_slicedToArray(_useState,2),expandMap=_useState2[0],setExpandMap=_useState2[1];var columns=[{align:_services.RIGHT_ALIGNMENT,width:"40px",isExpander:true,render:function render(item){var failureSummeryText=(0,_shard_failure_description_header.getFailureSummaryText)(item);var collapseLabel=_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableRowCollapse",{defaultMessage:"Collapse {rowDescription}",description:"Collapse a row of a table with failures",values:{rowDescription:failureSummeryText}});var expandLabel=_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableRowExpand",{defaultMessage:"Expand {rowDescription}",description:"Expand a row of a table with failures",values:{rowDescription:failureSummeryText}});return _react.default.createElement(_eui.EuiButtonIcon,{onClick:function onClick(){var map=Object.assign({},expandMap);if(map[item.id]){delete map[item.id]}else{map[item.id]=_react.default.createElement(_shard_failure_description.ShardFailureDescription,item)}setExpandMap(map)},"aria-label":expandMap[item.id]?collapseLabel:expandLabel,iconType:expandMap[item.id]?"arrowUp":"arrowDown"})}},{field:"shard",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableColShard",{defaultMessage:"Shard"}),sortable:true,truncateText:true,width:"80px"},{field:"index",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableColIndex",{defaultMessage:"Index"}),sortable:true,truncateText:true},{field:"node",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableColNode",{defaultMessage:"Node"}),sortable:true,truncateText:true},{field:"reason.type",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableColReason",{defaultMessage:"Reason"}),truncateText:true}];return _react.default.createElement(_eui.EuiInMemoryTable,{itemId:"id",items:itemList,columns:columns,pagination:true,sorting:{sort:{field:"index",direction:"desc"}},itemIdToExpandedRowMap:expandMap})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatKey=formatKey;exports.formatValueByKey=formatValueByKey;exports.ShardFailureDescription=ShardFailureDescription;var _react=_interopRequireDefault(__webpack_require__(4));var _eui=__webpack_require__(12);var _utils=__webpack_require__(3);var _shard_failure_description_header=__webpack_require__(278);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function formatKey(key){var nameCapitalized=key.charAt(0).toUpperCase()+key.slice(1);return nameCapitalized.replace(/[\._]/g," ")}function formatValueByKey(value,key){if(key==="script"||key==="script_stack"){var valueScript=Array.isArray(value)?value.join("\n"):String(value);return _react.default.createElement(_eui.EuiCodeBlock,{language:"java",paddingSize:"s",isCopyable:true},valueScript)}else{return String(value)}}function ShardFailureDescription(props){var flattendReason=(0,_utils.getFlattenedObject)(props.reason);var listItems=Object.entries(flattendReason).map((function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return{title:formatKey(key),description:formatValueByKey(value,key)}}));return _react.default.createElement("div",null,_react.default.createElement(_shard_failure_description_header.ShardFailureDescriptionHeader,props),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiDescriptionList,{listItems:listItems,type:"column",compressed:true,className:"shardFailureModal__desc",titleProps:{className:"shardFailureModal__descTitle"},descriptionProps:{className:"shardFailureModal__descValue"}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedQueryManagementComponent",{enumerable:true,get:function get(){return _saved_query_management_component.SavedQueryManagementComponent}});var _saved_query_management_component=__webpack_require__(582)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedQueryManagementComponent=SavedQueryManagementComponent;var _eui=__webpack_require__(12);var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(4));var _lodash=__webpack_require__(0);var _saved_query_list_item=__webpack_require__(583);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var perPage=50;function SavedQueryManagementComponent(_ref){var showSaveQuery=_ref.showSaveQuery,loadedSavedQuery=_ref.loadedSavedQuery,onSave=_ref.onSave,onSaveAsNew=_ref.onSaveAsNew,onLoad=_ref.onLoad,onClearSavedQuery=_ref.onClearSavedQuery,savedQueryService=_ref.savedQueryService;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var _useState3=(0,_react.useState)([]),_useState4=_slicedToArray(_useState3,2),savedQueries=_useState4[0],setSavedQueries=_useState4[1];var _useState5=(0,_react.useState)(0),_useState6=_slicedToArray(_useState5,2),count=_useState6[0],setTotalCount=_useState6[1];var _useState7=(0,_react.useState)(0),_useState8=_slicedToArray(_useState7,2),activePage=_useState8[0],setActivePage=_useState8[1];var cancelPendingListingRequest=(0,_react.useRef)((function(){}));(0,_react.useEffect)((function(){var fetchCountAndSavedQueries=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var requestGotCancelled,_ref3,savedQueryCount,savedQueryItems,sortedSavedQueryItems;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:cancelPendingListingRequest.current();requestGotCancelled=false;cancelPendingListingRequest.current=function(){requestGotCancelled=true};_context.next=5;return savedQueryService.findSavedQueries("",perPage,activePage+1);case 5:_ref3=_context.sent;savedQueryCount=_ref3.total;savedQueryItems=_ref3.queries;if(!requestGotCancelled){_context.next=10;break}return _context.abrupt("return");case 10:sortedSavedQueryItems=(0,_lodash.sortBy)(savedQueryItems,"attributes.title");setTotalCount(savedQueryCount);setSavedQueries(sortedSavedQueryItems);case 13:case"end":return _context.stop()}}}),_callee)})));return function fetchCountAndSavedQueries(){return _ref2.apply(this,arguments)}}();if(isOpen){fetchCountAndSavedQueries()}}),[isOpen,activePage,savedQueryService]);var goToPage=function goToPage(pageNumber){setActivePage(pageNumber)};var savedQueryDescriptionText=_i18n.i18n.translate("data.search.searchBar.savedQueryDescriptionText",{defaultMessage:"Save query text and filters that you want to use again."});var noSavedQueriesDescriptionText=_i18n.i18n.translate("data.search.searchBar.savedQueryNoSavedQueriesText",{defaultMessage:"There are no saved queries."})+" "+savedQueryDescriptionText;var savedQueryPopoverTitleText=_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverTitleText",{defaultMessage:"Saved Queries"});var onDeleteSavedQuery=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(savedQuery){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:cancelPendingListingRequest.current();setSavedQueries(savedQueries.filter((function(currentSavedQuery){return currentSavedQuery.id!==savedQuery.id})));if(loadedSavedQuery&&loadedSavedQuery.id===savedQuery.id){onClearSavedQuery()}_context2.next=5;return savedQueryService.deleteSavedQuery(savedQuery.id);case 5:setActivePage(0);case 6:case"end":return _context2.stop()}}}),_callee2)})));return function onDeleteSavedQuery(_x){return _ref4.apply(this,arguments)}}();var savedQueryPopoverButton=_react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){setIsOpen(!isOpen)},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverButtonText",{defaultMessage:"See saved queries"}),title:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverButtonText",{defaultMessage:"See saved queries"}),"data-test-subj":"saved-query-management-popover-button"},_react.default.createElement(_eui.EuiIcon,{type:"save",className:"euiQuickSelectPopover__buttonText"}),_react.default.createElement(_eui.EuiIcon,{type:"arrowDown"}));var savedQueryRows=function savedQueryRows(){var savedQueriesWithoutCurrent=savedQueries.filter((function(savedQuery){if(!loadedSavedQuery)return true;return savedQuery.id!==loadedSavedQuery.id}));var savedQueriesReordered=loadedSavedQuery&&savedQueriesWithoutCurrent.length!==savedQueries.length?[loadedSavedQuery].concat(_toConsumableArray(savedQueriesWithoutCurrent)):_toConsumableArray(savedQueriesWithoutCurrent);return savedQueriesReordered.map((function(savedQuery){return _react.default.createElement(_saved_query_list_item.SavedQueryListItem,{key:savedQuery.id,savedQuery:savedQuery,isSelected:!!loadedSavedQuery&&loadedSavedQuery.id===savedQuery.id,onSelect:function onSelect(savedQueryToSelect){onLoad(savedQueryToSelect);setIsOpen(false)},onDelete:function onDelete(savedQueryToDelete){return onDeleteSavedQuery(savedQueryToDelete)},showWriteOperations:!!showSaveQuery})}))};return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiPopover,{id:"savedQueryPopover",button:savedQueryPopoverButton,isOpen:isOpen,closePopover:function closePopover(){setIsOpen(false)},anchorPosition:"downLeft",panelPaddingSize:"none",ownFocus:true},_react.default.createElement("div",{className:"kbnSavedQueryManagement__popover","data-test-subj":"saved-query-management-popover"},_react.default.createElement(_eui.EuiPopoverTitle,{id:"savedQueryManagementPopoverTitle"},savedQueryPopoverTitleText),savedQueries.length>0?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued",className:"kbnSavedQueryManagement__text"},_react.default.createElement("p",null,savedQueryDescriptionText)),_react.default.createElement("div",{className:"kbnSavedQueryManagement__listWrapper"},_react.default.createElement(_eui.EuiListGroup,{flush:true,className:"kbnSavedQueryManagement__list","aria-labelledby":"savedQueryManagementPopoverTitle"},savedQueryRows())),_react.default.createElement(_eui.EuiPagination,{className:"kbnSavedQueryManagement__pagination",pageCount:Math.ceil(count/perPage),activePage:activePage,onPageClick:goToPage})):_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued",className:"kbnSavedQueryManagement__text"},_react.default.createElement("p",null,noSavedQueriesDescriptionText)),_react.default.createElement(_eui.EuiSpacer,{size:"s"})),_react.default.createElement(_eui.EuiPopoverFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{direction:"rowReverse",gutterSize:"s",alignItems:"center",justifyContent:"flexEnd",responsive:false,wrap:true},showSaveQuery&&loadedSavedQuery&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",fill:true,onClick:function onClick(){return onSave()},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveChangesButtonAriaLabel",{defaultMessage:"Save changes to {title}",values:{title:loadedSavedQuery.attributes.title}}),"data-test-subj":"saved-query-management-save-changes-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveChangesButtonText",{defaultMessage:"Save changes"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return onSaveAsNew()},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveAsNewButtonAriaLabel",{defaultMessage:"Save as new saved query"}),"data-test-subj":"saved-query-management-save-as-new-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveAsNewButtonText",{defaultMessage:"Save as new"})))),showSaveQuery&&!loadedSavedQuery&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",fill:true,onClick:function onClick(){return onSave()},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveButtonAriaLabel",{defaultMessage:"Save a new saved query"}),"data-test-subj":"saved-query-management-save-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveButtonText",{defaultMessage:"Save current query"}))),_react.default.createElement(_eui.EuiFlexItem,null),_react.default.createElement(_eui.EuiFlexItem,{grow:false},loadedSavedQuery&&_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",flush:"left",onClick:function onClick(){return onClearSavedQuery()},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverClearButtonAriaLabel",{defaultMessage:"Clear current saved query"}),"data-test-subj":"saved-query-management-clear-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverClearButtonText",{defaultMessage:"Clear"}))))))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedQueryListItem=void 0;var _eui=__webpack_require__(12);var _react=_interopRequireWildcard(__webpack_require__(4));var _classnames=_interopRequireDefault(__webpack_require__(101));var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var SavedQueryListItem=function SavedQueryListItem(_ref){var savedQuery=_ref.savedQuery,isSelected=_ref.isSelected,onSelect=_ref.onSelect,onDelete=_ref.onDelete,showWriteOperations=_ref.showWriteOperations;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),showDeletionConfirmationModal=_useState2[0],setShowDeletionConfirmationModal=_useState2[1];var selectButtonAriaLabelText=isSelected?_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemSelectedButtonAriaLabel",{defaultMessage:"Saved query button selected {savedQueryName}. Press to clear any changes.",values:{savedQueryName:savedQuery.attributes.title}}):_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemButtonAriaLabel",{defaultMessage:"Saved query button {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}});var selectButtonDataTestSubj=isSelected?"load-saved-query-".concat(savedQuery.attributes.title,"-button saved-query-list-item-selected"):"load-saved-query-".concat(savedQuery.attributes.title,"-button");var classes=(0,_classnames.default)("kbnSavedQueryListItem",{"kbnSavedQueryListItem-selected":isSelected});var label=_react.default.createElement("span",{className:"kbnSavedQueryListItem__label"},_react.default.createElement("span",{className:"kbnSavedQueryListItem__labelText"},savedQuery.attributes.title)," ",savedQuery.attributes.description&&_react.default.createElement(_eui.EuiIconTip,{type:"iInCircle",content:savedQuery.attributes.description,"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemDescriptionAriaLabel",{defaultMessage:"{savedQueryName} description",values:{savedQueryName:savedQuery.attributes.title}})}));return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiListGroupItem,{className:classes,key:savedQuery.id,"data-test-subj":"saved-query-list-item ".concat(selectButtonDataTestSubj," ").concat(isSelected?"saved-query-list-item-selected":""),isActive:isSelected,onClick:function onClick(){onSelect(savedQuery)},"aria-label":selectButtonAriaLabelText,label:label,iconType:isSelected?"check":undefined,extraAction:showWriteOperations?{color:"danger",onClick:function onClick(){return setShowDeletionConfirmationModal(true)},iconType:"trash",iconSize:"s","aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverDeleteButtonAriaLabel",{defaultMessage:"Delete saved query {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}}),title:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverDeleteButtonAriaLabel",{defaultMessage:"Delete saved query {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}}),"data-test-subj":"delete-saved-query-".concat(savedQuery.attributes.title,"-button")}:undefined}),showDeletionConfirmationModal&&_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverConfirmDeletionTitle",{defaultMessage:'Delete "{savedQueryName}"?',values:{savedQueryName:savedQuery.attributes.title}}),confirmButtonText:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverConfirmDeletionConfirmButtonText",{defaultMessage:"Delete"}),cancelButtonText:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverConfirmDeletionCancelButtonText",{defaultMessage:"Cancel"}),onConfirm:function onConfirm(){onDelete(savedQuery);setShowDeletionConfirmationModal(false)},buttonColor:"danger",onCancel:function onCancel(){setShowDeletionConfirmationModal(false)}})))};exports.SavedQueryListItem=SavedQueryListItem},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedQueryMeta",{enumerable:true,get:function get(){return _save_query_form.SavedQueryMeta}});Object.defineProperty(exports,"SaveQueryForm",{enumerable:true,get:function get(){return _save_query_form.SaveQueryForm}});var _save_query_form=__webpack_require__(585)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SaveQueryForm=SaveQueryForm;var _react=_interopRequireWildcard(__webpack_require__(4));var _eui=__webpack_require__(12);var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(0);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function SaveQueryForm(_ref){var savedQuery=_ref.savedQuery,savedQueryService=_ref.savedQueryService,onSave=_ref.onSave,onClose=_ref.onClose,_ref$showFilterOption=_ref.showFilterOption,showFilterOption=_ref$showFilterOption===void 0?true:_ref$showFilterOption,_ref$showTimeFilterOp=_ref.showTimeFilterOption,showTimeFilterOption=_ref$showTimeFilterOp===void 0?true:_ref$showTimeFilterOp;var _useState=(0,_react.useState)(savedQuery?savedQuery.title:""),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=(0,_react.useState)(savedQuery?savedQuery.description:""),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=(0,_react.useState)([]),_useState6=_slicedToArray(_useState5,2),savedQueries=_useState6[0],setSavedQueries=_useState6[1];var _useState7=(0,_react.useState)(savedQuery?!!savedQuery.filters:true),_useState8=_slicedToArray(_useState7,2),shouldIncludeFilters=_useState8[0],setShouldIncludeFilters=_useState8[1];var _useState9=(0,_react.useState)(savedQuery?!!savedQuery.timefilter:false),_useState10=_slicedToArray(_useState9,2),shouldIncludeTimefilter=_useState10[0],setIncludeTimefilter=_useState10[1];var _useState11=(0,_react.useState)([]),_useState12=_slicedToArray(_useState11,2),formErrors=_useState12[0],setFormErrors=_useState12[1];(0,_react.useEffect)((function(){var fetchQueries=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var allSavedQueries,sortedAllSavedQueries;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return savedQueryService.getAllSavedQueries();case 2:allSavedQueries=_context.sent;sortedAllSavedQueries=(0,_lodash.sortBy)(allSavedQueries,"attributes.title");setSavedQueries(sortedAllSavedQueries);case 5:case"end":return _context.stop()}}}),_callee)})));return function fetchQueries(){return _ref2.apply(this,arguments)}}();fetchQueries()}),[savedQueryService]);var savedQueryDescriptionText=_i18n.i18n.translate("data.search.searchBar.savedQueryDescriptionText",{defaultMessage:"Save query text and filters that you want to use again."});var titleConflictErrorText=_i18n.i18n.translate("data.search.searchBar.savedQueryForm.titleConflictText",{defaultMessage:"Name conflicts with an existing saved query"});var titleMissingErrorText=_i18n.i18n.translate("data.search.searchBar.savedQueryForm.titleMissingText",{defaultMessage:"Name is required"});var whitespaceErrorText=_i18n.i18n.translate("data.search.searchBar.savedQueryForm.whitespaceErrorText",{defaultMessage:"Name cannot contain leading or trailing whitespace"});var validate=function validate(){var errors=[];if(!title.length){errors.push(titleMissingErrorText)}if(title.length>title.trim().length){errors.push(whitespaceErrorText)}if(!!savedQueries.find((function(existingSavedQuery){return!savedQuery&&existingSavedQuery.attributes.title===title}))){errors.push(titleConflictErrorText)}if(!(0,_lodash.isEqual)(errors,formErrors)){setFormErrors(errors)}};var hasErrors=formErrors.length>0;if(hasErrors){validate()}var saveQueryForm=_react.default.createElement(_eui.EuiForm,{isInvalid:hasErrors,error:formErrors,"data-test-subj":"saveQueryForm"},_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiText,{color:"subdued"},savedQueryDescriptionText)),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("data.search.searchBar.savedQueryNameLabelText",{defaultMessage:"Name"}),helpText:_i18n.i18n.translate("data.search.searchBar.savedQueryNameHelpText",{defaultMessage:"Name is required. Name cannot contain leading or trailing whitespace. Name must be unique."}),isInvalid:hasErrors},_react.default.createElement(_eui.EuiFieldText,{disabled:!!savedQuery,value:title,name:"title",onChange:function onChange(event){setTitle(event.target.value)},"data-test-subj":"saveQueryFormTitle",isInvalid:hasErrors,onBlur:validate})),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("data.search.searchBar.savedQueryDescriptionLabelText",{defaultMessage:"Description"})},_react.default.createElement(_eui.EuiFieldText,{value:description,name:"description",onChange:function onChange(event){setDescription(event.target.value)},"data-test-subj":"saveQueryFormDescription"})),showFilterOption&&_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiSwitch,{name:"shouldIncludeFilters",label:_i18n.i18n.translate("data.search.searchBar.savedQueryIncludeFiltersLabelText",{defaultMessage:"Include filters"}),checked:shouldIncludeFilters,onChange:function onChange(){setShouldIncludeFilters(!shouldIncludeFilters)},"data-test-subj":"saveQueryFormIncludeFiltersOption"})),showTimeFilterOption&&_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiSwitch,{name:"shouldIncludeTimefilter",label:_i18n.i18n.translate("data.search.searchBar.savedQueryIncludeTimeFilterLabelText",{defaultMessage:"Include time filter"}),checked:shouldIncludeTimefilter,onChange:function onChange(){setIncludeTimefilter(!shouldIncludeTimefilter)},"data-test-subj":"saveQueryFormIncludeTimeFilterOption"})));return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{onClose:onClose,initialFocus:"[name=title]"},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,_i18n.i18n.translate("data.search.searchBar.savedQueryFormTitle",{defaultMessage:"Save query"}))),_react.default.createElement(_eui.EuiModalBody,null,saveQueryForm),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiButtonEmpty,{onClick:onClose,"data-test-subj":"savedQueryFormCancelButton"},_i18n.i18n.translate("data.search.searchBar.savedQueryFormCancelButtonText",{defaultMessage:"Cancel"})),_react.default.createElement(_eui.EuiButton,{onClick:function onClick(){return onSave({title:title,description:description,shouldIncludeFilters:shouldIncludeFilters,shouldIncludeTimefilter:shouldIncludeTimefilter})},fill:true,"data-test-subj":"savedQueryFormSaveButton",disabled:hasErrors},_i18n.i18n.translate("data.search.searchBar.savedQueryFormSaveButtonText",{defaultMessage:"Save"})))))}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getSearchErrorType=getSearchErrorType;exports.SearchError=void 0;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchError=function(_Error){_inherits(SearchError,_Error);function SearchError(_ref){var _this;var status=_ref.status,title=_ref.title,message=_ref.message,path=_ref.path,type=_ref.type;_classCallCheck(this,SearchError);_this=_possibleConstructorReturn(this,_getPrototypeOf(SearchError).call(this,message));_defineProperty(_assertThisInitialized(_this),"name",void 0);_defineProperty(_assertThisInitialized(_this),"status",void 0);_defineProperty(_assertThisInitialized(_this),"title",void 0);_defineProperty(_assertThisInitialized(_this),"message",void 0);_defineProperty(_assertThisInitialized(_this),"path",void 0);_defineProperty(_assertThisInitialized(_this),"type",void 0);_this.name="SearchError";_this.status=status;_this.title=title;_this.message=message;_this.path=path;_this.type=type;if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(_this),SearchError)}Object.setPrototypeOf(_assertThisInitialized(_this),SearchError.prototype);return _this}return SearchError}(_wrapNativeSuper(Error));exports.SearchError=SearchError;function getSearchErrorType(_ref2){var message=_ref2.message;var msg=message.toLowerCase();if(msg.indexOf("unsupported query")>-1){return"UNSUPPORTED_QUERY"}}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultSearchStrategy=void 0;var _index_patterns=__webpack_require__(169);var _get_search_params=__webpack_require__(589);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var defaultSearchStrategy={id:"default",search:function search(params){return params.config.get("courier:batchSearches")?msearch(params):_search(params)},isViable:function isViable(indexPattern){return indexPattern&&(0,_index_patterns.isDefault)(indexPattern)}};exports.defaultSearchStrategy=defaultSearchStrategy;function msearch(_ref){var searchRequests=_ref.searchRequests,searchService=_ref.searchService,config=_ref.config,esShardTimeout=_ref.esShardTimeout;var es=searchService.__LEGACY.esClient;var inlineRequests=searchRequests.map((function(_ref2){var index=_ref2.index,body=_ref2.body,searchType=_ref2.search_type;var inlineHeader={index:index.title||index,search_type:searchType,ignore_unavailable:true,preference:(0,_get_search_params.getPreference)(config)};var inlineBody=_objectSpread({},body,{timeout:(0,_get_search_params.getTimeout)(esShardTimeout)});return"".concat(JSON.stringify(inlineHeader),"\n").concat(JSON.stringify(inlineBody))}));var searching=es.msearch(_objectSpread({},(0,_get_search_params.getMSearchParams)(config),{body:"".concat(inlineRequests.join("\n"),"\n")}));return{searching:searching.then((function(_ref3){var responses=_ref3.responses;return responses})),abort:searching.abort}}function _search(_ref4){var searchRequests=_ref4.searchRequests,searchService=_ref4.searchService,config=_ref4.config,esShardTimeout=_ref4.esShardTimeout;var abortController=new AbortController;var searchParams=(0,_get_search_params.getSearchParams)(config,esShardTimeout);var promises=searchRequests.map((function(_ref5){var index=_ref5.index,indexType=_ref5.indexType,body=_ref5.body;var params=_objectSpread({index:index.title||index,body:body},searchParams);var signal=abortController.signal;return searchService.search({params:params,indexType:indexType},{signal:signal}).toPromise().then((function(_ref6){var rawResponse=_ref6.rawResponse;return rawResponse}))}));return{searching:Promise.all(promises),abort:function abort(){return abortController.abort()}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getMSearchParams=getMSearchParams;exports.getSearchParams=getSearchParams;exports.getPreference=getPreference;exports.getTimeout=getTimeout;var sessionId=Date.now();function getMSearchParams(config){return{rest_total_hits_as_int:true,ignore_throttled:getIgnoreThrottled(config),max_concurrent_shard_requests:getMaxConcurrentShardRequests(config)}}function getSearchParams(config){var esShardTimeout=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return{rest_total_hits_as_int:true,ignore_unavailable:true,ignore_throttled:getIgnoreThrottled(config),max_concurrent_shard_requests:getMaxConcurrentShardRequests(config),preference:getPreference(config),timeout:getTimeout(esShardTimeout)}}function getIgnoreThrottled(config){return!config.get("search:includeFrozen")}function getMaxConcurrentShardRequests(config){var maxConcurrentShardRequests=config.get("courier:maxConcurrentShardRequests");return maxConcurrentShardRequests>0?maxConcurrentShardRequests:undefined}function getPreference(config){var setRequestPreference=config.get("courier:setRequestPreference");if(setRequestPreference==="sessionId")return sessionId;return setRequestPreference==="custom"?config.get("courier:customRequestPreference"):undefined}function getTimeout(esShardTimeout){return esShardTimeout>0?"".concat(esShardTimeout,"ms"):undefined}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestFailure=void 0;var _public=__webpack_require__(15);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestFailure=function(_KbnError){_inherits(RequestFailure,_KbnError);function RequestFailure(){var _this;var err=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var resp=arguments.length>1?arguments[1]:undefined;_classCallCheck(this,RequestFailure);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestFailure).call(this,"Request to Elasticsearch failed: ".concat(JSON.stringify(resp||(err===null||err===void 0?void 0:err.message)))));_defineProperty(_assertThisInitialized(_this),"resp",void 0);_this.resp=resp;return _this}return RequestFailure}(_public.KbnError);exports.RequestFailure=RequestFailure},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ISearchSource",{enumerable:true,get:function get(){return _search_source.ISearchSource}});exports.SortDirection=void 0;var _search_source=__webpack_require__(272);var SortDirection;exports.SortDirection=SortDirection;(function(SortDirection){SortDirection["asc"]="asc";SortDirection["desc"]="desc"})(SortDirection||(exports.SortDirection=SortDirection={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tabifyAggResponse=tabifyAggResponse;var _lodash=__webpack_require__(0);var _response_writer=__webpack_require__(593);var _buckets=__webpack_require__(594);var _aggs=__webpack_require__(141);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function tabifyAggResponse(aggConfigs,esResponse,respOpts){function collectBucket(aggs,write,bucket,key,aggScale){var column=write.columns.shift();if(column){var agg=column.aggConfig;var aggInfo=agg.write(aggs);aggScale*=aggInfo.metricScale||1;switch(agg.type.type){case _aggs.AggGroupNames.Buckets:var aggBucket=(0,_lodash.get)(bucket,agg.id);var tabifyBuckets=new _buckets.TabifyBuckets(aggBucket,agg.params,timeRange);if(tabifyBuckets.length){tabifyBuckets.forEach((function(subBucket,tabifyBucketKey){var bucketValue=agg.getKey(subBucket,tabifyBucketKey);var hasBucketValue=typeof bucketValue!=="undefined";if(hasBucketValue){write.bucketBuffer.push({id:column.id,value:bucketValue})}collectBucket(aggs,write,subBucket,agg.getKey(subBucket,tabifyBucketKey),aggScale);if(hasBucketValue){write.bucketBuffer.pop()}}))}else if(respOpts===null||respOpts===void 0?void 0:respOpts.partialRows){write.columns.unshift(column);passEmptyBuckets(aggs,write,bucket,key,aggScale);write.columns.shift()}else{write.row()}break;case _aggs.AggGroupNames.Metrics:var value=agg.getValue(bucket);if(aggScale!==1){value*=aggScale}write.metricBuffer.push({id:column.id,value:value});if(!write.columns.length){write.row()}else{collectBucket(aggs,write,bucket,key,aggScale)}write.metricBuffer.pop();break}write.columns.unshift(column)}}function passEmptyBuckets(aggs,write,bucket,key,aggScale){var column=write.columns.shift();if(column){var agg=column.aggConfig;switch(agg.type.type){case _aggs.AggGroupNames.Metrics:write.columns.unshift(column);collectBucket(aggs,write,bucket,key,aggScale);return;case _aggs.AggGroupNames.Buckets:passEmptyBuckets(aggs,write,bucket,key,aggScale)}write.columns.unshift(column)}}var write=new _response_writer.TabbedAggResponseWriter(aggConfigs,respOpts||{});var topLevelBucket=_objectSpread({},esResponse.aggregations,{doc_count:esResponse.hits.total});var timeRange;if(respOpts&&respOpts.timeRange){var _Object$keys=Object.keys(respOpts.timeRange),_Object$keys2=_slicedToArray(_Object$keys,1),timeRangeKey=_Object$keys2[0];if(timeRangeKey){timeRange=_objectSpread({name:timeRangeKey},respOpts.timeRange[timeRangeKey])}}collectBucket(aggConfigs,write,topLevelBucket,"",1);return write.response()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TabbedAggResponseWriter=void 0;var _lodash=__webpack_require__(0);var _get_columns=__webpack_require__(281);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TabbedAggResponseWriter=function(){function TabbedAggResponseWriter(aggs,_ref){var _ref$metricsAtAllLeve=_ref.metricsAtAllLevels,metricsAtAllLevels=_ref$metricsAtAllLeve===void 0?false:_ref$metricsAtAllLeve,_ref$partialRows=_ref.partialRows,partialRows=_ref$partialRows===void 0?false:_ref$partialRows;_classCallCheck(this,TabbedAggResponseWriter);_defineProperty(this,"columns",void 0);_defineProperty(this,"rows",[]);_defineProperty(this,"bucketBuffer",[]);_defineProperty(this,"metricBuffer",[]);_defineProperty(this,"partialRows",void 0);this.partialRows=partialRows;this.columns=(0,_get_columns.tabifyGetColumns)(aggs.getResponseAggs(),!metricsAtAllLevels);this.rows=[]}_createClass(TabbedAggResponseWriter,[{key:"row",value:function row(){var rowBuffer={};this.bucketBuffer.forEach((function(bucket){rowBuffer[bucket.id]=bucket.value}));this.metricBuffer.forEach((function(metric){rowBuffer[metric.id]=metric.value}));var isPartialRow=!this.columns.every((function(column){return rowBuffer.hasOwnProperty(column.id)}));var removePartial=isPartialRow&&!this.partialRows;if(!(0,_lodash.isEmpty)(rowBuffer)&&!removePartial){this.rows.push(rowBuffer)}}},{key:"response",value:function response(){return{columns:this.columns,rows:this.rows}}}]);return TabbedAggResponseWriter}();exports.TabbedAggResponseWriter=TabbedAggResponseWriter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TabifyBuckets=void 0;var _lodash=__webpack_require__(0);var _moment=_interopRequireDefault(__webpack_require__(84));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var isRangeEqual=function isRangeEqual(range1,range2){return(range1===null||range1===void 0?void 0:range1.from)===(range2===null||range2===void 0?void 0:range2.from)&&(range1===null||range1===void 0?void 0:range1.to)===(range2===null||range2===void 0?void 0:range2.to)};var TabifyBuckets=function(){function TabifyBuckets(aggResp,aggParams,timeRange){_classCallCheck(this,TabifyBuckets);_defineProperty(this,"length",void 0);_defineProperty(this,"objectMode",void 0);_defineProperty(this,"buckets",void 0);_defineProperty(this,"_keys",[]);if(aggResp&&aggResp.buckets){this.buckets=aggResp.buckets}else if(aggResp){this.buckets=[aggResp]}else{this.buckets=[]}this.objectMode=(0,_lodash.isPlainObject)(this.buckets);if(this.objectMode){this._keys=(0,_lodash.keys)(this.buckets);this.length=this._keys.length}else{this.length=this.buckets.length}if(this.length&&aggParams){this.orderBucketsAccordingToParams(aggParams);if(aggParams.drop_partials){this.dropPartials(aggParams,timeRange)}}}_createClass(TabifyBuckets,[{key:"forEach",value:function forEach(fn){var buckets=this.buckets;if(this.objectMode){this._keys.forEach((function(key){fn(buckets[key],key)}))}else{buckets.forEach((function(bucket){fn(bucket,bucket.key)}))}}},{key:"orderBucketsAccordingToParams",value:function orderBucketsAccordingToParams(params){var _this=this;if(params.filters&&this.objectMode){this._keys=params.filters.map((function(filter){var query=(0,_lodash.get)(filter,"input.query.query_string.query",filter.input.query);var queryString=typeof query==="string"?query:JSON.stringify(query);return filter.label||queryString||"*"}))}else if(params.ranges&&this.objectMode){this._keys=params.ranges.map((function(range){return(0,_lodash.findKey)(_this.buckets,(function(el){return isRangeEqual(el,range)}))}))}else if(params.ranges&&params.field.type!=="date"){var ranges=params.ranges;if(params.ipRangeType){ranges=params.ipRangeType==="mask"?ranges.mask:ranges.fromTo}this.buckets=ranges.map((function(range){if(range.mask){return _this.buckets.find((function(el){return el.key===range.mask}))}return _this.buckets.find((function(el){return isRangeEqual(el,range)}))}))}}},{key:"dropPartials",value:function dropPartials(params,timeRange){if(!timeRange||this.buckets.length<=1||this.objectMode||params.field.name!==timeRange.name){return}var interval=this.buckets[1].key-this.buckets[0].key;this.buckets=this.buckets.filter((function(bucket){if((0,_moment.default)(bucket.key).isBefore(timeRange.gte)){return false}if((0,_moment.default)(bucket.key+interval).isAfter(timeRange.lte)){return false}return true}));this.length=this.buckets.length}}]);return TabifyBuckets}();exports.TabifyBuckets=TabifyBuckets},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildTabularInspectorData=buildTabularInspectorData;var _lodash=__webpack_require__(0);var _public=__webpack_require__(597);var _create_filter=__webpack_require__(633);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function buildTabularInspectorData(_x,_x2){return _buildTabularInspectorData.apply(this,arguments)}function _buildTabularInspectorData(){_buildTabularInspectorData=_asyncToGenerator(regeneratorRuntime.mark((function _callee(table,queryFilter){var aggConfigs,rows,columns;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:aggConfigs=table.columns.map((function(column){return column.aggConfig}));rows=table.rows.map((function(row){return table.columns.reduce((function(prev,cur,colIndex){var value=row[cur.id];var fieldFormatter=cur.aggConfig.fieldFormatter("text");prev["col-".concat(colIndex,"-").concat(cur.aggConfig.id)]=new _public.FormattedData(value,fieldFormatter(value));return prev}),{})}));columns=table.columns.map((function(col,colIndex){var field=col.aggConfig.getField();var isCellContentFilterable=col.aggConfig.isFilterable()&&(!field||field.filterable);return{name:col.name,field:"col-".concat(colIndex,"-").concat(col.aggConfig.id),filter:isCellContentFilterable&&function(value){var rowIndex=rows.findIndex((function(row){return row["col-".concat(colIndex,"-").concat(col.aggConfig.id)].raw===value.raw}));var filter=(0,_create_filter.createFilter)(aggConfigs,table,colIndex,rowIndex,value.raw);if(filter){queryFilter.addFilters(filter)}},filterOut:isCellContentFilterable&&function(value){var rowIndex=rows.findIndex((function(row){return row["col-".concat(colIndex,"-").concat(col.aggConfig.id)].raw===value.raw}));var filter=(0,_create_filter.createFilter)(aggConfigs,table,colIndex,rowIndex,value.raw);if(filter){var notOther=value.raw!=="__other__";var notMissing=value.raw!=="__missing__";if(Array.isArray(filter)){filter.forEach((function(f){return(0,_lodash.set)(f,"meta.negate",notOther&&notMissing)}))}else{(0,_lodash.set)(filter,"meta.negate",notOther&&notMissing)}queryFilter.addFilters(filter)}}}}));return _context.abrupt("return",{columns:columns,rows:rows});case 4:case"end":return _context.stop()}}}),_callee)})));return _buildTabularInspectorData.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={plugin:true,Plugin:true,Setup:true,Start:true};exports.plugin=plugin;Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugin.InspectorPublicPlugin}});Object.defineProperty(exports,"Setup",{enumerable:true,get:function get(){return _plugin.Setup}});Object.defineProperty(exports,"Start",{enumerable:true,get:function get(){return _plugin.Start}});__webpack_require__(598);var _plugin=__webpack_require__(603);var _types=__webpack_require__(632);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _adapters=__webpack_require__(175);Object.keys(_adapters).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _adapters[key]}})}));function plugin(initializerContext){return new _plugin.InspectorPublicPlugin(initializerContext)}},function(module,exports,__webpack_require__){if(window.__kbnDarkMode__){__webpack_require__(599)}else{__webpack_require__(601)}},function(module,exports,__webpack_require__){var api=__webpack_require__(108);var content=__webpack_require__(600);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(109);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".insDataTableFormat__filter {\n  opacity: 0; }\n\n.insDataTableFormat__table tr:hover .insDataTableFormat__filter,\n.insDataTableFormat__filter:focus {\n  opacity: 1; }\n\n.insRequestDetailsStats__icon {\n  margin-right: 8px; }\n\n.insRequestSelector__singleRequest {\n  height: 32px;\n  padding: 0 8px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.insRequestSelector__menuSpinner {\n  margin-left: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(108);var content=__webpack_require__(602);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(109);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".insDataTableFormat__filter {\n  opacity: 0; }\n\n.insDataTableFormat__table tr:hover .insDataTableFormat__filter,\n.insDataTableFormat__filter:focus {\n  opacity: 1; }\n\n.insRequestDetailsStats__icon {\n  margin-right: 8px; }\n\n.insRequestSelector__singleRequest {\n  height: 32px;\n  padding: 0 8px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.insRequestSelector__menuSpinner {\n  margin-left: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorPublicPlugin=void 0;var _i18n=__webpack_require__(1);var React=_interopRequireWildcard(__webpack_require__(4));var _public=__webpack_require__(14);var _view_registry=__webpack_require__(604);var _inspector_panel=__webpack_require__(605);var _views=__webpack_require__(607);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var InspectorPublicPlugin=function(){function InspectorPublicPlugin(initializerContext){_classCallCheck(this,InspectorPublicPlugin);_defineProperty(this,"views",void 0)}_createClass(InspectorPublicPlugin,[{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark((function _callee(core){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.views=new _view_registry.InspectorViewRegistry;this.views.register((0,_views.getDataViewDescription)(core.uiSettings));this.views.register((0,_views.getRequestsViewDescription)());return _context.abrupt("return",{registerView:this.views.register.bind(this.views),__LEGACY:{views:this.views}});case 4:case"end":return _context.stop()}}}),_callee,this)})));function setup(_x){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function start(core){var _this=this;var isAvailable=function isAvailable(adapters){return _this.views.getVisible(adapters).length>0};var closeButtonLabel=_i18n.i18n.translate("inspector.closeButton",{defaultMessage:"Close Inspector"});var open=function open(adapters){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var views=_this.views.getVisible(adapters);if(!views||views.length===0){throw new Error("Tried to open an inspector without views being available.\n          Make sure to call Inspector.isAvailable() with the same adapters before to check\n          if an inspector can be shown.")}return core.overlays.openFlyout((0,_public.toMountPoint)(React.createElement(_inspector_panel.InspectorPanel,{views:views,adapters:adapters,title:options.title})),{"data-test-subj":"inspectorPanel",closeButtonAriaLabel:closeButtonLabel})};return{isAvailable:isAvailable,open:open}}},{key:"stop",value:function stop(){}}]);return InspectorPublicPlugin}();exports.InspectorPublicPlugin=InspectorPublicPlugin},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorViewRegistry=void 0;var _events=__webpack_require__(147);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var InspectorViewRegistry=function(_EventEmitter){_inherits(InspectorViewRegistry,_EventEmitter);function InspectorViewRegistry(){var _getPrototypeOf2;var _this;_classCallCheck(this,InspectorViewRegistry);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InspectorViewRegistry)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"views",[]);return _this}_createClass(InspectorViewRegistry,[{key:"register",value:function register(view){if(!view){return}this.views.push(view);this.views.sort((function(a,b){return(a.order||Number.MAX_VALUE)-(b.order||Number.MAX_VALUE)}));this.emit("change")}},{key:"getAll",value:function getAll(){return this.views}},{key:"getVisible",value:function getVisible(adapters){if(!adapters){return[]}return this.views.filter((function(view){return!view.shouldShow||view.shouldShow(adapters)}))}}]);return InspectorViewRegistry}(_events.EventEmitter);exports.InspectorViewRegistry=InspectorViewRegistry},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorPanel=void 0;var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(4));var _propTypes=_interopRequireDefault(__webpack_require__(94));var _eui=__webpack_require__(12);var _inspector_view_chooser=__webpack_require__(606);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function hasAdaptersChanged(oldAdapters,newAdapters){return Object.keys(oldAdapters).length!==Object.keys(newAdapters).length||Object.keys(oldAdapters).some((function(key){return oldAdapters[key]!==newAdapters[key]}))}var inspectorTitle=_i18n.i18n.translate("inspector.title",{defaultMessage:"Inspector"});var InspectorPanel=function(_Component){_inherits(InspectorPanel,_Component);function InspectorPanel(){var _getPrototypeOf2;var _this;_classCallCheck(this,InspectorPanel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InspectorPanel)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{selectedView:_this.props.views[0],views:_this.props.views,adapters:_objectSpread({},_this.props.adapters)});_defineProperty(_assertThisInitialized(_this),"onViewSelected",(function(view){if(view!==_this.state.selectedView){_this.setState({selectedView:view})}}));return _this}_createClass(InspectorPanel,[{key:"renderSelectedPanel",value:function renderSelectedPanel(){return _react.default.createElement(this.state.selectedView.component,{adapters:this.props.adapters,title:this.props.title||""})}},{key:"render",value:function render(){var _this$props=this.props,views=_this$props.views,title=_this$props.title;var selectedView=this.state.selectedView;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h1",null,title))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_inspector_view_chooser.InspectorViewChooser,{views:views,onViewSelected:this.onViewSelected,selectedView:selectedView})))),_react.default.createElement(_eui.EuiFlyoutBody,null,this.renderSelectedPanel()))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){if(hasAdaptersChanged(prevState.adapters,nextProps.adapters)){throw new Error("Adapters are not allowed to be changed on an open InspectorPanel.")}var selectedViewMustChange=nextProps.views!==prevState.views&&!nextProps.views.includes(prevState.selectedView);return{views:nextProps.views,selectedView:selectedViewMustChange?nextProps.views[0]:prevState.selectedView}}}]);return InspectorPanel}(_react.Component);exports.InspectorPanel=InspectorPanel;_defineProperty(InspectorPanel,"defaultProps",{title:inspectorTitle});_defineProperty(InspectorPanel,"propTypes",{adapters:_propTypes.default.object.isRequired,views:function views(props,propName,componentName){if(!Array.isArray(props.views)||props.views.length<1){throw new Error("".concat(propName," prop must be an array of at least one element in ").concat(componentName,"."))}},title:_propTypes.default.string})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorViewChooser=void 0;var _react=__webpack_require__(13);var _react2=_interopRequireWildcard(__webpack_require__(4));var _propTypes=_interopRequireDefault(__webpack_require__(94));var _eui=__webpack_require__(12);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var InspectorViewChooser=function(_Component){_inherits(InspectorViewChooser,_Component);function InspectorViewChooser(){var _getPrototypeOf2;var _this;_classCallCheck(this,InspectorViewChooser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InspectorViewChooser)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isSelectorOpen:false});_defineProperty(_assertThisInitialized(_this),"toggleSelector",(function(){_this.setState((function(prev){return{isSelectorOpen:!prev.isSelectorOpen}}))}));_defineProperty(_assertThisInitialized(_this),"closeSelector",(function(){_this.setState({isSelectorOpen:false})}));_defineProperty(_assertThisInitialized(_this),"renderView",(function(view,index){return _react2.default.createElement(_eui.EuiContextMenuItem,{key:index,onClick:function onClick(){_this.props.onViewSelected(view);_this.closeSelector()},toolTipContent:view.help,toolTipPosition:"left","data-test-subj":"inspectorViewChooser".concat(view.title)},view.title)}));return _this}_createClass(InspectorViewChooser,[{key:"renderViewButton",value:function renderViewButton(){return _react2.default.createElement(_eui.EuiButtonEmpty,{size:"s",iconType:"arrowDown",iconSide:"right",onClick:this.toggleSelector,"data-test-subj":"inspectorViewChooser"},_react2.default.createElement(_react.FormattedMessage,{id:"inspector.view",defaultMessage:"View: {viewName}",values:{viewName:this.props.selectedView.title}}))}},{key:"renderSingleView",value:function renderSingleView(){return _react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:this.props.selectedView.help},_react2.default.createElement(_react.FormattedMessage,{id:"inspector.view",defaultMessage:"View: {viewName}",values:{viewName:this.props.selectedView.title}}))}},{key:"render",value:function render(){var views=this.props.views;if(views.length<2){return this.renderSingleView()}var triggerButton=this.renderViewButton();return _react2.default.createElement(_eui.EuiPopover,{id:"inspectorViewChooser",ownFocus:true,button:triggerButton,isOpen:this.state.isSelectorOpen,closePopover:this.closeSelector,panelPaddingSize:"none",anchorPosition:"downRight",repositionOnScroll:true},_react2.default.createElement(_eui.EuiContextMenuPanel,{items:views.map(this.renderView)}))}}]);return InspectorViewChooser}(_react2.Component);exports.InspectorViewChooser=InspectorViewChooser;_defineProperty(InspectorViewChooser,"propTypes",{views:_propTypes.default.array.isRequired,onViewSelected:_propTypes.default.func.isRequired,selectedView:_propTypes.default.object.isRequired})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getDataViewDescription",{enumerable:true,get:function get(){return _data.getDataViewDescription}});Object.defineProperty(exports,"getRequestsViewDescription",{enumerable:true,get:function get(){return _requests.getRequestsViewDescription}});var _data=__webpack_require__(608);var _requests=__webpack_require__(615)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDataViewDescription=void 0;var _react=_interopRequireDefault(__webpack_require__(4));var _i18n=__webpack_require__(1);var _data_view=__webpack_require__(609);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var getDataViewDescription=function getDataViewDescription(uiSettings){return{title:_i18n.i18n.translate("inspector.data.dataTitle",{defaultMessage:"Data"}),order:10,help:_i18n.i18n.translate("inspector.data.dataDescriptionTooltip",{defaultMessage:"View the data behind the visualization"}),shouldShow:function shouldShow(adapters){return Boolean(adapters.data)},component:function component(props){return _react.default.createElement(_data_view.DataViewComponent,_extends({},props,{uiSettings:uiSettings}))}}};exports.getDataViewDescription=getDataViewDescription},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DataViewComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(4));var _propTypes=_interopRequireDefault(__webpack_require__(94));var _react2=__webpack_require__(13);var _eui=__webpack_require__(12);var _data_table=__webpack_require__(610);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataViewComponent=function(_Component){_inherits(DataViewComponent,_Component);function DataViewComponent(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataViewComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataViewComponent)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{});_defineProperty(_assertThisInitialized(_this),"_isMounted",false);_defineProperty(_assertThisInitialized(_this),"onUpdateData",(function(type){if(type==="tabular"){_this.setState({tabularData:null,tabularOptions:{},tabularPromise:_this.props.adapters.data.getTabular()})}}));return _this}_createClass(DataViewComponent,[{key:"finishLoadingData",value:function(){var _finishLoadingData=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var tabularPromise,tabularData;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:tabularPromise=this.state.tabularPromise;if(!tabularPromise){_context.next=6;break}_context.next=4;return tabularPromise;case 4:tabularData=_context.sent;if(this._isMounted){this.setState({tabularData:tabularData.data,tabularOptions:tabularData.options,tabularPromise:null})}case 6:case"end":return _context.stop()}}}),_callee,this)})));function finishLoadingData(){return _finishLoadingData.apply(this,arguments)}return finishLoadingData}()},{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.props.adapters.data.on("change",this.onUpdateData);this.finishLoadingData()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.props.adapters.data.removeListener("change",this.onUpdateData)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.finishLoadingData()}},{key:"render",value:function render(){if(this.state.tabularPromise){return DataViewComponent.renderLoading()}else if(!this.state.tabularData){return DataViewComponent.renderNoData()}return _react.default.createElement(_data_table.DataTableFormat,{data:this.state.tabularData,isFormatted:this.state.tabularOptions.returnsFormattedValues,exportTitle:this.props.title,uiSettings:this.props.uiSettings})}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,state){if(state&&nextProps.adapters===state.adapters){return null}return{adapters:nextProps.adapters,tabularData:null,tabularOptions:{},tabularPromise:nextProps.adapters.data.getTabular()}}},{key:"renderNoData",value:function renderNoData(){return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.noDataAvailableTitle",defaultMessage:"No data available"})),body:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.noDataAvailableDescription",defaultMessage:"The element did not provide any data."})))})}},{key:"renderLoading",value:function renderLoading(){return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center",alignItems:"center",style:{height:"100%"}},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiPanel,{className:"eui-textCenter"},_react.default.createElement(_eui.EuiLoadingChart,{size:"m"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.gatheringDataLabel",defaultMessage:"Gathering data"}))))))}}]);return DataViewComponent}(_react.Component);exports.DataViewComponent=DataViewComponent;_defineProperty(DataViewComponent,"propTypes",{uiSettings:_propTypes.default.object.isRequired,adapters:_propTypes.default.object.isRequired,title:_propTypes.default.string.isRequired})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DataTableFormat=void 0;var _react=_interopRequireWildcard(__webpack_require__(4));var _propTypes=_interopRequireDefault(__webpack_require__(94));var _eui=__webpack_require__(12);var _react2=__webpack_require__(13);var _i18n=__webpack_require__(1);var _download_options=__webpack_require__(611);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataTableFormat=function(_Component){_inherits(DataTableFormat,_Component);function DataTableFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataTableFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataTableFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"csvSeparator",_this.props.uiSettings.get("csv:separator",","));_defineProperty(_assertThisInitialized(_this),"quoteValues",_this.props.uiSettings.get("csv:quoteValues",true));_defineProperty(_assertThisInitialized(_this),"state",{});return _this}_createClass(DataTableFormat,[{key:"render",value:function render(){var _this$state=this.state,columns=_this$state.columns,rows=_this$state.rows;var pagination={pageSizeOptions:[10,20,50],initialPageSize:20};return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:true}),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_download_options.DataDownloadOptions,{isFormatted:this.props.isFormatted,title:this.props.exportTitle,csvSeparator:this.csvSeparator,quoteValues:this.quoteValues,columns:columns,rows:rows}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiInMemoryTable,{className:"insDataTableFormat__table","data-test-subj":"inspectorTable",columns:columns,items:rows,sorting:true,pagination:pagination}))}}],[{key:"renderCell",value:function renderCell(dataColumn,value){var isFormatted=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return _react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},isFormatted?value.formatted:value),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"none",alignItems:"center"},dataColumn.filter&&_react.default.createElement(_eui.EuiToolTip,{position:"bottom",content:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.filterForValueButtonTooltip",defaultMessage:"Filter for value"})},_react.default.createElement(_eui.EuiButtonIcon,{iconType:"plusInCircle",color:"text","aria-label":_i18n.i18n.translate("inspector.data.filterForValueButtonAriaLabel",{defaultMessage:"Filter for value"}),"data-test-subj":"filterForInspectorCellValue",className:"insDataTableFormat__filter",onClick:function onClick(){return dataColumn.filter(value)}})),dataColumn.filterOut&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiToolTip,{position:"bottom",content:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.filterOutValueButtonTooltip",defaultMessage:"Filter out value"})},_react.default.createElement(_eui.EuiButtonIcon,{iconType:"minusInCircle",color:"text","aria-label":_i18n.i18n.translate("inspector.data.filterOutValueButtonAriaLabel",{defaultMessage:"Filter out value"}),"data-test-subj":"filterOutInspectorCellValue",className:"insDataTableFormat__filter",onClick:function onClick(){return dataColumn.filterOut(value)}}))))))}},{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(_ref){var data=_ref.data,isFormatted=_ref.isFormatted;if(!data){return{columns:null,rows:null}}var columns=data.columns.map((function(dataColumn){return{name:dataColumn.name,field:dataColumn.field,sortable:isFormatted?function(row){return row[dataColumn.field].raw}:true,render:function render(value){return DataTableFormat.renderCell(dataColumn,value,isFormatted)}}}));return{columns:columns,rows:data.rows}}}]);return DataTableFormat}(_react.Component);exports.DataTableFormat=DataTableFormat;_defineProperty(DataTableFormat,"propTypes",{data:_propTypes.default.object.isRequired,exportTitle:_propTypes.default.string.isRequired,uiSettings:_propTypes.default.object.isRequired,isFormatted:_propTypes.default.bool})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DataDownloadOptions=void 0;var _react=_interopRequireWildcard(__webpack_require__(4));var _propTypes=_interopRequireDefault(__webpack_require__(94));var _react2=__webpack_require__(13);var _i18n=__webpack_require__(1);var _eui=__webpack_require__(12);var _export_csv=__webpack_require__(612);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataDownloadOptions=function(_Component){_inherits(DataDownloadOptions,_Component);function DataDownloadOptions(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataDownloadOptions);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataDownloadOptions)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"onTogglePopover",(function(){_this.setState((function(state){return{isPopoverOpen:!state.isPopoverOpen}}))}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"exportCsv",(function(){var customParams=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var filename=_this.props.title;if(!filename||filename.length===0){filename=_i18n.i18n.translate("inspector.data.downloadOptionsUnsavedFilename",{defaultMessage:"unsaved"})}(0,_export_csv.exportAsCsv)(_objectSpread({filename:"".concat(filename,".csv"),columns:_this.props.columns,rows:_this.props.rows,csvSeparator:_this.props.csvSeparator,quoteValues:_this.props.quoteValues},customParams))}));_defineProperty(_assertThisInitialized(_this),"exportFormattedCsv",(function(){_this.exportCsv({valueFormatter:function valueFormatter(item){return item.formatted}})}));_defineProperty(_assertThisInitialized(_this),"exportFormattedAsRawCsv",(function(){_this.exportCsv({valueFormatter:function valueFormatter(item){return item.raw}})}));return _this}_createClass(DataDownloadOptions,[{key:"renderUnformattedDownload",value:function renderUnformattedDownload(){return _react.default.createElement(_eui.EuiButton,{size:"s",onClick:this.exportCsv},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.downloadCSVButtonLabel",defaultMessage:"Download CSV"}))}},{key:"renderFormattedDownloads",value:function renderFormattedDownloads(){var button=_react.default.createElement(_eui.EuiButton,{iconType:"arrowDown",iconSide:"right",size:"s",onClick:this.onTogglePopover},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.downloadCSVToggleButtonLabel",defaultMessage:"Download CSV"}));var items=[_react.default.createElement(_eui.EuiContextMenuItem,{key:"csv",onClick:this.exportFormattedCsv,toolTipContent:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.formattedCSVButtonTooltip",defaultMessage:"Download the data in table format"}),toolTipPosition:"left"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.formattedCSVButtonLabel",defaultMessage:"Formatted CSV"})),_react.default.createElement(_eui.EuiContextMenuItem,{key:"rawCsv",onClick:this.exportFormattedAsRawCsv,toolTipContent:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.rawCSVButtonTooltip",defaultMessage:"Download the data as provided, for example, dates as timestamps"}),toolTipPosition:"left"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.rawCSVButtonLabel",defaultMessage:"Raw CSV"}))];return _react.default.createElement(_eui.EuiPopover,{id:"inspectorDownloadData",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",repositionOnScroll:true},_react.default.createElement(_eui.EuiContextMenuPanel,{className:"eui-textNoWrap",items:items}))}},{key:"render",value:function render(){return this.props.isFormatted?this.renderFormattedDownloads():this.renderUnformattedDownload()}}]);return DataDownloadOptions}(_react.Component);exports.DataDownloadOptions=DataDownloadOptions;_defineProperty(DataDownloadOptions,"propTypes",{title:_propTypes.default.string.isRequired,csvSeparator:_propTypes.default.string.isRequired,quoteValues:_propTypes.default.bool.isRequired,isFormatted:_propTypes.default.bool,columns:_propTypes.default.array,rows:_propTypes.default.array})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.exportAsCsv=exportAsCsv;var _lodash=__webpack_require__(0);var _filesaver=__webpack_require__(613);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var LINE_FEED_CHARACTER="\r\n";var nonAlphaNumRE=/[^a-zA-Z0-9]/;var allDoubleQuoteRE=/"/g;function escape(val,quoteValues){if((0,_lodash.isObject)(val)){val=val.valueOf()}val=String(val);if(quoteValues&&nonAlphaNumRE.test(val)){val='"'.concat(val.replace(allDoubleQuoteRE,'""'),'"')}return val}function buildCsv(columns,rows,csvSeparator,quoteValues,valueFormatter){var header=columns.map((function(col){return escape(col.name,quoteValues)}));var orderedFieldNames=columns.map((function(col){return col.field}));var csvRows=rows.map((function(row){return orderedFieldNames.map((function(field){return escape(valueFormatter?valueFormatter(row[field]):row[field],quoteValues)}))}));return[header].concat(_toConsumableArray(csvRows)).map((function(row){return row.join(csvSeparator)})).join(LINE_FEED_CHARACTER)+LINE_FEED_CHARACTER}function exportAsCsv(_ref){var filename=_ref.filename,columns=_ref.columns,rows=_ref.rows,valueFormatter=_ref.valueFormatter,csvSeparator=_ref.csvSeparator,quoteValues=_ref.quoteValues;var type="text/plain;charset=utf-8";var csv=new Blob([buildCsv(columns,rows,csvSeparator,quoteValues,valueFormatter)],{type:type});(0,_filesaver.saveAs)(csv,filename)}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRequestsViewDescription=void 0;var _i18n=__webpack_require__(1);var _requests_view=__webpack_require__(616);var getRequestsViewDescription=function getRequestsViewDescription(){return{title:_i18n.i18n.translate("inspector.requests.requestsTitle",{defaultMessage:"Requests"}),order:20,help:_i18n.i18n.translate("inspector.requests.requestsDescriptionTooltip",{defaultMessage:"View the requests that collected the data"}),shouldShow:function shouldShow(adapters){return Boolean(adapters.requests)},component:_requests_view.RequestsViewComponent}};exports.getRequestsViewDescription=getRequestsViewDescription},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestsViewComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(4));var _propTypes=_interopRequireDefault(__webpack_require__(94));var _react2=__webpack_require__(13);var _eui=__webpack_require__(12);var _adapters=__webpack_require__(175);var _request_selector=__webpack_require__(626);var _request_details=__webpack_require__(627);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestsViewComponent=function(_Component){_inherits(RequestsViewComponent,_Component);function RequestsViewComponent(props){var _this;_classCallCheck(this,RequestsViewComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestsViewComponent).call(this,props));_defineProperty(_assertThisInitialized(_this),"_onRequestsChange",(function(){var requests=_this.props.adapters.requests.getRequests();var newState={requests:requests};if(!requests.includes(_this.state.request)){newState.request=requests.length?requests[0]:null}_this.setState(newState)}));_defineProperty(_assertThisInitialized(_this),"selectRequest",(function(request){if(request!==_this.state.request){_this.setState({request:request})}}));props.adapters.requests.on("change",_this._onRequestsChange);var _requests=props.adapters.requests.getRequests();_this.state={requests:_requests,request:_requests.length?_requests[0]:null};return _this}_createClass(RequestsViewComponent,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.adapters.requests.removeListener("change",this._onRequestsChange)}},{key:"render",value:function render(){if(!this.state.requests||!this.state.requests.length){return RequestsViewComponent.renderEmptyRequests()}var failedCount=this.state.requests.filter((function(req){return req.status===_adapters.RequestStatus.ERROR})).length;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("p",{role:"status","aria-live":"polite","aria-atomic":"true"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestWasMadeDescription",defaultMessage:"{requestsCount, plural, one {# request was} other {# requests were} } made{failedRequests}",values:{requestsCount:this.state.requests.length,failedRequests:failedCount>0?_react.default.createElement(_eui.EuiTextColor,{color:"danger"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestWasMadeDescription.requestHadFailureText",defaultMessage:", {failedCount} had a failure",values:{failedCount:failedCount}})):""}}))),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement(_request_selector.RequestSelector,{requests:this.state.requests,selectedRequest:this.state.request,onRequestChanged:this.selectRequest}),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),this.state.request&&this.state.request.description&&_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("p",null,this.state.request.description)),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),this.state.request&&_react.default.createElement(_request_details.RequestDetails,{request:this.state.request}))}}],[{key:"renderEmptyRequests",value:function renderEmptyRequests(){return _react.default.createElement(_eui.EuiEmptyPrompt,{"data-test-subj":"inspectorNoRequestsMessage",title:_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.noRequestsLoggedTitle",defaultMessage:"No requests logged"})),body:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.noRequestsLoggedDescription.elementHasNotLoggedAnyRequestsText",defaultMessage:"The element hasn't logged any requests (yet)."})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.noRequestsLoggedDescription.whatDoesItUsuallyMeanText",defaultMessage:"This usually means that there was no need to fetch any data or that the element has not yet started fetching data."})))})}}]);return RequestsViewComponent}(_react.Component);exports.RequestsViewComponent=RequestsViewComponent;_defineProperty(RequestsViewComponent,"propTypes",{adapters:_propTypes.default.object.isRequired,title:_propTypes.default.string.isRequired})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FormattedData",{enumerable:true,get:function get(){return _formatted_data.FormattedData}});Object.defineProperty(exports,"DataAdapter",{enumerable:true,get:function get(){return _data_adapter.DataAdapter}});var _formatted_data=__webpack_require__(618);var _data_adapter=__webpack_require__(619)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(exports,"__esModule",{value:true});exports.FormattedData=void 0;var FormattedData=function FormattedData(raw,formatted){_classCallCheck(this,FormattedData);this.raw=raw;this.formatted=formatted};exports.FormattedData=FormattedData},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.DataAdapter=void 0;var _events=__webpack_require__(147);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataAdapter=function(_events$EventEmitter){_inherits(DataAdapter,_events$EventEmitter);function DataAdapter(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataAdapter);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataAdapter)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"tabular",void 0);_defineProperty(_assertThisInitialized(_this),"tabularOptions",void 0);return _this}_createClass(DataAdapter,[{key:"setTabularLoader",value:function setTabularLoader(callback){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.tabular=callback;this.tabularOptions=options;this.emit("change","tabular")}},{key:"getTabular",value:function getTabular(){if(!this.tabular||!this.tabularOptions){return Promise.resolve({data:null,options:{}})}var options=this.tabularOptions;return Promise.resolve(this.tabular()).then((function(data){return{data:data,options:options}}))}}]);return DataAdapter}(_events.EventEmitter);exports.DataAdapter=DataAdapter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RequestStatus",{enumerable:true,get:function get(){return _types.RequestStatus}});Object.defineProperty(exports,"RequestAdapter",{enumerable:true,get:function get(){return _request_adapter.RequestAdapter}});var _types=__webpack_require__(176);var _request_adapter=__webpack_require__(621)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty2(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestAdapter=void 0;var _events=__webpack_require__(147);var _v=_interopRequireDefault(__webpack_require__(622));var _request_responder=__webpack_require__(625);var _types=__webpack_require__(176);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestAdapter=function(_events$EventEmitter){_inherits(RequestAdapter,_events$EventEmitter);function RequestAdapter(){var _this;_classCallCheck(this,RequestAdapter);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestAdapter).call(this));_defineProperty(_assertThisInitialized(_this),"requests",void 0);_this.requests=new Map;return _this}_createClass(RequestAdapter,[{key:"start",value:function start(name){var _this2=this;var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var _params$id;var req=_objectSpread({},params,{name:name,startTime:Date.now(),status:_types.RequestStatus.PENDING,id:(_params$id=params.id)!==null&&_params$id!==void 0?_params$id:(0,_v.default)()});this.requests.set(req.id,req);this._onChange();return new _request_responder.RequestResponder(req,(function(){return _this2._onChange()}))}},{key:"reset",value:function reset(){this.requests=new Map;this._onChange()}},{key:"resetRequest",value:function resetRequest(id){this.requests.delete(id);this._onChange()}},{key:"getRequests",value:function getRequests(){return Array.from(this.requests.values())}},{key:"_onChange",value:function _onChange(){this.emit("change")}}]);return RequestAdapter}(_events.EventEmitter);exports.RequestAdapter=RequestAdapter},,,,function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty2(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestResponder=void 0;var _i18n=__webpack_require__(1);var _types=__webpack_require__(176);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestResponder=function(){function RequestResponder(request,onChange){_classCallCheck(this,RequestResponder);_defineProperty(this,"request",void 0);_defineProperty(this,"onChange",void 0);this.request=request;this.onChange=onChange}_createClass(RequestResponder,[{key:"json",value:function json(reqJson){this.request.json=reqJson;this.onChange();return this}},{key:"stats",value:function stats(_stats){this.request.stats=_objectSpread({},this.request.stats||{},{},_stats);var startDate=new Date(this.request.startTime);this.request.stats.requestTimestamp={label:_i18n.i18n.translate("inspector.reqTimestampKey",{defaultMessage:"Request timestamp"}),value:startDate.toISOString(),description:_i18n.i18n.translate("inspector.reqTimestampDescription",{defaultMessage:"Time when the start of the request has been logged"})};this.onChange();return this}},{key:"finish",value:function finish(status,response){this.request.time=Date.now()-this.request.startTime;this.request.status=status;this.request.response=response;this.onChange()}},{key:"ok",value:function ok(response){this.finish(_types.RequestStatus.OK,response)}},{key:"error",value:function error(response){this.finish(_types.RequestStatus.ERROR,response)}}]);return RequestResponder}();exports.RequestResponder=RequestResponder},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestSelector=void 0;var _react=_interopRequireWildcard(__webpack_require__(4));var _react2=__webpack_require__(13);var _propTypes=_interopRequireDefault(__webpack_require__(94));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(12);var _adapters=__webpack_require__(175);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestSelector=function(_Component){_inherits(RequestSelector,_Component);function RequestSelector(){var _getPrototypeOf2;var _this;_classCallCheck(this,RequestSelector);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RequestSelector)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"togglePopover",(function(){_this.setState((function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}}))}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"renderRequestDropdownItem",(function(request,index){var hasFailed=request.status===_adapters.RequestStatus.ERROR;var inProgress=request.status===_adapters.RequestStatus.PENDING;return _react.default.createElement(_eui.EuiContextMenuItem,{key:index,icon:request===_this.props.selectedRequest?"check":"empty",onClick:function onClick(){_this.props.onRequestChanged(request);_this.closePopover()},toolTipContent:request.description,toolTipPosition:"left","data-test-subj":"inspectorRequestChooser".concat(request.name)},_react.default.createElement(_eui.EuiTextColor,{color:hasFailed?"danger":"default"},request.name,hasFailed&&_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.failedLabel",defaultMessage:" (failed)"}),inProgress&&_react.default.createElement(_eui.EuiLoadingSpinner,{size:"s","aria-label":_i18n.i18n.translate("inspector.requests.requestInProgressAriaLabel",{defaultMessage:"Request in progress"}),className:"insRequestSelector__menuSpinner"})))}));return _this}_createClass(RequestSelector,[{key:"renderRequestDropdown",value:function renderRequestDropdown(){var button=_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"arrowDown",iconSide:"right",size:"s",onClick:this.togglePopover,"data-test-subj":"inspectorRequestChooser"},this.props.selectedRequest.name);return _react.default.createElement(_eui.EuiPopover,{id:"inspectorRequestChooser",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft",repositionOnScroll:true},_react.default.createElement(_eui.EuiContextMenuPanel,{items:this.props.requests.map(this.renderRequestDropdownItem),"data-test-subj":"inspectorRequestChooserMenuPanel"}))}},{key:"render",value:function render(){var _this$props=this.props,selectedRequest=_this$props.selectedRequest,requests=_this$props.requests;return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestLabel",defaultMessage:"Request:"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:true},requests.length<=1&&_react.default.createElement("div",{className:"insRequestSelector__singleRequest","data-test-subj":"inspectorRequestName"},selectedRequest.name),requests.length>1&&this.renderRequestDropdown()),_react.default.createElement(_eui.EuiFlexItem,{grow:false},selectedRequest.status!==_adapters.RequestStatus.PENDING&&_react.default.createElement(_eui.EuiToolTip,{position:"left",title:selectedRequest.status===_adapters.RequestStatus.OK?_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestSucceededTooltipTitle",defaultMessage:"Request succeeded"}):_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestFailedTooltipTitle",defaultMessage:"Request failed"}),content:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestTooltipDescription",defaultMessage:"The total time the request took."})},_react.default.createElement(_eui.EuiBadge,{color:selectedRequest.status===_adapters.RequestStatus.OK?"secondary":"danger",iconType:selectedRequest.status===_adapters.RequestStatus.OK?"check":"cross"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestTimeLabel",defaultMessage:"{requestTime}ms",values:{requestTime:selectedRequest.time}}))),selectedRequest.status===_adapters.RequestStatus.PENDING&&_react.default.createElement(_eui.EuiLoadingSpinner,{size:"m","aria-label":_i18n.i18n.translate("inspector.requests.requestInProgressAriaLabel",{defaultMessage:"Request in progress"})})))}}]);return RequestSelector}(_react.Component);exports.RequestSelector=RequestSelector;_defineProperty(RequestSelector,"propTypes",{requests:_propTypes.default.array.isRequired,selectedRequest:_propTypes.default.object.isRequired,onRequestChanged:_propTypes.default.func})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetails=void 0;var _react=_interopRequireWildcard(__webpack_require__(4));var _propTypes=_interopRequireDefault(__webpack_require__(94));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(12);var _details=__webpack_require__(628);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DETAILS=[{name:"Statistics",label:_i18n.i18n.translate("inspector.requests.statisticsTabLabel",{defaultMessage:"Statistics"}),component:_details.RequestDetailsStats},{name:"Request",label:_i18n.i18n.translate("inspector.requests.requestTabLabel",{defaultMessage:"Request"}),component:_details.RequestDetailsRequest},{name:"Response",label:_i18n.i18n.translate("inspector.requests.responseTabLabel",{defaultMessage:"Response"}),component:_details.RequestDetailsResponse}];var RequestDetails=function(_Component){_inherits(RequestDetails,_Component);function RequestDetails(){var _getPrototypeOf2;var _this;_classCallCheck(this,RequestDetails);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RequestDetails)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{availableDetails:[],selectedDetail:null});_defineProperty(_assertThisInitialized(_this),"selectDetailsTab",(function(detail){if(detail!==_this.state.selectedDetail){_this.setState({selectedDetail:detail})}}));_defineProperty(_assertThisInitialized(_this),"renderDetailTab",(function(detail){return _react.default.createElement(_eui.EuiTab,{key:detail.name,isSelected:detail===_this.state.selectedDetail,onClick:function onClick(){return _this.selectDetailsTab(detail)},"data-test-subj":"inspectorRequestDetail".concat(detail.name)},detail.label)}));return _this}_createClass(RequestDetails,[{key:"render",value:function render(){var _this$state=this.state,selectedDetail=_this$state.selectedDetail,availableDetails=_this$state.availableDetails;var DetailComponent=RequestDetails.getSelectedDetailComponent(selectedDetail);if(!availableDetails.length||!DetailComponent){return null}return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTabs,{size:"s"},this.state.availableDetails.map(this.renderDetailTab)),_react.default.createElement(DetailComponent,{request:this.props.request}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var selectedDetail=prevState&&prevState.selectedDetail;var availableDetails=DETAILS.filter((function(detail){return!detail.component.shouldShow||detail.component.shouldShow(nextProps.request)}));if(selectedDetail&&availableDetails.includes(selectedDetail)){return{availableDetails:availableDetails}}return{availableDetails:availableDetails,selectedDetail:availableDetails[0]}}},{key:"getSelectedDetailComponent",value:function getSelectedDetailComponent(detail){return detail?detail.component:null}}]);return RequestDetails}(_react.Component);exports.RequestDetails=RequestDetails;_defineProperty(RequestDetails,"propTypes",{request:_propTypes.default.object.isRequired})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RequestDetailsRequest",{enumerable:true,get:function get(){return _req_details_request.RequestDetailsRequest}});Object.defineProperty(exports,"RequestDetailsResponse",{enumerable:true,get:function get(){return _req_details_response.RequestDetailsResponse}});Object.defineProperty(exports,"RequestDetailsStats",{enumerable:true,get:function get(){return _req_details_stats.RequestDetailsStats}});var _req_details_request=__webpack_require__(629);var _req_details_response=__webpack_require__(630);var _req_details_stats=__webpack_require__(631)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsRequest=void 0;var _react=_interopRequireWildcard(__webpack_require__(4));var _propTypes=_interopRequireDefault(__webpack_require__(94));var _eui=__webpack_require__(12);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestDetailsRequest=function(_Component){_inherits(RequestDetailsRequest,_Component);function RequestDetailsRequest(){_classCallCheck(this,RequestDetailsRequest);return _possibleConstructorReturn(this,_getPrototypeOf(RequestDetailsRequest).apply(this,arguments))}_createClass(RequestDetailsRequest,[{key:"render",value:function render(){var json=this.props.request.json;if(!json){return null}return _react.default.createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s",isCopyable:true,"data-test-subj":"inspectorRequestBody"},JSON.stringify(json,null,2))}}]);return RequestDetailsRequest}(_react.Component);exports.RequestDetailsRequest=RequestDetailsRequest;_defineProperty(RequestDetailsRequest,"propTypes",{request:_propTypes.default.object.isRequired});_defineProperty(RequestDetailsRequest,"shouldShow",(function(request){return Boolean(request&&request.json)}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsResponse=void 0;var _react=_interopRequireWildcard(__webpack_require__(4));var _propTypes=_interopRequireDefault(__webpack_require__(94));var _eui=__webpack_require__(12);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestDetailsResponse=function(_Component){_inherits(RequestDetailsResponse,_Component);function RequestDetailsResponse(){_classCallCheck(this,RequestDetailsResponse);return _possibleConstructorReturn(this,_getPrototypeOf(RequestDetailsResponse).apply(this,arguments))}_createClass(RequestDetailsResponse,[{key:"render",value:function render(){var responseJSON=RequestDetailsResponse.getResponseJson(this.props.request);if(!responseJSON){return null}return _react.default.createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s",isCopyable:true,"data-test-subj":"inspectorResponseBody"},JSON.stringify(responseJSON,null,2))}}]);return RequestDetailsResponse}(_react.Component);exports.RequestDetailsResponse=RequestDetailsResponse;_defineProperty(RequestDetailsResponse,"propTypes",{request:_propTypes.default.object.isRequired});_defineProperty(RequestDetailsResponse,"shouldShow",(function(request){return Boolean(RequestDetailsResponse.getResponseJson(request))}));_defineProperty(RequestDetailsResponse,"getResponseJson",(function(request){return request.response?request.response.json:null}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsStats=void 0;var _react=_interopRequireWildcard(__webpack_require__(4));var _propTypes=_interopRequireDefault(__webpack_require__(94));var _eui=__webpack_require__(12);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestDetailsStats=function(_Component){_inherits(RequestDetailsStats,_Component);function RequestDetailsStats(){var _getPrototypeOf2;var _this;_classCallCheck(this,RequestDetailsStats);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RequestDetailsStats)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"renderStatRow",(function(stat){return[_react.default.createElement(_eui.EuiTableRow,{key:stat.id},_react.default.createElement(_eui.EuiTableRowCell,null,_react.default.createElement("span",{className:"insRequestDetailsStats__icon"},stat.description?_react.default.createElement(_eui.EuiIconTip,{"aria-label":_i18n.i18n.translate("inspector.requests.descriptionRowIconAriaLabel",{defaultMessage:"Description"}),type:"questionInCircle",color:"subdued",content:stat.description}):_react.default.createElement(_eui.EuiIcon,{type:"empty"})),stat.label),_react.default.createElement(_eui.EuiTableRowCell,null,stat.value))]}));return _this}_createClass(RequestDetailsStats,[{key:"render",value:function render(){var stats=this.props.request.stats;if(!stats){return null}var sortedStats=Object.keys(stats).sort().map((function(id){return _objectSpread({id:id},stats[id])}));return _react.default.createElement(_eui.EuiTable,{responsive:false},_react.default.createElement(_eui.EuiTableBody,null,sortedStats.map(this.renderStatRow)))}}]);return RequestDetailsStats}(_react.Component);exports.RequestDetailsStats=RequestDetailsStats;_defineProperty(RequestDetailsStats,"propTypes",{request:_propTypes.default.object.isRequired});_defineProperty(RequestDetailsStats,"shouldShow",(function(request){return Boolean(request.stats&&Object.keys(request.stats).length)}))},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilter=void 0;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var getOtherBucketFilterTerms=function getOtherBucketFilterTerms(table,columnIndex,rowIndex){if(rowIndex===-1){return[]}var rows=table.rows.filter((function(row){return table.columns.every((function(column,i){return row[column.id]===table.rows[rowIndex][column.id]||i>=columnIndex}))}));var terms=rows.map((function(row){return row[table.columns[columnIndex].id]}));return _toConsumableArray(new Set(terms.filter((function(term){var notOther=term!=="__other__";var notMissing=term!=="__missing__";return notOther&&notMissing}))))};var createFilter=function createFilter(aggConfigs,table,columnIndex,rowIndex,cellValue){var column=table.columns[columnIndex];var aggConfig=aggConfigs[columnIndex];var filter=[];var value=rowIndex>-1?table.rows[rowIndex][column.id]:cellValue;if(value===null||value===undefined||!aggConfig.isFilterable()){return}if(aggConfig.type.name==="terms"&&aggConfig.params.otherBucket){var terms=getOtherBucketFilterTerms(table,columnIndex,rowIndex);filter=aggConfig.createFilter(value,{terms:terms})}else{filter=aggConfig.createFilter(value)}if(!filter){return}if(!Array.isArray(filter)){filter=[filter]}return filter};exports.createFilter=createFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRequestInspectorStats=getRequestInspectorStats;exports.getResponseInspectorStats=getResponseInspectorStats;var _i18n=__webpack_require__(1);function getRequestInspectorStats(searchSource){var stats={};var index=searchSource.getField("index");if(index){stats.indexPattern={label:_i18n.i18n.translate("data.search.searchSource.indexPatternLabel",{defaultMessage:"Index pattern"}),value:index.title,description:_i18n.i18n.translate("data.search.searchSource.indexPatternDescription",{defaultMessage:"The index pattern that connected to the Elasticsearch indices."})};stats.indexPatternId={label:_i18n.i18n.translate("data.search.searchSource.indexPatternIdLabel",{defaultMessage:"Index pattern ID"}),value:index.id,description:_i18n.i18n.translate("data.search.searchSource.indexPatternIdDescription",{defaultMessage:"The ID in the {kibanaIndexPattern} index.",values:{kibanaIndexPattern:".kibana"}})}}return stats}function getResponseInspectorStats(searchSource,resp){var lastRequest=searchSource.history&&searchSource.history[searchSource.history.length-1];var stats={};if(resp&&resp.took){stats.queryTime={label:_i18n.i18n.translate("data.search.searchSource.queryTimeLabel",{defaultMessage:"Query time"}),value:_i18n.i18n.translate("data.search.searchSource.queryTimeValue",{defaultMessage:"{queryTime}ms",values:{queryTime:resp.took}}),description:_i18n.i18n.translate("data.search.searchSource.queryTimeDescription",{defaultMessage:"The time it took to process the query. "+"Does not include the time to send the request or parse it in the browser."})}}if(resp&&resp.hits){stats.hitsTotal={label:_i18n.i18n.translate("data.search.searchSource.hitsTotalLabel",{defaultMessage:"Hits (total)"}),value:"".concat(resp.hits.total),description:_i18n.i18n.translate("data.search.searchSource.hitsTotalDescription",{defaultMessage:"The number of documents that match the query."})};stats.hits={label:_i18n.i18n.translate("data.search.searchSource.hitsLabel",{defaultMessage:"Hits"}),value:"".concat(resp.hits.hits.length),description:_i18n.i18n.translate("data.search.searchSource.hitsDescription",{defaultMessage:"The number of documents returned by the query."})}}if(lastRequest&&(lastRequest.ms===0||lastRequest.ms)){stats.requestTime={label:_i18n.i18n.translate("data.search.searchSource.requestTimeLabel",{defaultMessage:"Request time"}),value:_i18n.i18n.translate("data.search.searchSource.requestTimeValue",{defaultMessage:"{requestTime}ms",values:{requestTime:lastRequest.ms}}),description:_i18n.i18n.translate("data.search.searchSource.requestTimeDescription",{defaultMessage:"The time of the request from the browser to Elasticsearch and back. "+"Does not include the time the requested waited in the queue."})}}return stats}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.deserializeAggConfig=exports.serializeAggConfig=void 0;var _services=__webpack_require__(95);var serializeAggConfig=function serializeAggConfig(aggConfig){return{type:aggConfig.type.name,indexPatternId:aggConfig.getIndexPattern().id,aggConfigParams:aggConfig.toJSON().params}};exports.serializeAggConfig=serializeAggConfig;var deserializeAggConfig=function deserializeAggConfig(_ref){var type=_ref.type,aggConfigParams=_ref.aggConfigParams,indexPattern=_ref.indexPattern;var _getSearchService=(0,_services.getSearchService)(),aggs=_getSearchService.aggs;var aggConfigs=aggs.createAggConfigs(indexPattern);var aggConfig=aggConfigs.createAggConfig({enabled:true,type:type,params:aggConfigParams});return aggConfig};exports.deserializeAggConfig=deserializeAggConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateMissingBucket=exports.mergeOtherBucketAggResponse=exports.buildOtherBucketAgg=void 0;var _lodash=__webpack_require__(0);var _common=__webpack_require__(93);var _agg_groups=__webpack_require__(172);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var getNestedAggDSL=function getNestedAggDSL(aggNestedDsl,startFromAggId){if(aggNestedDsl[startFromAggId]){return aggNestedDsl[startFromAggId]}var nestedAggs=(0,_lodash.values)(aggNestedDsl);var aggs;for(var i=0;i<nestedAggs.length;i++){if(nestedAggs[i].aggs&&(aggs=getNestedAggDSL(nestedAggs[i].aggs,startFromAggId))){return aggs}}};var getAggResultBuckets=function getAggResultBuckets(aggConfigs,response,aggWithOtherBucket,key){var keyParts=key.split("-");var responseAgg=response;var _loop=function _loop(i){if(keyParts[i]){var responseAggs=(0,_lodash.values)(responseAgg);var _loop2=function _loop2(aggId){var aggById=responseAggs[aggId];var aggKey=(0,_lodash.keys)(responseAgg)[aggId];var aggConfig=(0,_lodash.find)(aggConfigs.aggs,(function(agg){return agg.id===aggKey}));if(aggConfig){var aggResultBucket=(0,_lodash.find)(aggById.buckets,(function(bucket,bucketObjKey){var bucketKey=aggConfig.getKey(bucket,(0,_lodash.isNumber)(bucketObjKey)?undefined:bucketObjKey).toString();return bucketKey===keyParts[i]}));if(aggResultBucket){responseAgg=aggResultBucket;return"break"}}};for(var aggId=0;aggId<responseAggs.length;aggId++){var _ret=_loop2(aggId);if(_ret==="break")break}}};for(var i in keyParts){_loop(i)}if(responseAgg[aggWithOtherBucket.id]){return responseAgg[aggWithOtherBucket.id].buckets}return[]};var getAggConfigResultMissingBuckets=function getAggConfigResultMissingBuckets(responseAggs,aggId){var missingKey="__missing__";var resultBuckets=[];if(responseAggs[aggId]){var matchingBucket=responseAggs[aggId].buckets.find((function(bucket){return bucket.key===missingKey}));if(matchingBucket)resultBuckets.push(matchingBucket);return resultBuckets}(0,_lodash.each)(responseAggs,(function(agg){if(agg.buckets){(0,_lodash.each)(agg.buckets,(function(bucket){resultBuckets=[].concat(_toConsumableArray(resultBuckets),_toConsumableArray(getAggConfigResultMissingBuckets(bucket,aggId)))}))}}));return resultBuckets};var getOtherAggTerms=function getOtherAggTerms(requestAgg,key,otherAgg){return requestAgg["other-filter"].filters.filters[key].bool.must_not.filter((function(filter){return filter.match_phrase&&filter.match_phrase[otherAgg.params.field.name]})).map((function(filter){return filter.match_phrase[otherAgg.params.field.name]}))};var buildOtherBucketAgg=function buildOtherBucketAgg(aggConfigs,aggWithOtherBucket,response){var bucketAggs=aggConfigs.aggs.filter((function(agg){return agg.type.type===_agg_groups.AggGroupNames.Buckets}));var index=bucketAggs.findIndex((function(agg){return agg.id===aggWithOtherBucket.id}));var aggs=aggConfigs.toDsl();var indexPattern=aggWithOtherBucket.params.field.indexPattern;var filterAgg=aggConfigs.createAggConfig({type:"filters",id:"other",params:{filters:[]},enabled:false},{addToAggConfigs:false});var resultAgg={aggs:getNestedAggDSL(aggs,aggWithOtherBucket.id).aggs,filters:filterAgg.toDsl()};var noAggBucketResults=false;var walkBucketTree=function walkBucketTree(aggIndex,aggregations,aggId,filters,key){if(aggregations[aggId].buckets.length<1){noAggBucketResults=true;return}var agg=aggregations[aggId];var newAggIndex=aggIndex+1;var newAgg=bucketAggs[newAggIndex];var currentAgg=bucketAggs[aggIndex];if(aggIndex<index){(0,_lodash.each)(agg.buckets,(function(bucket,bucketObjKey){var bucketKey=currentAgg.getKey(bucket,(0,_lodash.isNumber)(bucketObjKey)?undefined:bucketObjKey);var filter=(0,_lodash.cloneDeep)(bucket.filters)||currentAgg.createFilter(bucketKey);var newFilters=(0,_lodash.flatten)([].concat(_toConsumableArray(filters),[filter]));walkBucketTree(newAggIndex,bucket,newAgg.id,newFilters,"".concat(key,"-").concat(bucketKey.toString()))}));return}if(!aggWithOtherBucket.params.missingBucket||agg.buckets.some((function(bucket){return bucket.key==="__missing__"}))){filters.push((0,_common.buildExistsFilter)(aggWithOtherBucket.params.field,aggWithOtherBucket.params.field.indexPattern))}(0,_lodash.each)(agg.buckets,(function(bucket){if(bucket.key==="__missing__")return;var filter=currentAgg.createFilter(bucket.key);filter.meta.negate=true;filters.push(filter)}));resultAgg.filters.filters[key]={bool:(0,_common.buildQueryFromFilters)(filters,indexPattern)}};walkBucketTree(0,response.aggregations,bucketAggs[0].id,[],"");if(noAggBucketResults){return false}return function(){return{"other-filter":resultAgg}}};exports.buildOtherBucketAgg=buildOtherBucketAgg;var mergeOtherBucketAggResponse=function mergeOtherBucketAggResponse(aggsConfig,response,otherResponse,otherAgg,requestAgg){var updatedResponse=(0,_lodash.cloneDeep)(response);(0,_lodash.each)(otherResponse.aggregations["other-filter"].buckets,(function(bucket,key){if(!bucket.doc_count||key===undefined)return;var bucketKey=key.replace(/^-/,"");var aggResultBuckets=getAggResultBuckets(aggsConfig,updatedResponse.aggregations,otherAgg,bucketKey);var requestFilterTerms=getOtherAggTerms(requestAgg,key,otherAgg);var phraseFilter=(0,_common.buildPhrasesFilter)(otherAgg.params.field,requestFilterTerms,otherAgg.params.field.indexPattern);phraseFilter.meta.negate=true;bucket.filters=[phraseFilter];bucket.key="__other__";if(aggResultBuckets.some((function(aggResultBucket){return aggResultBucket.key==="__missing__"}))){bucket.filters.push((0,_common.buildExistsFilter)(otherAgg.params.field,otherAgg.params.field.indexPattern))}aggResultBuckets.push(bucket)}));return updatedResponse};exports.mergeOtherBucketAggResponse=mergeOtherBucketAggResponse;var updateMissingBucket=function updateMissingBucket(response,aggConfigs,agg){var updatedResponse=(0,_lodash.cloneDeep)(response);var aggResultBuckets=getAggConfigResultMissingBuckets(updatedResponse.aggregations,agg.id);aggResultBuckets.forEach((function(bucket){bucket.key="__missing__"}));return updatedResponse};exports.updateMissingBucket=updateMissingBucket},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterBucketAgg=void 0;var _i18n=__webpack_require__(1);var _bucket_agg_type=__webpack_require__(105);var _bucket_agg_types=__webpack_require__(103);var filterTitle=_i18n.i18n.translate("data.search.aggs.buckets.filterTitle",{defaultMessage:"Filter"});var filterBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.FILTER,title:filterTitle,params:[{name:"geo_bounding_box"}]});exports.filterBucketAgg=filterBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFiltersBucketAgg=getFiltersBucketAgg;var _lodash=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _filters=__webpack_require__(639);var _utils=__webpack_require__(282);var _bucket_agg_type=__webpack_require__(105);var _bucket_agg_types=__webpack_require__(103);var _public=__webpack_require__(15);var _common=__webpack_require__(93);var _query=__webpack_require__(119);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var filtersTitle=_i18n.i18n.translate("data.search.aggs.buckets.filtersTitle",{defaultMessage:"Filters",description:"The name of an aggregation, that allows to specify multiple individual filters to group data by."});function getFiltersBucketAgg(deps){var uiSettings=deps.uiSettings;return new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.FILTERS,title:filtersTitle,createFilter:_filters.createFilterFilters,customLabels:false,params:[{name:"filters",default:[{input:{query:"",language:uiSettings.get("search:queryLanguage")},label:""}],write:function write(aggConfig,output){var inFilters=aggConfig.params.filters;if(!_lodash.default.size(inFilters))return;inFilters.forEach((function(filter){var persistedLog=(0,_query.getQueryLog)(uiSettings,new _public.Storage(window.localStorage),"vis_default_editor",filter.input.language);persistedLog.add(filter.input.query)}));var outFilters=_lodash.default.transform(inFilters,(function(filters,filter){var input=_lodash.default.cloneDeep(filter.input);if(!input){console.log('malformed filter agg params, missing "input" query');return}var esQueryConfigs=(0,_common.getEsQueryConfig)(uiSettings);var query=(0,_common.buildEsQuery)(aggConfig.getIndexPattern(),[input],[],esQueryConfigs);if(!query){console.log('malformed filter agg params, missing "query" on input');return}var matchAllLabel=filter.input.query===""?"*":"";var label=filter.label||matchAllLabel||(typeof filter.input.query==="string"?filter.input.query:(0,_utils.toAngularJSON)(filter.input.query));filters[label]={query:query}}),{});if(!_lodash.default.size(outFilters))return;var params=output.params||(output.params={});params.filters=outFilters}}]})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterFilters=void 0;var _lodash=__webpack_require__(0);var _common=__webpack_require__(93);var createFilterFilters=function createFilterFilters(aggConfig,key){var dslFilters=(0,_lodash.get)(aggConfig.toDsl(),"filters.filters");var filter=dslFilters[key];var indexPattern=aggConfig.getIndexPattern();if(filter&&indexPattern&&indexPattern.id){return(0,_common.buildQueryFilter)(filter.query,indexPattern.id,key)}};exports.createFilterFilters=createFilterFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCalculateAutoTimeExpression=getCalculateAutoTimeExpression;var _time_buckets=__webpack_require__(264);var _common=__webpack_require__(93);function getCalculateAutoTimeExpression(uiSettings){return function calculateAutoTimeExpression(range){var dates=(0,_common.toAbsoluteDates)(range);if(!dates){return}var buckets=new _time_buckets.TimeBuckets({uiSettings:uiSettings});buckets.setInterval("auto");buckets.setBounds({min:dates.from,max:dates.to});return buckets.getInterval().expression}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toAngularJSON=toAngularJSON;function toAngularJSON(obj,pretty){if(obj===undefined)return"";if(typeof pretty==="number"){pretty=pretty?2:null}return JSON.stringify(obj,toJsonReplacer,pretty)}function isWindow(obj){return obj&&obj.window===obj}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function toJsonReplacer(key,value){var val=value;if(typeof key==="string"&&key.charAt(0)==="$"&&key.charAt(1)==="$"){val=undefined}else if(isWindow(value)){val="$WINDOW"}else if(value&&window.document===value){val="$DOCUMENT"}else if(isScope(value)){val="$SCOPE"}return val}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.significantTermsBucketAgg=void 0;var _i18n=__webpack_require__(1);var _bucket_agg_type=__webpack_require__(105);var _terms=__webpack_require__(270);var _migrate_include_exclude_format=__webpack_require__(174);var _bucket_agg_types=__webpack_require__(103);var _common=__webpack_require__(93);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var significantTermsTitle=_i18n.i18n.translate("data.search.aggs.buckets.significantTermsTitle",{defaultMessage:"Significant Terms"});var significantTermsBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.SIGNIFICANT_TERMS,title:significantTermsTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.buckets.significantTermsLabel",{defaultMessage:"Top {size} unusual terms in {fieldName}",values:{size:aggConfig.params.size,fieldName:aggConfig.getFieldDisplayName()}})},createFilter:_terms.createFilterTerms,params:[{name:"field",type:"field",scriptable:false,filterFieldTypes:_common.KBN_FIELD_TYPES.STRING},{name:"size",default:""},_objectSpread({name:"exclude",displayName:_i18n.i18n.translate("data.search.aggs.buckets.significantTerms.excludeLabel",{defaultMessage:"Exclude"}),type:"string",advanced:true,shouldShow:_migrate_include_exclude_format.isStringType},_migrate_include_exclude_format.migrateIncludeExcludeFormat),_objectSpread({name:"include",displayName:_i18n.i18n.translate("data.search.aggs.buckets.significantTerms.includeLabel",{defaultMessage:"Include"}),type:"string",advanced:true,shouldShow:_migrate_include_exclude_format.isStringType},_migrate_include_exclude_format.migrateIncludeExcludeFormat)]});exports.significantTermsBucketAgg=significantTermsBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoHashBucketAgg=void 0;var _i18n=__webpack_require__(1);var _bucket_agg_type=__webpack_require__(105);var _common=__webpack_require__(93);var _bucket_agg_types=__webpack_require__(103);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var defaultBoundingBox={top_left:{lat:1,lon:1},bottom_right:{lat:0,lon:0}};var defaultPrecision=2;var geohashGridTitle=_i18n.i18n.translate("data.search.aggs.buckets.geohashGridTitle",{defaultMessage:"Geohash"});var geoHashBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.GEOHASH_GRID,title:geohashGridTitle,params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.GEO_POINT},{name:"autoPrecision",default:true,write:function write(){}},{name:"precision",default:defaultPrecision,write:function write(aggConfig,output){output.params.precision=aggConfig.params.precision}},{name:"useGeocentroid",default:true,write:function write(){}},{name:"isFilteredByCollar",default:true,write:function write(){}},{name:"boundingBox",default:null,write:function write(){}}],getRequestAggs:function getRequestAggs(agg){var aggs=[];var params=agg.params;if(params.isFilteredByCollar&&agg.getField()){aggs.push(agg.aggConfigs.createAggConfig({type:"filter",id:"filter_agg",enabled:true,params:{geo_bounding_box:_defineProperty({ignore_unmapped:true},agg.getField().name,params.boundingBox||defaultBoundingBox)}},{addToAggConfigs:false}))}aggs.push(agg);if(params.useGeocentroid){aggs.push(agg.aggConfigs.createAggConfig({type:"geo_centroid",enabled:true,params:{field:agg.getField()}},{addToAggConfigs:false}))}return aggs}});exports.geoHashBucketAgg=geoHashBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoTileBucketAgg=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(0);var _bucket_agg_type=__webpack_require__(105);var _bucket_agg_types=__webpack_require__(103);var _common=__webpack_require__(93);var _metric_agg_types=__webpack_require__(96);var geotileGridTitle=_i18n.i18n.translate("data.search.aggs.buckets.geotileGridTitle",{defaultMessage:"Geotile"});var geoTileBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.GEOTILE_GRID,title:geotileGridTitle,params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.GEO_POINT},{name:"useGeocentroid",default:true,write:_lodash.noop},{name:"precision",default:0}],getRequestAggs:function getRequestAggs(agg){var aggs=[];var useGeocentroid=agg.getParam("useGeocentroid");aggs.push(agg);if(useGeocentroid){var aggConfig={type:_metric_agg_types.METRIC_TYPES.GEO_CENTROID,enabled:true,params:{field:agg.getField()}};aggs.push(agg.aggConfigs.createAggConfig(aggConfig,{addToAggConfigs:false}))}return aggs}});exports.geoTileBucketAgg=geoTileBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketSumMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _make_nested_label=__webpack_require__(112);var _sibling_pipeline_agg_helper=__webpack_require__(127);var _metric_agg_types=__webpack_require__(96);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var overallSumLabel=_i18n.i18n.translate("data.search.aggs.metrics.overallSumLabel",{defaultMessage:"overall sum"});var sumBucketTitle=_i18n.i18n.translate("data.search.aggs.metrics.sumBucketTitle",{defaultMessage:"Sum Bucket"});var bucketSumMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.SUM_BUCKET,title:sumBucketTitle,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,overallSumLabel)},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params()),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat});exports.bucketSumMetricAgg=bucketSumMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.siblingPipelineAggWriter=void 0;var _metric_agg_types=__webpack_require__(96);var siblingPipelineAggWriter=function siblingPipelineAggWriter(agg,output){var customMetric=agg.getParam("customMetric");if(!customMetric)return;var metricAgg=customMetric;var bucketAgg=agg.getParam("customBucket");if(metricAgg.type.name!==_metric_agg_types.METRIC_TYPES.COUNT){bucketAgg.subAggs=(output.subAggs||[]).concat(metricAgg);output.params.buckets_path="".concat(bucketAgg.id,">").concat(metricAgg.id)}else{output.params.buckets_path=bucketAgg.id+">_count"}output.parentAggs=(output.parentAggs||[]).concat(bucketAgg)};exports.siblingPipelineAggWriter=siblingPipelineAggWriter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketAvgMetricAgg=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(0);var _metric_agg_type=__webpack_require__(97);var _make_nested_label=__webpack_require__(112);var _sibling_pipeline_agg_helper=__webpack_require__(127);var _metric_agg_types=__webpack_require__(96);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var overallAverageLabel=_i18n.i18n.translate("data.search.aggs.metrics.overallAverageLabel",{defaultMessage:"overall average"});var averageBucketTitle=_i18n.i18n.translate("data.search.aggs.metrics.averageBucketTitle",{defaultMessage:"Average Bucket"});var bucketAvgMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.AVG_BUCKET,title:averageBucketTitle,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,overallAverageLabel)},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params()),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat,getValue:function getValue(agg,bucket){var customMetric=agg.getParam("customMetric");var customBucket=agg.getParam("customBucket");var scaleMetrics=customMetric.type&&customMetric.type.isScalable();var value=bucket[agg.id]&&bucket[agg.id].value;if(scaleMetrics&&customBucket.type.name==="date_histogram"){var aggInfo=customBucket.write();value*=(0,_lodash.get)(aggInfo,"bucketInterval.scale",1)}return value}});exports.bucketAvgMetricAgg=bucketAvgMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketMinMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _make_nested_label=__webpack_require__(112);var _sibling_pipeline_agg_helper=__webpack_require__(127);var _metric_agg_types=__webpack_require__(96);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var overallMinLabel=_i18n.i18n.translate("data.search.aggs.metrics.overallMinLabel",{defaultMessage:"overall min"});var minBucketTitle=_i18n.i18n.translate("data.search.aggs.metrics.minBucketTitle",{defaultMessage:"Min Bucket"});var bucketMinMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MIN_BUCKET,title:minBucketTitle,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,overallMinLabel)},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params()),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat});exports.bucketMinMetricAgg=bucketMinMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketMaxMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(97);var _make_nested_label=__webpack_require__(112);var _sibling_pipeline_agg_helper=__webpack_require__(127);var _metric_agg_types=__webpack_require__(96);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var overallMaxLabel=_i18n.i18n.translate("data.search.aggs.metrics.overallMaxLabel",{defaultMessage:"overall max"});var maxBucketTitle=_i18n.i18n.translate("data.search.aggs.metrics.maxBucketTitle",{defaultMessage:"Max Bucket"});var bucketMaxMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MAX_BUCKET,title:maxBucketTitle,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,overallMaxLabel)},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params()),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat});exports.bucketMaxMetricAgg=bucketMaxMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggTypesRegistry=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggTypesRegistry=function AggTypesRegistry(){var _this=this;_classCallCheck(this,AggTypesRegistry);_defineProperty(this,"bucketAggs",new Map);_defineProperty(this,"metricAggs",new Map);_defineProperty(this,"setup",(function(){return{registerBucket:function registerBucket(type){var name=type.name;if(_this.bucketAggs.get(name)){throw new Error("Bucket agg has already been registered with name: ".concat(name))}_this.bucketAggs.set(name,type)},registerMetric:function registerMetric(type){var name=type.name;if(_this.metricAggs.get(name)){throw new Error("Metric agg has already been registered with name: ".concat(name))}_this.metricAggs.set(name,type)}}}));_defineProperty(this,"start",(function(){return{get:function get(name){return _this.bucketAggs.get(name)||_this.metricAggs.get(name)},getBuckets:function getBuckets(){return Array.from(_this.bucketAggs.values())},getMetrics:function getMetrics(){return Array.from(_this.metricAggs.values())},getAll:function getAll(){return{buckets:Array.from(_this.bucketAggs.values()),metrics:Array.from(_this.metricAggs.values())}}}}))};exports.AggTypesRegistry=AggTypesRegistry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _interval_options=__webpack_require__(265);Object.keys(_interval_options).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _interval_options[key]}})}));var _bucket_agg_types=__webpack_require__(103);Object.keys(_bucket_agg_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _bucket_agg_types[key]}})}));var _date_histogram=__webpack_require__(263);Object.keys(_date_histogram).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _date_histogram[key]}})}));var _date_range=__webpack_require__(266);Object.keys(_date_range).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _date_range[key]}})}));var _ip_range=__webpack_require__(267);Object.keys(_ip_range).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ip_range[key]}})}));var _cidr_mask=__webpack_require__(268);Object.keys(_cidr_mask).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _cidr_mask[key]}})}));var _date_range2=__webpack_require__(138);Object.keys(_date_range2).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _date_range2[key]}})}));var _ip_range2=__webpack_require__(139);Object.keys(_ip_range2).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ip_range2[key]}})}));var _migrate_include_exclude_format=__webpack_require__(174);Object.keys(_migrate_include_exclude_format).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _migrate_include_exclude_format[key]}})}));var _terms=__webpack_require__(269);Object.keys(_terms).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _terms[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _metric_agg_type=__webpack_require__(97);Object.keys(_metric_agg_type).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _metric_agg_type[key]}})}));var _metric_agg_types=__webpack_require__(96);Object.keys(_metric_agg_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _metric_agg_types[key]}})}));var _parent_pipeline_agg_helper=__webpack_require__(126);Object.keys(_parent_pipeline_agg_helper).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _parent_pipeline_agg_helper[key]}})}));var _sibling_pipeline_agg_helper=__webpack_require__(127);Object.keys(_sibling_pipeline_agg_helper).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _sibling_pipeline_agg_helper[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"aggTypeFieldFilters",{enumerable:true,get:function get(){return _field_filters.aggTypeFieldFilters}});Object.defineProperty(exports,"AggTypeFieldFilters",{enumerable:true,get:function get(){return _field_filters.AggTypeFieldFilters}});var _field_filters=__webpack_require__(654)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggTypeFieldFilters=exports.aggTypeFieldFilters=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggTypeFieldFilters=function(){function AggTypeFieldFilters(){_classCallCheck(this,AggTypeFieldFilters);_defineProperty(this,"filters",new Set)}_createClass(AggTypeFieldFilters,[{key:"addFilter",value:function addFilter(filter){this.filters.add(filter)}},{key:"filter",value:function filter(fields,aggConfig){var allFilters=Array.from(this.filters);var allowedAggTypeFields=fields.filter((function(field){var isAggTypeFieldAllowed=allFilters.every((function(filter){return filter(field,aggConfig)}));return isAggTypeFieldAllowed}));return allowedAggTypeFields}}]);return AggTypeFieldFilters}();exports.AggTypeFieldFilters=AggTypeFieldFilters;var aggTypeFieldFilters=new AggTypeFieldFilters;exports.aggTypeFieldFilters=aggTypeFieldFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IAggConfig",{enumerable:true,get:function get(){return _agg_config.IAggConfig}});Object.defineProperty(exports,"CreateAggConfigParams",{enumerable:true,get:function get(){return _agg_configs.CreateAggConfigParams}});Object.defineProperty(exports,"IAggConfigs",{enumerable:true,get:function get(){return _agg_configs.IAggConfigs}});Object.defineProperty(exports,"IAggType",{enumerable:true,get:function get(){return _agg_type.IAggType}});Object.defineProperty(exports,"AggParam",{enumerable:true,get:function get(){return _agg_params.AggParam}});Object.defineProperty(exports,"AggParamOption",{enumerable:true,get:function get(){return _agg_params.AggParamOption}});Object.defineProperty(exports,"IFieldParamType",{enumerable:true,get:function get(){return _param_types.IFieldParamType}});Object.defineProperty(exports,"IMetricAggType",{enumerable:true,get:function get(){return _metric_agg_type.IMetricAggType}});Object.defineProperty(exports,"DateRangeKey",{enumerable:true,get:function get(){return _date_range.DateRangeKey}});Object.defineProperty(exports,"IpRangeKey",{enumerable:true,get:function get(){return _ip_range.IpRangeKey}});Object.defineProperty(exports,"OptionedValueProp",{enumerable:true,get:function get(){return _optioned.OptionedValueProp}});Object.defineProperty(exports,"OptionedParamEditorProps",{enumerable:true,get:function get(){return _optioned.OptionedParamEditorProps}});var _=__webpack_require__(141);var _agg_config=__webpack_require__(142);var _agg_configs=__webpack_require__(260);var _agg_type=__webpack_require__(144);var _agg_params=__webpack_require__(143);var _param_types=__webpack_require__(283);var _metric_agg_type=__webpack_require__(97);var _date_range=__webpack_require__(138);var _ip_range=__webpack_require__(139);var _optioned=__webpack_require__(171)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";var _sync_search_strategy=__webpack_require__(148);var _es_search=__webpack_require__(228)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"esSearchStrategyProvider",{enumerable:true,get:function get(){return _es_search_strategy.esSearchStrategyProvider}});Object.defineProperty(exports,"getEsPreference",{enumerable:true,get:function get(){return _get_es_preference.getEsPreference}});var _es_search_strategy=__webpack_require__(284);var _get_es_preference=__webpack_require__(285)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEsClient=getEsClient;var _elasticsearch=_interopRequireDefault(__webpack_require__(90));var _rxjs=__webpack_require__(17);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getEsClient(injectedMetadata,http,packageInfo){var esRequestTimeout=injectedMetadata.getInjectedVar("esRequestTimeout");var esApiVersion=injectedMetadata.getInjectedVar("esApiVersion");var client=_elasticsearch.default.Client({host:getEsUrl(http,packageInfo),log:"info",requestTimeout:esRequestTimeout,apiVersion:esApiVersion});var loadingCount$=new _rxjs.BehaviorSubject(0);http.addLoadingCountSource(loadingCount$);return{search:wrapEsClientMethod(client,"search",loadingCount$),msearch:wrapEsClientMethod(client,"msearch",loadingCount$),create:wrapEsClientMethod(client,"create",loadingCount$)}}function wrapEsClientMethod(esClient,method,loadingCount$){return function(args){var customPromiseThingy=esClient[method](args);var abort=customPromiseThingy.abort;var resolved=false;loadingCount$.next(loadingCount$.getValue()+1);customPromiseThingy.abort=function(){abort();if(!resolved){resolved=true;loadingCount$.next(loadingCount$.getValue()-1)}};customPromiseThingy.finally((function(){resolved=true;loadingCount$.next(loadingCount$.getValue()-1)}));return customPromiseThingy}}function getEsUrl(http,packageInfo){var a=document.createElement("a");a.href=http.basePath.prepend("/elasticsearch");var protocolPort=/https/.test(a.protocol)?443:80;var port=a.port||protocolPort;return{host:a.hostname,port:port,protocol:a.protocol,pathname:a.pathname,headers:{"kbn-version":packageInfo.version}}}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLongQueryNotification=getLongQueryNotification;exports.LongQueryNotification=LongQueryNotification;var _eui=__webpack_require__(12);var _react=__webpack_require__(13);var _react2=_interopRequireDefault(__webpack_require__(4));var _public=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getLongQueryNotification(props){return(0,_public.toMountPoint)(_react2.default.createElement(LongQueryNotification,{application:props.application}))}function LongQueryNotification(props){return _react2.default.createElement("div",null,_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.longQueryMessage",defaultMessage:"With an upgraded license, you can ensure requests have enough time to complete."}),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{size:"s",onClick:_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return props.application.navigateToApp("kibana#/management/elasticsearch/license_management");case 2:case"end":return _context.stop()}}}),_callee)})))},_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.licenseOptions",defaultMessage:"Go to license options"})))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataPublicPlugin=void 0;var _public=__webpack_require__(15);var _autocomplete=__webpack_require__(170);var _search_service=__webpack_require__(663);var _field_formats=__webpack_require__(244);var _query=__webpack_require__(119);var _index_pattern_select=__webpack_require__(274);var _index_patterns=__webpack_require__(169);var _services=__webpack_require__(95);var _create_search_bar=__webpack_require__(277);var _expressions=__webpack_require__(145);var _public2=__webpack_require__(149);var _actions=__webpack_require__(677);var _select_range_action=__webpack_require__(295);var _value_click_action=__webpack_require__(296);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataPublicPlugin=function(){function DataPublicPlugin(initializerContext){_classCallCheck(this,DataPublicPlugin);_defineProperty(this,"autocomplete",new _autocomplete.AutocompleteService);_defineProperty(this,"searchService",void 0);_defineProperty(this,"fieldFormatsService",void 0);_defineProperty(this,"queryService",void 0);_defineProperty(this,"storage",void 0);_defineProperty(this,"packageInfo",void 0);this.searchService=new _search_service.SearchService;this.queryService=new _query.QueryService;this.fieldFormatsService=new _field_formats.FieldFormatsService;this.storage=new _public.Storage(window.localStorage);this.packageInfo=initializerContext.env.packageInfo}_createClass(DataPublicPlugin,[{key:"setup",value:function setup(core,_ref){var expressions=_ref.expressions,uiActions=_ref.uiActions;(0,_services.setInjectedMetadata)(core.injectedMetadata);expressions.registerFunction(_expressions.esaggs);var queryService=this.queryService.setup({uiSettings:core.uiSettings,storage:this.storage});uiActions.registerAction((0,_actions.createFilterAction)(queryService.filterManager,queryService.timefilter.timefilter));uiActions.attachAction(_public2.SELECT_RANGE_TRIGGER,(0,_select_range_action.selectRangeAction)(queryService.filterManager,queryService.timefilter.timefilter));uiActions.attachAction(_public2.VALUE_CLICK_TRIGGER,(0,_value_click_action.valueClickAction)(queryService.filterManager,queryService.timefilter.timefilter));return{autocomplete:this.autocomplete.setup(core),search:this.searchService.setup(core,this.packageInfo),fieldFormats:this.fieldFormatsService.setup(core),query:queryService}}},{key:"start",value:function start(core,_ref2){var uiActions=_ref2.uiActions;var uiSettings=core.uiSettings,http=core.http,notifications=core.notifications,savedObjects=core.savedObjects,overlays=core.overlays;(0,_services.setHttp)(http);(0,_services.setNotifications)(notifications);(0,_services.setOverlays)(overlays);(0,_services.setUiSettings)(uiSettings);var fieldFormats=this.fieldFormatsService.start();(0,_services.setFieldFormats)(fieldFormats);var indexPatterns=new _index_patterns.IndexPatternsService(uiSettings,savedObjects.client,http);(0,_services.setIndexPatterns)(indexPatterns);var query=this.queryService.start(savedObjects);(0,_services.setQueryService)(query);var search=this.searchService.start(core);(0,_services.setSearchService)(search);uiActions.attachAction(_public2.APPLY_FILTER_TRIGGER,uiActions.getAction(_actions.ACTION_GLOBAL_APPLY_FILTER));var dataServices={actions:{createFiltersFromEvent:_actions.createFiltersFromEvent},autocomplete:this.autocomplete.start(),fieldFormats:fieldFormats,indexPatterns:indexPatterns,query:query,search:search};var SearchBar=(0,_create_search_bar.createSearchBar)({core:core,data:dataServices,storage:this.storage});return _objectSpread({},dataServices,{ui:{IndexPatternSelect:(0,_index_pattern_select.createIndexPatternSelect)(core.savedObjects.client),SearchBar:SearchBar}})}},{key:"stop",value:function stop(){this.autocomplete.clearProviders()}}]);return DataPublicPlugin}();exports.DataPublicPlugin=DataPublicPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchService=void 0;var _sync_search_strategy=__webpack_require__(148);var _es_client=__webpack_require__(286);var _search=__webpack_require__(136);var _es_search_strategy=__webpack_require__(284);var _search_interceptor=__webpack_require__(287);var _aggs=__webpack_require__(141);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchService=function(){function SearchService(){var _this=this;_classCallCheck(this,SearchService);_defineProperty(this,"searchStrategies",{});_defineProperty(this,"esClient",void 0);_defineProperty(this,"aggTypesRegistry",new _aggs.AggTypesRegistry);_defineProperty(this,"searchInterceptor",void 0);_defineProperty(this,"registerSearchStrategyProvider",(function(name,strategyProvider){_this.searchStrategies[name]=strategyProvider}));_defineProperty(this,"getSearchStrategy",(function(name){var strategyProvider=_this.searchStrategies[name];if(!strategyProvider)throw new Error("Search strategy ".concat(name," not found"));return strategyProvider}))}_createClass(SearchService,[{key:"setup",value:function setup(core,packageInfo){this.esClient=(0,_es_client.getEsClient)(core.injectedMetadata,core.http,packageInfo);this.registerSearchStrategyProvider(_sync_search_strategy.SYNC_SEARCH_STRATEGY,_sync_search_strategy.syncSearchStrategyProvider);this.registerSearchStrategyProvider(_search.ES_SEARCH_STRATEGY,_es_search_strategy.esSearchStrategyProvider);var aggTypesSetup=this.aggTypesRegistry.setup();var aggTypes=(0,_aggs.getAggTypes)({uiSettings:core.uiSettings});aggTypes.buckets.forEach((function(b){return aggTypesSetup.registerBucket(b)}));aggTypes.metrics.forEach((function(m){return aggTypesSetup.registerMetric(m)}));return{aggs:{calculateAutoTimeExpression:(0,_aggs.getCalculateAutoTimeExpression)(core.uiSettings),types:aggTypesSetup},registerSearchStrategyProvider:this.registerSearchStrategyProvider}}},{key:"start",value:function start(core){var _this2=this;this.searchInterceptor=new _search_interceptor.SearchInterceptor(core.notifications.toasts,core.application,core.injectedMetadata.getInjectedVar("esRequestTimeout"));var aggTypesStart=this.aggTypesRegistry.start();return{aggs:{calculateAutoTimeExpression:(0,_aggs.getCalculateAutoTimeExpression)(core.uiSettings),createAggConfigs:function createAggConfigs(indexPattern){var configStates=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var schemas=arguments.length>2?arguments[2]:undefined;return new _aggs.AggConfigs(indexPattern,configStates,{typesRegistry:aggTypesStart})},types:aggTypesStart},search:function search(request,options,strategyName){var strategyProvider=_this2.getSearchStrategy(strategyName||_search.DEFAULT_SEARCH_STRATEGY);var _strategyProvider=strategyProvider({core:core,getSearchStrategy:_this2.getSearchStrategy}),search=_strategyProvider.search;return _this2.searchInterceptor.search(search,request,options)},setInterceptor:function setInterceptor(searchInterceptor){_this2.searchInterceptor=searchInterceptor},__LEGACY:{esClient:this.esClient,AggConfig:_aggs.AggConfig,AggType:_aggs.AggType,aggTypeFieldFilters:_aggs.aggTypeFieldFilters,FieldParamType:_aggs.FieldParamType,MetricAggType:_aggs.MetricAggType,parentPipelineAggHelper:_aggs.parentPipelineAggHelper,siblingPipelineAggHelper:_aggs.siblingPipelineAggHelper}}}},{key:"stop",value:function stop(){}}]);return SearchService}();exports.SearchService=SearchService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UiActionsPlugin=void 0;var _service=__webpack_require__(289);var _triggers=__webpack_require__(178);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UiActionsPlugin=function(){function UiActionsPlugin(initializerContext){_classCallCheck(this,UiActionsPlugin);_defineProperty(this,"service",new _service.UiActionsService)}_createClass(UiActionsPlugin,[{key:"setup",value:function setup(core){this.service.registerTrigger(_triggers.selectRangeTrigger);this.service.registerTrigger(_triggers.valueClickTrigger);this.service.registerTrigger(_triggers.applyFilterTrigger);return this.service}},{key:"start",value:function start(core){return this.service}},{key:"stop",value:function stop(){this.service.clear()}}]);return UiActionsPlugin}();exports.UiActionsPlugin=UiActionsPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UiActionsService=void 0;var _trigger_internal=__webpack_require__(290);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UiActionsService=function UiActionsService(){var _this=this;var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$triggers=_ref.triggers,_triggers=_ref$triggers===void 0?new Map:_ref$triggers,_ref$actions=_ref.actions,_actions=_ref$actions===void 0?new Map:_ref$actions,_ref$triggerToActions=_ref.triggerToActions,_triggerToActions=_ref$triggerToActions===void 0?new Map:_ref$triggerToActions;_classCallCheck(this,UiActionsService);_defineProperty(this,"triggers",void 0);_defineProperty(this,"actions",void 0);_defineProperty(this,"triggerToActions",void 0);_defineProperty(this,"registerTrigger",(function(trigger){if(_this.triggers.has(trigger.id)){throw new Error("Trigger [trigger.id = ".concat(trigger.id,"] already registered."))}var triggerInternal=new _trigger_internal.TriggerInternal(_this,trigger);_this.triggers.set(trigger.id,triggerInternal);_this.triggerToActions.set(trigger.id,[])}));_defineProperty(this,"getTrigger",(function(triggerId){var trigger=_this.triggers.get(triggerId);if(!trigger){throw new Error("Trigger [triggerId = ".concat(triggerId,"] does not exist."))}return trigger.contract}));_defineProperty(this,"registerAction",(function(action){if(_this.actions.has(action.id)){throw new Error("Action [action.id = ".concat(action.id,"] already registered."))}_this.actions.set(action.id,action)}));_defineProperty(this,"getAction",(function(id){if(!_this.actions.has(id)){throw new Error("Action [action.id = ".concat(id,"] not registered."))}return _this.actions.get(id)}));_defineProperty(this,"attachAction",(function(triggerId,action){if(!_this.actions.has(action.id)){_this.registerAction(action)}else{var registeredAction=_this.actions.get(action.id);if(registeredAction!==action){throw new Error("A different action instance with this id is already registered.")}}var trigger=_this.triggers.get(triggerId);if(!trigger){throw new Error("No trigger [triggerId = ".concat(triggerId,"] exists, for attaching action [actionId = ").concat(action.id,"]."))}var actionIds=_this.triggerToActions.get(triggerId);if(!actionIds.find((function(id){return id===action.id}))){_this.triggerToActions.set(triggerId,[].concat(_toConsumableArray(actionIds),[action.id]))}}));_defineProperty(this,"detachAction",(function(triggerId,actionId){var trigger=_this.triggers.get(triggerId);if(!trigger){throw new Error("No trigger [triggerId = ".concat(triggerId,"] exists, for detaching action [actionId = ").concat(actionId,"]."))}var actionIds=_this.triggerToActions.get(triggerId);_this.triggerToActions.set(triggerId,actionIds.filter((function(id){return id!==actionId})))}));_defineProperty(this,"getTriggerActions",(function(triggerId){_this.getTrigger(triggerId);var actionIds=_this.triggerToActions.get(triggerId);var actions=actionIds.map((function(actionId){return _this.actions.get(actionId)})).filter(Boolean);return actions}));_defineProperty(this,"getTriggerCompatibleActions",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(triggerId,context){var actions,isCompatibles;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:actions=_this.getTriggerActions(triggerId);_context.next=3;return Promise.all(actions.map((function(action){return action.isCompatible(context)})));case 3:isCompatibles=_context.sent;return _context.abrupt("return",actions.reduce((function(acc,action,i){return isCompatibles[i]?[].concat(_toConsumableArray(acc),[action]):acc}),[]));case 5:case"end":return _context.stop()}}}),_callee)})));return function(_x,_x2){return _ref2.apply(this,arguments)}}());_defineProperty(this,"executeTriggerActions",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(triggerId,context){var trigger;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:trigger=_this.getTrigger(triggerId);_context2.next=3;return trigger.exec(context);case 3:case"end":return _context2.stop()}}}),_callee2)})));return function(_x3,_x4){return _ref3.apply(this,arguments)}}());_defineProperty(this,"clear",(function(){_this.actions.clear();_this.triggers.clear();_this.triggerToActions.clear()}));_defineProperty(this,"fork",(function(){var triggers=new Map;var actions=new Map;var triggerToActions=new Map;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=_this.triggers.entries()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];triggers.set(key,value)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=_this.actions.entries()[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2),_key=_step2$value[0],_value=_step2$value[1];actions.set(_key,_value)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=_this.triggerToActions.entries()[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _step3$value=_slicedToArray(_step3.value,2),_key2=_step3$value[0],_value2=_step3$value[1];triggerToActions.set(_key2,_toConsumableArray(_value2))}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return!=null){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}return new UiActionsService({triggers:triggers,actions:actions,triggerToActions:triggerToActions})}));this.triggers=_triggers;this.actions=_actions;this.triggerToActions=_triggerToActions};exports.UiActionsService=UiActionsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildContextMenuForActions=buildContextMenuForActions;var React=_interopRequireWildcard(__webpack_require__(4));var _lodash=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _public=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function buildContextMenuForActions(_x){return _buildContextMenuForActions.apply(this,arguments)}function _buildContextMenuForActions(){_buildContextMenuForActions=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref2){var actions,actionContext,closeMenu,menuItems;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:actions=_ref2.actions,actionContext=_ref2.actionContext,closeMenu=_ref2.closeMenu;_context.next=3;return buildEuiContextMenuPanelItems({actions:actions,actionContext:actionContext,closeMenu:closeMenu});case 3:menuItems=_context.sent;return _context.abrupt("return",{id:"mainMenu",title:_i18n.i18n.translate("uiActions.actionPanel.title",{defaultMessage:"Options"}),items:menuItems});case 5:case"end":return _context.stop()}}}),_callee)})));return _buildContextMenuForActions.apply(this,arguments)}function buildEuiContextMenuPanelItems(_x2){return _buildEuiContextMenuPanelItems.apply(this,arguments)}function _buildEuiContextMenuPanelItems(){_buildEuiContextMenuPanelItems=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(_ref3){var actions,actionContext,closeMenu,items,promises;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:actions=_ref3.actions,actionContext=_ref3.actionContext,closeMenu=_ref3.closeMenu;items=[];promises=actions.map(function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(action){var isCompatible;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return action.isCompatible(actionContext);case 2:isCompatible=_context2.sent;if(isCompatible){_context2.next=5;break}return _context2.abrupt("return");case 5:items.push(convertPanelActionToContextMenuItem({action:action,actionContext:actionContext,closeMenu:closeMenu}));case 6:case"end":return _context2.stop()}}}),_callee2)})));return function(_x3){return _ref4.apply(this,arguments)}}());_context3.next=5;return Promise.all(promises);case 5:return _context3.abrupt("return",items);case 6:case"end":return _context3.stop()}}}),_callee3)})));return _buildEuiContextMenuPanelItems.apply(this,arguments)}function convertPanelActionToContextMenuItem(_ref){var action=_ref.action,actionContext=_ref.actionContext,closeMenu=_ref.closeMenu;var menuPanelItem={name:action.MenuItem?React.createElement((0,_public.uiToReactComponent)(action.MenuItem),{context:actionContext}):action.getDisplayName(actionContext),icon:action.getIconType(actionContext),panel:_lodash.default.get(action,"childContextMenuPanel.id"),"data-test-subj":"embeddablePanelAction-".concat(action.id)};menuPanelItem.onClick=function(){action.execute(actionContext);closeMenu()};if(action.getHref&&action.getHref(actionContext)){menuPanelItem.href=action.getHref(actionContext)}return menuPanelItem}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.openContextMenu=openContextMenu;exports.ContextMenuSession=void 0;var _react=_interopRequireDefault(__webpack_require__(4));var _eui=__webpack_require__(12);var _events=__webpack_require__(147);var _reactDom=_interopRequireDefault(__webpack_require__(5));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var activeSession=null;var CONTAINER_ID="contextMenu-container";var initialized=false;function getOrCreateContainerElement(){var container=document.getElementById(CONTAINER_ID);var y=getMouseY()+document.body.scrollTop;if(!container){container=document.createElement("div");container.style.left=getMouseX()+"px";container.style.top=y+"px";container.style.position="absolute";container.style.zIndex="999";container.id=CONTAINER_ID;document.body.appendChild(container)}else{container.style.left=getMouseX()+"px";container.style.top=y+"px"}return container}var x=0;var y=0;function initialize(){if(!initialized){document.addEventListener("mousemove",onMouseUpdate,false);document.addEventListener("mouseenter",onMouseUpdate,false);initialized=true}}function onMouseUpdate(e){x=e.pageX;y=e.pageY}function getMouseX(){return x}function getMouseY(){return y}initialize();var ContextMenuSession=function(_EventEmitter){_inherits(ContextMenuSession,_EventEmitter);function ContextMenuSession(){_classCallCheck(this,ContextMenuSession);return _possibleConstructorReturn(this,_getPrototypeOf(ContextMenuSession).apply(this,arguments))}_createClass(ContextMenuSession,[{key:"bindToAngularScope",value:function bindToAngularScope(scope){var _this=this;var removeWatch=scope.$on("$destroy",(function(){return _this.close()}));this.on("closed",(function(){return removeWatch()}))}},{key:"close",value:function close(){if(activeSession===this){var container=document.getElementById(CONTAINER_ID);if(container){_reactDom.default.unmountComponentAtNode(container);this.emit("closed")}}}}]);return ContextMenuSession}(_events.EventEmitter);exports.ContextMenuSession=ContextMenuSession;function openContextMenu(panels){var props=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(activeSession){activeSession.close()}var container=getOrCreateContainerElement();var session=activeSession=new ContextMenuSession;var onClose=function onClose(){if(props.onClose){props.onClose()}session.close()};_reactDom.default.render(_react.default.createElement(_eui.EuiPopover,{className:"embPanel__optionsMenuPopover",button:container,isOpen:true,closePopover:onClose,panelPaddingSize:"none",anchorPosition:"downRight",withTitle:true},_react.default.createElement(_eui.EuiContextMenu,{initialPanelId:"mainMenu",panels:panels})),container);return session}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.selectRangeTrigger=exports.SELECT_RANGE_TRIGGER=void 0;var SELECT_RANGE_TRIGGER="SELECT_RANGE_TRIGGER";exports.SELECT_RANGE_TRIGGER=SELECT_RANGE_TRIGGER;var selectRangeTrigger={id:SELECT_RANGE_TRIGGER,title:"Select range",description:"Applies a range filter"};exports.selectRangeTrigger=selectRangeTrigger},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.valueClickTrigger=exports.VALUE_CLICK_TRIGGER=void 0;var VALUE_CLICK_TRIGGER="VALUE_CLICK_TRIGGER";exports.VALUE_CLICK_TRIGGER=VALUE_CLICK_TRIGGER;var valueClickTrigger={id:VALUE_CLICK_TRIGGER,title:"Value clicked",description:"Value was clicked"};exports.valueClickTrigger=valueClickTrigger},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.applyFilterTrigger=exports.APPLY_FILTER_TRIGGER=void 0;var APPLY_FILTER_TRIGGER="FILTER_TRIGGER";exports.APPLY_FILTER_TRIGGER=APPLY_FILTER_TRIGGER;var applyFilterTrigger={id:APPLY_FILTER_TRIGGER,title:"Filter click",description:"Triggered when user applies filter to an embeddable."};exports.applyFilterTrigger=applyFilterTrigger},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _action=__webpack_require__(673);Object.keys(_action).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _action[key]}})}));var _create_action=__webpack_require__(674);Object.keys(_create_action).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _create_action[key]}})}));var _incompatible_action_error=__webpack_require__(675);Object.keys(_incompatible_action_error).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _incompatible_action_error[key]}})}))},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createAction=createAction;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createAction(action){return _objectSpread({getIconType:function getIconType(){return undefined},order:0,id:action.type,isCompatible:function isCompatible(){return Promise.resolve(true)},getDisplayName:function getDisplayName(){return""},getHref:function getHref(){return undefined}},action)}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.IncompatibleActionError=void 0;var _i18n=__webpack_require__(1);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IncompatibleActionError=function(_Error){_inherits(IncompatibleActionError,_Error);function IncompatibleActionError(){var _this;_classCallCheck(this,IncompatibleActionError);_this=_possibleConstructorReturn(this,_getPrototypeOf(IncompatibleActionError).call(this,_i18n.i18n.translate("uiActions.errors.incompatibleAction",{defaultMessage:"Action is incompatible"})));_defineProperty(_assertThisInitialized(_this),"code","INCOMPATIBLE_ACTION");return _this}return IncompatibleActionError}(_wrapNativeSuper(Error));exports.IncompatibleActionError=IncompatibleActionError},function(module,exports,__webpack_require__){"use strict";var _triggers=__webpack_require__(178);var DEFAULT_TRIGGER="";var DEFAULT_ACTION=""},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ACTION_GLOBAL_APPLY_FILTER",{enumerable:true,get:function get(){return _apply_filter_action.ACTION_GLOBAL_APPLY_FILTER}});Object.defineProperty(exports,"createFilterAction",{enumerable:true,get:function get(){return _apply_filter_action.createFilterAction}});Object.defineProperty(exports,"createFiltersFromEvent",{enumerable:true,get:function get(){return _create_filters_from_event.createFiltersFromEvent}});Object.defineProperty(exports,"selectRangeAction",{enumerable:true,get:function get(){return _select_range_action.selectRangeAction}});Object.defineProperty(exports,"valueClickAction",{enumerable:true,get:function get(){return _value_click_action.valueClickAction}});var _apply_filter_action=__webpack_require__(678);var _create_filters_from_event=__webpack_require__(294);var _select_range_action=__webpack_require__(295);var _value_click_action=__webpack_require__(296)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterAction=createFilterAction;exports.ACTION_GLOBAL_APPLY_FILTER=void 0;var _i18n=__webpack_require__(1);var _public=__webpack_require__(14);var _public2=__webpack_require__(149);var _services=__webpack_require__(95);var _apply_filters=__webpack_require__(293);var _=__webpack_require__(107);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var ACTION_GLOBAL_APPLY_FILTER="ACTION_GLOBAL_APPLY_FILTER";exports.ACTION_GLOBAL_APPLY_FILTER=ACTION_GLOBAL_APPLY_FILTER;function isCompatible(_x){return _isCompatible.apply(this,arguments)}function _isCompatible(){_isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",context.filters!==undefined);case 1:case"end":return _context2.stop()}}}),_callee2)})));return _isCompatible.apply(this,arguments)}function createFilterAction(filterManager,timeFilter){return(0,_public2.createAction)({type:ACTION_GLOBAL_APPLY_FILTER,id:ACTION_GLOBAL_APPLY_FILTER,getDisplayName:function getDisplayName(){return _i18n.i18n.translate("data.filter.applyFilterActionTitle",{defaultMessage:"Apply filter to current view"})},isCompatible:isCompatible,execute:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var filters,timeFieldName,selectedFilters,indexPatterns,filterSelectionPromise,_esFilters$extractTim,timeRangeFilter,restOfFilters;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:filters=_ref.filters,timeFieldName=_ref.timeFieldName;if(filters){_context.next=3;break}throw new Error("Applying a filter requires a filter");case 3:_context.next=5;return isCompatible({filters:filters});case 5:if(_context.sent){_context.next=7;break}throw new _public2.IncompatibleActionError;case 7:selectedFilters=filters;if(!(selectedFilters.length>1)){_context.next=16;break}_context.next=11;return Promise.all(filters.map((function(filter){return(0,_services.getIndexPatterns)().get(filter.meta.index)})));case 11:indexPatterns=_context.sent;filterSelectionPromise=new Promise((function(resolve){var overlay=(0,_services.getOverlays)().openModal((0,_public.toMountPoint)((0,_apply_filters.applyFiltersPopover)(filters,indexPatterns,(function(){overlay.close();resolve([])}),(function(filterSelection){overlay.close();resolve(filterSelection)}))),{"data-test-subj":"test"})}));_context.next=15;return filterSelectionPromise;case 15:selectedFilters=_context.sent;case 16:if(timeFieldName){_esFilters$extractTim=_.esFilters.extractTimeFilter(timeFieldName,selectedFilters),timeRangeFilter=_esFilters$extractTim.timeRangeFilter,restOfFilters=_esFilters$extractTim.restOfFilters;filterManager.addFilters(restOfFilters);if(timeRangeFilter){_.esFilters.changeTimeFilter(timeFilter,timeRangeFilter)}}else{filterManager.addFilters(selectedFilters)}case 17:case"end":return _context.stop()}}}),_callee)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.applyFiltersPopover=void 0;var _react=_interopRequireDefault(__webpack_require__(4));var _apply_filter_popover_content=__webpack_require__(680);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var applyFiltersPopover=function applyFiltersPopover(filters,indexPatterns,onCancel,onSubmit){return _react.default.createElement(_apply_filter_popover_content.ApplyFiltersPopoverContent,{indexPatterns:indexPatterns,filters:filters,onCancel:onCancel,onSubmit:onSubmit})};exports.applyFiltersPopover=applyFiltersPopover},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ApplyFiltersPopoverContent=void 0;var _eui=__webpack_require__(12);var _react=__webpack_require__(13);var _react2=_interopRequireWildcard(__webpack_require__(4));var _common=__webpack_require__(93);var _filter_bar=__webpack_require__(165);var _query=__webpack_require__(119);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ApplyFiltersPopoverContent=function(_Component){_inherits(ApplyFiltersPopoverContent,_Component);function ApplyFiltersPopoverContent(props){var _this;_classCallCheck(this,ApplyFiltersPopoverContent);_this=_possibleConstructorReturn(this,_getPrototypeOf(ApplyFiltersPopoverContent).call(this,props));_defineProperty(_assertThisInitialized(_this),"isFilterSelected",(function(i){return _this.state.isFilterSelected[i]}));_defineProperty(_assertThisInitialized(_this),"toggleFilterSelected",(function(i){var isFilterSelected=_toConsumableArray(_this.state.isFilterSelected);isFilterSelected[i]=!isFilterSelected[i];_this.setState({isFilterSelected:isFilterSelected})}));_defineProperty(_assertThisInitialized(_this),"onSubmit",(function(){var selectedFilters=_this.props.filters.filter((function(filter,i){return _this.state.isFilterSelected[i]}));_this.props.onSubmit(selectedFilters)}));_this.state={isFilterSelected:props.filters.map((function(){return true}))};return _this}_createClass(ApplyFiltersPopoverContent,[{key:"getLabel",value:function getLabel(filter){var valueLabel=(0,_common.getDisplayValueFromFilter)(filter,this.props.indexPatterns);return _react2.default.createElement(_filter_bar.FilterLabel,{filter:filter,valueLabel:valueLabel})}},{key:"render",value:function render(){var _this2=this;if(this.props.filters.length===0){return""}var mappedFilters=(0,_query.mapAndFlattenFilters)(this.props.filters);var form=_react2.default.createElement(_eui.EuiForm,null,mappedFilters.map((function(filter,i){return _react2.default.createElement(_eui.EuiFormRow,{key:i},_react2.default.createElement(_eui.EuiSwitch,{label:_this2.getLabel(filter),checked:_this2.isFilterSelected(i),onChange:function onChange(){return _this2.toggleFilterSelected(i)}}))})));return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(_eui.EuiModalHeader,null,_react2.default.createElement(_eui.EuiModalHeaderTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.applyFilters.popupHeader",defaultMessage:"Select filters to apply"}))),_react2.default.createElement(_eui.EuiModalBody,null,form),_react2.default.createElement(_eui.EuiModalFooter,null,_react2.default.createElement(_eui.EuiButtonEmpty,{onClick:this.props.onCancel},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.applyFiltersPopup.cancelButtonLabel",defaultMessage:"Cancel"})),_react2.default.createElement(_eui.EuiButton,{onClick:this.onSubmit,"data-test-subj":"applyFiltersPopoverButton",fill:true},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.applyFiltersPopup.saveButtonLabel",defaultMessage:"Apply"}))))}}]);return ApplyFiltersPopoverContent}(_react2.Component);exports.ApplyFiltersPopoverContent=ApplyFiltersPopoverContent;_defineProperty(ApplyFiltersPopoverContent,"defaultProps",{filters:[]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.onBrushEvent=onBrushEvent;var _lodash=__webpack_require__(0);var _moment=_interopRequireDefault(__webpack_require__(84));var _public=__webpack_require__(107);var _services=__webpack_require__(95);var _utils=__webpack_require__(177);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function onBrushEvent(_x){return _onBrushEvent.apply(this,arguments)}function _onBrushEvent(){_onBrushEvent=_asyncToGenerator(regeneratorRuntime.mark((function _callee(event){var isDate,xRaw,column,indexPattern,aggConfig,field,min,max,range;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isDate=(0,_lodash.get)(event.data,"ordered.date");xRaw=(0,_lodash.get)(event.data,"series[0].values[0].xRaw");if(xRaw){_context.next=4;break}return _context.abrupt("return");case 4:column=xRaw.table.columns[xRaw.column];if(!(!column||!column.meta)){_context.next=7;break}return _context.abrupt("return");case 7:_context.next=9;return(0,_services.getIndexPatterns)().get(column.meta.indexPatternId);case 9:indexPattern=_context.sent;aggConfig=(0,_utils.deserializeAggConfig)(_objectSpread({},column.meta,{indexPattern:indexPattern}));field=aggConfig.params.field;if(!(!field||event.range.length<=1)){_context.next=14;break}return _context.abrupt("return");case 14:min=event.range[0];max=(0,_lodash.last)(event.range);if(!(min===max)){_context.next=18;break}return _context.abrupt("return");case 18:range={gte:isDate?(0,_moment.default)(min).toISOString():min,lt:isDate?(0,_moment.default)(max).toISOString():max};if(isDate){range.format="strict_date_optional_time"}return _context.abrupt("return",_public.esFilters.buildRangeFilter(field,range,indexPattern));case 21:case"end":return _context.stop()}}}),_callee)})));return _onBrushEvent.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hydrateIndexPattern=hydrateIndexPattern;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function hydrateIndexPattern(_x,_x2,_x3,_x4){return _hydrateIndexPattern.apply(this,arguments)}function _hydrateIndexPattern(){_hydrateIndexPattern=_asyncToGenerator(regeneratorRuntime.mark((function _callee(id,savedObject,indexPatterns,config){var clearSavedIndexPattern,indexPattern,index,indexObj;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:clearSavedIndexPattern=!!config.clearSavedIndexPattern;indexPattern=config.indexPattern;if(savedObject.searchSource){_context.next=4;break}return _context.abrupt("return",null);case 4:if(!clearSavedIndexPattern){_context.next=7;break}savedObject.searchSource.setField("index",undefined);return _context.abrupt("return",null);case 7:index=id||indexPattern||savedObject.searchSource.getOwnField("index");if(!(typeof index!=="string"||!index)){_context.next=10;break}return _context.abrupt("return",null);case 10:_context.next=12;return indexPatterns.get(index);case 12:indexObj=_context.sent;savedObject.searchSource.setField("index",indexObj);return _context.abrupt("return",indexObj);case 15:case"end":return _context.stop()}}}),_callee)})));return _hydrateIndexPattern.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.intializeSavedObject=intializeSavedObject;var _lodash=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function intializeSavedObject(_x,_x2,_x3){return _intializeSavedObject.apply(this,arguments)}function _intializeSavedObject(){_intializeSavedObject=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObject,savedObjectsClient,config){var esType,resp,respMapped;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:esType=config.type;if(esType){_context.next=3;break}throw new Error("You must define a type name to use SavedObject objects.");case 3:if(savedObject.id){_context.next=12;break}_lodash.default.assign(savedObject,savedObject.defaults);_context.next=7;return savedObject.hydrateIndexPattern();case 7:if(!(typeof config.afterESResp==="function")){_context.next=11;break}_context.next=10;return config.afterESResp(savedObject);case 10:savedObject=_context.sent;case 11:return _context.abrupt("return",savedObject);case 12:_context.next=14;return savedObjectsClient.get(esType,savedObject.id);case 14:resp=_context.sent;respMapped={_id:resp.id,_type:resp.type,_source:_lodash.default.cloneDeep(resp.attributes),references:resp.references,found:!!resp._version};_context.next=18;return savedObject.applyESResp(respMapped);case 18:if(!(typeof config.init==="function")){_context.next=21;break}_context.next=21;return config.init.call(savedObject);case 21:return _context.abrupt("return",savedObject);case 22:case"end":return _context.stop()}}}),_callee)})));return _intializeSavedObject.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.serializeSavedObject=serializeSavedObject;var _lodash=_interopRequireDefault(__webpack_require__(0));var _angular=_interopRequireDefault(__webpack_require__(2));var _public=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function serializeSavedObject(savedObject,config){var mapping=(0,_public.expandShorthand)(config.mapping);var attributes={};var references=[];_lodash.default.forOwn(mapping,(function(fieldMapping,fieldName){if(typeof fieldName!=="string"){return}var savedObjectFieldVal=savedObject[fieldName];if(savedObjectFieldVal!=null){attributes[fieldName]=fieldMapping._serialize?fieldMapping._serialize(savedObjectFieldVal):savedObjectFieldVal}}));if(savedObject.searchSource){var searchSourceFields=_lodash.default.omit(savedObject.searchSource.getFields(),["sort","size"]);if(searchSourceFields.index){var indexId=typeof searchSourceFields.index==="string"?searchSourceFields.index:searchSourceFields.index.id;var refName="kibanaSavedObjectMeta.searchSourceJSON.index";references.push({name:refName,type:"index-pattern",id:indexId});searchSourceFields=_objectSpread({},searchSourceFields,{indexRefName:refName,index:undefined})}if(searchSourceFields.filter){searchSourceFields=_objectSpread({},searchSourceFields,{filter:searchSourceFields.filter.map((function(filterRow,i){if(!filterRow.meta||!filterRow.meta.index){return filterRow}var refName="kibanaSavedObjectMeta.searchSourceJSON.filter[".concat(i,"].meta.index");references.push({name:refName,type:"index-pattern",id:filterRow.meta.index});return _objectSpread({},filterRow,{meta:_objectSpread({},filterRow.meta,{indexRefName:refName,index:undefined})})}))})}attributes.kibanaSavedObjectMeta={searchSourceJSON:_angular.default.toJson(searchSourceFields)}}return{attributes:attributes,references:references}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.applyESResp=applyESResp;var _lodash=_interopRequireDefault(__webpack_require__(0));var _parse_search_source=__webpack_require__(687);var _public=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function applyESResp(_x,_x2,_x3){return _applyESResp.apply(this,arguments)}function _applyESResp(){_applyESResp=_asyncToGenerator(regeneratorRuntime.mark((function _callee(resp,savedObject,config){var mapping,esType,injectReferences,hydrateIndexPattern,meta;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:mapping=(0,_public.expandShorthand)(config.mapping);esType=config.type||"";savedObject._source=_lodash.default.cloneDeep(resp._source);injectReferences=config.injectReferences;hydrateIndexPattern=savedObject.hydrateIndexPattern;if(!(typeof resp.found==="boolean"&&!resp.found)){_context.next=7;break}throw new _public.SavedObjectNotFound(esType,savedObject.id||"");case 7:meta=resp._source.kibanaSavedObjectMeta||{};delete resp._source.kibanaSavedObjectMeta;if(!config.indexPattern&&savedObject._source.indexPattern){config.indexPattern=savedObject._source.indexPattern;delete savedObject._source.indexPattern}_lodash.default.defaults(savedObject._source,savedObject.defaults);_lodash.default.forOwn(mapping,(function(fieldMapping,fieldName){if(fieldMapping._deserialize&&typeof fieldName==="string"){savedObject._source[fieldName]=fieldMapping._deserialize(savedObject._source[fieldName])}}));_lodash.default.assign(savedObject,savedObject._source);savedObject.lastSavedTitle=savedObject.title;_context.next=16;return(0,_parse_search_source.parseSearchSource)(savedObject,esType,meta.searchSourceJSON,resp.references);case 16:_context.next=18;return hydrateIndexPattern();case 18:if(injectReferences&&resp.references&&resp.references.length>0){injectReferences(savedObject,resp.references)}if(!(typeof config.afterESResp==="function")){_context.next=23;break}_context.next=22;return config.afterESResp(savedObject);case 22:savedObject=_context.sent;case 23:return _context.abrupt("return",savedObject);case 24:case"end":return _context.stop()}}}),_callee)})));return _applyESResp.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.parseSearchSource=parseSearchSource;var _lodash=_interopRequireDefault(__webpack_require__(0));var _public=__webpack_require__(19);var _public2=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function parseSearchSource(savedObject,esType,searchSourceJson,references){if(!savedObject.searchSource)return;var searchSourceValues;try{searchSourceValues=JSON.parse(searchSourceJson)}catch(e){throw new _public2.InvalidJSONProperty("Invalid JSON in ".concat(esType,' "').concat(savedObject.id,'". ').concat(e.message," JSON: ").concat(searchSourceJson))}if(!searchSourceValues||_typeof(searchSourceValues)!=="object"){throw new _public2.InvalidJSONProperty("Invalid searchSourceJSON in ".concat(esType,' "').concat(savedObject.id,'".'))}if(searchSourceValues.indexRefName){var reference=references.find((function(ref){return ref.name===searchSourceValues.indexRefName}));if(!reference){throw new Error("Could not find reference for ".concat(searchSourceValues.indexRefName," on ").concat(savedObject.getEsType()," ").concat(savedObject.id))}searchSourceValues.index=reference.id;delete searchSourceValues.indexRefName}if(searchSourceValues.filter){searchSourceValues.filter.forEach((function(filterRow){if(!filterRow.meta||!filterRow.meta.indexRefName){return}var reference=references.find((function(ref){return ref.name===filterRow.meta.indexRefName}));if(!reference){throw new Error("Could not find reference for ".concat(filterRow.meta.indexRefName," on ").concat(savedObject.getEsType()))}filterRow.meta.index=reference.id;delete filterRow.meta.indexRefName}))}var searchSourceFields=savedObject.searchSource.getFields();var fnProps=_lodash.default.transform(searchSourceFields,(function(dynamic,val,name){if(_lodash.default.isFunction(val)&&name)dynamic[name]=val}),{});savedObject.searchSource.setFields(_lodash.default.defaults(searchSourceValues,fnProps));var query=savedObject.searchSource.getOwnField("query");if(typeof query!=="undefined"){savedObject.searchSource.setField("query",(0,_public.migrateLegacyQuery)(query))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSource=createSource;var _lodash=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _constants=__webpack_require__(128);var _confirm_modal_promise=__webpack_require__(179);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function createSource(_x,_x2,_x3){return _createSource.apply(this,arguments)}function _createSource(){_createSource=_asyncToGenerator(regeneratorRuntime.mark((function _callee(source,savedObject,esType){var options,services,savedObjectsClient,overlays,confirmMessage,title,confirmButtonText,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options=_args.length>3&&_args[3]!==undefined?_args[3]:{};services=_args.length>4?_args[4]:undefined;savedObjectsClient=services.savedObjectsClient,overlays=services.overlays;_context.prev=3;_context.next=6;return savedObjectsClient.create(esType,source,options);case 6:return _context.abrupt("return",_context.sent);case 9:_context.prev=9;_context.t0=_context["catch"](3);if(!(_lodash.default.get(_context.t0,"res.status")===409)){_context.next=16;break}confirmMessage=_i18n.i18n.translate("savedObjects.confirmModal.overwriteConfirmationMessage",{defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:savedObject.title}});title=_i18n.i18n.translate("savedObjects.confirmModal.overwriteTitle",{defaultMessage:"Overwrite {name}?",values:{name:savedObject.getDisplayName()}});confirmButtonText=_i18n.i18n.translate("savedObjects.confirmModal.overwriteButtonLabel",{defaultMessage:"Overwrite"});return _context.abrupt("return",(0,_confirm_modal_promise.confirmModalPromise)(confirmMessage,title,confirmButtonText,overlays).then((function(){return savedObjectsClient.create(esType,source,savedObject.creationOpts(_objectSpread({overwrite:true},options)))})).catch((function(){return Promise.reject(new Error(_constants.OVERWRITE_REJECTED))})));case 16:_context.next=18;return Promise.reject(_context.t0);case 18:return _context.abrupt("return",_context.sent);case 19:case"end":return _context.stop()}}}),_callee,null,[[3,9]])})));return _createSource.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findObjectByTitle=findObjectByTitle;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function findObjectByTitle(_x,_x2,_x3){return _findObjectByTitle.apply(this,arguments)}function _findObjectByTitle(){_findObjectByTitle=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObjectsClient,type,title){var response;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(title){_context.next=2;break}return _context.abrupt("return");case 2:_context.next=4;return savedObjectsClient.find({type:type,perPage:10,search:'"'.concat(title,'"'),searchFields:["title"],fields:["title"]});case 4:response=_context.sent;return _context.abrupt("return",response.savedObjects.find((function(obj){return obj.get("title").toLowerCase()===title.toLowerCase()})));case 6:case"end":return _context.stop()}}}),_callee)})));return _findObjectByTitle.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.displayDuplicateTitleConfirmModal=displayDuplicateTitleConfirmModal;var _i18n=__webpack_require__(1);var _constants=__webpack_require__(128);var _confirm_modal_promise=__webpack_require__(179);function displayDuplicateTitleConfirmModal(savedObject,overlays){var confirmMessage=_i18n.i18n.translate("savedObjects.confirmModal.saveDuplicateConfirmationMessage",{defaultMessage:"A {name} with the title '{title}' already exists. Would you like to save anyway?",values:{title:savedObject.title,name:savedObject.getDisplayName()}});var confirmButtonText=_i18n.i18n.translate("savedObjects.confirmModal.saveDuplicateButtonLabel",{defaultMessage:"Save {name}",values:{name:savedObject.getDisplayName()}});try{return(0,_confirm_modal_promise.confirmModalPromise)(confirmMessage,"",confirmButtonText,overlays)}catch(_){return Promise.reject(new Error(_constants.SAVE_DUPLICATE_REJECTED))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectLoader=void 0;var _string_utils=__webpack_require__(692);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SavedObjectLoader=function(){function SavedObjectLoader(SavedObjectClass,savedObjectsClient,chrome){_classCallCheck(this,SavedObjectLoader);this.savedObjectsClient=savedObjectsClient;this.chrome=chrome;_defineProperty(this,"Class",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"lowercaseType",void 0);_defineProperty(this,"loaderProperties",void 0);this.type=SavedObjectClass.type;this.Class=SavedObjectClass;this.lowercaseType=this.type.toLowerCase();this.loaderProperties={name:"".concat(this.lowercaseType,"s"),noun:_string_utils.StringUtils.upperFirst(this.type),nouns:"".concat(this.lowercaseType,"s")}}_createClass(SavedObjectLoader,[{key:"get",value:function(){var _get=_asyncToGenerator(regeneratorRuntime.mark((function _callee(id){var obj;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:obj=new this.Class(id);return _context.abrupt("return",obj.init());case 2:case"end":return _context.stop()}}}),_callee,this)})));function get(_x){return _get.apply(this,arguments)}return get}()},{key:"urlFor",value:function urlFor(id){return"#/".concat(this.lowercaseType,"/").concat(encodeURIComponent(id))}},{key:"delete",value:function(){var _delete2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(ids){var _this=this;var idsUsed,deletions,coreNavLinks;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:idsUsed=!Array.isArray(ids)?[ids]:ids;deletions=idsUsed.map((function(id){var savedObject=new _this.Class(id);return savedObject.delete()}));_context2.next=4;return Promise.all(deletions);case 4:coreNavLinks=this.chrome.navLinks;coreNavLinks.getAll().filter((function(link){return link.linkToLastSubUrl&&idsUsed.find((function(deletedId){return link.url&&link.url.includes(deletedId)}))!==undefined})).forEach((function(link){return coreNavLinks.update(link.id,{url:link.baseUrl})}));case 6:case"end":return _context2.stop()}}}),_callee2,this)})));function _delete(_x2){return _delete2.apply(this,arguments)}return _delete}()},{key:"mapHitSource",value:function mapHitSource(source,id){source.id=id;source.url=this.urlFor(id);return source}},{key:"mapSavedObjectApiHits",value:function mapSavedObjectApiHits(hit){return this.mapHitSource(hit.attributes,hit.id)}},{key:"findAll",value:function findAll(){var _this2=this;var search=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;var fields=arguments.length>2?arguments[2]:undefined;return this.savedObjectsClient.find({type:this.lowercaseType,search:search?"".concat(search,"*"):undefined,perPage:size,page:1,searchFields:["title^3","description"],defaultSearchOperator:"AND",fields:fields}).then((function(resp){return{total:resp.total,hits:resp.savedObjects.map((function(savedObject){return _this2.mapSavedObjectApiHits(savedObject)}))}}))}},{key:"find",value:function find(){var search=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;return this.findAll(search,size).then((function(resp){return{total:resp.total,hits:resp.hits.filter((function(savedObject){return!savedObject.error}))}}))}}]);return SavedObjectLoader}();exports.SavedObjectLoader=SavedObjectLoader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StringUtils=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var StringUtils=function(){function StringUtils(){_classCallCheck(this,StringUtils)}_createClass(StringUtils,null,[{key:"upperFirst",value:function upperFirst(){var str=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return str?str.charAt(0).toUpperCase()+str.slice(1):""}}]);return StringUtils}();exports.StringUtils=StringUtils},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.saveWithConfirmation=saveWithConfirmation;var _lodash=__webpack_require__(0);var _i18n=__webpack_require__(1);var _constants=__webpack_require__(128);var _confirm_modal_promise=__webpack_require__(179);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function saveWithConfirmation(_x,_x2,_x3,_x4){return _saveWithConfirmation.apply(this,arguments)}function _saveWithConfirmation(){_saveWithConfirmation=_asyncToGenerator(regeneratorRuntime.mark((function _callee(source,savedObject,options,services){var savedObjectsClient,overlays,confirmMessage,title,confirmButtonText;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:savedObjectsClient=services.savedObjectsClient,overlays=services.overlays;_context.prev=1;_context.next=4;return savedObjectsClient.create(savedObject.getEsType(),source,options);case 4:return _context.abrupt("return",_context.sent);case 7:_context.prev=7;_context.t0=_context["catch"](1);if(!((0,_lodash.get)(_context.t0,"res.status")===409)){_context.next=14;break}confirmMessage=_i18n.i18n.translate("savedObjects.confirmModal.overwriteConfirmationMessage",{defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:savedObject.title}});title=_i18n.i18n.translate("savedObjects.confirmModal.overwriteTitle",{defaultMessage:"Overwrite {name}?",values:{name:savedObject.displayName}});confirmButtonText=_i18n.i18n.translate("savedObjects.confirmModal.overwriteButtonLabel",{defaultMessage:"Overwrite"});return _context.abrupt("return",(0,_confirm_modal_promise.confirmModalPromise)(confirmMessage,title,confirmButtonText,overlays).then((function(){return savedObjectsClient.create(savedObject.getEsType(),source,_objectSpread({overwrite:true},options))})).catch((function(){return Promise.reject(new Error(_constants.OVERWRITE_REJECTED))})));case 14:_context.next=16;return Promise.reject(_context.t0);case 16:return _context.abrupt("return",_context.sent);case 17:case"end":return _context.stop()}}}),_callee,null,[[1,7]])})));return _saveWithConfirmation.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<main id="graphBasic" ng-controller="graphuiPlugin" aria-labelledby="graphHeading">\n  \x3c!-- Local nav. --\x3e\n  <kbn-top-nav name="workspacesTopNav" config="topNavMenu">\n  </kbn-top-nav>\n\n  <div class="gphGraph__menus" ng-show="menus.showInspect">\n    <div>\n      <div\n        class="kuiLocalDropdownTitle"\n        i18n-id="xpack.graph.inspect.title"\n        i18n-default-message="Inspect"\n      ></div>\n\n      <div\n        class="list-group-item"\n        ng-if="(workspace !== null)"\n      >\n        <small class="help-block">http://host:port/{{ selectedIndex.name }}/_graph/explore</small>\n        <ul class="nav nav-tabs">\n          <li ng-class="{active: spymode === \'request\'}">\n            <a\n              ng-click="spymode=\'request\'"\n              i18n-id="xpack.graph.inspect.requestTabTitle"\n              i18n-default-message="Request"\n            ></a>\n          </li>\n          <li ng-class="{active: spymode === \'response\'}">\n            <a\n              ng-click="spymode=\'response\'"\n              i18n-id="xpack.graph.inspect.responseTabTitle"\n              i18n-default-message="Response"\n            ></a>\n          </li>\n        </ul>\n\n        <div\n          ng-show="spymode == \'request\'"\n          ui-ace="{ onLoad: aceLoaded, mode: \'json\', advanced: { readOnly: true } }"\n          ng-model="workspace.lastRequest"\n          class="gphSettings__jsonView"\n        ></div>\n        <div\n          ng-show="spymode == \'response\'"\n          ui-ace="{ onLoad: aceLoaded, mode: \'json\', advanced: { readOnly: true } }"\n          ng-model="workspace.lastResponse"\n          class="gphSettings__jsonView"\n        ></div>\n      </div>\n    </div>\n  </div>\n\n  <div\n    graph-app\n    current-index-pattern="selectedIndex"\n    on-query-submit="submit"\n    index-pattern-provider="indexPatternProvider"\n    redux-store="reduxStore"\n    confirm-wipe-workspace="confirmWipeWorkspace"\n    is-loading="loading"\n    is-initialized="workspaceInitialized || savedWorkspace.id"\n    initial-query="initialQuery"\n    plugin-data-start="pluginDataStart"\n    core-start="coreStart"\n    storage="storage"\n    no-index-patterns="noIndexPatterns"\n  ></div>\n\n  <div class="gphGraph__container" id="GraphSvgContainer" ng-if="workspaceInitialized || savedWorkspace.id">\n    <div\n      class="gphVisualization"\n      graph-visualization\n      nodes="workspace.nodes"\n      edges="workspace.edges"\n      edge-click="clickEdge"\n      node-click="nodeClick"\n    ></div>\n\n    <div id="sidebar" class="gphSidebar" ng-if="workspace !== null">\n\n      <div>\n        <button\n          class="kuiButton kuiButton--basic kuiButton--small"\n          tooltip="{{ ::\'xpack.graph.sidebar.topMenu.undoButtonTooltip\' | i18n: { defaultMessage: \'Undo\' } }}"\n          aria-label="{{ ::\'xpack.graph.sidebar.topMenu.undoButtonTooltip\' | i18n: { defaultMessage: \'Undo\' } }}"\n          type="button"\n          ng-click="workspace.undo()"\n          ng-disabled="workspace === null||workspace.undoLog.length <1"\n        >\n          <span class="kuiIcon fa-history"></span>\n        </button>\n\n        <button\n          class="kuiButton kuiButton--basic kuiButton--small"\n          tooltip="{{ ::\'xpack.graph.sidebar.topMenu.redoButtonTooltip\' | i18n: { defaultMessage: \'Redo\' } }}"\n          aria-label="{{ ::\'xpack.graph.sidebar.topMenu.redoButtonTooltip\' | i18n: { defaultMessage: \'Redo\' } }}"\n          type="button"\n          ng-disabled="workspace === null ||workspace.redoLog.length === 0"\n          ng-click="workspace.redo()"\n        >\n          <span class="kuiIcon fa-repeat"></span>\n        </button>\n\n        <button class="kuiButton kuiButton--basic kuiButton--small" ng-disabled="workspace === null ||liveResponseFields.length === 0||workspace.nodes.length === 0"\n          tooltip="{{ ::\'xpack.graph.sidebar.topMenu.expandSelectionButtonTooltip\' | i18n: { defaultMessage: \'Expand selection\' } }}"\n          aria-label="{{ ::\'xpack.graph.sidebar.topMenu.expandSelectionButtonTooltip\' | i18n: { defaultMessage: \'Expand selection\' } }}"\n          ng-click="setDetail(null);workspace.expandSelecteds({toFields:liveResponseFields});">\n          <span class="kuiIcon fa-plus"></span>\n        </button>\n\n        <button class="kuiButton kuiButton--basic kuiButton--small" ng-disabled="workspace === null ||workspace.nodes.length === 0"\n          tooltip="{{ ::\'xpack.graph.sidebar.topMenu.addLinksButtonTooltip\' | i18n: { defaultMessage: \'Add links between existing terms\' } }}"\n          aria-label="{{ ::\'xpack.graph.sidebar.topMenu.addLinksButtonTooltip\' | i18n: { defaultMessage: \'Add links between existing terms\' } }}"\n          ng-click="workspace.fillInGraph();">\n          <span class="kuiIcon fa-link"></span>\n        </button>\n\n        <button class="kuiButton kuiButton--basic kuiButton--small" ng-disabled="workspace === null ||workspace.nodes.length === 0"\n          tooltip="{{ ::\'xpack.graph.sidebar.topMenu.removeVerticesButtonTooltip\' | i18n: { defaultMessage: \'Remove vertices from workspace\' } }}"\n          aria-label="{{ ::\'xpack.graph.sidebar.topMenu.removeVerticesButtonTooltip\' | i18n: { defaultMessage: \'Remove vertices from workspace\' } }}"\n          ng-click="setDetail(null);workspace.deleteSelection();" data-test-subj="graphRemoveSelection">\n          <span class="kuiIcon fa-trash"></span>\n        </button>\n\n        <button class="kuiButton kuiButton--basic kuiButton--small" ng-disabled="workspace === null ||workspace.selectedNodes.length === 0"\n          tooltip="{{ ::\'xpack.graph.sidebar.topMenu.blacklistButtonTooltip\' | i18n: { defaultMessage: \'Blacklist selection from return to workspace\' } }}"\n          aria-label="{{ ::\'xpack.graph.sidebar.topMenu.blacklistButtonTooltip\' | i18n: { defaultMessage: \'Blacklist selection from return to workspace\' } }}"\n          ng-click="workspace.blacklistSelection();">\n          <span class="kuiIcon fa-ban"></span>\n        </button>\n\n        <button class="kuiButton kuiButton--basic kuiButton--small" ng-disabled="workspace === null ||workspace.selectedNodes.length === 0"\n          tooltip="{{ ::\'xpack.graph.sidebar.topMenu.customStyleButtonTooltip\' | i18n: { defaultMessage: \'Custom style selected vertices\' } }}"\n          aria-label="{{ ::\'xpack.graph.sidebar.topMenu.customStyleButtonTooltip\' | i18n: { defaultMessage: \'Custom style selected vertices\' } }}"\n          ng-click="setDetail({showStyle:true})">\n          <span class="kuiIcon fa-paint-brush"></span>\n        </button>\n\n        <button class="kuiButton kuiButton--basic kuiButton--small" ng-disabled="workspace === null||workspace.nodes.length === 0"\n          tooltip="{{ ::\'xpack.graph.sidebar.topMenu.drillDownButtonTooltip\' | i18n: { defaultMessage: \'Drill down\' } }}"\n          aria-label="{{ ::\'xpack.graph.sidebar.topMenu.drillDownButtonTooltip\' | i18n: { defaultMessage: \'Drill down\' } }}"\n          ng-click="setDetail({showDrillDowns:true})">\n          <span class="kuiIcon fa-info"></span>\n        </button>\n\n        <button class="kuiButton kuiButton--basic kuiButton--small" ng-disabled="workspace.nodes.length === 0" ng-if="workspace.nodes.length === 0||workspace.force === null"\n          tooltip="{{ ::\'xpack.graph.sidebar.topMenu.runLayoutButtonTooltip\' | i18n: { defaultMessage: \'Run layout\' } }}"\n          aria-label="{{ ::\'xpack.graph.sidebar.topMenu.runLayoutButtonTooltip\' | i18n: { defaultMessage: \'Run layout\' } }}"\n          ng-click="workspace.runLayout()" data-test-subj="graphResumeLayout">\n          <span class="kuiIcon fa-play"></span>\n        </button>\n\n        <button class="kuiButton kuiButton--basic kuiButton--small" ng-if="workspace.force !== null&&workspace.nodes.length>0"\n          tooltip="{{ ::\'xpack.graph.sidebar.topMenu.pauseLayoutButtonTooltip\' | i18n: { defaultMessage: \'Pause layout\' } }}"\n          aria-label="{{ ::\'xpack.graph.sidebar.topMenu.pauseLayoutButtonTooltip\' | i18n: { defaultMessage: \'Pause layout\' } }}"\n          ng-click="workspace.stopLayout()" data-test-subj="graphPauseLayout">\n          <span class="kuiIcon fa-pause"></span>\n        </button>\n      </div>\n\n      <div>\n        <div class="gphSidebar__header">\n          {{ ::\'xpack.graph.sidebar.selectionsTitle\' | i18n: { defaultMessage: \'Selections\' } }}\n        </div>\n\n        <div id="vertexSelectionTypesBar">\n          <button\n            tooltip="{{ ::\'xpack.graph.sidebar.selections.selectAllButtonTooltip\' | i18n: { defaultMessage: \'Select all\' } }}"\n            type="button" class="kuiButton kuiButton--basic kuiButton--small gphVertexSelect__button"\n            ng-disabled="workspace.nodes.length === 0" ng-click="setDetail(null);workspace.selectAll()"\n            i18n-id="xpack.graph.sidebar.selections.selectAllButtonLabel"\n            i18n-default-message="all" data-test-subj="graphSelectAll"\n          ></button>\n\n          <button\n            tooltip="{{ ::\'xpack.graph.sidebar.selections.selectNoneButtonTooltip\' | i18n: { defaultMessage: \'Select none\' } }}"\n            type="button" class="kuiButton kuiButton--basic kuiButton--small gphVertexSelect__button"\n            ng-disabled="workspace.nodes.length === 0" ng-click="setDetail(null);workspace.selectNone()"\n            i18n-id="xpack.graph.sidebar.selections.selectNoneButtonLabel"\n            i18n-default-message="none"\n          ></button>\n\n          <button\n            tooltip="{{ ::\'xpack.graph.sidebar.selections.invertSelectionButtonTooltip\' | i18n: { defaultMessage: \'Invert selection\' } }}"\n            type="button" class="kuiButton kuiButton--basic kuiButton--small gphVertexSelect__button"\n            ng-disabled="workspace.nodes.length === 0" ng-click="setDetail(null);workspace.selectInvert()"\n            i18n-id="xpack.graph.sidebar.selections.invertSelectionButtonLabel"\n            i18n-default-message="invert" data-test-subj="graphInvertSelection"\n          ></button>\n\n          <button\n            tooltip="{{ ::\'xpack.graph.sidebar.selections.selectNeighboursButtonTooltip\' | i18n: { defaultMessage: \'Select neighbours\' } }}"\n            type="button" class="kuiButton kuiButton--basic kuiButton--small gphVertexSelect__button"\n            ng-disabled="workspace.selectedNodes.length === 0" ng-click="setDetail(null);workspace.selectNeighbours()"\n            i18n-id="xpack.graph.sidebar.selections.selectNeighboursButtonLabel"\n            i18n-default-message="linked" data-test-subj="graphLinkedSelection"\n          ></button>\n        </div>\n\n        <div class="gphSelectionList">\n          <p\n            ng-if="workspace.selectedNodes.length === 0"\n            class="help-block"\n            i18n-id="xpack.graph.sidebar.selections.noSelectionsHelpText"\n            i18n-default-message="No selections. Click on vertices to add."\n          ></p>\n\n          <div ng-repeat="n in workspace.selectedNodes" class="gphSelectionList__field" ng-class="{\'gphSelectionList__field--selected\': isSelectedSelected(n)}"\n            ng-click="selectSelected(n)">\n            <svg width="24" height="24">\n              <circle class="gphNode__circle " r="10" cx="12" cy="12" ng-attr-style="fill:{{n.color}}"\n                ng-click="workspace.deselectNode(n)" ></circle>\n\n              <text\n                ng-if="n.icon"\n                class="fa gphNode__text gphSelectionList__icon"\n                text-anchor="middle"\n                x="12"\n                y="16"\n                ng-click="workspace.deselectNode(n)"\n                ng-class="{\'gphNode__text--inverse\': isColorDark(n.color)}"\n              >{{n.icon.code}}</text>\n            </svg>\n            <span>{{n.label}}</span>\n            <span ng-if="n.numChildren>0"> (+{{n.numChildren}})</span>\n\n          </div>\n        </div>\n      </div>\n\n      \x3c!-- Any drill-downs with a choice of button icon appear here for quick access --\x3e\n      <div ng-if="(urlTemplates | filter:{icon: {class:\'\'}}).length > 0">\n        <button ng-repeat="urlTemplate in urlTemplates  | filter:{icon: {class:\'\'}}" class="kuiButton kuiButton--basic kuiButton--small gphVertexSelect__button"\n          tooltip="{{urlTemplate.description}}" type="button" ng-disabled="workspace === null ||workspace.nodes.length === 0"\n          ng-click="openUrlTemplate(urlTemplate)">\n          <span class="kuiIcon" ng-class="urlTemplate.icon.class"></span>\n        </button>\n      </div>\n\n      <div ng-if="detail.showDrillDowns">\n        <div class="gphSidebar__header">\n          <span class="kuiIcon fa-info"></span>\n          {{ ::\'xpack.graph.sidebar.drillDownsTitle\' | i18n: { defaultMessage: \'Drill-downs\' } }}\n        </div>\n\n        <div class="gphSidebar__panel">\n          <p\n            ng-if="urlTemplates.length === 0"\n            class="help-block"\n            i18n-id="xpack.graph.sidebar.drillDowns.noDrillDownsHelpText"\n            i18n-default-message="Configure drill-downs from the settings menu"\n          ></p>\n\n          <ul class="list-group">\n            <li class="list-group-item" ng-repeat="urlTemplate in urlTemplates">\n              <span ng-if="urlTemplate.icon" class="kuiIcon gphNoUserSelect">\n                {{urlTemplate.icon.code}}</span>\n              <a ng-click="openUrlTemplate(urlTemplate)">{{urlTemplate.description}}</a>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <div class="gphSidebar__panel" ng-if="(detail.showStyle)&&(workspace.selectedNodes.length>0)">\n        <div class="gphSidebar__header">\n          <span class="kuiIcon fa-paint-brush"></span>\n          {{ ::\'xpack.graph.sidebar.styleVerticesTitle\' | i18n: { defaultMessage: \'Style selected vertices\' } }}\n        </div>\n\n        <div class="form-group form-group-sm gphFormGroup--small">\n          <span ng-repeat="c in colors" ng-disabled="!selectedField.selected" ng-click="workspace.colorSelected(c)"\n            ng-style="{color: c}" class="kuiIcon gphColorPicker__color fa-circle">\n          </span>\n        </div>\n      </div>\n\n      <div class="gphSidebar__panel" ng-if="detail.latestNodeSelection">\n        <div class="gphSidebar__header">\n          <span class="kuiIcon {{detail.latestNodeSelection.icon.class}}" ng-if="detail.latestNodeSelection.icon"></span>\n          {{detail.latestNodeSelection.data.field}} {{detail.latestNodeSelection.data.term}}\n        </div>\n\n        <button\n          class="kuiButton kuiButton--basic kuiButton--iconText kuiButton--small"\n          ng-if="workspace.selectedNodes.length>1||(workspace.selectedNodes.length>0&&workspace.selectedNodes[0] !== detail.latestNodeSelection)"\n          tooltip="{{ \'xpack.graph.sidebar.groupButtonTooltip\' | i18n: {\n            defaultMessage: \'group the currently selected items into {latestSelectionLabel}\',\n            values: { latestSelectionLabel: detail.latestNodeSelection.label },\n          } }}"\n          ng-click="workspace.groupSelections(detail.latestNodeSelection)"\n        >\n          <span class="kuiButton__icon kuiIcon fa-object-group"></span>\n          <span\n            i18n-id="xpack.graph.sidebar.groupButtonLabel"\n            i18n-default-message="group"\n          ></span>\n        </button>\n\n        <button\n          class="kuiButton kuiButton--basic kuiButton--iconText kuiButton--small"\n          ng-if="detail.latestNodeSelection.numChildren>0"\n          tooltip="{{ \'xpack.graph.sidebar.ungroupButtonTooltip\' | i18n: {\n            defaultMessage: \'ungroup {latestSelectionLabel}\',\n            values: { latestSelectionLabel: detail.latestNodeSelection.label },\n          } }}"\n          ng-click="workspace.ungroup(detail.latestNodeSelection)"\n        >\n          <span class="kuiIcon fa-object-ungroup"></span>\n          <span\n            i18n-id="xpack.graph.sidebar.ungroupButtonLabel"\n            i18n-default-message="ungroup"\n          ></span>\n        </button>\n\n        <form class="form-horizontal">\n          <div class="form-group form-group-sm gphFormGroup--small">\n            <label\n              for="labelEdit"\n              class="col-sm-3 control-label"\n              i18n-id="xpack.graph.sidebar.displayLabelLabel"\n              i18n-default-message="Display label"\n            ></label>\n            <div class="col-sm-9">\n              <input type="text" id="labelEdit" class="form-control input-sm" ng-model="detail.latestNodeSelection.label">\n              <div\n                class="help-block"\n                i18n-id="xpack.graph.sidebar.displayLabelHelpText"\n                i18n-default-message="Change the label for this vertex."\n              ></div>\n            </div>\n          </div>\n        </form>\n      </div>\n\n      <div ng-if="detail.mergeCandidates.length>0" class="gphSidebar__panel">\n        <div class="gphSidebar__header">\n          <span class="kuiIcon fa-link"></span>\n          {{ ::\'xpack.graph.sidebar.linkSummaryTitle\' | i18n: { defaultMessage: \'Link summary\' } }}\n        </div>\n        <div ng-repeat="mc in detail.mergeCandidates">\n          <span>\n            <button\n              tooltip="{{ ::\'xpack.graph.sidebar.linkSummary.mergeTerm1ToTerm2ButtonTooltip\' | i18n: {\n                  defaultMessage: \'Merge {term1} into {term2}\',\n                  values: { term1: mc.term1, term2: mc.term2 },\n                } }}"\n              type="button" ng-attr-style="opacity:{{0.2+(mc.overlap/mc.v1)}};"\n              class="kuiButton kuiButton--basic kuiButton--small" ng-click="performMerge(mc.id2, mc.id1)">\n              <span class="kuiIcon fa-chevron-circle-right"></span>\n            </button>\n\n            <span class="gphLinkSummary__term--1">{{mc.term1}}</span>\n            <span class="gphLinkSummary__term--2">{{mc.term2}}</span>\n\n            <button\n              tooltip="{{ ::\'xpack.graph.sidebar.linkSummary.mergeTerm2ToTerm1ButtonTooltip\' | i18n: {\n                defaultMessage: \'Merge {term2} into {term1}\',\n                values: { term1: mc.term1, term2: mc.term2 },\n              } }}"\n              type="button" class="kuiButton kuiButton--basic kuiButton--small"\n              ng-attr-style="opacity:{{0.2+(mc.overlap/mc.v2)}};" ng-click="performMerge(mc.id1, mc.id2)">\n              <span class="kuiIcon fa-chevron-circle-left"></span>\n            </button>\n          </span>\n\n          \x3c!-- Venn diagram of term/shared doc intersections --\x3e\n          <venn-diagram left-value="mc.v1" right-value="mc.v2" overlap="mc.overlap"></venn-diagram>\n\n          <small\n            class="gphLinkSummary__term--1"\n            tooltip="{{ ::\'xpack.graph.sidebar.linkSummary.leftTermCountTooltip\' | i18n: {\n              defaultMessage: \'{count} documents have term {term}\',\n              values: { count: mc.v1, term: mc.term1 },\n            } }}"\n          >{{mc.v1}}</small>\n          <small\n            class="gphLinkSummary__term--1-2"\n            tooltip="{{ ::\'xpack.graph.sidebar.linkSummary.bothTermsCountTooltip\' | i18n: {\n              defaultMessage: \'{count} documents have both terms\',\n              values: { count: mc.overlap },\n            } }}"\n          >&nbsp;({{mc.overlap}})&nbsp;</small>\n          <small\n            class="gphLinkSummary__term--2"\n            tooltip="{{ ::\'xpack.graph.sidebar.linkSummary.rightTermCountTooltip\' | i18n: {\n              defaultMessage: \'{count} documents have term {term}\',\n              values: { count: mc.v2, term: mc.term2 },\n            } }}"\n          >{{mc.v2}}</small>\n        </div>\n      </div>\n      \x3c!-- end edge-merge detail panel --\x3e\n\n    </div>\n    \x3c!-- end sidebar --\x3e\n\n  </div>\n  \x3c!--end svg container--\x3e\n\n</main>\n'},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<graph-listing\n  create-item="create"\n  get-view-url="getViewUrl"\n  edit-item="editItem"\n  find-items="find"\n  delete-items="delete"\n  listing-limit="listingLimit"\n  capabilities="capabilities"\n  initial-filter="initialFilter"\n  core-start="coreStart"\n></graph-listing>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getReadonlyBadge=getReadonlyBadge;var _i18n=__webpack_require__(1);function getReadonlyBadge(uiCapabilities){if(uiCapabilities.graph.save){return null}return{text:_i18n.i18n.translate("xpack.graph.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:_i18n.i18n.translate("xpack.graph.badge.readOnly.tooltip",{defaultMessage:"Unable to save Graph workspaces"}),iconType:"glasses"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GraphApp=GraphApp;var _eui=__webpack_require__(12);var _reactRedux=__webpack_require__(115);var _react=_interopRequireWildcard(__webpack_require__(4));var _react2=__webpack_require__(13);var _field_manager=__webpack_require__(699);var _search_bar=__webpack_require__(719);var _guidance_panel=__webpack_require__(722);var _graph_title=__webpack_require__(724);var _public=__webpack_require__(14);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function GraphApp(props){var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),pickerOpen=_useState2[0],setPickerOpen=_useState2[1];var coreStart=props.coreStart,pluginDataStart=props.pluginDataStart,storage=props.storage,reduxStore=props.reduxStore,noIndexPatterns=props.noIndexPatterns,searchBarProps=_objectWithoutProperties(props,["coreStart","pluginDataStart","storage","reduxStore","noIndexPatterns"]);return _react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(_public.KibanaContextProvider,{services:_objectSpread({appName:"graph",storage:storage,data:pluginDataStart},coreStart)},_react.default.createElement(_reactRedux.Provider,{store:reduxStore},_react.default.createElement(_react.default.Fragment,null,props.isInitialized&&_react.default.createElement(_graph_title.GraphTitle,null),_react.default.createElement("div",{className:"gphGraph__bar"},_react.default.createElement(_search_bar.SearchBar,searchBarProps),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_field_manager.FieldManager,{pickerOpen:pickerOpen,setPickerOpen:setPickerOpen})),!props.isInitialized&&_react.default.createElement(_guidance_panel.GuidancePanel,{noIndexPatterns:noIndexPatterns,onOpenFieldPicker:function onOpenFieldPicker(){setPickerOpen(true)}})))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _field_manager=__webpack_require__(700);Object.keys(_field_manager).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _field_manager[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldManagerComponent=FieldManagerComponent;exports.FieldManager=void 0;var _react=_interopRequireDefault(__webpack_require__(4));var _eui=__webpack_require__(12);var _redux=__webpack_require__(134);var _reactRedux=__webpack_require__(115);var _field_picker=__webpack_require__(701);var _field_editor=__webpack_require__(702);var _state_management=__webpack_require__(122);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function FieldManagerComponent(props){return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",className:"gphFieldManager",alignItems:"center"},props.selectedFields.map((function(field){return _react.default.createElement(_eui.EuiFlexItem,{key:field.name,grow:false},_react.default.createElement(_field_editor.FieldEditor,_extends({},props,{field:field})))})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_field_picker.FieldPicker,_extends({},props,{open:props.pickerOpen,setOpen:props.setPickerOpen}))))}var FieldManager=(0,_reactRedux.connect)((function(state){return{fieldMap:(0,_state_management.fieldMapSelector)(state),allFields:(0,_state_management.fieldsSelector)(state),selectedFields:(0,_state_management.selectedFieldsSelector)(state)}}),(function(dispatch){return(0,_redux.bindActionCreators)({updateFieldProperties:_state_management.updateFieldProperties,selectField:_state_management.selectField,deselectField:_state_management.deselectField},dispatch)}))(FieldManagerComponent);exports.FieldManager=FieldManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldPicker=FieldPicker;var _react=_interopRequireWildcard(__webpack_require__(4));var _eui=__webpack_require__(12);var _i18n=__webpack_require__(1);var _classnames=_interopRequireDefault(__webpack_require__(101));var _public=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function FieldPicker(_ref){var fieldMap=_ref.fieldMap,selectField=_ref.selectField,deselectField=_ref.deselectField,open=_ref.open,setOpen=_ref.setOpen;var allFields=Object.values(fieldMap);var hasFields=allFields.length>0;var _useState=(0,_react.useState)(toOptions(allFields)),_useState2=_slicedToArray(_useState,2),fieldOptions=_useState2[0],setFieldOptions=_useState2[1];(0,_react.useEffect)((function(){if(!open){setFieldOptions(toOptions(Object.values(fieldMap)))}}),[fieldMap,open]);var badgeDescription=_i18n.i18n.translate("xpack.graph.bar.pickFieldsLabel",{defaultMessage:"Add fields"});return _react.default.createElement(_eui.EuiPopover,{id:"graphFieldPicker",anchorPosition:"downLeft",ownFocus:true,panelPaddingSize:"none",button:_react.default.createElement(_eui.EuiBadge,{"data-test-subj":"graph-add-field-button",className:(0,_classnames.default)("gphFieldPicker__button",{"gphFieldPicker__button--disabled":!hasFields}),color:"hollow",iconType:"plusInCircleFilled","aria-disabled":!hasFields,onClick:function onClick(){if(hasFields){setOpen(true)}},onClickAriaLabel:badgeDescription},badgeDescription),isOpen:open,closePopover:function closePopover(){return setOpen(false)},panelClassName:"gphFieldPicker__popoverPanel"},open&&_react.default.createElement(_eui.EuiSelectable,{searchProps:{placeholder:_i18n.i18n.translate("xpack.graph.fieldManager.fieldSearchPlaceholder",{defaultMessage:"Filter by"}),compressed:true,"data-test-subj":"graph-field-search"},listProps:{className:"gphFieldPicker__selectableList"},searchable:true,options:fieldOptions,onChange:function onChange(newOptions){newOptions.forEach((function(option){if(option.checked==="on"&&!fieldMap[option.label].selected){selectField(option.label)}else if(option.checked!=="on"&&fieldMap[option.label].selected){deselectField(option.label)}}));setFieldOptions(newOptions)}},(function(list,search){return _react.default.createElement(_react.default.Fragment,null,search,list)})))}function toOptions(fields){return fields.filter((function(field){return isExplorable(field)||field.selected})).map((function(field){return{label:field.name,prepend:_react.default.createElement(_public.FieldIcon,{className:"eui-alignMiddle",type:field.type,fill:"none"}),checked:field.selected?"on":undefined}}))}var explorableTypes=["string","number","date","ip","boolean"];function isExplorable(field){if(!field.aggregatable){return false}return explorableTypes.includes(field.type)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldEditor=FieldEditor;var _react=_interopRequireWildcard(__webpack_require__(4));var _eui=__webpack_require__(12);var _i18n=__webpack_require__(1);var _classnames=_interopRequireDefault(__webpack_require__(101));var _style_choices=__webpack_require__(150);var _legacy_icon=__webpack_require__(180);var _public=__webpack_require__(14);var _helpers=__webpack_require__(299);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function FieldEditor(_ref){var initialField=_ref.field,updateFieldProperties=_ref.updateFieldProperties,selectField=_ref.selectField,deselectField=_ref.deselectField,allFields=_ref.allFields;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=(0,_react.useState)(initialField),_useState4=_slicedToArray(_useState3,2),currentField=_useState4[0],setCurrentField=_useState4[1];var color=currentField.color,hopSize=currentField.hopSize,lastValidHopSize=currentField.lastValidHopSize,icon=currentField.icon,fieldName=currentField.name;var isDisabled=initialField.hopSize===0;(0,_react.useEffect)((function(){if(currentField!==initialField){setCurrentField(initialField)}}),[initialField]);function updateField(){var name=currentField.name,selected=currentField.selected,type=currentField.type,updatableProperties=_objectWithoutProperties(currentField,["name","selected","type"]);if(fieldName!==initialField.name){deselectField(initialField.name);selectField(fieldName)}updateFieldProperties({fieldName:fieldName,fieldProperties:updatableProperties});setOpen(false)}function updateProp(name,value){setCurrentField(_objectSpread({},currentField,_defineProperty({},name,value)))}function toggleDisabledState(){updateFieldProperties({fieldName:initialField.name,fieldProperties:{hopSize:isDisabled?initialField.lastValidHopSize:0,lastValidHopSize:isDisabled?0:initialField.hopSize}});setOpen(false)}var badgeDescription=isDisabled?_i18n.i18n.translate("xpack.graph.fieldManager.disabledFieldBadgeDescription",{defaultMessage:"Disabled field {field}: Click to configure. Shift+click to enable",values:{field:fieldName}}):_i18n.i18n.translate("xpack.graph.fieldManager.fieldBadgeDescription",{defaultMessage:"Field {field}: Click to configure. Shift+click to disable",values:{field:fieldName}});return _react.default.createElement(_eui.EuiPopover,{id:"graphFieldEditor",anchorPosition:"downLeft",ownFocus:true,panelPaddingSize:"none",button:_react.default.createElement(_eui.EuiBadge,{color:initialField.color,iconSide:"right",className:(0,_classnames.default)("gphFieldEditor__badge",{"gphFieldEditor__badge--disabled":isDisabled}),onClickAriaLabel:badgeDescription,title:"",onClick:function onClick(e){if(e.shiftKey){toggleDisabledState()}else{setOpen(true)}}},_react.default.createElement(_legacy_icon.LegacyIcon,{className:"gphFieldEditor__badgeIcon",icon:initialField.icon}),initialField.name),isOpen:open,closePopover:function closePopover(){return setOpen(false)}},_react.default.createElement(_eui.EuiContextMenu,{initialPanelId:"root",panels:[{id:"root",items:[{name:_i18n.i18n.translate("xpack.graph.fieldManager.settingsLabel",{defaultMessage:"Edit settings"}),icon:_react.default.createElement(_eui.EuiIcon,{type:"pencil",size:"m"}),panel:"settings"},{name:isDisabled?_i18n.i18n.translate("xpack.graph.fieldManager.enableFieldLabel",{defaultMessage:"Enable field"}):_i18n.i18n.translate("xpack.graph.fieldManager.disableFieldLabel",{defaultMessage:"Disable field"}),icon:_react.default.createElement(_eui.EuiIcon,{type:isDisabled?"eye":"eyeClosed",size:"m"}),onClick:toggleDisabledState,toolTipContent:isDisabled?_i18n.i18n.translate("xpack.graph.fieldManager.enableFieldTooltipContent",{defaultMessage:"Turn on discovery of vertices for this field. You can also Shift+click the field to enable it."}):_i18n.i18n.translate("xpack.graph.fieldManager.disableFieldTooltipContent",{defaultMessage:"Turn off discovery of vertices for this field. You can also Shift+click the field to disable it."})},{name:_i18n.i18n.translate("xpack.graph.fieldManager.deleteFieldLabel",{defaultMessage:"Deselect field"}),toolTipContent:_i18n.i18n.translate("xpack.graph.fieldManager.deleteFieldTooltipContent",{defaultMessage:"No new vertices for this field will be discovered.  Existing vertices remain in the graph."}),icon:_react.default.createElement(_eui.EuiIcon,{type:"trash",size:"m"}),onClick:function onClick(){deselectField(initialField.name);setOpen(false)}}]},{id:"settings",title:_i18n.i18n.translate("xpack.graph.fieldManager.settingsFormTitle",{defaultMessage:"Edit"}),width:380,content:_react.default.createElement(_eui.EuiForm,{className:"gphFieldEditor__displayForm"},_react.default.createElement(_eui.EuiKeyboardAccessible,null,_react.default.createElement("span",{style:{opacity:0},onClick:function onClick(){},onKeyPress:function onKeyPress(){}})),_react.default.createElement(_eui.EuiFormRow,{display:"columnCompressed",label:_i18n.i18n.translate("xpack.graph.fieldManager.fieldLabel",{defaultMessage:"Field"})},_react.default.createElement(_eui.EuiComboBox,{onChange:function onChange(choices){var newFieldName=choices[0].value;updateProp("name",newFieldName)},singleSelection:{asPlainText:true},isClearable:false,options:toOptions(allFields,initialField),selectedOptions:[{value:currentField.name,label:currentField.name,type:currentField.type}],renderOption:function renderOption(option,searchValue,contentClassName){var type=option.type,label=option.label;return _react.default.createElement(_eui.EuiFlexGroup,{className:contentClassName,gutterSize:"s",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:null},_react.default.createElement(_public.FieldIcon,{type:type,fill:"none"})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiHighlight,{search:searchValue},label)))},compressed:true})),_react.default.createElement(_eui.EuiFormRow,{display:"columnCompressed",label:_i18n.i18n.translate("xpack.graph.fieldManager.colorLabel",{defaultMessage:"Color"})},_react.default.createElement(_eui.EuiColorPicker,{color:color,onChange:function onChange(newColor){updateProp("color",newColor)},compressed:true})),_react.default.createElement(_eui.EuiFormRow,{display:"columnCompressed",label:_i18n.i18n.translate("xpack.graph.fieldManager.iconLabel",{defaultMessage:"Icon"})},_react.default.createElement(_eui.EuiComboBox,{fullWidth:true,singleSelection:{asPlainText:true},isClearable:false,renderOption:function renderOption(option,searchValue,contentClassName){var label=option.label,value=option.value;return _react.default.createElement("span",{className:contentClassName},_react.default.createElement(_legacy_icon.LegacyIcon,{icon:value})," ",_react.default.createElement(_eui.EuiHighlight,{search:searchValue},label))},options:_style_choices.iconChoices.map((function(currentIcon){return{label:currentIcon.label,value:currentIcon}})),selectedOptions:[{label:icon.label,value:icon}],onChange:function onChange(choices){updateProp("icon",choices[0].value)},compressed:true})),_react.default.createElement(_eui.EuiFormRow,{display:"columnCompressed",label:_react.default.createElement(_react.default.Fragment,null,_i18n.i18n.translate("xpack.graph.fieldManager.maxTermsPerHopLabel",{defaultMessage:"Terms per hop"})," ",_react.default.createElement(_eui.EuiIconTip,{content:_i18n.i18n.translate("xpack.graph.fieldManager.maxTermsPerHopDescription",{defaultMessage:"Controls the maximum number of terms to return for each search step."}),position:"right"}))},_react.default.createElement(_eui.EuiFieldNumber,{step:1,min:1,value:isDisabled?lastValidHopSize:hopSize,onChange:function onChange(_ref2){var valueAsNumber=_ref2.target.valueAsNumber;var updatedHopSize=Number.isNaN(valueAsNumber)?1:valueAsNumber;updateProp(isDisabled?"lastValidHopSize":"hopSize",updatedHopSize)},compressed:true})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiFlexGroup,{direction:"row",justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",onClick:function onClick(){setCurrentField(initialField);setOpen(false)}},_i18n.i18n.translate("xpack.graph.fieldManager.cancelLabel",{defaultMessage:"Cancel"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",fill:true,disabled:(0,_helpers.isEqual)(initialField,currentField),onClick:updateField},_i18n.i18n.translate("xpack.graph.fieldManager.updateLabel",{defaultMessage:"Save changes"})))))}]}))}function toOptions(fields,currentField){return fields.filter((function(field){return!field.selected||field===currentField})).map((function(_ref3){var name=_ref3.name,type=_ref3.type;return{label:name,value:name,type:type}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LegacyIcon=LegacyIcon;var _classnames=_interopRequireDefault(__webpack_require__(101));var _react=_interopRequireDefault(__webpack_require__(4));var _eui=__webpack_require__(12);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function LegacyIcon(props){var icon=_react.default.createElement("i",{className:(0,_classnames.default)("fa",props.className,"gphLegacyIcon",{"gphLegacyIcon--selected":props.selected,"gphLegacyIcon--pickable":!!props.onClick,"gphLegacyIcon--list":props.asListIcon}),"aria-label":props.icon.label},props.icon.code);if(props.onClick){return _react.default.createElement(_eui.EuiButtonEmpty,{role:"option","aria-selected":props.selected,color:props.selected?"primary":"text",onClick:props.onClick},icon)}else{return icon}}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.asKQL=asKQL;var _risonNode=_interopRequireDefault(__webpack_require__(184));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function escapeQuotes(str){return str.replace(/"/g,'\\"')}function asKQL(workspace,joinBy){var nodes=workspace.returnUnpackedGroupeds(workspace.getSelectedOrAllNodes());var clauses=nodes.map((function(node){return'"'.concat(escapeQuotes(node.data.field),'" : "').concat(escapeQuotes(node.data.term),'"')}));var expression=clauses.join(" ".concat(joinBy," "));return encodeURIComponent(_risonNode.default.encode(expression))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.appStateToSavedWorkspace=appStateToSavedWorkspace;function serializeNode(_ref){var data=_ref.data,scaledSize=_ref.scaledSize,parent=_ref.parent,x=_ref.x,y=_ref.y,label=_ref.label,color=_ref.color;var allNodes=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return{x:x,y:y,label:label,color:color,field:data.field,term:data.term,parent:parent?allNodes.indexOf(parent):null,size:scaledSize}}function serializeEdge(_ref2){var source=_ref2.source,target=_ref2.target,weight=_ref2.weight,width=_ref2.width,label=_ref2.label;var allNodes=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return{weight:weight,width:width,label:label,source:allNodes.indexOf(source),target:allNodes.indexOf(target)}}function serializeUrlTemplate(_ref3){var encoder=_ref3.encoder,icon=_ref3.icon,url=_ref3.url,description=_ref3.description,isDefault=_ref3.isDefault;var serializedTemplate={url:url,description:description,isDefault:isDefault,encoderID:encoder.id};if(icon){serializedTemplate.iconClass=icon.class}return serializedTemplate}function serializeField(_ref4){var name=_ref4.name,icon=_ref4.icon,hopSize=_ref4.hopSize,lastValidHopSize=_ref4.lastValidHopSize,color=_ref4.color,selected=_ref4.selected;return{name:name,hopSize:hopSize,lastValidHopSize:lastValidHopSize,color:color,selected:selected,iconClass:icon.class}}function appStateToSavedWorkspace(currentSavedWorkspace,_ref5,canSaveData){var workspace=_ref5.workspace,urlTemplates=_ref5.urlTemplates,advancedSettings=_ref5.advancedSettings,selectedIndex=_ref5.selectedIndex,selectedFields=_ref5.selectedFields;var blacklist=canSaveData?workspace.blacklistedNodes.map((function(node){return serializeNode(node)})):[];var vertices=canSaveData?workspace.nodes.map((function(node){return serializeNode(node,workspace.nodes)})):[];var links=canSaveData?workspace.edges.map((function(edge){return serializeEdge(edge,workspace.nodes)})):[];var mappedUrlTemplates=urlTemplates.map(serializeUrlTemplate);var persistedWorkspaceState={indexPattern:selectedIndex.title,selectedFields:selectedFields.map(serializeField),blacklist:blacklist,vertices:vertices,links:links,urlTemplates:mappedUrlTemplates,exploreControls:advancedSettings};currentSavedWorkspace.wsState=JSON.stringify(persistedWorkspaceState);currentSavedWorkspace.numVertices=vertices.length;currentSavedWorkspace.numLinks=links.length}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.lookupIndexPattern=lookupIndexPattern;exports.mapFields=mapFields;exports.makeNodeId=makeNodeId;exports.savedWorkspaceToAppState=savedWorkspaceToAppState;var _outlink_encoders=__webpack_require__(185);var _style_choices=__webpack_require__(150);var _public=__webpack_require__(107);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var defaultAdvancedSettings={useSignificance:true,sampleSize:2e3,timeoutMillis:5e3,maxValuesPerDoc:1,minDocCount:3};function deserializeUrlTemplate(_ref){var encoderID=_ref.encoderID,iconClass=_ref.iconClass,serializableProps=_objectWithoutProperties(_ref,["encoderID","iconClass"]);var encoder=_outlink_encoders.outlinkEncoders.find((function(outlinkEncoder){return outlinkEncoder.id===encoderID}));if(!encoder){return}var template=_objectSpread({},serializableProps,{encoder:encoder,icon:null});if(iconClass){var iconCandidate=_style_choices.urlTemplateIconChoicesByClass[iconClass];template.icon=iconCandidate?iconCandidate:null}return template}function lookupIndexPattern(savedWorkspace,indexPatterns){var serializedWorkspaceState=JSON.parse(savedWorkspace.wsState);var indexPattern=indexPatterns.find((function(pattern){return pattern.attributes.title===serializedWorkspaceState.indexPattern}));if(indexPattern){return indexPattern}}function mapFields(indexPattern){var blockedFieldNames=["_id","_index","_score","_source","_type"];var defaultHopSize=5;return indexPattern.getNonScriptedFields().filter((function(field){return!blockedFieldNames.includes(field.name)&&!_public.indexPatterns.isNestedField(field)})).map((function(field,index){return{name:field.name,hopSize:defaultHopSize,lastValidHopSize:defaultHopSize,icon:(0,_style_choices.getSuitableIcon)(field.name),color:_style_choices.colorChoices[index%_style_choices.colorChoices.length],selected:false,type:field.type,aggregatable:Boolean(field.aggregatable)}})).sort((function(a,b){if(a.name<b.name){return-1}else if(a.name>b.name){return 1}return 0}))}function getFieldsWithWorkspaceSettings(indexPattern,selectedFields){var allFields=mapFields(indexPattern);selectedFields.forEach((function(serializedField){var workspaceField=allFields.find((function(field){return field.name===serializedField.name}));if(!workspaceField){return}workspaceField.hopSize=serializedField.hopSize;workspaceField.lastValidHopSize=serializedField.lastValidHopSize;workspaceField.color=serializedField.color;workspaceField.icon=_style_choices.iconChoicesByClass[serializedField.iconClass];workspaceField.selected=true}));return allFields}function getBlacklistedNodes(serializedWorkspaceState,allFields){return serializedWorkspaceState.blacklist.map((function(serializedNode){var currentField=allFields.find((function(field){return field.name===serializedNode.field}));return{x:0,y:0,label:serializedNode.label,color:serializedNode.color,icon:currentField.icon,parent:null,scaledSize:0,data:{field:serializedNode.field,term:serializedNode.term}}}))}function resolveGroups(nodes,workspaceInstance){nodes.forEach((function(_ref2){var field=_ref2.field,term=_ref2.term,x=_ref2.x,y=_ref2.y,parent=_ref2.parent;var nodeId=makeNodeId(field,term);var workspaceNode=workspaceInstance.nodesMap[nodeId];workspaceNode.x=x;workspaceNode.y=y;if(parent!==null){var _nodes$parent=nodes[parent],parentField=_nodes$parent.field,parentTerm=_nodes$parent.term;var parentId=makeNodeId(parentField,parentTerm);workspaceNode.parent=workspaceInstance.nodesMap[parentId]}}))}function getNodesAndEdges(persistedWorkspaceState,allFields){return{nodes:persistedWorkspaceState.vertices.map((function(serializedNode){return _objectSpread({},serializedNode,{id:"",icon:allFields.find((function(field){return field.name===serializedNode.field})).icon,data:{field:serializedNode.field,term:serializedNode.term}})})),edges:persistedWorkspaceState.links.map((function(serializedEdge){return _objectSpread({},serializedEdge,{id:""})}))}}function makeNodeId(field,term){return field+".."+term}function savedWorkspaceToAppState(savedWorkspace,indexPattern,workspaceInstance){var _workspaceInstance$bl;var persistedWorkspaceState=JSON.parse(savedWorkspace.wsState);var urlTemplates=persistedWorkspaceState.urlTemplates.map(deserializeUrlTemplate).filter((function(template){return Boolean(template)}));var allFields=getFieldsWithWorkspaceSettings(indexPattern,persistedWorkspaceState.selectedFields);var selectedFields=allFields.filter((function(field){return field.selected}));workspaceInstance.options.vertex_fields=selectedFields;var advancedSettings=Object.assign({},defaultAdvancedSettings,persistedWorkspaceState.exploreControls);if(advancedSettings.sampleDiversityField){var serializedField=advancedSettings.sampleDiversityField;advancedSettings.sampleDiversityField=allFields.find((function(field){return field.name===serializedField.name}))}workspaceInstance.options.exploreControls=advancedSettings;var graph=getNodesAndEdges(persistedWorkspaceState,allFields);workspaceInstance.mergeGraph(graph);resolveGroups(persistedWorkspaceState.vertices,workspaceInstance);var blacklistedNodes=getBlacklistedNodes(persistedWorkspaceState,allFields);(_workspaceInstance$bl=workspaceInstance.blacklistedNodes).push.apply(_workspaceInstance$bl,_toConsumableArray(blacklistedNodes));return{urlTemplates:urlTemplates,advancedSettings:advancedSettings,allFields:allFields}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.openSaveModal=openSaveModal;var _react=_interopRequireDefault(__webpack_require__(4));var _save_modal=__webpack_require__(710);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function openSaveModal(_ref){var savePolicy=_ref.savePolicy,hasData=_ref.hasData,workspace=_ref.workspace,saveWorkspace=_ref.saveWorkspace,showSaveModal=_ref.showSaveModal,I18nContext=_ref.I18nContext,services=_ref.services;var currentTitle=workspace.title;var currentDescription=workspace.description;var onSave=function onSave(_ref2){var newTitle=_ref2.newTitle,newDescription=_ref2.newDescription,newCopyOnSave=_ref2.newCopyOnSave,isTitleDuplicateConfirmed=_ref2.isTitleDuplicateConfirmed,onTitleDuplicate=_ref2.onTitleDuplicate,dataConsent=_ref2.dataConsent;workspace.title=newTitle;workspace.description=newDescription;workspace.copyOnSave=newCopyOnSave;var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return saveWorkspace(saveOptions,dataConsent,services).then((function(response){if(!("id"in response)||!Boolean(response.id)){workspace.title=currentTitle;workspace.description=currentDescription}return response}))};showSaveModal(_react.default.createElement(_save_modal.SaveModal,{savePolicy:savePolicy,hasData:hasData,onSave:onSave,onClose:function onClose(){},title:workspace.title,description:workspace.description,showCopyOnSave:Boolean(workspace.id)}),I18nContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SaveModal=SaveModal;var _react=_interopRequireWildcard(__webpack_require__(4));var _eui=__webpack_require__(12);var _i18n=__webpack_require__(1);var _public=__webpack_require__(135);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function SaveModal(_ref){var _onSave=_ref.onSave,onClose=_ref.onClose,title=_ref.title,description=_ref.description,showCopyOnSave=_ref.showCopyOnSave,savePolicy=_ref.savePolicy,hasData=_ref.hasData;var _useState=(0,_react.useState)(description),_useState2=_slicedToArray(_useState,2),newDescription=_useState2[0],setDescription=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),dataConsent=_useState4[0],setDataConsent=_useState4[1];return _react.default.createElement(_public.SavedObjectSaveModal,{onSave:function onSave(props){_onSave(_objectSpread({},props,{newDescription:newDescription,dataConsent:dataConsent}))},onClose:onClose,title:title,showCopyOnSave:showCopyOnSave,objectType:_i18n.i18n.translate("xpack.graph.topNavMenu.save.objectType",{defaultMessage:"graph"}),showDescription:false,options:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_i18n.i18n.translate("xpack.graph.topNavMenu.save.descriptionInputLabel",{defaultMessage:"Description"})},_react.default.createElement(_eui.EuiTextArea,{"data-test-subj":"dashboardDescription",value:newDescription,onChange:function onChange(e){setDescription(e.target.value)},fullWidth:true,rows:5})),savePolicy==="configAndDataWithConsent"&&hasData&&_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:"",helpText:_i18n.i18n.translate("xpack.graph.topNavMenu.save.saveConfigurationOnlyWarning",{defaultMessage:"Without this setting, the data in this workspace will be cleared and only the configuration will be saved."})},_react.default.createElement(_eui.EuiSwitch,{id:"graphDataConsent",label:_i18n.i18n.translate("xpack.graph.topNavMenu.save.saveGraphContentCheckboxLabel",{defaultMessage:"Save graph content"}),checked:dataConsent,onChange:function onChange(e){setDataConsent(e.target.checked)}})),savePolicy==="config"&&hasData&&_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiCallOut,{"data-test-subj":"graphNoDataSavedMsg"},_react.default.createElement("p",null,_i18n.i18n.translate("xpack.graph.topNavMenu.save.saveConfigurationOnlyText",{defaultMessage:"The data in this workspace will be cleared and only the configuration will be saved."}))),_react.default.createElement(_eui.EuiSpacer,null)))})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractReferences=extractReferences;exports.injectReferences=injectReferences;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function extractReferences(_ref){var attributes=_ref.attributes,_ref$references=_ref.references,references=_ref$references===void 0?[]:_ref$references;var state=JSON.parse(JSON.parse(String(attributes.wsState)));var indexPattern=state.indexPattern;if(!indexPattern){throw new Error('indexPattern attribute is missing in "wsState"')}state.indexPatternRefName="indexPattern_0";delete state.indexPattern;return{references:[].concat(_toConsumableArray(references),[{name:"indexPattern_0",type:"index-pattern",id:indexPattern}]),attributes:_objectSpread({},attributes,{wsState:JSON.stringify(JSON.stringify(state))})}}function injectReferences(savedObject,references){if(typeof savedObject.wsState!=="string"){return}var state=JSON.parse(savedObject.wsState);if(!state.indexPatternRefName){return}var indexPatternReference=references.find((function(reference){return reference.name===state.indexPatternRefName}));if(!indexPatternReference){throw new Error('Could not find reference "'.concat(state.indexPatternRefName,'"'))}state.indexPattern=indexPatternReference.id;delete state.indexPatternRefName;savedObject.wsState=JSON.stringify(state)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createServerResultNode=createServerResultNode;exports.fetchTopNodes=fetchTopNodes;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DEFAULT_SHARD_SIZE=5e3;function createSamplerSearchBody(aggs){var shardSize=arguments.length>1&&arguments[1]!==undefined?arguments[1]:DEFAULT_SHARD_SIZE;return{size:0,aggs:{sample:{sampler:{shard_size:shardSize},aggs:aggs}}}}function createTopTermsAggName(fieldName){return"top_values_".concat(fieldName)}function createTopTermsSubAgg(field){var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;return _defineProperty({},createTopTermsAggName(field),{terms:{field:field,size:size}})}function getTopTermsResult(response,fieldName){if(!response.aggregations){return[]}return response.aggregations.sample[createTopTermsAggName(fieldName)].buckets.map((function(bucket){return bucket.key}))}function createServerResultNode(fieldName,term,allFields){var field=allFields.find((function(_ref2){var name=_ref2.name;return name===fieldName}));if(!field){throw new Error("Invariant error: field not found")}return{field:fieldName,term:term,id:"",color:field.color,icon:field.icon,data:{field:fieldName,term:term},label:term}}function fetchTopNodes(_x,_x2,_x3){return _fetchTopNodes.apply(this,arguments)}function _fetchTopNodes(){_fetchTopNodes=_asyncToGenerator(regeneratorRuntime.mark((function _callee(post,index,fields){var aggs,body,response,nodes;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:aggs=fields.map((function(_ref3){var name=_ref3.name;return name})).map((function(fieldName){return createTopTermsSubAgg(fieldName)})).reduce((function(allAggs,subAgg){return _objectSpread({},allAggs,{},subAgg)}));body=createSamplerSearchBody(aggs);_context.next=4;return post("../api/graph/searchProxy",{body:JSON.stringify({index:index,body:body})});case 4:response=_context.sent.resp;nodes=[];fields.forEach((function(_ref4){var name=_ref4.name;var topTerms=getTopTermsResult(response,name);var fieldNodes=topTerms.map((function(term){return createServerResultNode(name,term,fields)}));nodes.push.apply(nodes,_toConsumableArray(fieldNodes))}));return _context.abrupt("return",nodes);case 8:case"end":return _context.stop()}}}),_callee)})));return _fetchTopNodes.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createRootReducer=createRootReducer;exports.createGraphStore=void 0;var _reduxSaga=_interopRequireDefault(__webpack_require__(714));var _redux=__webpack_require__(134);var _fields=__webpack_require__(129);var _url_templates=__webpack_require__(183);var _advanced_settings=__webpack_require__(151);var _datasource=__webpack_require__(114);var _datasource2=__webpack_require__(303);var _persistence=__webpack_require__(304);var _meta_data=__webpack_require__(188);var _workspace=__webpack_require__(306);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createRootReducer(addBasePath){return(0,_redux.combineReducers)({fields:_fields.fieldsReducer,urlTemplates:(0,_url_templates.urlTemplatesReducer)(addBasePath),advancedSettings:_advanced_settings.advancedSettingsReducer,datasource:_datasource.datasourceReducer,metaData:_meta_data.metaDataReducer})}function registerSagas(sagaMiddleware,deps){sagaMiddleware.run((0,_datasource2.datasourceSaga)(deps));sagaMiddleware.run((0,_persistence.loadingSaga)(deps));sagaMiddleware.run((0,_persistence.savingSaga)(deps));sagaMiddleware.run((0,_fields.syncFieldsSaga)(deps));sagaMiddleware.run((0,_fields.syncNodeStyleSaga)(deps));sagaMiddleware.run((0,_advanced_settings.syncSettingsSaga)(deps));sagaMiddleware.run((0,_fields.updateSaveButtonSaga)(deps));sagaMiddleware.run((0,_meta_data.syncBreadcrumbSaga)(deps));sagaMiddleware.run((0,_url_templates.syncTemplatesSaga)(deps));sagaMiddleware.run((0,_workspace.fillWorkspaceSaga)(deps))}var createGraphStore=function createGraphStore(deps){var sagaMiddleware=(0,_reduxSaga.default)();var rootReducer=createRootReducer(deps.addBasePath);var store=(0,_redux.createStore)(rootReducer,(0,_redux.applyMiddleware)(sagaMiddleware));registerSagas(sagaMiddleware,deps);return store};exports.createGraphStore=createGraphStore},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchBarComponent=SearchBarComponent;exports.SearchBar=void 0;var _eui=__webpack_require__(12);var _react=_interopRequireWildcard(__webpack_require__(4));var _i18n=__webpack_require__(1);var _reactRedux=__webpack_require__(115);var _source_modal=__webpack_require__(307);var _state_management=__webpack_require__(122);var _public=__webpack_require__(14);var _public2=__webpack_require__(107);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function queryToString(query,indexPattern){if(query.language==="kuery"&&typeof query.query==="string"){var dsl=_public2.esKuery.toElasticsearchQuery(_public2.esKuery.fromKueryExpression(query.query),indexPattern);return JSON.stringify(dsl)}if(typeof query.query==="string"){return query.query}return JSON.stringify(query.query)}function SearchBarComponent(props){var currentDatasource=props.currentDatasource,onQuerySubmit=props.onQuerySubmit,isLoading=props.isLoading,onIndexPatternSelected=props.onIndexPatternSelected,initialQuery=props.initialQuery,indexPatternProvider=props.indexPatternProvider,confirmWipeWorkspace=props.confirmWipeWorkspace;var _useState=(0,_react.useState)({language:"kuery",query:initialQuery||""}),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=(0,_react.useState)(undefined),_useState4=_slicedToArray(_useState3,2),currentIndexPattern=_useState4[0],setCurrentIndexPattern=_useState4[1];(0,_react.useEffect)((function(){function fetchPattern(){return _fetchPattern.apply(this,arguments)}function _fetchPattern(){_fetchPattern=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!currentDatasource){_context.next=8;break}_context.t0=setCurrentIndexPattern;_context.next=4;return indexPatternProvider.get(currentDatasource.id);case 4:_context.t1=_context.sent;(0,_context.t0)(_context.t1);_context.next=9;break;case 8:setCurrentIndexPattern(undefined);case 9:case"end":return _context.stop()}}}),_callee)})));return _fetchPattern.apply(this,arguments)}fetchPattern()}),[currentDatasource,indexPatternProvider]);var kibana=(0,_public.useKibana)();var services=kibana.services,overlays=kibana.overlays;var savedObjects=services.savedObjects,uiSettings=services.uiSettings;if(!overlays)return null;return _react.default.createElement("form",{onSubmit:function onSubmit(e){e.preventDefault();if(!isLoading&&currentIndexPattern){onQuerySubmit(queryToString(query,currentIndexPattern))}}},_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_public2.QueryStringInput,{disableAutoFocus:true,bubbleSubmitEvent:true,indexPatterns:currentIndexPattern?[currentIndexPattern]:[],placeholder:_i18n.i18n.translate("xpack.graph.bar.searchFieldPlaceholder",{defaultMessage:"Search your data and add to graph"}),query:query,prepend:_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.graph.bar.pickSourceTooltip",{defaultMessage:"Select a data source to begin graphing relationships."})},_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs",className:"gphSearchBar__datasourceButton","data-test-subj":"graphDatasourceButton",onClick:function onClick(){confirmWipeWorkspace((function(){return(0,_source_modal.openSourceModal)({overlays:overlays,savedObjects:savedObjects,uiSettings:uiSettings},onIndexPatternSelected)}),_i18n.i18n.translate("xpack.graph.clearWorkspace.confirmText",{defaultMessage:"If you change data sources, your current fields and vertices will be reset."}),{confirmButtonText:_i18n.i18n.translate("xpack.graph.clearWorkspace.confirmButtonLabel",{defaultMessage:"Change data source"}),title:_i18n.i18n.translate("xpack.graph.clearWorkspace.modalTitle",{defaultMessage:"Unsaved changes"})})}},currentIndexPattern?currentIndexPattern.title:_i18n.i18n.translate("xpack.graph.bar.pickSourceLabel",{defaultMessage:"Select a data source"}))),onChange:setQuery})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{fill:true,type:"submit",disabled:isLoading||!currentIndexPattern,"data-test-subj":"graph-explore-button"},_i18n.i18n.translate("xpack.graph.bar.exploreLabel",{defaultMessage:"Graph"})))))}var SearchBar=(0,_reactRedux.connect)((function(state){var datasource=(0,_state_management.datasourceSelector)(state);return{currentDatasource:datasource.current.type==="indexpattern"?datasource.current:undefined}}),(function(dispatch){return{onIndexPatternSelected:function onIndexPatternSelected(indexPattern){dispatch((0,_state_management.requestDatasource)({type:"indexpattern",id:indexPattern.id,title:indexPattern.attributes.title}))}}}))(SearchBarComponent);exports.SearchBar=SearchBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SourceModal=SourceModal;var _eui=__webpack_require__(12);var _react=__webpack_require__(13);var _react2=_interopRequireDefault(__webpack_require__(4));var _source_picker=__webpack_require__(721);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SourceModal(props){return _react2.default.createElement("div",{className:"gphSourceModal"},_react2.default.createElement(_eui.EuiModalHeader,null,_react2.default.createElement(_eui.EuiModalHeaderTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.graph.sourceModal.title",defaultMessage:"Select a data source"}))),_react2.default.createElement(_eui.EuiModalBody,null,_react2.default.createElement(_source_picker.SourcePicker,props)))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SourcePicker=SourcePicker;var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(4));var _public=__webpack_require__(135);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var fixedPageSize=8;function SourcePicker(_ref){var savedObjects=_ref.savedObjects,uiSettings=_ref.uiSettings,onIndexPatternSelected=_ref.onIndexPatternSelected;return _react.default.createElement(_public.SavedObjectFinderUi,{savedObjects:savedObjects,uiSettings:uiSettings,onChoose:function onChoose(_id,_type,_name,indexPattern){onIndexPatternSelected(indexPattern)},showFilter:false,noItemsMessage:_i18n.i18n.translate("xpack.graph.sourceModal.notFoundLabel",{defaultMessage:"No data sources found."}),savedObjectMetaData:[{type:"index-pattern",getIconForSavedObject:function getIconForSavedObject(){return"indexPatternApp"},name:_i18n.i18n.translate("xpack.graph.sourceModal.savedObjectType.indexPattern",{defaultMessage:"Index pattern"}),showSavedObject:function showSavedObject(indexPattern){return!indexPattern.attributes.type},includeFields:["type"]}],fixedPageSize:fixedPageSize})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _guidance_panel=__webpack_require__(723);Object.keys(_guidance_panel).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _guidance_panel[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GuidancePanel=void 0;var _react=_interopRequireDefault(__webpack_require__(4));var _eui=__webpack_require__(12);var _i18n=__webpack_require__(1);var _classnames=_interopRequireDefault(__webpack_require__(101));var _react2=__webpack_require__(13);var _reactRedux=__webpack_require__(115);var _state_management=__webpack_require__(122);var _source_modal=__webpack_require__(307);var _public=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ListItem(_ref){var children=_ref.children,state=_ref.state;return _react.default.createElement("li",{className:(0,_classnames.default)("gphGuidancePanel__item",{"gphGuidancePanel__item--disabled":state==="disabled"}),"aria-disabled":state==="disabled","aria-current":state==="active"?"step":undefined},state!=="disabled"&&_react.default.createElement("span",{className:(0,_classnames.default)("gphGuidancePanel__itemIcon",{"gphGuidancePanel__itemIcon--done":state==="done"}),"aria-hidden":true},_react.default.createElement(_eui.EuiIcon,{type:state==="active"?"sortRight":"check"})),_react.default.createElement(_eui.EuiText,null,children))}function GuidancePanelComponent(props){var onFillWorkspace=props.onFillWorkspace,onOpenFieldPicker=props.onOpenFieldPicker,onIndexPatternSelected=props.onIndexPatternSelected,hasDatasource=props.hasDatasource,hasFields=props.hasFields,noIndexPatterns=props.noIndexPatterns;var kibana=(0,_public.useKibana)();var services=kibana.services,overlays=kibana.overlays;var savedObjects=services.savedObjects,uiSettings=services.uiSettings,chrome=services.chrome,application=services.application;if(!overlays||!chrome||!application)return null;var onOpenDatasourcePicker=function onOpenDatasourcePicker(){(0,_source_modal.openSourceModal)({overlays:overlays,savedObjects:savedObjects,uiSettings:uiSettings},onIndexPatternSelected)};var content=_react.default.createElement(_eui.EuiPanel,{"data-test-subj":"graphGuidancePanel"},_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIcon,{type:"graphApp",size:"xxl"})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,null,_react.default.createElement("h1",{id:"graphHeading"},_i18n.i18n.translate("xpack.graph.guidancePanel.title",{defaultMessage:"Three steps to your graph"})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement("ol",{className:"gphGuidancePanel__list","aria-labelledby":"graphHeading"},_react.default.createElement(ListItem,{state:hasDatasource?"done":"active"},_react.default.createElement(_eui.EuiLink,{onClick:onOpenDatasourcePicker},_i18n.i18n.translate("xpack.graph.guidancePanel.datasourceItem.indexPatternButtonLabel",{defaultMessage:"Select a data source."}))),_react.default.createElement(ListItem,{state:hasFields?"done":hasDatasource?"active":"disabled"},_react.default.createElement(_eui.EuiLink,{onClick:onOpenFieldPicker,disabled:!hasFields&&!hasDatasource},_i18n.i18n.translate("xpack.graph.guidancePanel.fieldsItem.fieldsButtonLabel",{defaultMessage:"Add fields."}))),_react.default.createElement(ListItem,{state:hasFields?"active":"disabled"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.graph.guidancePanel.nodesItem.description",defaultMessage:"Enter a query in the search bar to start exploring. Don't know where to start? {topTerms}.",values:{topTerms:_react.default.createElement(_eui.EuiLink,{onClick:onFillWorkspace,disabled:!hasFields},_i18n.i18n.translate("xpack.graph.guidancePanel.nodesItem.topTermsButtonLabel",{defaultMessage:"Graph the top terms"}))}}))))));if(noIndexPatterns){var managementUrl=chrome.navLinks.get("kibana:stack_management").url;var indexPatternUrl="".concat(managementUrl,"/kibana/index_patterns");var sampleDataUrl="".concat(application.getUrlForApp("kibana"),"#/home/tutorial_directory/sampleData");content=_react.default.createElement(_eui.EuiPanel,{paddingSize:"none"},_react.default.createElement(_eui.EuiCallOut,{color:"warning",iconType:"help",title:_i18n.i18n.translate("xpack.graph.noDataSourceNotificationMessageTitle",{defaultMessage:"No data source"}),heading:"h1"},_react.default.createElement(_eui.EuiScreenReaderOnly,null,_react.default.createElement("p",{id:"graphHeading"},_i18n.i18n.translate("xpack.graph.noDataSourceNotificationMessageTitle",{defaultMessage:"No data source"}))),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.graph.noDataSourceNotificationMessageText",defaultMessage:"No data sources found. Go to {managementIndexPatternsLink} and create an index pattern for your Elasticsearch indices.",values:{managementIndexPatternsLink:_react.default.createElement("a",{href:indexPatternUrl},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.graph.noDataSourceNotificationMessageText.managementIndexPatternLinkText",defaultMessage:"Management > Index Patterns"}))}})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.graph.listing.noDataSource.newToKibanaDescription",defaultMessage:"New to Kibana? You can also use our {sampleDataInstallLink}.",values:{sampleDataInstallLink:_react.default.createElement(_eui.EuiLink,{href:sampleDataUrl},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.graph.listing.noDataSource.sampleDataInstallLinkText",defaultMessage:"sample data"}))}}))))}return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react.default.createElement(_eui.EuiFlexItem,{className:"gphGuidancePanel"},content))}var GuidancePanel=(0,_reactRedux.connect)((function(state){return{hasDatasource:(0,_state_management.hasDatasourceSelector)(state),hasFields:(0,_state_management.hasFieldsSelector)(state)}}),(function(dispatch){return{onIndexPatternSelected:function onIndexPatternSelected(indexPattern){dispatch((0,_state_management.requestDatasource)({type:"indexpattern",id:indexPattern.id,title:indexPattern.attributes.title}))},onFillWorkspace:function onFillWorkspace(){dispatch((0,_state_management.fillWorkspace)())}}}))(GuidancePanelComponent);exports.GuidancePanel=GuidancePanel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GraphTitle=void 0;var _reactRedux=__webpack_require__(115);var _eui=__webpack_require__(12);var _react=_interopRequireDefault(__webpack_require__(4));var _state_management=__webpack_require__(122);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GraphTitle=(0,_reactRedux.connect)((function(state){return{title:(0,_state_management.metaDataSelector)(state).title}}))((function(_ref){var title=_ref.title;return _react.default.createElement(_eui.EuiScreenReaderOnly,null,_react.default.createElement("h1",{id:"graphHeading"},title))}));exports.GraphTitle=GraphTitle},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _venn_diagram=__webpack_require__(726);Object.keys(_venn_diagram).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _venn_diagram[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VennDiagram=VennDiagram;var _venn=__webpack_require__(727);var _react=_interopRequireDefault(__webpack_require__(4));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getRadius(area){return Math.sqrt(area/Math.PI)}function VennDiagram(_ref){var leftValue=_ref.leftValue,rightValue=_ref.rightValue,overlap=_ref.overlap;var leftRadius=getRadius(leftValue);var rightRadius=getRadius(rightValue);var maxRadius=Math.max(leftRadius,rightRadius);var imageHeight=maxRadius*2;var imageWidth=maxRadius*4;var leftCenter=leftRadius;var rightCenter=leftCenter+(0,_venn.distanceFromIntersectArea)(leftRadius,rightRadius,overlap);var blankWidth=imageWidth-(rightCenter+rightRadius);var padding=blankWidth/2;var viewBoxDims="0 0 ".concat(imageWidth," ").concat(imageHeight);return _react.default.createElement("div",null,_react.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:100,height:60,viewBox:viewBoxDims},_react.default.createElement("g",null,_react.default.createElement("circle",{cx:leftCenter+padding,cy:maxRadius,r:leftRadius,className:"gphVennDiagram__left"}),_react.default.createElement("circle",{cx:rightCenter+padding,cy:maxRadius,r:rightRadius,className:"gphVennDiagram__right"}))))}},,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Listing=Listing;var _i18n=__webpack_require__(1);var _react=__webpack_require__(13);var _react2=_interopRequireWildcard(__webpack_require__(4));var _eui=__webpack_require__(12);var _public=__webpack_require__(14);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function Listing(props){return _react2.default.createElement(_react.I18nProvider,null,_react2.default.createElement(_public.TableListView,{headingId:"graphListingHeading",createItem:props.capabilities.save?props.createItem:undefined,findItems:props.findItems,deleteItems:props.capabilities.delete?props.deleteItems:undefined,editItem:props.capabilities.save?props.editItem:undefined,tableColumns:getTableColumns(props.getViewUrl),listingLimit:props.listingLimit,initialFilter:props.initialFilter,noItemsFragment:getNoItemsMessage(props.capabilities.save===false,props.createItem,props.coreStart.application),toastNotifications:props.coreStart.notifications.toasts,entityName:_i18n.i18n.translate("xpack.graph.listing.table.entityName",{defaultMessage:"graph"}),entityNamePlural:_i18n.i18n.translate("xpack.graph.listing.table.entityNamePlural",{defaultMessage:"graphs"}),tableListTitle:_i18n.i18n.translate("xpack.graph.listing.graphsTitle",{defaultMessage:"Graphs"}),uiSettings:props.coreStart.uiSettings}))}function getNoItemsMessage(hideWriteControls,createItem,application){if(hideWriteControls){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiEmptyPrompt,{iconType:"graphApp",title:_react2.default.createElement("h1",{id:"graphListingHeading"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.graph.listing.noItemsMessage",defaultMessage:"Looks like you don't have any graphs."}))}))}var sampleDataUrl="".concat(application.getUrlForApp("kibana"),"#/home/tutorial_directory/sampleData");return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiEmptyPrompt,{iconType:"graphApp",title:_react2.default.createElement("h1",{id:"graphListingHeading"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.graph.listing.createNewGraph.title",defaultMessage:"Create your first graph"})),body:_react2.default.createElement(_react2.Fragment,null,_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.graph.listing.createNewGraph.combineDataViewFromKibanaAppDescription",defaultMessage:"Discover patterns and relationships in your Elasticsearch indices."})),_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.graph.listing.createNewGraph.newToKibanaDescription",defaultMessage:"New to Kibana? Get started with {sampleDataInstallLink}.",values:{sampleDataInstallLink:_react2.default.createElement(_eui.EuiLink,{href:sampleDataUrl},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.graph.listing.createNewGraph.sampleDataInstallLinkText",defaultMessage:"sample data"}))}}))),actions:_react2.default.createElement(_eui.EuiButton,{onClick:createItem,fill:true,iconType:"plusInCircle","data-test-subj":"graphCreateGraphPromptButton"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.graph.listing.createNewGraph.createButtonLabel",defaultMessage:"Create graph"}))}))}function getTableColumns(getViewUrl){return[{field:"title",name:_i18n.i18n.translate("xpack.graph.listing.table.titleColumnName",{defaultMessage:"Title"}),sortable:true,render:function render(field,record){return _react2.default.createElement(_eui.EuiLink,{href:getViewUrl(record),"data-test-subj":"graphListingTitleLink-".concat(record.title.split(" ").join("-"))},field)}},{field:"description",name:_i18n.i18n.translate("xpack.graph.listing.table.descriptionColumnName",{defaultMessage:"Description"}),dataType:"string",sortable:true}]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _settings=__webpack_require__(735);Object.keys(_settings).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _settings[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SettingsComponent=SettingsComponent;exports.Settings=void 0;var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(4));var _eui=__webpack_require__(12);var _reactRedux=__webpack_require__(115);var _redux=__webpack_require__(134);var _advanced_settings_form=__webpack_require__(736);var _blacklist_form=__webpack_require__(737);var _url_template_list=__webpack_require__(738);var _state_management=__webpack_require__(122);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var tabs=[{id:"advancedSettings",title:_i18n.i18n.translate("xpack.graph.settings.advancedSettingsTitle",{defaultMessage:"Advanced settings"}),component:_advanced_settings_form.AdvancedSettingsForm},{id:"blacklist",title:_i18n.i18n.translate("xpack.graph.settings.blacklistTitle",{defaultMessage:"Block list"}),component:_blacklist_form.BlacklistForm},{id:"drillDowns",title:_i18n.i18n.translate("xpack.graph.settings.drillDownsTitle",{defaultMessage:"Drilldowns"}),component:_url_template_list.UrlTemplateList}];function SettingsComponent(_ref){var observable=_ref.observable,props=_objectWithoutProperties(_ref,["observable"]);var _useState=(0,_react.useState)(undefined),_useState2=_slicedToArray(_useState,2),angularProps=_useState2[0],setAngularProps=_useState2[1];var _useState3=(0,_react.useState)(0),_useState4=_slicedToArray(_useState3,2),activeTab=_useState4[0],setActiveTab=_useState4[1];(0,_react.useEffect)((function(){observable.subscribe(setAngularProps)}),[observable]);if(!angularProps)return null;var ActiveTabContent=tabs[activeTab].component;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiTitle,{size:"m"},_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.graph.settings.title",{defaultMessage:"Settings"}))),_react.default.createElement(_eui.EuiTabs,{style:{margin:"0 -16px -25px"}},tabs.filter((function(_ref2){var id=_ref2.id;return id!=="drillDowns"||angularProps.canEditDrillDownUrls})).map((function(_ref3,index){var title=_ref3.title;return _react.default.createElement(_eui.EuiTab,{key:title,isSelected:activeTab===index,onClick:function onClick(){setActiveTab(index)}},title)})))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(ActiveTabContent,_extends({},angularProps,props))))}var Settings=(0,_reactRedux.connect)((function(state){return{advancedSettings:(0,_state_management.settingsSelector)(state),urlTemplates:(0,_state_management.templatesSelector)(state),allFields:(0,_state_management.fieldsSelector)(state)}}),(function(dispatch){return(0,_redux.bindActionCreators)({updateSettings:_state_management.updateSettings,saveTemplate:_state_management.saveTemplate,removeTemplate:_state_management.removeTemplate},dispatch)}))(SettingsComponent);exports.Settings=Settings},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AdvancedSettingsForm=AdvancedSettingsForm;var _react=_interopRequireDefault(__webpack_require__(4));var _eui=__webpack_require__(12);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function AdvancedSettingsForm(_ref){var advancedSettings=_ref.advancedSettings,updateSettings=_ref.updateSettings,allFields=_ref.allFields;function updateSetting(key,value){updateSettings(_objectSpread({},advancedSettings,_defineProperty({},key,value)))}function getNumberUpdater(key){return function(_ref2){var valueAsNumber=_ref2.target.valueAsNumber;updateSetting(key,Number.isNaN(valueAsNumber)?1:valueAsNumber)}}return _react.default.createElement("form",null,_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,helpText:_i18n.i18n.translate("xpack.graph.settings.advancedSettings.sampleSizeInputHelpText",{defaultMessage:"Terms are identified from samples of the most relevant documents. Bigger samples are not necessarily betterthey can be slower and less relevant."}),label:_i18n.i18n.translate("xpack.graph.settings.advancedSettings.sampleSizeInputLabel",{defaultMessage:"Sample size"})},_react.default.createElement(_eui.EuiFieldNumber,{fullWidth:true,min:1,step:1,value:advancedSettings.sampleSize,onChange:getNumberUpdater("sampleSize")})),_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,helpText:_i18n.i18n.translate("xpack.graph.settings.advancedSettings.significantLinksCheckboxHelpText",{defaultMessage:"Identify terms that are significant rather than popular."}),label:""},_react.default.createElement(_eui.EuiSwitch,{label:_i18n.i18n.translate("xpack.graph.settings.advancedSettings.significantLinksCheckboxLabel",{defaultMessage:"Significant links"}),id:"graphSignificance",checked:advancedSettings.useSignificance,onChange:function onChange(_ref3){var checked=_ref3.target.checked;return updateSetting("useSignificance",checked)}})),_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,helpText:_i18n.i18n.translate("xpack.graph.settings.advancedSettings.certaintyInputHelpText",{defaultMessage:"The minimum number of documents before introducing a related term."}),label:_i18n.i18n.translate("xpack.graph.settings.advancedSettings.certaintyInputLabel",{defaultMessage:"Certainty"})},_react.default.createElement(_eui.EuiFieldNumber,{fullWidth:true,min:1,step:1,value:advancedSettings.minDocCount,onChange:getNumberUpdater("minDocCount")})),_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,helpText:_react.default.createElement(_react.default.Fragment,null,_i18n.i18n.translate("xpack.graph.settings.advancedSettings.diversityFieldInputHelpText1",{defaultMessage:"To avoid dominating samples with a single voice, select a field to help identify the source of bias."})," ",_react.default.createElement("em",null,_i18n.i18n.translate("xpack.graph.settings.advancedSettings.diversityFieldInputHelpText2",{defaultMessage:"This must be a single-term field, or searches will be rejected."}))),label:_i18n.i18n.translate("xpack.graph.settings.advancedSettings.diversityFieldInputLabel",{defaultMessage:"Diversity field"})},_react.default.createElement(_eui.EuiComboBox,{fullWidth:true,placeholder:_i18n.i18n.translate("xpack.graph.settings.advancedSettings.diversityFieldInputOptionLabel",{defaultMessage:"No diversification"}),singleSelection:{asPlainText:true},options:allFields.map((function(field){return{label:field.name,value:field}})),selectedOptions:advancedSettings.sampleDiversityField?[{label:advancedSettings.sampleDiversityField.name,value:advancedSettings.sampleDiversityField}]:[],onChange:function onChange(choices){updateSetting("sampleDiversityField",choices.length===1?choices[0].value:undefined)}})),advancedSettings.sampleDiversityField&&_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,helpText:_react.default.createElement(_react.default.Fragment,null,_i18n.i18n.translate("xpack.graph.settings.advancedSettings.maxValuesInputHelpText",{defaultMessage:"Max number of documents in a sample that can contain the same value for the"})," ",_react.default.createElement("em",null,advancedSettings.sampleDiversityField.name)," ",_i18n.i18n.translate("xpack.graph.settings.advancedSettings.maxValuesInputHelpText.fieldText",{defaultMessage:"field"})),label:_i18n.i18n.translate("xpack.graph.settings.advancedSettings.maxValuesInputLabel",{defaultMessage:"Max docs per field"})},_react.default.createElement(_eui.EuiFieldNumber,{fullWidth:true,min:1,step:1,value:advancedSettings.maxValuesPerDoc,onChange:getNumberUpdater("maxValuesPerDoc")})),_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,helpText:_i18n.i18n.translate("xpack.graph.settings.advancedSettings.timeoutInputHelpText",{defaultMessage:"The maximum number of milliseconds that a request can run."}),label:_i18n.i18n.translate("xpack.graph.settings.advancedSettings.timeoutInputLabel",{defaultMessage:"Timeout"})},_react.default.createElement(_eui.EuiFieldNumber,{fullWidth:true,min:1,step:1,value:advancedSettings.timeoutMillis,onChange:getNumberUpdater("timeoutMillis"),append:_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,_i18n.i18n.translate("xpack.graph.settings.advancedSettings.timeoutUnit",{defaultMessage:"ms"})))})))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BlacklistForm=BlacklistForm;var _react=_interopRequireDefault(__webpack_require__(4));var _i18n=__webpack_require__(1);var _react2=__webpack_require__(13);var _eui=__webpack_require__(12);var _legacy_icon=__webpack_require__(180);var _use_list_keys=__webpack_require__(310);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function BlacklistForm(_ref){var blacklistedNodes=_ref.blacklistedNodes,unblacklistNode=_ref.unblacklistNode;var getListKey=(0,_use_list_keys.useListKeys)(blacklistedNodes||[]);return _react.default.createElement(_react.default.Fragment,null,blacklistedNodes&&blacklistedNodes.length>0?_react.default.createElement(_eui.EuiText,{size:"s"},_i18n.i18n.translate("xpack.graph.settings.blacklist.blacklistHelpText",{defaultMessage:"These terms are not allowed in the graph."})):_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.graph.blacklist.noEntriesDescription",defaultMessage:"You don't have any blocked terms. Select vertices and click {stopSign} in the control panel on the right to block them. Documents that match blocked terms are no longer explored and relationships to them are hidden.",values:{stopSign:_react.default.createElement("span",{className:"kuiIcon fa-ban"})}})}),_react.default.createElement(_eui.EuiSpacer,null),blacklistedNodes&&unblacklistNode&&blacklistedNodes.length>0&&_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiListGroup,{bordered:true,maxWidth:false},blacklistedNodes.map((function(node){return _react.default.createElement(_eui.EuiListGroupItem,{icon:_react.default.createElement(_legacy_icon.LegacyIcon,{icon:node.icon,asListIcon:true}),key:getListKey(node),label:node.label,extraAction:{iconType:"trash","aria-label":_i18n.i18n.translate("xpack.graph.blacklist.removeButtonAriaLabel",{defaultMessage:"Delete"}),title:_i18n.i18n.translate("xpack.graph.blacklist.removeButtonAriaLabel",{defaultMessage:"Delete"}),color:"danger",onClick:function onClick(){unblacklistNode(node)}}})}))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiButton,{"data-test-subj":"graphUnblacklistAll",color:"danger",iconType:"trash",size:"s",fill:true,onClick:function onClick(){blacklistedNodes.forEach((function(node){unblacklistNode(node)}))}},_i18n.i18n.translate("xpack.graph.settings.blacklist.clearButtonLabel",{defaultMessage:"Delete all"}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlTemplateList=UrlTemplateList;var _react=_interopRequireWildcard(__webpack_require__(4));var _eui=__webpack_require__(12);var _i18n=__webpack_require__(1);var _url_template_form=__webpack_require__(739);var _use_list_keys=__webpack_require__(310);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var generateId=(0,_eui.htmlIdGenerator)();function UrlTemplateList(_ref){var removeTemplate=_ref.removeTemplate,saveTemplate=_ref.saveTemplate,urlTemplates=_ref.urlTemplates;var _useState=(0,_react.useState)([]),_useState2=_slicedToArray(_useState,2),uncommittedForms=_useState2[0],setUncommittedForms=_useState2[1];var getListKey=(0,_use_list_keys.useListKeys)(urlTemplates);function removeUncommittedForm(id){setUncommittedForms(uncommittedForms.filter((function(formId){return formId!==id})))}return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"s"},_i18n.i18n.translate("xpack.graph.drilldowns.description",{defaultMessage:"Use drilldowns to link to other applications. The selected vertices become part of the URL."})),_react.default.createElement(_eui.EuiSpacer,null),urlTemplates.map((function(template,index){return _react.default.createElement(_url_template_form.UrlTemplateForm,{key:getListKey(template),id:getListKey(template),initialTemplate:template,onSubmit:function onSubmit(newTemplate){saveTemplate({index:index,template:newTemplate})},onRemove:function onRemove(){removeTemplate(template)}})})),uncommittedForms.map((function(id){return _react.default.createElement(_url_template_form.UrlTemplateForm,{id:"accordion-new-".concat(id),key:id,onSubmit:function onSubmit(newTemplate){saveTemplate({index:-1,template:newTemplate});removeUncommittedForm(id)},onRemove:removeUncommittedForm.bind(undefined,id)})})),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiTextAlign,{textAlign:"center"},_react.default.createElement(_eui.EuiButton,{size:"s",fill:true,iconType:"plusInCircle","data-test-subj":"graphAddNewTemplate",onClick:function onClick(){setUncommittedForms([].concat(_toConsumableArray(uncommittedForms),[generateId()]))}},_i18n.i18n.translate("xpack.graph.templates.newTemplateFormLabel",{defaultMessage:"Add drilldown"}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlTemplateForm=UrlTemplateForm;var _react=_interopRequireWildcard(__webpack_require__(4));var _eui=__webpack_require__(12);var _i18n=__webpack_require__(1);var _classnames=_interopRequireDefault(__webpack_require__(101));var _legacy_icon=__webpack_require__(180);var _outlink_encoders=__webpack_require__(185);var _style_choices=__webpack_require__(150);var _url_template=__webpack_require__(186);var _helpers=__webpack_require__(299);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function isUpdateForm(props){return"initialTemplate"in props}function UrlTemplateForm(props){var _onSubmit=props.onSubmit;var getInitialTemplate=function getInitialTemplate(){return isUpdateForm(props)?props.initialTemplate:{encoder:_outlink_encoders.outlinkEncoders[0],icon:null,description:"",url:""}};var _useState=(0,_react.useState)(getInitialTemplate),_useState2=_slicedToArray(_useState,2),currentTemplate=_useState2[0],setCurrentTemplate=_useState2[1];var persistedTemplateState=isUpdateForm(props)&&props.initialTemplate;(0,_react.useEffect)((function(){if(isUpdateForm(props)&&currentTemplate!==props.initialTemplate){setCurrentTemplate(props.initialTemplate)}}),[persistedTemplateState]);var _useState3=(0,_react.useState)({description:false,url:false}),_useState4=_slicedToArray(_useState3,2),touched=_useState4[0],setTouched=_useState4[1];var _useState5=(0,_react.useState)(!isUpdateForm(props)),_useState6=_slicedToArray(_useState5,2),open=_useState6[0],setOpen=_useState6[1];var _useState7=(0,_react.useState)(false),_useState8=_slicedToArray(_useState7,2),autoformatUrl=_useState8[0],setAutoformatUrl=_useState8[1];function setValue(key,value){setCurrentTemplate(_objectSpread({},currentTemplate,_defineProperty({},key,value)))}function reset(){setTouched({description:false,url:false});setCurrentTemplate(getInitialTemplate());setAutoformatUrl(false)}function convertUrl(){setCurrentTemplate(_objectSpread({},currentTemplate,{url:(0,_url_template.replaceKibanaUrlParam)(currentTemplate.url),encoder:currentTemplate.encoder.type==="kql"?currentTemplate.encoder:_outlink_encoders.outlinkEncoders.find((function(enc){return enc.type==="kql"}))}));setAutoformatUrl(false)}var urlPlaceholderMissing=Boolean(currentTemplate.url&&!(0,_url_template.isUrlTemplateValid)(currentTemplate.url));var formIncomplete=!Boolean(currentTemplate.description&&currentTemplate.url);var formUntouched=(0,_helpers.isEqual)(currentTemplate,getInitialTemplate());return _react.default.createElement(_eui.EuiAccordion,{id:props.id,initialIsOpen:!isUpdateForm(props),buttonContent:isUpdateForm(props)?props.initialTemplate.description:_i18n.i18n.translate("xpack.graph.templates.addLabel",{defaultMessage:"New drilldown"}),extraAction:isUpdateForm(props)&&props.initialTemplate.icon&&_react.default.createElement(_legacy_icon.LegacyIcon,{asListIcon:true,icon:props.initialTemplate.icon}),className:(0,_classnames.default)("gphUrlTemplateList__accordion",{"gphUrlTemplateList__accordion--isOpen":open}),buttonClassName:"gphUrlTemplateList__accordionbutton",onToggle:function onToggle(isOpen){setOpen(isOpen)},paddingSize:"m"},_react.default.createElement("form",{onSubmit:function onSubmit(e){e.preventDefault();_onSubmit(currentTemplate);if(!isUpdateForm(props)){reset()}}},_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_i18n.i18n.translate("xpack.graph.settings.drillDowns.urlDescriptionInputLabel",{defaultMessage:"Title"}),isInvalid:touched.description&&!currentTemplate.description,onBlur:function onBlur(){return setTouched(_objectSpread({},touched,{description:true}))}},_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,value:currentTemplate.description,isInvalid:touched.description&&!currentTemplate.description,onChange:function onChange(e){return setValue("description",e.target.value)},placeholder:_i18n.i18n.translate("xpack.graph.settings.drillDowns.urlDescriptionInputPlaceholder",{defaultMessage:"Search on Google"})})),_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_i18n.i18n.translate("xpack.graph.settings.drillDowns.urlInputLabel",{defaultMessage:"URL"}),helpText:_react.default.createElement(_react.default.Fragment,null,autoformatUrl&&_react.default.createElement("p",null,_react.default.createElement("strong",null,_i18n.i18n.translate("xpack.graph.settings.drillDowns.kibanaUrlWarningText",{defaultMessage:"Possible Kibana URL pasted, "}),_react.default.createElement(_eui.EuiLink,{onClick:convertUrl},_react.default.createElement("strong",null,_i18n.i18n.translate("xpack.graph.settings.drillDowns.kibanaUrlWarningConvertOptionLinkText",{defaultMessage:"convert it."}))))),_i18n.i18n.translate("xpack.graph.settings.drillDowns.urlInputHelpText",{defaultMessage:"Define template URLs using {gquery} where the selected vertex terms are inserted.",values:{gquery:"{{gquery}}"}})),onBlur:function onBlur(){return setTouched(_objectSpread({},touched,{url:true}))},isInvalid:urlPlaceholderMissing||touched.url&&!currentTemplate.url,error:urlPlaceholderMissing?[_i18n.i18n.translate("xpack.graph.settings.drillDowns.invalidUrlWarningText",{defaultMessage:"The URL must contain a {placeholder} string.",values:{placeholder:"{{gquery}}"}})]:[]},_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,placeholder:"https://www.google.co.uk/#q={{gquery}}",value:currentTemplate.url,onChange:function onChange(e){setValue("url",e.target.value);setAutoformatUrl(false)},onPaste:function onPaste(e){e.preventDefault();var pastedUrl=e.clipboardData.getData("text/plain");if((0,_url_template.isKibanaUrl)(pastedUrl)){setAutoformatUrl(true)}setValue("url",pastedUrl)},isInvalid:urlPlaceholderMissing||touched.url&&!currentTemplate.url})),_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,helpText:currentTemplate.encoder.description,label:_i18n.i18n.translate("xpack.graph.settings.drillDowns.urlEncoderInputLabel",{defaultMessage:"URL parameter type"})},_react.default.createElement(_eui.EuiComboBox,{fullWidth:true,singleSelection:{asPlainText:true},isClearable:false,options:_outlink_encoders.outlinkEncoders.map((function(encoder){return{label:encoder.title,value:encoder}})),selectedOptions:[{label:currentTemplate.encoder.title,value:currentTemplate.encoder}],onChange:function onChange(choices){setValue("encoder",choices[0].value)}})),_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_i18n.i18n.translate("xpack.graph.settings.drillDowns.toolbarIconPickerLabel",{defaultMessage:"Toolbar icon"})},_react.default.createElement("div",{role:"listbox"},_style_choices.urlTemplateIconChoices.map((function(icon){return _react.default.createElement(_legacy_icon.LegacyIcon,{key:icon.class,selected:icon===currentTemplate.icon,icon:icon,onClick:function onClick(){if(currentTemplate.icon===icon){setValue("icon",null)}else{setValue("icon",icon)}}})})))),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",responsive:false},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{color:"danger",onClick:function onClick(){props.onRemove()},"data-test-subj":"graphRemoveUrlTemplate"},isUpdateForm(props)?_i18n.i18n.translate("xpack.graph.settings.drillDowns.removeButtonLabel",{defaultMessage:"Remove"}):_i18n.i18n.translate("xpack.graph.settings.drillDowns.cancelButtonLabel",{defaultMessage:"Cancel"}))),_react.default.createElement(_eui.EuiFlexItem,null),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:reset,disabled:formUntouched},_i18n.i18n.translate("xpack.graph.settings.drillDowns.resetButtonLabel",{defaultMessage:"Reset"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{type:"submit",fill:true,isDisabled:urlPlaceholderMissing||formIncomplete},isUpdateForm(props)?_i18n.i18n.translate("xpack.graph.settings.drillDowns.updateSaveButtonLabel",{defaultMessage:"Update drilldown"}):_i18n.i18n.translate("xpack.graph.settings.drillDowns.newSaveButtonLabel",{defaultMessage:"Save drilldown"}))))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _graph_visualization=__webpack_require__(741);Object.keys(_graph_visualization).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _graph_visualization[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GraphVisualization=GraphVisualization;var _react=_interopRequireWildcard(__webpack_require__(4));var _classnames=_interopRequireDefault(__webpack_require__(101));var _d=_interopRequireDefault(__webpack_require__(311));var _eui=__webpack_require__(12);var _persistence=__webpack_require__(187);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function registerZooming(element){var blockScroll=function blockScroll(){_d.default.event.preventDefault()};_d.default.select(element).on("mousewheel",blockScroll).on("DOMMouseScroll",blockScroll).call(_d.default.behavior.zoom().on("zoom",(function(){var event=_d.default.event;_d.default.select(element).select("g").attr("transform","translate("+event.translate+")"+"scale("+event.scale+")").attr("style","stroke-width: "+1/event.scale)})))}function GraphVisualization(_ref){var nodes=_ref.nodes,edges=_ref.edges,edgeClick=_ref.edgeClick,nodeClick=_ref.nodeClick;var svgRoot=(0,_react.useRef)(null);return _react.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"gphGraph",width:"100%",height:"100%",pointerEvents:"all",id:"graphSvg",ref:function ref(element){if(element&&svgRoot.current!==element){svgRoot.current=element;registerZooming(element)}}},_react.default.createElement("g",null,_react.default.createElement("g",null,edges&&edges.map((function(edge){return _react.default.createElement("line",{key:"".concat((0,_persistence.makeNodeId)(edge.source.data.field,edge.source.data.term),"-").concat((0,_persistence.makeNodeId)(edge.target.data.field,edge.target.data.term)),x1:edge.topSrc.kx,y1:edge.topSrc.ky,x2:edge.topTarget.kx,y2:edge.topTarget.ky,onClick:function onClick(){edgeClick(edge)},className:(0,_classnames.default)("gphEdge",{"gphEdge--selected":edge.isSelected}),style:{strokeWidth:edge.width},strokeLinecap:"round"})}))),nodes&&nodes.filter((function(node){return!node.parent})).map((function(node){return _react.default.createElement("g",{key:(0,_persistence.makeNodeId)(node.data.field,node.data.term),onClick:function onClick(e){nodeClick(node,e)},onMouseDown:function onMouseDown(e){if(e.ctrlKey||e.shiftKey){e.preventDefault()}},className:"gphNode"},_react.default.createElement("circle",{cx:node.kx,cy:node.ky,r:node.scaledSize,className:(0,_classnames.default)("gphNode__circle",{"gphNode__circle--selected":node.isSelected}),style:{fill:node.color}}),node.icon&&_react.default.createElement("text",{className:(0,_classnames.default)("fa gphNode__text",{"gphNode__text--inverse":_eui.isColorDark.apply(void 0,_toConsumableArray((0,_eui.hexToRgb)(node.color)))}),transform:"translate(0,5)",textAnchor:"middle",x:node.kx,y:node.ky},node.icon.code),node.label.length<30&&_react.default.createElement("text",{className:"gphNode__label",textAnchor:"middle",transform:"translate(0,22)",x:node.kx,y:node.ky},node.label),node.label.length>=30&&_react.default.createElement("foreignObject",{width:"100",height:"20",transform:"translate(-50,15)",x:node.kx,y:node.ky},_react.default.createElement("p",{className:"gphNode__label gphNode__label--html gphNoUserSelect"},node.label)),node.numChildren>0&&_react.default.createElement("g",null,_react.default.createElement("circle",{r:"5",className:"gphNode__markerCircle",transform:"translate(10,10)",cx:node.kx,cy:node.ky}),_react.default.createElement("text",{className:"gphNode__markerText",textAnchor:"middle",transform:"translate(10,12)",x:node.kx,y:node.ky},node.numChildren)))}))))}},function(module,exports,__webpack_require__){"use strict";var _jquery=_interopRequireDefault(__webpack_require__(20));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var d3=__webpack_require__(311);module.exports=function(){var graphExplorer=function graphExplorer(indexName,typeName,request,responseHandler){var dataForServer=JSON.stringify(request);_jquery.default.ajax({type:"POST",url:"http://localhost:9200/"+indexName+"/_graph/explore",dataType:"json",contentType:"application/json;charset=utf-8",async:true,data:dataForServer,success:function success(data){responseHandler(data)}})};var searcher=function searcher(indexName,request,responseHandler){var dataForServer=JSON.stringify(request);_jquery.default.ajax({type:"POST",url:"http://localhost:9200/"+indexName+"/_search?rest_total_hits_as_int=true",dataType:"json",contentType:"application/json;charset=utf-8",async:true,data:dataForServer,success:function success(data){responseHandler(data)}})};function AddNodeOperation(node,owner){var self=this;var vm=owner;self.node=node;self.undo=function(){vm.arrRemove(vm.nodes,self.node);vm.arrRemove(vm.selectedNodes,self.node);self.node.isSelected=false;delete vm.nodesMap[self.node.id]};self.redo=function(){vm.nodes.push(self.node);vm.nodesMap[self.node.id]=self.node}}function AddEdgeOperation(edge,owner){var self=this;var vm=owner;self.edge=edge;self.undo=function(){vm.arrRemove(vm.edges,self.edge);delete vm.edgesMap[self.edge.id]};self.redo=function(){vm.edges.push(self.edge);vm.edgesMap[self.edge.id]=self.edge}}function ReverseOperation(operation){var self=this;var reverseOperation=operation;self.undo=reverseOperation.redo;self.redo=reverseOperation.undo}function GroupOperation(receiver,orphan){var self=this;self.receiver=receiver;self.orphan=orphan;self.undo=function(){self.orphan.parent=undefined};self.redo=function(){self.orphan.parent=self.receiver}}function UnGroupOperation(parent,child){var self=this;self.parent=parent;self.child=child;self.undo=function(){self.child.parent=self.parent};self.redo=function(){self.child.parent=undefined}}function createWorkspace(options){return new GraphWorkspace(options)}function GraphWorkspace(options){var self=this;this.blacklistedNodes=[];this.options=options;this.undoLog=[];this.redoLog=[];this.selectedNodes=[];if(!options){this.options={}}this.nodesMap={};this.edgesMap={};this.searchTerm="";this.seqNumber=0;this.nodes=[];this.edges=[];this.lastRequest=null;this.lastResponse=null;this.changeHandler=options.changeHandler;if(options.graphExploreProxy){graphExplorer=options.graphExploreProxy}if(options.searchProxy){searcher=options.searchProxy}this.addUndoLogEntry=function(undoOperations){self.undoLog.push(undoOperations);if(self.undoLog.length>50){self.undoLog.splice(0,1)}self.redoLog=[]};this.undo=function(){var lastOps=this.undoLog.pop();if(lastOps){this.stopLayout();this.redoLog.push(lastOps);lastOps.forEach((function(ops){return ops.undo()}));this.runLayout()}};this.redo=function(){var lastOps=this.redoLog.pop();if(lastOps){this.stopLayout();this.undoLog.push(lastOps);lastOps.forEach((function(ops){return ops.redo()}));this.runLayout()}};this.areLinked=function(a,b){if(a===b)return true;this.edges.forEach((function(e){if(e.source===a&&e.target===b){return true}if(e.source===b&&e.target===a){return true}}));return false};this.selectAll=function(){self.selectedNodes=[];self.nodes.forEach((function(node){if(node.parent===undefined){node.isSelected=true;self.selectedNodes.push(node)}else{node.isSelected=false}}))};this.selectNone=function(){self.selectedNodes=[];self.nodes.forEach((function(node){node.isSelected=false}))};this.selectInvert=function(){self.selectedNodes=[];self.nodes.forEach((function(node){if(node.parent!==undefined){return}node.isSelected=!node.isSelected;if(node.isSelected){self.selectedNodes.push(node)}}))};this.selectNodes=function(nodes){nodes.forEach((function(node){node.isSelected=true;if(self.selectedNodes.indexOf(node)<0){self.selectedNodes.push(node)}}))};this.selectNode=function(node){node.isSelected=true;if(self.selectedNodes.indexOf(node)<0){self.selectedNodes.push(node)}};this.deleteSelection=function(){var allAndGrouped=self.returnUnpackedGroupeds(self.selectedNodes);if(allAndGrouped.length===0){allAndGrouped=self.nodes.slice(0)}var undoOperations=[];allAndGrouped.forEach((function(node){node.isSelected=false;delete self.nodesMap[node.id];undoOperations.push(new ReverseOperation(new AddNodeOperation(node,self)))}));self.arrRemoveAll(self.nodes,allAndGrouped);self.arrRemoveAll(self.selectedNodes,allAndGrouped);var danglingEdges=self.edges.filter((function(edge){return self.nodes.indexOf(edge.source)<0||self.nodes.indexOf(edge.target)<0}));danglingEdges.forEach((function(edge){delete self.edgesMap[edge.id];undoOperations.push(new ReverseOperation(new AddEdgeOperation(edge,self)))}));self.addUndoLogEntry(undoOperations);self.arrRemoveAll(self.edges,danglingEdges);self.runLayout()};this.selectNeighbours=function(){var newSelections=[];self.edges.forEach((function(edge){if(!edge.topSrc.isSelected){if(self.selectedNodes.indexOf(edge.topTarget)>=0){if(newSelections.indexOf(edge.topSrc)<0){newSelections.push(edge.topSrc)}}}if(!edge.topTarget.isSelected){if(self.selectedNodes.indexOf(edge.topSrc)>=0){if(newSelections.indexOf(edge.topTarget)<0){newSelections.push(edge.topTarget)}}}}));newSelections.forEach((function(newlySelectedNode){self.selectedNodes.push(newlySelectedNode);newlySelectedNode.isSelected=true}))};this.selectNone=function(){self.selectedNodes.forEach((function(node){node.isSelected=false}));self.selectedNodes=[]};this.deselectNode=function(node){node.isSelected=false;self.arrRemove(self.selectedNodes,node)};this.getAllSelectedNodes=function(){return this.returnUnpackedGroupeds(self.selectedNodes)};this.colorSelected=function(colorNum){self.getAllSelectedNodes().forEach((function(node){node.color=colorNum}))};this.getSelectionsThatAreGrouped=function(){var result=[];self.selectedNodes.forEach((function(node){if(node.numChildren>0){result.push(node)}}));return result};this.ungroupSelection=function(){self.getSelectionsThatAreGrouped().forEach((function(node){self.ungroup(node)}))};this.toggleNodeSelection=function(node){if(node.isSelected){self.deselectNode(node)}else{node.isSelected=true;self.selectedNodes.push(node)}return node.isSelected};this.returnUnpackedGroupeds=function(topLevelNodeArray){var result=topLevelNodeArray.slice();var edges=this.edges;for(var i=0;i<edges.length;i++){var edge=edges[i];var topLevelSource=edge.topSrc;var topLevelTarget=edge.topTarget;if(result.indexOf(topLevelTarget)>=0){var target=edge.target;while(target.parent!==undefined){if(result.indexOf(target)<0){result.push(target)}target=target.parent}}if(result.indexOf(topLevelSource)>=0){var source=edge.source;while(source.parent!==undefined){if(result.indexOf(source)<0){result.push(source)}source=source.parent}}}return result};this.clearGraph=function(){this.stopLayout();this.nodes=[];this.edges=[];this.undoLog=[];this.redoLog=[];this.nodesMap={};this.edgesMap={};this.blacklistedNodes=[];this.selectedNodes=[];this.lastResponse=null};this.arrRemoveAll=function remove(arr,items){for(var i=items.length;i--;){self.arrRemove(arr,items[i])}};this.arrRemove=function remove(arr,item){for(var i=arr.length;i--;){if(arr[i]===item){arr.splice(i,1)}}};this.getNeighbours=function(node){var neighbourNodes=[];self.edges.forEach((function(edge){if(edge.topSrc===edge.topTarget){return}if(edge.topSrc===node){if(neighbourNodes.indexOf(edge.topTarget)<0){neighbourNodes.push(edge.topTarget)}}if(edge.topTarget===node){if(neighbourNodes.indexOf(edge.topSrc)<0){neighbourNodes.push(edge.topSrc)}}}));return neighbourNodes};this.buildNodeQuery=function(topLevelNode){var containedNodes=[topLevelNode];containedNodes=self.returnUnpackedGroupeds(containedNodes);if(containedNodes.length===1){var tq={};tq[topLevelNode.data.field]=topLevelNode.data.term;return{term:tq}}var termsByField={};containedNodes.forEach((function(node){var termsList=termsByField[node.data.field];if(!termsList){termsList=[];termsByField[node.data.field]=termsList}termsList.push(node.data.term)}));if(Object.keys(termsByField).length===1){return{terms:termsByField}}var q={bool:{should:[]}};for(var field in termsByField){if(termsByField.hasOwnProperty(field)){var _tq={};_tq[field]=termsByField[field];q.bool.should.push({terms:_tq})}}return q};this.stopLayout=function(){if(this.force){this.force.stop()}this.force=null};this.runLayout=function(){this.stopLayout();var effectiveEdges=[];self.edges.forEach((function(edge){var topSrc=edge.source;var topTarget=edge.target;while(topSrc.parent!==undefined){topSrc=topSrc.parent}while(topTarget.parent!==undefined){topTarget=topTarget.parent}edge.topSrc=topSrc;edge.topTarget=topTarget;if(topSrc!==topTarget){effectiveEdges.push({source:topSrc,target:topTarget})}}));var visibleNodes=self.nodes.filter((function(n){return n.parent===undefined}));var allNodes=self.nodes;allNodes.forEach((function(node){node.numChildren=0}));for(var n in allNodes){if(!allNodes.hasOwnProperty(n)){continue}var node=allNodes[n];while(node.parent!==undefined){node=node.parent;node.numChildren=node.numChildren+1}}this.force=d3.layout.force().nodes(visibleNodes).links(effectiveEdges).friction(.8).linkDistance(100).charge(-1500).gravity(.15).theta(.99).alpha(.5).size([800,600]).on("tick",(function(){var nodeArray=self.nodes;var hasRollups=false;nodeArray.forEach((function(n){if(n.parent===undefined){n.kx=n.x;n.ky=n.y}else{hasRollups=true}}));if(hasRollups){nodeArray.forEach((function(n){if(n.parent!==undefined){var topLevelNode=n.parent;while(topLevelNode.parent!==undefined){topLevelNode=topLevelNode.parent}n.kx=topLevelNode.x;n.ky=topLevelNode.y}}))}if(self.changeHandler){self.changeHandler()}}));this.force.start()};this.groupSelections=function(node){var ops=[];self.nodes.forEach((function(otherNode){if(otherNode!==node&&otherNode.isSelected&&otherNode.parent===undefined){otherNode.parent=node;otherNode.isSelected=false;self.arrRemove(self.selectedNodes,otherNode);ops.push(new GroupOperation(node,otherNode))}}));self.selectNone();self.selectNode(node);self.addUndoLogEntry(ops);self.runLayout()};this.mergeNeighbours=function(node){var neighbours=self.getNeighbours(node);var ops=[];neighbours.forEach((function(otherNode){if(otherNode!==node&&otherNode.parent===undefined){otherNode.parent=node;otherNode.isSelected=false;self.arrRemove(self.selectedNodes,otherNode);ops.push(new GroupOperation(node,otherNode))}}));self.addUndoLogEntry(ops);self.runLayout()};this.mergeSelections=function(targetNode){if(!targetNode){console.log("Error - merge called on undefined target");return}var selClone=self.selectedNodes.slice();var ops=[];selClone.forEach((function(otherNode){if(otherNode!==targetNode&&otherNode.parent===undefined){otherNode.parent=targetNode;otherNode.isSelected=false;self.arrRemove(self.selectedNodes,otherNode);ops.push(new GroupOperation(targetNode,otherNode))}}));self.addUndoLogEntry(ops);self.runLayout()};this.ungroup=function(node){var ops=[];self.nodes.forEach((function(other){if(other.parent===node){other.parent=undefined;ops.push(new UnGroupOperation(node,other))}}));self.addUndoLogEntry(ops);self.runLayout()};this.unblacklist=function(node){self.arrRemove(self.blacklistedNodes,node)};this.blacklistSelection=function(){var selection=self.getAllSelectedNodes();var danglingEdges=[];self.edges.forEach((function(edge){if(selection.indexOf(edge.source)>=0||selection.indexOf(edge.target)>=0){delete self.edgesMap[edge.id];danglingEdges.push(edge)}}));selection.forEach((function(node){delete self.nodesMap[node.id];self.blacklistedNodes.push(node);node.isSelected=false}));self.arrRemoveAll(self.nodes,selection);self.arrRemoveAll(self.edges,danglingEdges);self.selectedNodes=[];self.runLayout()};this.simpleSearch=function(searchTerm,fieldsChoice,numHops){var qs={query_string:{query:searchTerm}};return this.search(qs,fieldsChoice,numHops)};this.search=function(query,fieldsChoice,numHops){if(!fieldsChoice){fieldsChoice=self.options.vertex_fields}var step={};var excludeNodesByField={};var nots=[];var avoidNodes=this.blacklistedNodes;for(var i=0;i<avoidNodes.length;i++){var n=avoidNodes[i];var arr=excludeNodesByField[n.data.field];if(!arr){arr=[];excludeNodesByField[n.data.field]=arr}arr.push(n.data.term);var tq={};tq[n.data.field]=n.data.term;nots.push({term:tq})}var rootStep=step;var _loop=function _loop(hopNum){var arr=[];fieldsChoice.forEach((function(_ref){var field=_ref.name,hopSize=_ref.hopSize;var excludes=excludeNodesByField[field];var stepField={field:field,size:hopSize,min_doc_count:parseInt(self.options.exploreControls.minDocCount)};if(excludes){stepField.exclude=excludes}arr.push(stepField)}));step.vertices=arr;if(hopNum<numHops-1){var nextStep={};step.connections=nextStep;step=nextStep}};for(var hopNum=0;hopNum<numHops;hopNum++){_loop(hopNum)}if(nots.length>0){query={bool:{must:[query],must_not:nots}}}var request={query:query,controls:self.buildControls(),connections:rootStep.connections,vertices:rootStep.vertices};self.callElasticsearch(request)};this.buildControls=function(){var guiSettingsObj=self.options.exploreControls;var controls={use_significance:guiSettingsObj.useSignificance,sample_size:guiSettingsObj.sampleSize,timeout:parseInt(guiSettingsObj.timeoutMillis)};if(guiSettingsObj.sampleDiversityField!=null){controls.sample_diversity={field:guiSettingsObj.sampleDiversityField.name,max_docs_per_value:guiSettingsObj.maxValuesPerDoc}}return controls};this.makeNodeId=function(field,term){return field+".."+term};this.makeEdgeId=function(srcId,targetId){var id=srcId+"->"+targetId;if(srcId>targetId){id=targetId+"->"+srcId}return id};this.mergeGraph=function(newData){var _this=this;this.stopLayout();if(!newData.nodes){newData.nodes=[]}var lastOps=[];var dedupedNodes=[];newData.nodes.forEach((function(node){node.id=self.makeNodeId(node.field,node.term);if(!_this.nodesMap[node.id]){if(!node.label){node.label=node.term}dedupedNodes.push(node)}}));if(dedupedNodes.length>0&&this.options.nodeLabeller){this.options.nodeLabeller(dedupedNodes)}dedupedNodes.forEach((function(dedupedNode){var label=dedupedNode.term;if(dedupedNode.label){label=dedupedNode.label}var node={x:1,y:1,numChildren:0,parent:undefined,isSelected:false,id:dedupedNode.id,label:label,color:dedupedNode.color,icon:dedupedNode.icon,data:dedupedNode};node.scaledSize=15;node.seqNumber=_this.seqNumber++;_this.nodes.push(node);lastOps.push(new AddNodeOperation(node,self));_this.nodesMap[node.id]=node}));newData.edges.forEach((function(edge){var src=newData.nodes[edge.source];var target=newData.nodes[edge.target];edge.id=_this.makeEdgeId(src.id,target.id);var srcWrapperObj=_this.nodesMap[src.id];var targetWrapperObj=_this.nodesMap[target.id];var existingEdge=_this.edgesMap[edge.id];if(existingEdge){existingEdge.weight=Math.max(existingEdge.weight,edge.weight);existingEdge.doc_count=Math.max(existingEdge.doc_count,edge.doc_count);return}var newEdge={source:srcWrapperObj,target:targetWrapperObj,weight:edge.weight,width:edge.width,id:edge.id,doc_count:edge.doc_count};if(edge.label){newEdge.label=edge.label}_this.edgesMap[newEdge.id]=newEdge;_this.edges.push(newEdge);lastOps.push(new AddEdgeOperation(newEdge,self))}));if(lastOps.length>0){self.addUndoLogEntry(lastOps)}this.runLayout()};this.mergeIds=function(parentId,childId){var parent=self.getNode(parentId);var child=self.getNode(childId);if(child.isSelected){child.isSelected=false;self.arrRemove(self.selectedNodes,child)}child.parent=parent;self.addUndoLogEntry([new GroupOperation(parent,child)]);self.runLayout()};this.getNode=function(nodeId){return this.nodesMap[nodeId]};this.getEdge=function(edgeId){return this.edgesMap[edgeId]};this.expandSelecteds=function(){var targetOptions=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var startNodes=self.getAllSelectedNodes();if(startNodes.length===0){startNodes=self.nodes}var clone=startNodes.slice();self.expand(clone,targetOptions)};this.expandGraph=function(){self.expandSelecteds()};this.expandNode=function(node){self.expand(self.returnUnpackedGroupeds([node]),{})};this.expand=function(startNodes,targetOptions){var nodesByField={};var excludeNodesByField={};var avoidNodes=this.blacklistedNodes;for(var i=0;i<avoidNodes.length;i++){var n=avoidNodes[i];var arr=excludeNodesByField[n.data.field];if(!arr){arr=[];excludeNodesByField[n.data.field]=arr}if(arr.indexOf(n.data.term)<0){arr.push(n.data.term)}}var allExistingNodes=this.nodes;for(var _i=0;_i<allExistingNodes.length;_i++){var _n=allExistingNodes[_i];var _arr=excludeNodesByField[_n.data.field];if(!_arr){_arr=[];excludeNodesByField[_n.data.field]=_arr}_arr.push(_n.data.term)}for(var _i2=0;_i2<startNodes.length;_i2++){var _n2=startNodes[_i2];var _arr2=nodesByField[_n2.data.field];if(!_arr2){_arr2=[];nodesByField[_n2.data.field]=_arr2}_arr2.push({term:_n2.data.term,boost:_n2.data.weight});_arr2=excludeNodesByField[_n2.data.field];if(!_arr2){_arr2=[];excludeNodesByField[_n2.data.field]=_arr2}if(_arr2.indexOf(_n2.data.term)<0){_arr2.push(_n2.data.term)}}var primaryVertices=[];var secondaryVertices=[];for(var fieldName in nodesByField){if(nodesByField.hasOwnProperty(fieldName)){primaryVertices.push({field:fieldName,include:nodesByField[fieldName],min_doc_count:parseInt(self.options.exploreControls.minDocCount)})}}var targetFields=this.options.vertex_fields;if(targetOptions.toFields){targetFields=targetOptions.toFields}targetFields.forEach((function(targetField){var fieldName=targetField.name;var hopSize=targetField.hopSize>0?targetField.hopSize:targetField.lastValidHopSize;var fieldHop={field:fieldName,size:hopSize,min_doc_count:parseInt(self.options.exploreControls.minDocCount)};fieldHop.exclude=excludeNodesByField[fieldName];secondaryVertices.push(fieldHop)}));var request={controls:self.buildControls(),vertices:primaryVertices,connections:{vertices:secondaryVertices}};self.lastRequest=JSON.stringify(request,null,"\t");graphExplorer(self.options.indexName,request,(function(data){self.lastResponse=JSON.stringify(data,null,"\t");var edges=[];data.vertices.forEach((function(node){targetFields.some((function(fieldDef){if(node.field===fieldDef.name){node.color=fieldDef.color;node.icon=fieldDef.icon;node.fieldDef=fieldDef;return true}return false}))}));var minLineSize=2;var maxLineSize=10;var maxEdgeWeight=1e-8;data.connections.forEach((function(edge){maxEdgeWeight=Math.max(maxEdgeWeight,edge.weight);edges.push({source:edge.source,target:edge.target,doc_count:edge.doc_count,weight:edge.weight,width:Math.max(minLineSize,edge.weight/maxEdgeWeight*maxLineSize)})}));self.mergeGraph({nodes:data.vertices,edges:edges})}))};this.trimExcessNewEdges=function(newNodes,newEdges){var _this2=this;var trimmedEdges=[];var maxNumEdgesToReturn=5;newEdges.forEach((function(edge){var src=newNodes[edge.source];var target=newNodes[edge.target];var srcId=src.field+".."+src.term;var targetId=target.field+".."+target.term;var id=_this2.makeEdgeId(srcId,targetId);var existingSrcNode=self.nodesMap[srcId];var existingTargetNode=self.nodesMap[targetId];if(existingSrcNode!=null&&existingTargetNode!=null){if(existingSrcNode.parent!==undefined&&existingTargetNode.parent!==undefined){return}}else{console.log("Error? Missing nodes "+srcId+" or "+targetId,self.nodesMap);return}var existingEdge=self.edgesMap[id];if(existingEdge){existingEdge.weight=Math.max(existingEdge.weight,edge.weight);existingEdge.doc_count=Math.max(existingEdge.doc_count,edge.doc_count);return}else{trimmedEdges.push(edge)}}));if(trimmedEdges.length>maxNumEdgesToReturn){trimmedEdges.sort((function(a,b){return b.weight-a.weight}));trimmedEdges=trimmedEdges.splice(0,maxNumEdgesToReturn)}return trimmedEdges};this.getQuery=function(startNodes,loose){var shoulds=[];var nodes=startNodes;if(!startNodes){nodes=self.nodes}nodes.forEach((function(node){if(node.parent===undefined){shoulds.push(self.buildNodeQuery(node))}}));return{bool:{should:shoulds,minimum_should_match:Math.min(shoulds.length,loose?1:2)}}};this.getSelectedOrAllNodes=function(){var startNodes=self.getAllSelectedNodes();if(startNodes.length===0){startNodes=self.nodes}return startNodes};this.getSelectedOrAllTopNodes=function(){return self.getSelectedOrAllNodes().filter((function(node){return node.parent===undefined}))};function addTermToFieldList(map,field,term){var arr=map[field];if(!arr){arr=[];map[field]=arr}arr.push(term)}this.fillInGraph=function(){var maxNewEdges=arguments.length>0&&arguments[0]!==undefined?arguments[0]:10;var nodesForLinking=self.getSelectedOrAllTopNodes();var maxNumVerticesSearchable=100;if(nodesForLinking.length>maxNumVerticesSearchable){for(var i=0;i<maxNumVerticesSearchable;i++){var oldNode=nodesForLinking[i];var randomIndex=Math.floor(Math.random()*(nodesForLinking.length-i))+i;nodesForLinking[i]=nodesForLinking[randomIndex];nodesForLinking[randomIndex]=oldNode}nodesForLinking=nodesForLinking.slice(0,maxNumVerticesSearchable-1)}var shoulds=[];var filterMap={};nodesForLinking.forEach((function(node,nodeNum){var nodeQuery=self.buildNodeQuery(node);shoulds.push(nodeQuery);filterMap[nodeNum]=nodeQuery}));var searchReq={size:0,query:{bool:{minimum_should_match:2,should:shoulds}},aggs:{matrix:{adjacency_matrix:{separator:"|",filters:filterMap}}}};searcher(self.options.indexName,searchReq,(function(data){var numDocsMatched=data.hits.total;var buckets=data.aggregations.matrix.buckets;var vertices=nodesForLinking.map((function(existingNode){return{field:existingNode.data.field,term:existingNode.data.term,weight:1,depth:0}}));var connections=[];var maxEdgeWeight=0;var keyedBuckets={};buckets.forEach((function(bucket){keyedBuckets[bucket.key]=bucket}));buckets.forEach((function(bucket){var ids=bucket.key.split("|");if(ids.length===2){if(self.options.exploreControls.useSignificance){var t1=keyedBuckets[ids[0]].doc_count;var t2=keyedBuckets[ids[1]].doc_count;var t1AndT2=bucket.doc_count;bucket.weight=self.jLHScore(t1AndT2,Math.max(t1,t2),Math.min(t1,t2),numDocsMatched)}else{bucket.weight=bucket.doc_count}maxEdgeWeight=Math.max(maxEdgeWeight,bucket.weight)}}));var backFilledMinLineSize=2;var backFilledMaxLineSize=5;buckets.forEach((function(bucket){if(bucket.doc_count<parseInt(self.options.exploreControls.minDocCount)){return}var ids=bucket.key.split("|");if(ids.length===2){var srcNode=nodesForLinking[ids[0]];var targetNode=nodesForLinking[ids[1]];var edgeId=self.makeEdgeId(srcNode.id,targetNode.id);var existingEdge=self.edgesMap[edgeId];if(existingEdge){existingEdge.doc_count=Math.max(existingEdge.doc_count,bucket.doc_count)}else{connections.push({source:parseInt(ids[0]),target:parseInt(ids[1]),weight:bucket.weight,width:Math.max(backFilledMinLineSize,bucket.weight/maxEdgeWeight*backFilledMaxLineSize),doc_count:bucket.doc_count})}}}));if(connections.length>maxNewEdges){connections=connections.sort((function(a,b){return b.weight-a.weight}));connections=connections.slice(0,maxNewEdges)}self.mergeGraph({nodes:vertices,edges:connections})}))};this.getLikeThisButNotThisQuery=function(startNodes){var likeQueries=[];var txtsByFieldType={};startNodes.forEach((function(node){var txt=txtsByFieldType[node.data.field];if(txt){txt=txt+" "+node.label}else{txt=node.label}txtsByFieldType[node.data.field]=txt}));for(var field in txtsByFieldType){if(txtsByFieldType.hasOwnProperty(field)){likeQueries.push({more_like_this:{like:txtsByFieldType[field],min_term_freq:1,minimum_should_match:"20%",min_doc_freq:1,boost_terms:2,max_query_terms:25}})}}var excludeNodesByField={};var allExistingNodes=self.nodes;allExistingNodes.forEach((function(existingNode){addTermToFieldList(excludeNodesByField,existingNode.data.field,existingNode.data.term)}));var blacklistedNodes=self.blacklistedNodes;blacklistedNodes.forEach((function(blacklistedNode){addTermToFieldList(excludeNodesByField,blacklistedNode.data.field,blacklistedNode.data.term)}));var notExistingNodes=[];Object.keys(excludeNodesByField).forEach((function(fieldName){var termsQuery={};termsQuery[fieldName]=excludeNodesByField[fieldName];notExistingNodes.push({terms:termsQuery})}));var result={boosting:{negative_boost:1e-4,negative:{bool:{should:notExistingNodes}},positive:{bool:{should:likeQueries}}}};return result};this.getSelectedIntersections=function(callback){if(self.selectedNodes.length===0){return self.getAllIntersections(callback,self.nodes)}if(self.selectedNodes.length===1){var selectedNode=self.selectedNodes[0];var neighbourNodes=self.getNeighbours(selectedNode);neighbourNodes.push(selectedNode);return self.getAllIntersections(callback,neighbourNodes)}return self.getAllIntersections(callback,self.getAllSelectedNodes())};this.jLHScore=function(subsetFreq,subsetSize,supersetFreq,supersetSize){var subsetProbability=subsetFreq/subsetSize;var supersetProbability=supersetFreq/supersetSize;var absoluteProbabilityChange=subsetProbability-supersetProbability;if(absoluteProbabilityChange<=0){return 0}var relativeProbabilityChange=subsetProbability/supersetProbability;return absoluteProbabilityChange*relativeProbabilityChange};this.getAllIntersections=function(callback,nodes){nodes=nodes.filter((function(n){return n.parent===undefined}));var allQueries=nodes.map((function(node){return self.buildNodeQuery(node)}));var allQuery={bool:{should:allQueries}};var request={query:allQuery,size:0,aggs:{all:{global:{}},sources:{filters:{filters:{}},aggs:{targets:{filters:{filters:{}}}}}}};allQueries.forEach((function(query,n){request.aggs.sources.filters.filters["bg"+n]=query;request.aggs.sources.aggs.targets.filters.filters["fg"+n]=query}));searcher(self.options.indexName,request,(function(data){var termIntersects=[];var fullDocCounts=[];var allDocCount=data.aggregations.all.doc_count;nodes.forEach((function(rootNode,n){fullDocCounts.push(data.aggregations.sources.buckets["bg"+n].doc_count)}));nodes.forEach((function(rootNode,n){var t1=fullDocCounts[n];var baseAgg=data.aggregations.sources.buckets["bg"+n].targets.buckets;nodes.forEach((function(leafNode,l){var t2=fullDocCounts[l];if(l===n){return}if(t1>t2){return}if(t1===t2){if(rootNode.id>leafNode.id){return}}var t1AndT2=baseAgg["fg"+l].doc_count;if(t1AndT2===0){return}var neighbourNode=nodes[l];var t1Label=rootNode.data.label;if(rootNode.numChildren>0){t1Label+="(+"+rootNode.numChildren+")"}var t2Label=neighbourNode.data.label;if(neighbourNode.numChildren>0){t2Label+="(+"+neighbourNode.numChildren+")"}var mergeConfidence=self.jLHScore(t1AndT2,t2,t1,allDocCount);var termIntersect={id1:rootNode.id,id2:neighbourNode.id,term1:t1Label,term2:t2Label,v1:t1,v2:t2,mergeLeftConfidence:t1AndT2/t1,mergeRightConfidence:t1AndT2/t2,mergeConfidence:mergeConfidence,overlap:t1AndT2};termIntersects.push(termIntersect)}))}));termIntersects.sort((function(a,b){if(b.mergeConfidence!==a.mergeConfidence){return b.mergeConfidence-a.mergeConfidence}if(b.overlap!==a.overlap){return b.overlap-a.overlap}return a.v2-b.v2}));if(callback){callback(termIntersects)}}))};this.callElasticsearch=function(request){self.lastRequest=JSON.stringify(request,null,"\t");graphExplorer(self.options.indexName,request,(function(data){self.lastResponse=JSON.stringify(data,null,"\t");var edges=[];data.vertices.forEach((function(node){self.options.vertex_fields.some((function(fieldDef){if(node.field===fieldDef.name){node.color=fieldDef.color;node.icon=fieldDef.icon;node.fieldDef=fieldDef;return true}return false}))}));var minLineSize=2;var maxLineSize=10;var maxEdgeWeight=1e-8;data.connections.forEach((function(edge){maxEdgeWeight=Math.max(maxEdgeWeight,edge.weight)}));data.connections.forEach((function(edge){edges.push({source:edge.source,target:edge.target,doc_count:edge.doc_count,weight:edge.weight,width:Math.max(minLineSize,edge.weight/maxEdgeWeight*maxLineSize)})}));self.mergeGraph({nodes:data.vertices,edges:edges},{labeller:self.options.labeller})}))}}return{createWorkspace:createWorkspace}}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createCachedIndexPatternProvider=createCachedIndexPatternProvider;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function createCachedIndexPatternProvider(indexPatternGetter){var cache=new Map;return{get:function(){var _get=_asyncToGenerator(regeneratorRuntime.mark((function _callee(id){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(cache.has(id)){_context.next=7;break}_context.t0=cache;_context.t1=id;_context.next=5;return indexPatternGetter(id);case 5:_context.t2=_context.sent;_context.t0.set.call(_context.t0,_context.t1,_context.t2);case 7:return _context.abrupt("return",Promise.resolve(cache.get(id)));case 8:case"end":return _context.stop()}}}),_callee)})));function get(_x){return _get.apply(this,arguments)}return get}()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.asAngularSyncedObservable=asAngularSyncedObservable;var Rx=_interopRequireWildcard(__webpack_require__(17));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asAngularSyncedObservable(collectProps,angularDigest){var boundCollectProps=function boundCollectProps(){var collectedProps=collectProps();Object.keys(collectedProps).forEach((function(key){var currentValue=collectedProps[key];if(typeof currentValue==="function"){collectedProps[key]=function(){currentValue.apply(void 0,arguments);angularDigest();subject$.next(boundCollectProps())}}}));return collectedProps};var subject$=new Rx.BehaviorSubject(boundCollectProps());return subject$.asObservable()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatHttpError=formatHttpError;var _i18n=__webpack_require__(1);function formatHttpError(error){if(!error.response){return _i18n.i18n.translate("xpack.graph.fatalError.unavailableServerErrorMessage",{defaultMessage:"An HTTP request has failed to connect. "+"Please check if the Kibana server is running and that your browser has a working connection, "+"or contact your system administrator."})}return _i18n.i18n.translate("xpack.graph.fatalError.errorStatusMessage",{defaultMessage:"Error {errStatus} {errStatusText}: {errMessage}",values:{errStatus:error.body.status,errStatusText:error.body.statusText,errMessage:error.body.message}})}},function(module,exports,__webpack_require__){if(window.__kbnDarkMode__){__webpack_require__(747)}else{__webpack_require__(749)}},function(module,exports,__webpack_require__){var api=__webpack_require__(108);var content=__webpack_require__(748);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(109);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/* Graph plugin styles */\n/**\n * Forms\n */\n.gphFormGroup--small {\n  margin-bottom: 8px; }\n\n.gphColorPicker__color {\n  margin: 4px;\n  cursor: pointer; }\n  .gphColorPicker__color:hover, .gphColorPicker__color:focus {\n    -webkit-transform: scale(1.4);\n            transform: scale(1.4); }\n\n/**\n * Utilities\n */\n.gphNoUserSelect {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  -webkit-touch-callout: none;\n  -webkit-tap-highlight-color: transparent; }\n\n/**\n * THE SVG Graph\n * 1. Calculated px values come from the open/closed state of the global nav sidebar\n */\n#graphBasic {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  overflow: hidden; }\n\n.gphGraph__container {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  background: #1D1E24;\n  position: relative;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1; }\n\n.gphGraph__menus {\n  margin: 8px; }\n\n.gphGraph__flexGroup {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  width: 100%; }\n\n.gphGraph__flexGroupFiller {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1 1 auto;\n      -ms-flex: 1 1 auto;\n          flex: 1 1 auto; }\n\n.gphSidebar {\n  position: absolute;\n  right: 8px;\n  top: 8px;\n  width: 320px;\n  z-index: 1000;\n  background-color: #1D1E24;\n  border: 1px solid #343741;\n  padding: 4px;\n  border-radius: 4px;\n  opacity: .9;\n  -webkit-box-shadow: 0 6px 12px -1px rgba(0, 0, 0, 0.2), 0 4px 4px -1px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.2);\n          box-shadow: 0 6px 12px -1px rgba(0, 0, 0, 0.2), 0 4px 4px -1px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.2); }\n  .gphSidebar .help-block {\n    font-size: 12px;\n    color: #DFE5EF; }\n\n.gphSidebar__header {\n  margin-top: 8px;\n  color: #1D1E24;\n  background-color: #98A2B3;\n  padding: 4px;\n  border-radius: 4px;\n  margin-bottom: 4px; }\n\n.gphSidebar__panel {\n  max-height: 240px;\n  overflow-y: hidden auto; }\n\n/**\n * Vertex Select\n */\n.gphVertexSelect__button {\n  margin: 4px 4px 4px 0; }\n\n/**\n * Selection List\n */\n.gphSelectionList {\n  height: 240px;\n  background-color: #25262E;\n  overflow: auto;\n  margin-bottom: 0; }\n\n.gphSelectionList__icon {\n  font-size: 12px; }\n\n.gphSelectionList__field {\n  line-height: 1.5;\n  margin: 4px 0;\n  cursor: pointer; }\n  .gphSelectionList__field > * {\n    vertical-align: middle; }\n\n.gphSelectionList__field--selected {\n  background: #343741; }\n\n/**\n * Link summary\n */\n.gphLinkSummary__term--1 {\n  color: #F66; }\n\n.gphLinkSummary__term--2 {\n  color: #1BA9F5; }\n\n.gphLinkSummary__term--1-2 {\n  color: #8d88ae; }\n\n.gphSettings__jsonView {\n  height: 240px; }\n\n.gphGraph__bar {\n  margin: 0px 8px 8px 8px; }\n\n.gphSearchBar__datasourceButton {\n  height: 100% !important; }\n\n.gphSearchBar__datasourceButtonTooltip {\n  padding: 0; }\n\n.gphSourceModal {\n  width: 720px;\n  min-height: 530px; }\n\n.gphGuidancePanel {\n  max-width: 580px;\n  margin: 24px 0; }\n\n.gphGuidancePanel__list {\n  list-style: none;\n  margin: 0;\n  padding: 0; }\n\n.gphGuidancePanel__item {\n  display: block;\n  max-width: 420px;\n  position: relative;\n  padding-left: 32px;\n  margin-bottom: 24px; }\n\n.gphGuidancePanel__item--disabled {\n  color: #98A2B3; }\n  .gphGuidancePanel__item--disabled button {\n    color: #98A2B3 !important; }\n\n.gphGuidancePanel__itemIcon {\n  position: absolute;\n  left: 0;\n  top: -2px;\n  width: 24px;\n  height: 24px;\n  padding: 4px; }\n  .gphGuidancePanel__itemIcon--done {\n    background-color: #7DE2D1;\n    color: #1D1E24;\n    border-radius: 50%; }\n\n.gphVisualization {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column; }\n\n.gphGraph {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  overflow: hidden; }\n\n.gphEdge {\n  fill: #535966;\n  stroke: #535966;\n  stroke-width: 2;\n  stroke-opacity: 0.5; }\n  .gphEdge:hover {\n    stroke-opacity: 0.95;\n    cursor: pointer; }\n  .gphEdge--selected {\n    stroke: #98A2B3;\n    stroke-opacity: 0.95; }\n\n.gphNode {\n  cursor: pointer; }\n\n.gphNode__label {\n  font-family: "Inter UI", -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n  font-size: 8px;\n  line-height: 12px;\n  fill: #98A2B3;\n  color: #98A2B3;\n  cursor: pointer; }\n  .gphNode__label--html {\n    max-width: 100%;\n    overflow: hidden !important;\n    text-overflow: ellipsis !important;\n    white-space: nowrap !important;\n    word-wrap: normal !important;\n    text-align: center; }\n\n.gphNode__markerCircle {\n  fill: #98A2B3;\n  stroke: #1D1E24; }\n\n.gphNode__markerText {\n  font-family: "Inter UI", -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n  font-size: 8px;\n  line-height: 12px;\n  fill: #98A2B3;\n  color: #98A2B3;\n  font-size: 6px;\n  fill: #1D1E24; }\n\n.gphNode__circle {\n  fill: #535966; }\n  .gphNode__circle--selected {\n    stroke-width: 4px;\n    stroke: rgba(27, 169, 245, 0.75); }\n\n.gphNode__text {\n  fill: #000; }\n  .gphNode__text--inverse {\n    fill: #FFF; }\n\n.gphVennDiagram__left {\n  fill: #F66;\n  fill-opacity: 0.5; }\n\n.gphVennDiagram__right {\n  fill: #1BA9F5;\n  fill-opacity: 0.5; }\n\n.gphUrlTemplateList__accordion {\n  border-top: 1px solid #343741;\n  border-bottom: 1px solid #343741; }\n  .gphUrlTemplateList__accordion + .gphUrlTemplateList__accordion {\n    margin-top: -1px; }\n  .gphUrlTemplateList__accordion--isOpen {\n    background-color: #1a1b20; }\n\n.gphUrlTemplateList__accordionbutton {\n  padding: 12px; }\n\n.gphLegacyIcon {\n  width: 16px; }\n  .gphLegacyIcon--list {\n    margin-right: 12px; }\n  .gphLegacyIcon--pickable {\n    margin: 4px;\n    cursor: pointer;\n    opacity: 0.7; }\n  .gphLegacyIcon--pickable:hover, .gphLegacyIcon--pickable:focus, .gphLegacyIcon--selected {\n    -webkit-transform: scale(1.4);\n            transform: scale(1.4);\n    opacity: 1; }\n\n.gphFieldEditor__badge {\n  height: 24px;\n  line-height: 22px; }\n\n.gphFieldEditor__badge--disabled,\n.gphFieldEditor__badge--disabled:focus {\n  opacity: 0.7;\n  text-decoration: line-through; }\n\n.gphFieldEditor__badgeIcon {\n  width: auto;\n  margin-right: 4px; }\n\n.gphFieldEditor__displayForm {\n  padding: 8px; }\n\n.gphFieldPicker__popoverPanel {\n  width: 350px;\n  padding: 4px; }\n\n.gphFieldPicker__selectableList {\n  margin: 0 -4px -4px; }\n\n.gphFieldPicker__button {\n  height: 24px;\n  line-height: 22px;\n  color: #1BA9F5; }\n\n.gphFieldPicker__button--disabled {\n  color: #535966;\n  cursor: not-allowed !important; }\n  .gphFieldPicker__button--disabled:hover, .gphFieldPicker__button--disabled:focus {\n    text-decoration: none; }\n',""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(108);var content=__webpack_require__(750);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(109);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/* Graph plugin styles */\n/**\n * Forms\n */\n.gphFormGroup--small {\n  margin-bottom: 8px; }\n\n.gphColorPicker__color {\n  margin: 4px;\n  cursor: pointer; }\n  .gphColorPicker__color:hover, .gphColorPicker__color:focus {\n    -webkit-transform: scale(1.4);\n            transform: scale(1.4); }\n\n/**\n * Utilities\n */\n.gphNoUserSelect {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  -webkit-touch-callout: none;\n  -webkit-tap-highlight-color: transparent; }\n\n/**\n * THE SVG Graph\n * 1. Calculated px values come from the open/closed state of the global nav sidebar\n */\n#graphBasic {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  overflow: hidden; }\n\n.gphGraph__container {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  background: #FFF;\n  position: relative;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1; }\n\n.gphGraph__menus {\n  margin: 8px; }\n\n.gphGraph__flexGroup {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  width: 100%; }\n\n.gphGraph__flexGroupFiller {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1 1 auto;\n      -ms-flex: 1 1 auto;\n          flex: 1 1 auto; }\n\n.gphSidebar {\n  position: absolute;\n  right: 8px;\n  top: 8px;\n  width: 320px;\n  z-index: 1000;\n  background-color: #FFF;\n  border: 1px solid #D3DAE6;\n  padding: 4px;\n  border-radius: 4px;\n  opacity: .9;\n  -webkit-box-shadow: 0 6px 12px -1px rgba(152, 162, 179, 0.2), 0 4px 4px -1px rgba(152, 162, 179, 0.2), 0 2px 2px 0 rgba(152, 162, 179, 0.2);\n          box-shadow: 0 6px 12px -1px rgba(152, 162, 179, 0.2), 0 4px 4px -1px rgba(152, 162, 179, 0.2), 0 2px 2px 0 rgba(152, 162, 179, 0.2); }\n  .gphSidebar .help-block {\n    font-size: 12px;\n    color: #343741; }\n\n.gphSidebar__header {\n  margin-top: 8px;\n  color: #FFF;\n  background-color: #69707D;\n  padding: 4px;\n  border-radius: 4px;\n  margin-bottom: 4px; }\n\n.gphSidebar__panel {\n  max-height: 240px;\n  overflow-y: hidden auto; }\n\n/**\n * Vertex Select\n */\n.gphVertexSelect__button {\n  margin: 4px 4px 4px 0; }\n\n/**\n * Selection List\n */\n.gphSelectionList {\n  height: 240px;\n  background-color: #F5F7FA;\n  overflow: auto;\n  margin-bottom: 0; }\n\n.gphSelectionList__icon {\n  font-size: 12px; }\n\n.gphSelectionList__field {\n  line-height: 1.5;\n  margin: 4px 0;\n  cursor: pointer; }\n  .gphSelectionList__field > * {\n    vertical-align: middle; }\n\n.gphSelectionList__field--selected {\n  background: #D3DAE6; }\n\n/**\n * Link summary\n */\n.gphLinkSummary__term--1 {\n  color: #BD271E; }\n\n.gphLinkSummary__term--2 {\n  color: #006BB4; }\n\n.gphLinkSummary__term--1-2 {\n  color: #5f4969; }\n\n.gphSettings__jsonView {\n  height: 240px; }\n\n.gphGraph__bar {\n  margin: 0px 8px 8px 8px; }\n\n.gphSearchBar__datasourceButton {\n  height: 100% !important; }\n\n.gphSearchBar__datasourceButtonTooltip {\n  padding: 0; }\n\n.gphSourceModal {\n  width: 720px;\n  min-height: 530px; }\n\n.gphGuidancePanel {\n  max-width: 580px;\n  margin: 24px 0; }\n\n.gphGuidancePanel__list {\n  list-style: none;\n  margin: 0;\n  padding: 0; }\n\n.gphGuidancePanel__item {\n  display: block;\n  max-width: 420px;\n  position: relative;\n  padding-left: 32px;\n  margin-bottom: 24px; }\n\n.gphGuidancePanel__item--disabled {\n  color: #69707D; }\n  .gphGuidancePanel__item--disabled button {\n    color: #69707D !important; }\n\n.gphGuidancePanel__itemIcon {\n  position: absolute;\n  left: 0;\n  top: -2px;\n  width: 24px;\n  height: 24px;\n  padding: 4px; }\n  .gphGuidancePanel__itemIcon--done {\n    background-color: #017D73;\n    color: #FFF;\n    border-radius: 50%; }\n\n.gphVisualization {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column; }\n\n.gphGraph {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  overflow: hidden; }\n\n.gphEdge {\n  fill: #98A2B3;\n  stroke: #98A2B3;\n  stroke-width: 2;\n  stroke-opacity: 0.5; }\n  .gphEdge:hover {\n    stroke-opacity: 0.95;\n    cursor: pointer; }\n  .gphEdge--selected {\n    stroke: #69707D;\n    stroke-opacity: 0.95; }\n\n.gphNode {\n  cursor: pointer; }\n\n.gphNode__label {\n  font-family: "Inter UI", -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n  font-size: 8px;\n  line-height: 12px;\n  fill: #69707D;\n  color: #69707D;\n  cursor: pointer; }\n  .gphNode__label--html {\n    max-width: 100%;\n    overflow: hidden !important;\n    text-overflow: ellipsis !important;\n    white-space: nowrap !important;\n    word-wrap: normal !important;\n    text-align: center; }\n\n.gphNode__markerCircle {\n  fill: #69707D;\n  stroke: #FFF; }\n\n.gphNode__markerText {\n  font-family: "Inter UI", -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n  font-size: 8px;\n  line-height: 12px;\n  fill: #69707D;\n  color: #69707D;\n  font-size: 6px;\n  fill: #FFF; }\n\n.gphNode__circle {\n  fill: #98A2B3; }\n  .gphNode__circle--selected {\n    stroke-width: 4px;\n    stroke: rgba(0, 107, 180, 0.75); }\n\n.gphNode__text {\n  fill: #000; }\n  .gphNode__text--inverse {\n    fill: #FFF; }\n\n.gphVennDiagram__left {\n  fill: #BD271E;\n  fill-opacity: 0.5; }\n\n.gphVennDiagram__right {\n  fill: #006BB4;\n  fill-opacity: 0.5; }\n\n.gphUrlTemplateList__accordion {\n  border-top: 1px solid #D3DAE6;\n  border-bottom: 1px solid #D3DAE6; }\n  .gphUrlTemplateList__accordion + .gphUrlTemplateList__accordion {\n    margin-top: -1px; }\n  .gphUrlTemplateList__accordion--isOpen {\n    background-color: #fafbfd; }\n\n.gphUrlTemplateList__accordionbutton {\n  padding: 12px; }\n\n.gphLegacyIcon {\n  width: 16px; }\n  .gphLegacyIcon--list {\n    margin-right: 12px; }\n  .gphLegacyIcon--pickable {\n    margin: 4px;\n    cursor: pointer;\n    opacity: 0.7; }\n  .gphLegacyIcon--pickable:hover, .gphLegacyIcon--pickable:focus, .gphLegacyIcon--selected {\n    -webkit-transform: scale(1.4);\n            transform: scale(1.4);\n    opacity: 1; }\n\n.gphFieldEditor__badge {\n  height: 24px;\n  line-height: 22px; }\n\n.gphFieldEditor__badge--disabled,\n.gphFieldEditor__badge--disabled:focus {\n  opacity: 0.7;\n  text-decoration: line-through; }\n\n.gphFieldEditor__badgeIcon {\n  width: auto;\n  margin-right: 4px; }\n\n.gphFieldEditor__displayForm {\n  padding: 8px; }\n\n.gphFieldPicker__popoverPanel {\n  width: 350px;\n  padding: 4px; }\n\n.gphFieldPicker__selectableList {\n  margin: 0 -4px -4px; }\n\n.gphFieldPicker__button {\n  height: 24px;\n  line-height: 22px;\n  color: #006BB4; }\n\n.gphFieldPicker__button--disabled {\n  color: #98A2B3;\n  cursor: not-allowed !important; }\n  .gphFieldPicker__button--disabled:hover, .gphFieldPicker__button--disabled:focus {\n    text-decoration: none; }\n',""]);module.exports=exports}])]);